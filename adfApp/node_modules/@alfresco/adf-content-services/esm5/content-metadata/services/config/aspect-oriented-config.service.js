/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
import { getGroup, getProperty } from './property-group-reader';
var AspectOrientedConfigService = /** @class */ (function () {
    function AspectOrientedConfigService(config) {
        this.config = config;
    }
    /**
     * @param {?} groupName
     * @return {?}
     */
    AspectOrientedConfigService.prototype.isGroupAllowed = /**
     * @param {?} groupName
     * @return {?}
     */
    function (groupName) {
        /** @type {?} */
        var groupNames = Object.keys(this.config);
        return groupNames.indexOf(groupName) !== -1;
    };
    /**
     * @param {?} propertyGroups
     * @return {?}
     */
    AspectOrientedConfigService.prototype.reorganiseByConfig = /**
     * @param {?} propertyGroups
     * @return {?}
     */
    function (propertyGroups) {
        var _this = this;
        /** @type {?} */
        var aspects = this.config;
        /** @type {?} */
        var aspectNames = Object.keys(aspects);
        return aspectNames
            .reduce(function (groupAccumulator, aspectName) {
            /** @type {?} */
            var newGroup = _this.getOrganisedPropertyGroup(propertyGroups, aspectName);
            return groupAccumulator.concat(newGroup);
        }, [])
            .filter(function (organisedPropertyGroup) { return organisedPropertyGroup.properties.length > 0; });
    };
    /**
     * @param {?} propertyGroups
     * @param {?} aspectName
     * @return {?}
     */
    AspectOrientedConfigService.prototype.getOrganisedPropertyGroup = /**
     * @param {?} propertyGroups
     * @param {?} aspectName
     * @return {?}
     */
    function (propertyGroups, aspectName) {
        /** @type {?} */
        var group = getGroup(propertyGroups, aspectName);
        /** @type {?} */
        var newGroup = [];
        if (group) {
            /** @type {?} */
            var aspectProperties = this.config[aspectName];
            /** @type {?} */
            var properties = void 0;
            if (aspectProperties === '*') {
                properties = getProperty(propertyGroups, aspectName, aspectProperties);
            }
            else {
                properties = (/** @type {?} */ (aspectProperties))
                    .map(function (propertyName) { return getProperty(propertyGroups, aspectName, propertyName); })
                    .filter(function (props) { return props !== undefined; });
            }
            newGroup = [{ title: group.title, properties: properties }];
        }
        return newGroup;
    };
    return AspectOrientedConfigService;
}());
export { AspectOrientedConfigService };
if (false) {
    /** @type {?} */
    AspectOrientedConfigService.prototype.config;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXNwZWN0LW9yaWVudGVkLWNvbmZpZy5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzLyIsInNvdXJjZXMiOlsiY29udGVudC1tZXRhZGF0YS9zZXJ2aWNlcy9jb25maWcvYXNwZWN0LW9yaWVudGVkLWNvbmZpZy5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBa0JBLE9BQU8sRUFBRSxRQUFRLEVBQUUsV0FBVyxFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFFaEUsSUFBQTtJQUVJLHFDQUFvQixNQUFXO1FBQVgsV0FBTSxHQUFOLE1BQU0sQ0FBSztLQUFJOzs7OztJQUU1QixvREFBYzs7OztjQUFDLFNBQWlCOztRQUNuQyxJQUFNLFVBQVUsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUM1QyxPQUFPLFVBQVUsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7Ozs7OztJQUd6Qyx3REFBa0I7Ozs7Y0FBQyxjQUFzQzs7O1FBQzVELElBQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQ1k7O1FBRHZDLElBQ0ksV0FBVyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7UUFFdkMsT0FBTyxXQUFXO2FBQ2IsTUFBTSxDQUFDLFVBQUMsZ0JBQWdCLEVBQUUsVUFBVTs7WUFDakMsSUFBTSxRQUFRLEdBQUcsS0FBSSxDQUFDLHlCQUF5QixDQUFDLGNBQWMsRUFBRSxVQUFVLENBQUMsQ0FBQztZQUM1RSxPQUFPLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztTQUM1QyxFQUFFLEVBQUUsQ0FBQzthQUNMLE1BQU0sQ0FBQyxVQUFBLHNCQUFzQixJQUFJLE9BQUEsc0JBQXNCLENBQUMsVUFBVSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQTVDLENBQTRDLENBQUMsQ0FBQzs7Ozs7OztJQUdoRiwrREFBeUI7Ozs7O2NBQUMsY0FBYyxFQUFFLFVBQVU7O1FBQ3hELElBQU0sS0FBSyxHQUFHLFFBQVEsQ0FBQyxjQUFjLEVBQUUsVUFBVSxDQUFDLENBQUM7O1FBQ25ELElBQUksUUFBUSxHQUFHLEVBQUUsQ0FBQztRQUVsQixJQUFJLEtBQUssRUFBRTs7WUFDUCxJQUFNLGdCQUFnQixHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUM7O1lBQ2pELElBQUksVUFBVSxVQUFDO1lBRWYsSUFBSSxnQkFBZ0IsS0FBSyxHQUFHLEVBQUU7Z0JBQzFCLFVBQVUsR0FBRyxXQUFXLENBQUMsY0FBYyxFQUFFLFVBQVUsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDO2FBQzFFO2lCQUFNO2dCQUNILFVBQVUsR0FBRyxtQkFBWSxnQkFBZ0IsRUFBQztxQkFDckMsR0FBRyxDQUFDLFVBQUMsWUFBWSxJQUFLLE9BQUEsV0FBVyxDQUFDLGNBQWMsRUFBRSxVQUFVLEVBQUUsWUFBWSxDQUFDLEVBQXJELENBQXFELENBQUM7cUJBQzVFLE1BQU0sQ0FBQyxVQUFBLEtBQUssSUFBSSxPQUFBLEtBQUssS0FBSyxTQUFTLEVBQW5CLENBQW1CLENBQUMsQ0FBQzthQUM3QztZQUVELFFBQVEsR0FBRyxDQUFFLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQyxLQUFLLEVBQUUsVUFBVSxZQUFBLEVBQUUsQ0FBRSxDQUFDO1NBQ3JEO1FBRUQsT0FBTyxRQUFRLENBQUM7O3NDQTVEeEI7SUE4REMsQ0FBQTtBQTFDRCx1Q0EwQ0MiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDb250ZW50TWV0YWRhdGFDb25maWcsIE9yZ2FuaXNlZFByb3BlcnR5R3JvdXAsIFByb3BlcnR5R3JvdXBDb250YWluZXIgfSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzL2NvbnRlbnQtbWV0YWRhdGEuaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBnZXRHcm91cCwgZ2V0UHJvcGVydHkgfSBmcm9tICcuL3Byb3BlcnR5LWdyb3VwLXJlYWRlcic7XG5cbmV4cG9ydCBjbGFzcyBBc3BlY3RPcmllbnRlZENvbmZpZ1NlcnZpY2UgaW1wbGVtZW50cyBDb250ZW50TWV0YWRhdGFDb25maWcge1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBjb25maWc6IGFueSkge31cblxuICAgIHB1YmxpYyBpc0dyb3VwQWxsb3dlZChncm91cE5hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBncm91cE5hbWVzID0gT2JqZWN0LmtleXModGhpcy5jb25maWcpO1xuICAgICAgICByZXR1cm4gZ3JvdXBOYW1lcy5pbmRleE9mKGdyb3VwTmFtZSkgIT09IC0xO1xuICAgIH1cblxuICAgIHB1YmxpYyByZW9yZ2FuaXNlQnlDb25maWcocHJvcGVydHlHcm91cHM6IFByb3BlcnR5R3JvdXBDb250YWluZXIpOiBPcmdhbmlzZWRQcm9wZXJ0eUdyb3VwW10ge1xuICAgICAgICBjb25zdCBhc3BlY3RzID0gdGhpcy5jb25maWcsXG4gICAgICAgICAgICBhc3BlY3ROYW1lcyA9IE9iamVjdC5rZXlzKGFzcGVjdHMpO1xuXG4gICAgICAgIHJldHVybiBhc3BlY3ROYW1lc1xuICAgICAgICAgICAgLnJlZHVjZSgoZ3JvdXBBY2N1bXVsYXRvciwgYXNwZWN0TmFtZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0dyb3VwID0gdGhpcy5nZXRPcmdhbmlzZWRQcm9wZXJ0eUdyb3VwKHByb3BlcnR5R3JvdXBzLCBhc3BlY3ROYW1lKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ3JvdXBBY2N1bXVsYXRvci5jb25jYXQobmV3R3JvdXApO1xuICAgICAgICAgICAgfSwgW10pXG4gICAgICAgICAgICAuZmlsdGVyKG9yZ2FuaXNlZFByb3BlcnR5R3JvdXAgPT4gb3JnYW5pc2VkUHJvcGVydHlHcm91cC5wcm9wZXJ0aWVzLmxlbmd0aCA+IDApO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0T3JnYW5pc2VkUHJvcGVydHlHcm91cChwcm9wZXJ0eUdyb3VwcywgYXNwZWN0TmFtZSkge1xuICAgICAgICBjb25zdCBncm91cCA9IGdldEdyb3VwKHByb3BlcnR5R3JvdXBzLCBhc3BlY3ROYW1lKTtcbiAgICAgICAgbGV0IG5ld0dyb3VwID0gW107XG5cbiAgICAgICAgaWYgKGdyb3VwKSB7XG4gICAgICAgICAgICBjb25zdCBhc3BlY3RQcm9wZXJ0aWVzID0gdGhpcy5jb25maWdbYXNwZWN0TmFtZV07XG4gICAgICAgICAgICBsZXQgcHJvcGVydGllcztcblxuICAgICAgICAgICAgaWYgKGFzcGVjdFByb3BlcnRpZXMgPT09ICcqJykge1xuICAgICAgICAgICAgICAgIHByb3BlcnRpZXMgPSBnZXRQcm9wZXJ0eShwcm9wZXJ0eUdyb3VwcywgYXNwZWN0TmFtZSwgYXNwZWN0UHJvcGVydGllcyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHByb3BlcnRpZXMgPSAoPHN0cmluZ1tdPiBhc3BlY3RQcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICAubWFwKChwcm9wZXJ0eU5hbWUpID0+IGdldFByb3BlcnR5KHByb3BlcnR5R3JvdXBzLCBhc3BlY3ROYW1lLCBwcm9wZXJ0eU5hbWUpKVxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKHByb3BzID0+IHByb3BzICE9PSB1bmRlZmluZWQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBuZXdHcm91cCA9IFsgeyB0aXRsZTogZ3JvdXAudGl0bGUsIHByb3BlcnRpZXMgfSBdO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ld0dyb3VwO1xuICAgIH1cbn1cbiJdfQ==