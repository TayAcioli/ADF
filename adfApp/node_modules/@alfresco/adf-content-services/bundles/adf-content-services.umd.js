(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('@angular/material'), require('@alfresco/adf-core'), require('rxjs'), require('rxjs/operators'), require('moment-es6'), require('@angular/forms'), require('@angular/common'), require('@angular/flex-layout'), require('@angular/animations'), require('@angular/cdk/keycodes'), require('@angular/material/core'), require('@mat-datetimepicker/core'), require('@mat-datetimepicker/moment')) :
    typeof define === 'function' && define.amd ? define('@alfresco/adf-content-services', ['exports', '@angular/core', '@angular/material', '@alfresco/adf-core', 'rxjs', 'rxjs/operators', 'moment-es6', '@angular/forms', '@angular/common', '@angular/flex-layout', '@angular/animations', '@angular/cdk/keycodes', '@angular/material/core', '@mat-datetimepicker/core', '@mat-datetimepicker/moment'], factory) :
    (factory((global.alfresco = global.alfresco || {}, global.alfresco['adf-content-services'] = {}),global.ng.core,global['@angular/material'],global['@alfresco/adf-core'],global.rxjs,global.rxjs.operators,global['moment-es6'],global.ng.forms,global.ng.common,global['@angular/flex-layout'],global['@angular/animations'],global.ng.cdk.keycodes,global['@angular/material/core'],global['@mat-datetimepicker/core'],global['@mat-datetimepicker/moment']));
}(this, (function (exports,core,material,adfCore,rxjs,operators,moment$1,forms,common,flexLayout,animations,keycodes,core$1,core$2,moment$2) { 'use strict';

    moment$1 = moment$1 && moment$1.hasOwnProperty('default') ? moment$1['default'] : moment$1;

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var DownloadZipDialogComponent = /** @class */ (function () {
        function DownloadZipDialogComponent(apiService, dialogRef, data, logService) {
            this.apiService = apiService;
            this.dialogRef = dialogRef;
            this.data = data;
            this.logService = logService;
            this.cancelled = false;
        }
        /**
         * @return {?}
         */
        DownloadZipDialogComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                if (this.data && this.data.nodeIds && this.data.nodeIds.length > 0) {
                    if (!this.cancelled) {
                        this.downloadZip(this.data.nodeIds);
                    }
                    else {
                        this.logService.log('Cancelled');
                    }
                }
            };
        /**
         * @return {?}
         */
        DownloadZipDialogComponent.prototype.cancelDownload = /**
         * @return {?}
         */
            function () {
                this.cancelled = true;
                this.dialogRef.close(false);
            };
        /**
         * @param {?} nodeIds
         * @return {?}
         */
        DownloadZipDialogComponent.prototype.downloadZip = /**
         * @param {?} nodeIds
         * @return {?}
         */
            function (nodeIds) {
                var _this = this;
                if (nodeIds && nodeIds.length > 0) {
                    /** @type {?} */
                    var promise = this.apiService.getInstance().core.downloadsApi.createDownload({ nodeIds: nodeIds });
                    promise.on('progress', function (progress) { return _this.logService.log('Progress', progress); });
                    promise.on('error', function (error) { return _this.logService.error('Error', error); });
                    promise.on('abort', function (data) { return _this.logService.log('Abort', data); });
                    promise.on('success', function (data) {
                        if (data && data.entry && data.entry.id) {
                            /** @type {?} */
                            var url_1 = _this.apiService.getInstance().content.getContentUrl(data.entry.id, true);
                            _this.apiService.getInstance().core.nodesApi.getNode(data.entry.id).then(function (downloadNode) {
                                _this.logService.log(downloadNode);
                                /** @type {?} */
                                var fileName = downloadNode.entry.name;
                                _this.waitAndDownload(data.entry.id, url_1, fileName);
                            });
                        }
                    });
                }
            };
        /**
         * @param {?} downloadId
         * @param {?} url
         * @param {?} fileName
         * @return {?}
         */
        DownloadZipDialogComponent.prototype.waitAndDownload = /**
         * @param {?} downloadId
         * @param {?} url
         * @param {?} fileName
         * @return {?}
         */
            function (downloadId, url, fileName) {
                var _this = this;
                if (this.cancelled) {
                    return;
                }
                this.apiService.getInstance().core.downloadsApi.getDownload(downloadId).then(function (downloadEntry) {
                    if (downloadEntry.entry) {
                        if (downloadEntry.entry.status === 'DONE') {
                            _this.download(url, fileName);
                        }
                        else {
                            setTimeout(function () {
                                _this.waitAndDownload(downloadId, url, fileName);
                            }, 1000);
                        }
                    }
                });
            };
        /**
         * @param {?} url
         * @param {?} fileName
         * @return {?}
         */
        DownloadZipDialogComponent.prototype.download = /**
         * @param {?} url
         * @param {?} fileName
         * @return {?}
         */
            function (url, fileName) {
                if (url && fileName) {
                    /** @type {?} */
                    var link = document.createElement('a');
                    link.style.display = 'none';
                    link.download = fileName;
                    link.href = url;
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                }
                this.dialogRef.close(true);
            };
        DownloadZipDialogComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-download-zip-dialog',
                        template: "<h1 matDialogTitle>{{ 'CORE.DIALOG.DOWNLOAD_ZIP.TITLE' | translate }}</h1>\n<div mat-dialog-content>\n    <mat-progress-bar color=\"primary\" mode=\"indeterminate\"></mat-progress-bar>\n</div>\n<div mat-dialog-actions>\n    <span class=\"spacer\"></span>\n    <button mat-button color=\"primary\" (click)=\"cancelDownload()\">\n        {{ 'CORE.DIALOG.DOWNLOAD_ZIP.ACTIONS.CANCEL' | translate }}\n    </button>\n</div>\n",
                        host: { 'class': 'adf-download-zip-dialog' },
                        encapsulation: core.ViewEncapsulation.None,
                        styles: [".spacer{flex:1 1 auto}.adf-download-zip-dialog .mat-dialog-actions .mat-button-wrapper{text-transform:uppercase}"]
                    }] }
        ];
        /** @nocollapse */
        DownloadZipDialogComponent.ctorParameters = function () {
            return [
                { type: adfCore.AlfrescoApiService },
                { type: material.MatDialogRef },
                { type: undefined, decorators: [{ type: core.Inject, args: [material.MAT_DIALOG_DATA,] }] },
                { type: adfCore.LogService }
            ];
        };
        return DownloadZipDialogComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var NodeDownloadDirective = /** @class */ (function () {
        function NodeDownloadDirective(apiService, dialog) {
            this.apiService = apiService;
            this.dialog = dialog;
        }
        /**
         * @return {?}
         */
        NodeDownloadDirective.prototype.onClick = /**
         * @return {?}
         */
            function () {
                this.downloadNodes(this.nodes);
            };
        /**
         * Downloads multiple selected nodes.
         * Packs result into a .ZIP archive if there is more than one node selected.
         * @param selection Multiple selected nodes to download
         */
        /**
         * Downloads multiple selected nodes.
         * Packs result into a .ZIP archive if there is more than one node selected.
         * @param {?} selection Multiple selected nodes to download
         * @return {?}
         */
        NodeDownloadDirective.prototype.downloadNodes = /**
         * Downloads multiple selected nodes.
         * Packs result into a .ZIP archive if there is more than one node selected.
         * @param {?} selection Multiple selected nodes to download
         * @return {?}
         */
            function (selection) {
                if (!selection || selection.length === 0) {
                    return;
                }
                if (selection.length === 1) {
                    this.downloadNode(selection[0]);
                }
                else {
                    this.downloadZip(selection);
                }
            };
        /**
         * Downloads a single node.
         * Packs result into a .ZIP archive is the node is a Folder.
         * @param node Node to download
         */
        /**
         * Downloads a single node.
         * Packs result into a .ZIP archive is the node is a Folder.
         * @param {?} node Node to download
         * @return {?}
         */
        NodeDownloadDirective.prototype.downloadNode = /**
         * Downloads a single node.
         * Packs result into a .ZIP archive is the node is a Folder.
         * @param {?} node Node to download
         * @return {?}
         */
            function (node) {
                if (node && node.entry) {
                    /** @type {?} */
                    var entry = node.entry;
                    if (entry.isFile) {
                        this.downloadFile(node);
                    }
                    if (entry.isFolder) {
                        this.downloadZip([node]);
                    }
                    // Check if there's nodeId for Shared Files
                    if (!entry.isFile && !entry.isFolder && ( /** @type {?} */(entry)).nodeId) {
                        this.downloadFile(node);
                    }
                }
            };
        /**
         * @param {?} node
         * @return {?}
         */
        NodeDownloadDirective.prototype.downloadFile = /**
         * @param {?} node
         * @return {?}
         */
            function (node) {
                if (node && node.entry) {
                    /** @type {?} */
                    var contentApi = this.apiService.getInstance().content;
                    /** @type {?} */
                    var id = ( /** @type {?} */(node.entry)).nodeId || node.entry.id;
                    /** @type {?} */
                    var url = contentApi.getContentUrl(id, true);
                    /** @type {?} */
                    var fileName = node.entry.name;
                    this.download(url, fileName);
                }
            };
        /**
         * @param {?} selection
         * @return {?}
         */
        NodeDownloadDirective.prototype.downloadZip = /**
         * @param {?} selection
         * @return {?}
         */
            function (selection) {
                if (selection && selection.length > 0) {
                    /** @type {?} */
                    var nodeIds = selection.map(function (node) { return (node.entry.nodeId || node.entry.id); });
                    this.dialog.open(DownloadZipDialogComponent, {
                        width: '600px',
                        disableClose: true,
                        data: {
                            nodeIds: nodeIds
                        }
                    });
                }
            };
        /**
         * @param {?} url
         * @param {?} fileName
         * @return {?}
         */
        NodeDownloadDirective.prototype.download = /**
         * @param {?} url
         * @param {?} fileName
         * @return {?}
         */
            function (url, fileName) {
                if (url && fileName) {
                    /** @type {?} */
                    var link = document.createElement('a');
                    link.style.display = 'none';
                    link.download = fileName;
                    link.href = url;
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                }
            };
        NodeDownloadDirective.decorators = [
            { type: core.Directive, args: [{
                        selector: '[adfNodeDownload]'
                    },] }
        ];
        /** @nocollapse */
        NodeDownloadDirective.ctorParameters = function () {
            return [
                { type: adfCore.AlfrescoApiService },
                { type: material.MatDialog }
            ];
        };
        NodeDownloadDirective.propDecorators = {
            nodes: [{ type: core.Input, args: ['adfNodeDownload',] }],
            onClick: [{ type: core.HostListener, args: ['click',] }]
        };
        return NodeDownloadDirective;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /**
     * @return {?}
     */
    function modules() {
        return [
            material.MatButtonModule,
            material.MatChipsModule,
            material.MatDialogModule,
            material.MatIconModule,
            material.MatCardModule,
            material.MatInputModule,
            material.MatListModule,
            material.MatProgressSpinnerModule,
            material.MatProgressBarModule,
            material.MatRippleModule,
            material.MatMenuModule,
            material.MatOptionModule,
            material.MatExpansionModule,
            material.MatSelectModule,
            material.MatCheckboxModule,
            material.MatDatepickerModule,
            material.MatSlideToggleModule,
            material.MatRadioModule,
            material.MatSliderModule
        ];
    }
    var MaterialModule = /** @class */ (function () {
        function MaterialModule() {
        }
        MaterialModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: modules(),
                        exports: modules()
                    },] }
        ];
        return MaterialModule;
    }());

    /*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
    /* global Reflect, Promise */
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b)
                if (b.hasOwnProperty(p))
                    d[p] = b[p]; };
        return extendStatics(d, b);
    };
    function __extends(d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    }
    var __assign = function () {
        __assign = Object.assign || function __assign(t) {
            for (var s, i = 1, n = arguments.length; i < n; i++) {
                s = arguments[i];
                for (var p in s)
                    if (Object.prototype.hasOwnProperty.call(s, p))
                        t[p] = s[p];
            }
            return t;
        };
        return __assign.apply(this, arguments);
    };
    function __awaiter(thisArg, _arguments, P, generator) {
        return new (P || (P = Promise))(function (resolve, reject) {
            function fulfilled(value) { try {
                step(generator.next(value));
            }
            catch (e) {
                reject(e);
            } }
            function rejected(value) { try {
                step(generator["throw"](value));
            }
            catch (e) {
                reject(e);
            } }
            function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
            step((generator = generator.apply(thisArg, _arguments || [])).next());
        });
    }
    function __generator(thisArg, body) {
        var _ = { label: 0, sent: function () { if (t[0] & 1)
                throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
        return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function () { return this; }), g;
        function verb(n) { return function (v) { return step([n, v]); }; }
        function step(op) {
            if (f)
                throw new TypeError("Generator is already executing.");
            while (_)
                try {
                    if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done)
                        return t;
                    if (y = 0, t)
                        op = [op[0] & 2, t.value];
                    switch (op[0]) {
                        case 0:
                        case 1:
                            t = op;
                            break;
                        case 4:
                            _.label++;
                            return { value: op[1], done: false };
                        case 5:
                            _.label++;
                            y = op[1];
                            op = [0];
                            continue;
                        case 7:
                            op = _.ops.pop();
                            _.trys.pop();
                            continue;
                        default:
                            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                                _ = 0;
                                continue;
                            }
                            if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) {
                                _.label = op[1];
                                break;
                            }
                            if (op[0] === 6 && _.label < t[1]) {
                                _.label = t[1];
                                t = op;
                                break;
                            }
                            if (t && _.label < t[2]) {
                                _.label = t[2];
                                _.ops.push(op);
                                break;
                            }
                            if (t[2])
                                _.ops.pop();
                            _.trys.pop();
                            continue;
                    }
                    op = body.call(thisArg, _);
                }
                catch (e) {
                    op = [6, e];
                    y = 0;
                }
                finally {
                    f = t = 0;
                }
            if (op[0] & 5)
                throw op[1];
            return { value: op[0] ? op[1] : void 0, done: true };
        }
    }
    function __values(o) {
        var m = typeof Symbol === "function" && o[Symbol.iterator], i = 0;
        if (m)
            return m.call(o);
        return {
            next: function () {
                if (o && i >= o.length)
                    o = void 0;
                return { value: o && o[i++], done: !o };
            }
        };
    }
    function __read(o, n) {
        var m = typeof Symbol === "function" && o[Symbol.iterator];
        if (!m)
            return o;
        var i = m.call(o), r, ar = [], e;
        try {
            while ((n === void 0 || n-- > 0) && !(r = i.next()).done)
                ar.push(r.value);
        }
        catch (error) {
            e = { error: error };
        }
        finally {
            try {
                if (r && !r.done && (m = i["return"]))
                    m.call(i);
            }
            finally {
                if (e)
                    throw e.error;
            }
        }
        return ar;
    }
    function __spread() {
        for (var ar = [], i = 0; i < arguments.length; i++)
            ar = ar.concat(__read(arguments[i]));
        return ar;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var DocumentListService = /** @class */ (function () {
        function DocumentListService(authService, contentService, apiService, logService, thumbnailService) {
            this.contentService = contentService;
            this.apiService = apiService;
            this.logService = logService;
            this.thumbnailService = thumbnailService;
        }
        /**
         * @param {?} folder
         * @param {?=} opts
         * @param {?=} includeFields
         * @return {?}
         */
        DocumentListService.prototype.getNodesPromise = /**
         * @param {?} folder
         * @param {?=} opts
         * @param {?=} includeFields
         * @return {?}
         */
            function (folder, opts, includeFields) {
                if (includeFields === void 0) {
                    includeFields = [];
                }
                /** @type {?} */
                var rootNodeId = DocumentListService.ROOT_ID;
                if (opts && opts.rootFolderId) {
                    rootNodeId = opts.rootFolderId;
                }
                /** @type {?} */
                var includeFieldsRequest = __spread(['path', 'properties', 'allowableOperations', 'permissions', 'aspectNames'], includeFields).filter(function (element, index, array) { return index === array.indexOf(element); });
                /** @type {?} */
                var params = {
                    includeSource: true,
                    include: includeFieldsRequest
                };
                if (folder) {
                    params.relativePath = folder;
                }
                if (opts) {
                    if (opts.maxItems) {
                        params.maxItems = opts.maxItems;
                    }
                    if (opts.skipCount) {
                        params.skipCount = opts.skipCount;
                    }
                }
                return this.apiService.getInstance().nodes.getNodeChildren(rootNodeId, params);
            };
        /**
         * Deletes a node.
         * @param nodeId ID of the node to delete
         * @returns Empty response when the operation is complete
         */
        /**
         * Deletes a node.
         * @param {?} nodeId ID of the node to delete
         * @return {?} Empty response when the operation is complete
         */
        DocumentListService.prototype.deleteNode = /**
         * Deletes a node.
         * @param {?} nodeId ID of the node to delete
         * @return {?} Empty response when the operation is complete
         */
            function (nodeId) {
                return rxjs.from(this.apiService.getInstance().nodes.deleteNode(nodeId));
            };
        /**
         * Copy a node to destination node
         *
         * @param nodeId The id of the node to be copied
         * @param targetParentId The id of the folder where the node will be copied
         * @returns NodeEntry for the copied node
         */
        /**
         * Copy a node to destination node
         *
         * @param {?} nodeId The id of the node to be copied
         * @param {?} targetParentId The id of the folder where the node will be copied
         * @return {?} NodeEntry for the copied node
         */
        DocumentListService.prototype.copyNode = /**
         * Copy a node to destination node
         *
         * @param {?} nodeId The id of the node to be copied
         * @param {?} targetParentId The id of the folder where the node will be copied
         * @return {?} NodeEntry for the copied node
         */
            function (nodeId, targetParentId) {
                var _this = this;
                return rxjs.from(this.apiService.getInstance().nodes.copyNode(nodeId, { targetParentId: targetParentId })).pipe(operators.catchError(function (err) { return _this.handleError(err); }));
            };
        /**
         * Moves a node to destination node.
         *
         * @param nodeId The id of the node to be moved
         * @param targetParentId The id of the folder where the node will be moved
         * @returns NodeEntry for the moved node
         */
        /**
         * Moves a node to destination node.
         *
         * @param {?} nodeId The id of the node to be moved
         * @param {?} targetParentId The id of the folder where the node will be moved
         * @return {?} NodeEntry for the moved node
         */
        DocumentListService.prototype.moveNode = /**
         * Moves a node to destination node.
         *
         * @param {?} nodeId The id of the node to be moved
         * @param {?} targetParentId The id of the folder where the node will be moved
         * @return {?} NodeEntry for the moved node
         */
            function (nodeId, targetParentId) {
                var _this = this;
                return rxjs.from(this.apiService.getInstance().nodes.moveNode(nodeId, { targetParentId: targetParentId })).pipe(operators.catchError(function (err) { return _this.handleError(err); }));
            };
        /**
         * Creates a new folder in the path.
         * @param name Folder name
         * @param parentId Parent folder ID
         * @returns Details of the created folder node
         */
        /**
         * Creates a new folder in the path.
         * @param {?} name Folder name
         * @param {?} parentId Parent folder ID
         * @return {?} Details of the created folder node
         */
        DocumentListService.prototype.createFolder = /**
         * Creates a new folder in the path.
         * @param {?} name Folder name
         * @param {?} parentId Parent folder ID
         * @return {?} Details of the created folder node
         */
            function (name, parentId) {
                var _this = this;
                return rxjs.from(this.apiService.getInstance().nodes.createFolder(name, '/', parentId))
                    .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
            };
        /**
         * Gets the folder node with the specified relative name path below the root node.
         * @param folder Path to folder.
         * @param opts Options.
         * @param includeFields Extra information to include (available options are "aspectNames", "isLink" and "association")
         * @returns Details of the folder
         */
        /**
         * Gets the folder node with the specified relative name path below the root node.
         * @param {?} folder Path to folder.
         * @param {?=} opts Options.
         * @param {?=} includeFields Extra information to include (available options are "aspectNames", "isLink" and "association")
         * @return {?} Details of the folder
         */
        DocumentListService.prototype.getFolder = /**
         * Gets the folder node with the specified relative name path below the root node.
         * @param {?} folder Path to folder.
         * @param {?=} opts Options.
         * @param {?=} includeFields Extra information to include (available options are "aspectNames", "isLink" and "association")
         * @return {?} Details of the folder
         */
            function (folder, opts, includeFields) {
                var _this = this;
                if (includeFields === void 0) {
                    includeFields = [];
                }
                return rxjs.from(this.getNodesPromise(folder, opts, includeFields))
                    .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
            };
        /**
         * Gets a node via its node ID.
         * @param nodeId ID of the target node
         * @param includeFields Extra information to include (available options are "aspectNames", "isLink" and "association")
         * @returns Details of the folder
         */
        /**
         * Gets a node via its node ID.
         * @param {?} nodeId ID of the target node
         * @param {?=} includeFields Extra information to include (available options are "aspectNames", "isLink" and "association")
         * @return {?} Details of the folder
         */
        DocumentListService.prototype.getNode = /**
         * Gets a node via its node ID.
         * @param {?} nodeId ID of the target node
         * @param {?=} includeFields Extra information to include (available options are "aspectNames", "isLink" and "association")
         * @return {?} Details of the folder
         */
            function (nodeId, includeFields) {
                if (includeFields === void 0) {
                    includeFields = [];
                }
                /** @type {?} */
                var includeFieldsRequest = __spread(['path', 'properties', 'allowableOperations', 'permissions'], includeFields).filter(function (element, index, array) { return index === array.indexOf(element); });
                /** @type {?} */
                var opts = {
                    includeSource: true,
                    include: includeFieldsRequest
                };
                return this.contentService.getNode(nodeId, opts);
            };
        /**
         * Gets a folder node via its node ID.
         * @deprecated 2.3.0
         * @param nodeId ID of the folder node
         * @param includeFields Extra information to include (available options are "aspectNames", "isLink" and "association")
         * @returns Details of the folder
         */
        /**
         * Gets a folder node via its node ID.
         * @deprecated 2.3.0
         * @param {?} nodeId ID of the folder node
         * @param {?=} includeFields Extra information to include (available options are "aspectNames", "isLink" and "association")
         * @return {?} Details of the folder
         */
        DocumentListService.prototype.getFolderNode = /**
         * Gets a folder node via its node ID.
         * @deprecated 2.3.0
         * @param {?} nodeId ID of the folder node
         * @param {?=} includeFields Extra information to include (available options are "aspectNames", "isLink" and "association")
         * @return {?} Details of the folder
         */
            function (nodeId, includeFields) {
                if (includeFields === void 0) {
                    includeFields = [];
                }
                /** @type {?} */
                var includeFieldsRequest = __spread(['path', 'properties', 'allowableOperations', 'permissions', 'aspectNames'], includeFields).filter(function (element, index, array) { return index === array.indexOf(element); });
                /** @type {?} */
                var opts = {
                    includeSource: true,
                    include: includeFieldsRequest
                };
                return rxjs.from(this.apiService.getInstance().nodes.getNodeInfo(nodeId, opts));
            };
        /**
         * Get thumbnail URL for the given document node.
         * @param node Node to get URL for.
         * @returns Thumbnail URL string
         */
        /**
         * Get thumbnail URL for the given document node.
         * @param {?} node Node to get URL for.
         * @return {?} Thumbnail URL string
         */
        DocumentListService.prototype.getDocumentThumbnailUrl = /**
         * Get thumbnail URL for the given document node.
         * @param {?} node Node to get URL for.
         * @return {?} Thumbnail URL string
         */
            function (node) {
                return this.thumbnailService.getDocumentThumbnailUrl(node);
            };
        /**
         * Gets the icon that represents a MIME type.
         * @param mimeType MIME type to get the icon for
         * @returns Path to the icon file
         */
        /**
         * Gets the icon that represents a MIME type.
         * @param {?} mimeType MIME type to get the icon for
         * @return {?} Path to the icon file
         */
        DocumentListService.prototype.getMimeTypeIcon = /**
         * Gets the icon that represents a MIME type.
         * @param {?} mimeType MIME type to get the icon for
         * @return {?} Path to the icon file
         */
            function (mimeType) {
                return this.thumbnailService.getMimeTypeIcon(mimeType);
            };
        /**
         * Gets a default icon for MIME types with no specific icon.
         * @returns Path to the icon file
         */
        /**
         * Gets a default icon for MIME types with no specific icon.
         * @return {?} Path to the icon file
         */
        DocumentListService.prototype.getDefaultMimeTypeIcon = /**
         * Gets a default icon for MIME types with no specific icon.
         * @return {?} Path to the icon file
         */
            function () {
                return this.thumbnailService.getDefaultMimeTypeIcon();
            };
        /**
         * Checks if a node has the specified permission.
         * @deprecated 2.3.0 - use the equivalent in the content service
         * @param node Target node
         * @param permission Permission level to query
         * @returns True if the node has the permission, false otherwise
         */
        /**
         * Checks if a node has the specified permission.
         * @deprecated 2.3.0 - use the equivalent in the content service
         * @param {?} node Target node
         * @param {?} permission Permission level to query
         * @return {?} True if the node has the permission, false otherwise
         */
        DocumentListService.prototype.hasPermission = /**
         * Checks if a node has the specified permission.
         * @deprecated 2.3.0 - use the equivalent in the content service
         * @param {?} node Target node
         * @param {?} permission Permission level to query
         * @return {?} True if the node has the permission, false otherwise
         */
            function (node, permission) {
                return this.contentService.hasPermission(node, permission);
            };
        /**
         * @param {?} error
         * @return {?}
         */
        DocumentListService.prototype.handleError = /**
         * @param {?} error
         * @return {?}
         */
            function (error) {
                this.logService.error(error);
                return rxjs.throwError(error || 'Server error');
            };
        DocumentListService.ROOT_ID = '-root-';
        DocumentListService.decorators = [
            { type: core.Injectable }
        ];
        /** @nocollapse */
        DocumentListService.ctorParameters = function () {
            return [
                { type: adfCore.AuthenticationService },
                { type: adfCore.ContentService },
                { type: adfCore.AlfrescoApiService },
                { type: adfCore.LogService },
                { type: adfCore.ThumbnailService }
            ];
        };
        return DocumentListService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var ContentNodeSelectorComponent = /** @class */ (function () {
        function ContentNodeSelectorComponent(data) {
            this.data = data;
            /**
             * @deprecated in 2.1.0
             */
            this.title = null;
            /**
             * @deprecated in 2.1.0
             */
            this.currentFolderId = null;
            /**
             * @deprecated in 2.1.0
             */
            this.dropdownHideMyFiles = false;
            /**
             * @deprecated in 2.1.0
             */
            this.dropdownSiteList = null;
            /**
             * @deprecated in 2.1.0
             */
            this.rowFilter = null;
            /**
             * @deprecated in 2.1.0
             */
            this.imageResolver = null;
            this.buttonActionName = data.actionName ? "NODE_SELECTOR." + data.actionName.toUpperCase() : 'NODE_SELECTOR.CHOOSE';
        }
        /**
         * @return {?}
         */
        ContentNodeSelectorComponent.prototype.close = /**
         * @return {?}
         */
            function () {
                this.data.select.complete();
            };
        /**
         * @param {?} nodeList
         * @return {?}
         */
        ContentNodeSelectorComponent.prototype.onSelect = /**
         * @param {?} nodeList
         * @return {?}
         */
            function (nodeList) {
                this.chosenNode = nodeList;
            };
        /**
         * @return {?}
         */
        ContentNodeSelectorComponent.prototype.onClick = /**
         * @return {?}
         */
            function () {
                this.data.select.next(this.chosenNode);
                this.data.select.complete();
            };
        ContentNodeSelectorComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-content-node-selector',
                        template: "<header\n    mat-dialog-title\n    data-automation-id=\"content-node-selector-title\">{{title || data?.title}}\n</header>\n\n<mat-dialog-content>\n    <adf-content-node-selector-panel\n        [currentFolderId]=\"currentFolderId || data?.currentFolderId\"\n        [dropdownHideMyFiles]=\"dropdownHideMyFiles || data?.dropdownHideMyFiles\"\n        [dropdownSiteList]=\"dropdownSiteList || data?.dropdownSiteList\"\n        [rowFilter]=\"rowFilter || data?.rowFilter\"\n        [imageResolver]=\"imageResolver || data?.imageResolver\"\n        [isSelectionValid]=\"data?.isSelectionValid\"\n        [breadcrumbTransform]=\"data?.breadcrumbTransform\"\n        (select)=\"onSelect($event)\">\n    </adf-content-node-selector-panel>\n</mat-dialog-content>\n\n<mat-dialog-actions align=\"end\">\n    <button\n        mat-button\n        (click)=\"close()\"\n        data-automation-id=\"content-node-selector-actions-cancel\">{{ 'NODE_SELECTOR.CANCEL' | translate }}\n    </button>\n\n    <button mat-button\n        [disabled]=\"!chosenNode\"\n        class=\"choose-action\"\n        (click)=\"onClick()\"\n        data-automation-id=\"content-node-selector-actions-choose\">{{ buttonActionName | translate }}\n    </button>\n</mat-dialog-actions>\n\n",
                        encapsulation: core.ViewEncapsulation.None,
                        styles: [""]
                    }] }
        ];
        /** @nocollapse */
        ContentNodeSelectorComponent.ctorParameters = function () {
            return [
                { type: undefined, decorators: [{ type: core.Inject, args: [material.MAT_DIALOG_DATA,] }] }
            ];
        };
        ContentNodeSelectorComponent.propDecorators = {
            title: [{ type: core.Input }],
            currentFolderId: [{ type: core.Input }],
            dropdownHideMyFiles: [{ type: core.Input }],
            dropdownSiteList: [{ type: core.Input }],
            rowFilter: [{ type: core.Input }],
            imageResolver: [{ type: core.Input }],
            pageSize: [{ type: core.Input }]
        };
        return ContentNodeSelectorComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var NodeLockDialogComponent = /** @class */ (function () {
        function NodeLockDialogComponent(formBuilder, dialog, alfrescoApi, data) {
            this.formBuilder = formBuilder;
            this.dialog = dialog;
            this.alfrescoApi = alfrescoApi;
            this.data = data;
            this.node = null;
        }
        /**
         * @return {?}
         */
        NodeLockDialogComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                var node = this.data.node;
                this.nodeName = node.name;
                this.form = this.formBuilder.group({
                    isLocked: node.isLocked || false,
                    allowOwner: node.properties['cm:lockType'] === 'WRITE_LOCK',
                    isTimeLock: !!node.properties['cm:expiryDate'],
                    time: !!node.properties['cm:expiryDate'] ? moment$1(node.properties['cm:expiryDate']) : moment$1()
                });
            };
        Object.defineProperty(NodeLockDialogComponent.prototype, "lockTimeInSeconds", {
            get: /**
             * @return {?}
             */ function () {
                if (this.form.value.isTimeLock) {
                    /** @type {?} */
                    var duration = moment$1.duration(moment$1(this.form.value.time).diff(moment$1()));
                    return duration.asSeconds();
                }
                return 0;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(NodeLockDialogComponent.prototype, "nodeBodyLock", {
            get: /**
             * @return {?}
             */ function () {
                return {
                    'timeToExpire': this.lockTimeInSeconds,
                    'type': this.form.value.allowOwner ? 'ALLOW_OWNER_CHANGES' : 'FULL',
                    'lifetime': 'PERSISTENT'
                };
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        NodeLockDialogComponent.prototype.toggleLock = /**
         * @return {?}
         */
            function () {
                var _a = this, nodesApi = _a.alfrescoApi.nodesApi, node = _a.data.node;
                if (this.form.value.isLocked) {
                    return nodesApi.lockNode(node.id, this.nodeBodyLock);
                }
                return nodesApi.unlockNode(node.id);
            };
        /**
         * @return {?}
         */
        NodeLockDialogComponent.prototype.submit = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.toggleLock()
                    .then(function (node) {
                    _this.data.node.isLocked = _this.form.value.isLocked;
                    _this.dialog.close(node.entry);
                })
                    .catch(function (error) { return _this.data.onError(error); });
            };
        NodeLockDialogComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-node-lock',
                        template: "<h2 mat-dialog-title>\n    {{ 'CORE.FILE_DIALOG.FILE_LOCK' | translate }}\n</h2>\n\n<mat-dialog-content>\n    <br />\n    <form [formGroup]=\"form\" (submit)=\"submit()\">\n        <mat-checkbox class=\"adf-lock-file-name\" [formControl]=\"form.controls['isLocked']\" ngDefaultControl>\n            {{ 'CORE.FILE_DIALOG.FILE_LOCK_CHECKBOX' | translate }} <strong>\"{{ nodeName }}\"</strong>\n        </mat-checkbox>\n\n        <br />\n\n        <div *ngIf=\"form.value.isLocked\">\n            <mat-checkbox class=\"adf-lock-file-name\" [formControl]=\"form.controls['allowOwner']\" ngDefaultControl>\n                {{ 'CORE.FILE_DIALOG.ALLOW_OTHERS_CHECKBOX' | translate }}\n            </mat-checkbox>\n\n            <br />\n\n            <mat-checkbox class=\"adf-lock-file-name\" [formControl]=\"form.controls['isTimeLock']\" ngDefaultControl>\n                {{ 'CORE.FILE_DIALOG.TIME_LOCK_CHECKBOX' | translate }}\n            </mat-checkbox>\n\n            <br />\n\n            <mat-form-field *ngIf=\"form.value.isTimeLock\">\n                <mat-datetimepicker-toggle [for]=\"datetimePicker\" matSuffix></mat-datetimepicker-toggle>\n                <mat-datetimepicker #datetimePicker type=\"datetime\" openOnFocus=\"true\" timeInterval=\"1\"></mat-datetimepicker>\n                <input matInput [formControl]=\"form.controls['time']\" [matDatetimepicker]=\"datetimePicker\" required autocomplete=\"false\">\n            </mat-form-field>\n        </div>\n    </form>\n    <br />\n</mat-dialog-content>\n\n<mat-dialog-actions class=\"adf-dialog-buttons\">\n    <span class=\"adf-fill-remaining-space\"></span>\n\n    <button mat-button mat-dialog-close>\n        {{ 'CORE.FILE_DIALOG.CANCEL_BUTTON.LABEL' | translate }}\n    </button>\n\n    <button class=\"adf-dialog-action-button\" mat-button (click)=\"submit()\">\n        {{ 'CORE.FILE_DIALOG.SAVE_BUTTON.LABEL' | translate }}\n    </button>\n</mat-dialog-actions>\n",
                        styles: [".adf-fill-remaining-space{flex:1 1 auto}.adf-full-width,.adf-lock-file-name .mat-checkbox-layout{width:100%}.adf-lock-file-name .mat-checkbox-label{text-overflow:ellipsis;overflow:hidden}.adf-lock-file-name .mat-checkbox-inner-container{margin:auto 8px auto 0}"]
                    }] }
        ];
        /** @nocollapse */
        NodeLockDialogComponent.ctorParameters = function () {
            return [
                { type: forms.FormBuilder },
                { type: material.MatDialogRef },
                { type: adfCore.AlfrescoApiService },
                { type: undefined, decorators: [{ type: core.Optional }, { type: core.Inject, args: [material.MAT_DIALOG_DATA,] }] }
            ];
        };
        return NodeLockDialogComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var ContentNodeDialogService = /** @class */ (function () {
        function ContentNodeDialogService(dialog, contentService, documentListService, siteService, translation) {
            this.dialog = dialog;
            this.contentService = contentService;
            this.documentListService = documentListService;
            this.siteService = siteService;
            this.translation = translation;
            /**
             * Emitted when an error occurs.
             */
            this.error = new core.EventEmitter();
        }
        /**
         * Opens a file browser at a chosen folder location.
         * @param folderNodeId ID of the folder to use
         * @returns Information about the selected file(s)
         */
        /**
         * Opens a file browser at a chosen folder location.
         * @param {?} folderNodeId ID of the folder to use
         * @return {?} Information about the selected file(s)
         */
        ContentNodeDialogService.prototype.openFileBrowseDialogByFolderId = /**
         * Opens a file browser at a chosen folder location.
         * @param {?} folderNodeId ID of the folder to use
         * @return {?} Information about the selected file(s)
         */
            function (folderNodeId) {
                var _this = this;
                return this.documentListService.getFolderNode(folderNodeId).pipe(operators.switchMap(function (node) {
                    return _this.openUploadFileDialog('Choose', node);
                }));
            };
        /**
         * Opens a lock node dialog.
         * @param {?} contentEntry Node to lock
         * @return {?} Error/status message (if any)
         */
        ContentNodeDialogService.prototype.openLockNodeDialog = /**
         * Opens a lock node dialog.
         * @param {?} contentEntry Node to lock
         * @return {?} Error/status message (if any)
         */
            function (contentEntry) {
                var _this = this;
                /** @type {?} */
                var observable = new rxjs.Subject();
                if (this.contentService.hasPermission(contentEntry, adfCore.PermissionsEnum.LOCK)) {
                    this.dialog.open(NodeLockDialogComponent, {
                        data: {
                            node: contentEntry,
                            onError: function (error) {
                                _this.error.emit(error);
                                observable.error(error);
                            }
                        },
                        width: '400px'
                    });
                }
                else {
                    observable.error('OPERATION.FAIL.NODE.NO_PERMISSION');
                }
                return observable;
            };
        /**
         * Opens a file browser at a chosen site location.
         * @returns Information about the selected file(s)
         */
        /**
         * Opens a file browser at a chosen site location.
         * @return {?} Information about the selected file(s)
         */
        ContentNodeDialogService.prototype.openFileBrowseDialogBySite = /**
         * Opens a file browser at a chosen site location.
         * @return {?} Information about the selected file(s)
         */
            function () {
                var _this = this;
                return this.siteService.getSites().pipe(operators.switchMap(function (response) {
                    return _this.openFileBrowseDialogByFolderId(response.list.entries[0].entry.guid);
                }));
            };
        /**
         * Opens a folder browser at a chosen site location.
         * @returns Information about the selected folder(s)
         */
        /**
         * Opens a folder browser at a chosen site location.
         * @return {?} Information about the selected folder(s)
         */
        ContentNodeDialogService.prototype.openFolderBrowseDialogBySite = /**
         * Opens a folder browser at a chosen site location.
         * @return {?} Information about the selected folder(s)
         */
            function () {
                var _this = this;
                return this.siteService.getSites().pipe(operators.switchMap(function (response) {
                    return _this.openFolderBrowseDialogByFolderId(response.list.entries[0].entry.guid);
                }));
            };
        /**
         * Opens a folder browser at a chosen folder location.
         * @param folderNodeId ID of the folder to use
         * @returns Information about the selected folder(s)
         */
        /**
         * Opens a folder browser at a chosen folder location.
         * @param {?} folderNodeId ID of the folder to use
         * @return {?} Information about the selected folder(s)
         */
        ContentNodeDialogService.prototype.openFolderBrowseDialogByFolderId = /**
         * Opens a folder browser at a chosen folder location.
         * @param {?} folderNodeId ID of the folder to use
         * @return {?} Information about the selected folder(s)
         */
            function (folderNodeId) {
                var _this = this;
                return this.documentListService.getFolderNode(folderNodeId).pipe(operators.switchMap(function (node) {
                    return _this.openUploadFolderDialog('Choose', node);
                }));
            };
        /**
         * Opens a dialog to copy or move an item to a new location.
         * @param action Name of the action (eg, "Copy" or "Move") to show in the title
         * @param contentEntry Item to be copied or moved
         * @param permission Permission for the operation
         * @returns Information about files that were copied/moved
         */
        /**
         * Opens a dialog to copy or move an item to a new location.
         * @param {?} action Name of the action (eg, "Copy" or "Move") to show in the title
         * @param {?} contentEntry Item to be copied or moved
         * @param {?=} permission Permission for the operation
         * @return {?} Information about files that were copied/moved
         */
        ContentNodeDialogService.prototype.openCopyMoveDialog = /**
         * Opens a dialog to copy or move an item to a new location.
         * @param {?} action Name of the action (eg, "Copy" or "Move") to show in the title
         * @param {?} contentEntry Item to be copied or moved
         * @param {?=} permission Permission for the operation
         * @return {?} Information about files that were copied/moved
         */
            function (action, contentEntry, permission) {
                if (this.contentService.hasPermission(contentEntry, permission)) {
                    /** @type {?} */
                    var select = new rxjs.Subject();
                    select.subscribe({
                        complete: this.close.bind(this)
                    });
                    /** @type {?} */
                    var title = this.getTitleTranslation(action, contentEntry.name);
                    /** @type {?} */
                    var data = {
                        title: title,
                        actionName: action,
                        currentFolderId: contentEntry.parentId,
                        imageResolver: this.imageResolver.bind(this),
                        rowFilter: this.rowFilter.bind(this, contentEntry.id),
                        isSelectionValid: this.isCopyMoveSelectionValid.bind(this),
                        select: select
                    };
                    this.openContentNodeDialog(data, 'adf-content-node-selector-dialog', '630px');
                    return select;
                }
                else {
                    /** @type {?} */
                    var errors = new Error(JSON.stringify({ error: { statusCode: 403 } }));
                    return rxjs.throwError(errors);
                }
            };
        /**
         * Gets the translation of the dialog title.
         * @param action Name of the action to display in the dialog title
         * @param name Name of the item on which the action is being performed
         * @returns Translated version of the title
         */
        /**
         * Gets the translation of the dialog title.
         * @param {?} action Name of the action to display in the dialog title
         * @param {?} name Name of the item on which the action is being performed
         * @return {?} Translated version of the title
         */
        ContentNodeDialogService.prototype.getTitleTranslation = /**
         * Gets the translation of the dialog title.
         * @param {?} action Name of the action to display in the dialog title
         * @param {?} name Name of the item on which the action is being performed
         * @return {?} Translated version of the title
         */
            function (action, name) {
                return this.translation.instant("NODE_SELECTOR." + action.toUpperCase() + "_ITEM", { name: name });
            };
        /**
         * Opens a dialog to choose folders to upload.
         * @param action Name of the action to show in the title
         * @param contentEntry  Item to upload
         * @returns Information about the chosed folder(s)
         */
        /**
         * Opens a dialog to choose folders to upload.
         * @param {?} action Name of the action to show in the title
         * @param {?} contentEntry  Item to upload
         * @return {?} Information about the chosed folder(s)
         */
        ContentNodeDialogService.prototype.openUploadFolderDialog = /**
         * Opens a dialog to choose folders to upload.
         * @param {?} action Name of the action to show in the title
         * @param {?} contentEntry  Item to upload
         * @return {?} Information about the chosed folder(s)
         */
            function (action, contentEntry) {
                /** @type {?} */
                var select = new rxjs.Subject();
                select.subscribe({
                    complete: this.close.bind(this)
                });
                /** @type {?} */
                var data = {
                    title: action + " '" + contentEntry.name + "' to ...",
                    actionName: action,
                    currentFolderId: contentEntry.id,
                    imageResolver: this.imageResolver.bind(this),
                    isSelectionValid: this.hasPermissionOnNodeFolder.bind(this),
                    rowFilter: this.rowFilter.bind(this, contentEntry.id),
                    select: select
                };
                this.openContentNodeDialog(data, 'adf-content-node-selector-dialog', '630px');
                return select;
            };
        /**
         * Opens a dialog to choose a file to upload.
         * @param action Name of the action to show in the title
         * @param contentEntry Item to upload
         * @returns Information about the chosen file(s)
         */
        /**
         * Opens a dialog to choose a file to upload.
         * @param {?} action Name of the action to show in the title
         * @param {?} contentEntry Item to upload
         * @return {?} Information about the chosen file(s)
         */
        ContentNodeDialogService.prototype.openUploadFileDialog = /**
         * Opens a dialog to choose a file to upload.
         * @param {?} action Name of the action to show in the title
         * @param {?} contentEntry Item to upload
         * @return {?} Information about the chosen file(s)
         */
            function (action, contentEntry) {
                /** @type {?} */
                var select = new rxjs.Subject();
                select.subscribe({
                    complete: this.close.bind(this)
                });
                /** @type {?} */
                var data = {
                    title: action + " '" + contentEntry.name + "' to ...",
                    actionName: action,
                    currentFolderId: contentEntry.id,
                    imageResolver: this.imageResolver.bind(this),
                    isSelectionValid: this.isNodeFile.bind(this),
                    select: select
                };
                this.openContentNodeDialog(data, 'adf-content-node-selector-dialog', '630px');
                return select;
            };
        /**
         * @param {?} data
         * @param {?} currentPanelClass
         * @param {?} chosenWidth
         * @return {?}
         */
        ContentNodeDialogService.prototype.openContentNodeDialog = /**
         * @param {?} data
         * @param {?} currentPanelClass
         * @param {?} chosenWidth
         * @return {?}
         */
            function (data, currentPanelClass, chosenWidth) {
                this.dialog.open(ContentNodeSelectorComponent, { data: data, panelClass: currentPanelClass, width: chosenWidth });
            };
        /**
         * @param {?} row
         * @param {?} col
         * @return {?}
         */
        ContentNodeDialogService.prototype.imageResolver = /**
         * @param {?} row
         * @param {?} col
         * @return {?}
         */
            function (row, col) {
                /** @type {?} */
                var entry = row.node.entry;
                if (!this.contentService.hasPermission(entry, 'create')) {
                    return this.documentListService.getMimeTypeIcon('disable/folder');
                }
                return null;
            };
        /**
         * @param {?} currentNodeId
         * @param {?} row
         * @return {?}
         */
        ContentNodeDialogService.prototype.rowFilter = /**
         * @param {?} currentNodeId
         * @param {?} row
         * @return {?}
         */
            function (currentNodeId, row) {
                /** @type {?} */
                var node = row.node.entry;
                if (node.id === currentNodeId || node.isFile) {
                    return false;
                }
                else {
                    return true;
                }
            };
        /**
         * @param {?} entry
         * @return {?}
         */
        ContentNodeDialogService.prototype.isNodeFile = /**
         * @param {?} entry
         * @return {?}
         */
            function (entry) {
                return entry.isFile;
            };
        /**
         * @param {?} entry
         * @return {?}
         */
        ContentNodeDialogService.prototype.hasPermissionOnNodeFolder = /**
         * @param {?} entry
         * @return {?}
         */
            function (entry) {
                return this.isNodeFolder(entry) && this.contentService.hasPermission(entry, 'create');
            };
        /**
         * @param {?} entry
         * @return {?}
         */
        ContentNodeDialogService.prototype.isNodeFolder = /**
         * @param {?} entry
         * @return {?}
         */
            function (entry) {
                return entry.isFolder;
            };
        /**
         * @param {?} entry
         * @return {?}
         */
        ContentNodeDialogService.prototype.isCopyMoveSelectionValid = /**
         * @param {?} entry
         * @return {?}
         */
            function (entry) {
                return this.hasEntityCreatePermission(entry) && !this.isSite(entry);
            };
        /**
         * @param {?} entry
         * @return {?}
         */
        ContentNodeDialogService.prototype.hasEntityCreatePermission = /**
         * @param {?} entry
         * @return {?}
         */
            function (entry) {
                return this.contentService.hasPermission(entry, 'create');
            };
        /**
         * @param {?} entry
         * @return {?}
         */
        ContentNodeDialogService.prototype.isSite = /**
         * @param {?} entry
         * @return {?}
         */
            function (entry) {
                return !!entry.guid || entry.nodeType === 'st:site' || entry.nodeType === 'st:sites';
            };
        /** Closes the currently open dialog. */
        /**
         * Closes the currently open dialog.
         * @return {?}
         */
        ContentNodeDialogService.prototype.close = /**
         * Closes the currently open dialog.
         * @return {?}
         */
            function () {
                this.dialog.closeAll();
            };
        ContentNodeDialogService.decorators = [
            { type: core.Injectable }
        ];
        /** @nocollapse */
        ContentNodeDialogService.ctorParameters = function () {
            return [
                { type: material.MatDialog },
                { type: adfCore.ContentService },
                { type: DocumentListService },
                { type: adfCore.SitesService },
                { type: adfCore.TranslationService }
            ];
        };
        ContentNodeDialogService.propDecorators = {
            error: [{ type: core.Output }]
        };
        return ContentNodeDialogService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var NodeLockDirective = /** @class */ (function () {
        function NodeLockDirective(element, renderer, contentService, contentNodeDialogService) {
            this.element = element;
            this.renderer = renderer;
            this.contentService = contentService;
            this.contentNodeDialogService = contentNodeDialogService;
        }
        /**
         * @param {?} event
         * @return {?}
         */
        NodeLockDirective.prototype.onClick = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                event.preventDefault();
                this.contentNodeDialogService.openLockNodeDialog(this.node);
            };
        /**
         * @return {?}
         */
        NodeLockDirective.prototype.ngAfterViewInit = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var hasPermission = this.contentService.hasPermission(this.node, adfCore.PermissionsEnum.LOCK);
                this.renderer.setProperty(this.element.nativeElement, 'disabled', !hasPermission);
            };
        NodeLockDirective.decorators = [
            { type: core.Directive, args: [{
                        selector: '[adf-node-lock]'
                    },] }
        ];
        /** @nocollapse */
        NodeLockDirective.ctorParameters = function () {
            return [
                { type: core.ElementRef },
                { type: core.Renderer2 },
                { type: adfCore.ContentService },
                { type: ContentNodeDialogService }
            ];
        };
        NodeLockDirective.propDecorators = {
            node: [{ type: core.Input, args: ['adf-node-lock',] }],
            onClick: [{ type: core.HostListener, args: ['click', ['$event'],] }]
        };
        return NodeLockDirective;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var ContentDirectiveModule = /** @class */ (function () {
        function ContentDirectiveModule() {
        }
        ContentDirectiveModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            MaterialModule
                        ],
                        declarations: [
                            NodeDownloadDirective,
                            NodeLockDirective
                        ],
                        exports: [
                            NodeDownloadDirective,
                            NodeLockDirective
                        ]
                    },] }
        ];
        return ContentDirectiveModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var RatingService = /** @class */ (function () {
        function RatingService(apiService) {
            this.apiService = apiService;
        }
        /**
         * Gets the current user's rating for a node.
         * @param nodeId Node to get the rating from
         * @param ratingType Type of rating (can be "likes" or "fiveStar")
         * @returns The rating value
         */
        /**
         * Gets the current user's rating for a node.
         * @param {?} nodeId Node to get the rating from
         * @param {?} ratingType Type of rating (can be "likes" or "fiveStar")
         * @return {?} The rating value
         */
        RatingService.prototype.getRating = /**
         * Gets the current user's rating for a node.
         * @param {?} nodeId Node to get the rating from
         * @param {?} ratingType Type of rating (can be "likes" or "fiveStar")
         * @return {?} The rating value
         */
            function (nodeId, ratingType) {
                return rxjs.from(this.apiService.getInstance().core.ratingsApi.getRating(nodeId, ratingType))
                    .pipe(operators.catchError(this.handleError));
            };
        /**
         * Adds the current user's rating for a node.
         * @param nodeId Target node for the rating
         * @param ratingType Type of rating (can be "likes" or "fiveStar")
         * @param vote Rating value (boolean for "likes", numeric 0..5 for "fiveStar")
         * @returns Details about the rating, including the new value
         */
        /**
         * Adds the current user's rating for a node.
         * @param {?} nodeId Target node for the rating
         * @param {?} ratingType Type of rating (can be "likes" or "fiveStar")
         * @param {?} vote Rating value (boolean for "likes", numeric 0..5 for "fiveStar")
         * @return {?} Details about the rating, including the new value
         */
        RatingService.prototype.postRating = /**
         * Adds the current user's rating for a node.
         * @param {?} nodeId Target node for the rating
         * @param {?} ratingType Type of rating (can be "likes" or "fiveStar")
         * @param {?} vote Rating value (boolean for "likes", numeric 0..5 for "fiveStar")
         * @return {?} Details about the rating, including the new value
         */
            function (nodeId, ratingType, vote) {
                /** @type {?} */
                var ratingBody = {
                    'id': ratingType,
                    'myRating': vote
                };
                return rxjs.from(this.apiService.getInstance().core.ratingsApi.rate(nodeId, ratingBody))
                    .pipe(operators.catchError(this.handleError));
            };
        /**
         * Removes the current user's rating for a node.
         * @param nodeId Target node
         * @param ratingType Type of rating to remove (can be "likes" or "fiveStar")
         * @returns Null response indicating that the operation is complete
         */
        /**
         * Removes the current user's rating for a node.
         * @param {?} nodeId Target node
         * @param {?} ratingType Type of rating to remove (can be "likes" or "fiveStar")
         * @return {?} Null response indicating that the operation is complete
         */
        RatingService.prototype.deleteRating = /**
         * Removes the current user's rating for a node.
         * @param {?} nodeId Target node
         * @param {?} ratingType Type of rating to remove (can be "likes" or "fiveStar")
         * @return {?} Null response indicating that the operation is complete
         */
            function (nodeId, ratingType) {
                return rxjs.from(this.apiService.getInstance().core.ratingsApi.removeRating(nodeId, ratingType))
                    .pipe(operators.catchError(this.handleError));
            };
        /**
         * @param {?} error
         * @return {?}
         */
        RatingService.prototype.handleError = /**
         * @param {?} error
         * @return {?}
         */
            function (error) {
                console.error(error);
                return rxjs.throwError(error || 'Server error');
            };
        RatingService.decorators = [
            { type: core.Injectable }
        ];
        /** @nocollapse */
        RatingService.ctorParameters = function () {
            return [
                { type: adfCore.AlfrescoApiService }
            ];
        };
        return RatingService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var RatingComponent = /** @class */ (function () {
        function RatingComponent(ratingService) {
            this.ratingService = ratingService;
            this.average = 0;
            this.ratingType = 'fiveStar';
            /**
             * Emitted when the "vote" gets changed.
             */
            this.changeVote = new core.EventEmitter();
            this.stars = [];
        }
        /**
         * @return {?}
         */
        RatingComponent.prototype.ngOnChanges = /**
         * @return {?}
         */
            function () {
                var _this = this;
                /** @type {?} */
                var ratingObserver = this.ratingService.getRating(this.nodeId, this.ratingType);
                ratingObserver.subscribe(function (data) {
                    if (data.entry.aggregate) {
                        _this.average = data.entry.aggregate.average;
                        _this.calculateStars();
                    }
                });
                return ratingObserver;
            };
        /**
         * @return {?}
         */
        RatingComponent.prototype.calculateStars = /**
         * @return {?}
         */
            function () {
                this.stars = [];
                for (var i = 0; i < 5; i++) {
                    if (i < this.average) {
                        this.stars.push({ fill: true });
                    }
                    else {
                        this.stars.push({ fill: false });
                    }
                }
                this.changeVote.emit(this.average);
            };
        /**
         * @param {?} vote
         * @return {?}
         */
        RatingComponent.prototype.updateVote = /**
         * @param {?} vote
         * @return {?}
         */
            function (vote) {
                var _this = this;
                this.ratingService.postRating(this.nodeId, this.ratingType, vote).subscribe(function (data) {
                    if (data.entry.aggregate) {
                        if (_this.average !== data.entry.aggregate.average) {
                            _this.average = data.entry.aggregate.average;
                            _this.calculateStars();
                        }
                    }
                });
            };
        RatingComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-rating',
                        template: "<mat-list id=\"adf-rating-container\" class=\"adf-rating-container\">\n    <mat-list-item class=\"adf-rating-star\" *ngFor=\"let currentRate of stars; let idx = index\">\n            <span id=\"adf-rate-{{idx}}\">\n                <mat-icon id=\"adf-grey-star-{{idx}}\" *ngIf=\"currentRate.fill\" class=\"adf-colored-star\"\n                         (click)=\"updateVote(idx + 1)\">star_rate\n                </mat-icon>\n                <mat-icon id=\"adf-colored-star-{{idx}}\" *ngIf=\"!currentRate.fill\" class=\"adf-grey-star\"\n                         (click)=\"updateVote(idx + 1)\">star_border\n                </mat-icon>\n            </span>\n    </mat-list-item>\n</mat-list>\n",
                        encapsulation: core.ViewEncapsulation.None,
                        styles: [".adf-rating-container{overflow:hidden;width:100%}.adf-rating-container .adf-rating-star{float:left;transition:.3s;padding:1px;cursor:pointer}.adf-rating-container .adf-rating-star .mat-list-item-content{padding:0 2px!important}.adf-rating-container .adf-colored-star{color:#ffe944}.adf-rating-container .adf-grey-star{color:grey}.adf-rating-container .adf-stars-container{padding:0!important;margin:0!important;display:inline-block}.adf-rating-container .adf-rating-star:hover{-webkit-transform:rotate(13deg) scale(1.2);transform:rotate(13deg) scale(1.2)}"]
                    }] }
        ];
        /** @nocollapse */
        RatingComponent.ctorParameters = function () {
            return [
                { type: RatingService }
            ];
        };
        RatingComponent.propDecorators = {
            nodeId: [{ type: core.Input }],
            changeVote: [{ type: core.Output }]
        };
        return RatingComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var LikeComponent = /** @class */ (function () {
        function LikeComponent(ratingService) {
            this.ratingService = ratingService;
            /**
             * Emitted when the "vote" gets changed.
             */
            this.changeVote = new core.EventEmitter();
            this.likesCounter = 0;
            this.ratingType = 'likes';
            this.isLike = false;
        }
        /**
         * @return {?}
         */
        LikeComponent.prototype.ngOnChanges = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.clean();
                this.ratingService.getRating(this.nodeId, this.ratingType).subscribe(function (data) {
                    if (data.entry.aggregate) {
                        _this.likesCounter = data.entry.aggregate.numberOfRatings;
                        if (data.entry.ratedAt) {
                            _this.isLike = true;
                        }
                    }
                });
            };
        /**
         * @return {?}
         */
        LikeComponent.prototype.likeClick = /**
         * @return {?}
         */
            function () {
                var _this = this;
                if (this.isLike) {
                    this.ratingService.deleteRating(this.nodeId, this.ratingType).subscribe(function () {
                        _this.likesCounter -= 1;
                        _this.isLike = false;
                        _this.changeVote.emit(_this.likesCounter);
                    });
                }
                else {
                    this.ratingService.postRating(this.nodeId, this.ratingType, true).subscribe(function (data) {
                        _this.likesCounter = data.entry.aggregate.numberOfRatings;
                        _this.isLike = true;
                        _this.changeVote.emit(_this.likesCounter);
                    });
                }
            };
        /**
         * @return {?}
         */
        LikeComponent.prototype.clean = /**
         * @return {?}
         */
            function () {
                this.isLike = false;
                this.likesCounter = 0;
            };
        LikeComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-like',
                        template: "<div id=\"adf-like-container\" class=\"adf-like-container\">\n    <div class=\"adf-like\">\n        <span id=\"adf-like-{{nodeId}}\" [ngClass]=\"{'adf-like-select': isLike ,'adf-like-grey': !isLike  }\"\n              (click)=\"likeClick()\">\n            <mat-icon>thumb_up</mat-icon>\n        </span>\n    </div>\n    <div id=\"adf-like-counter\" class=\"adf-like-counter\">{{likesCounter}}</div>\n    <div class=\"adf-left\" *ngIf=\"likesCounter<=1\">Like</div>\n    <div class=\"adf-left\" *ngIf=\"likesCounter>1\">Likes</div>\n</div>\n",
                        encapsulation: core.ViewEncapsulation.None,
                        styles: [".adf-like-container{overflow:hidden;width:100%}.adf-like-container .adf-like{padding:5px;cursor:pointer;float:left;margin:5px 0 5px 5px}.adf-like-container .adf-like-select{cursor:pointer;color:#2196f3}.adf-like-container .adf-like-grey,.adf-like-container .adf-like-select:hover{cursor:pointer;color:grey}.adf-like-container .adf-like-grey:hover{cursor:pointer;color:#2196f3}.adf-like-container .adf-like-counter{float:left;padding:13px 0 0}.adf-like-container .adf-left{float:left;padding:13px 0 0 4px}"]
                    }] }
        ];
        /** @nocollapse */
        LikeComponent.ctorParameters = function () {
            return [
                { type: RatingService }
            ];
        };
        LikeComponent.propDecorators = {
            nodeId: [{ type: core.Input }],
            changeVote: [{ type: core.Output }]
        };
        return LikeComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var SocialModule = /** @class */ (function () {
        function SocialModule() {
        }
        SocialModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            MaterialModule
                        ],
                        exports: [
                            RatingComponent,
                            LikeComponent
                        ],
                        declarations: [
                            RatingComponent,
                            LikeComponent
                        ]
                    },] }
        ];
        return SocialModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var TagService = /** @class */ (function () {
        function TagService(apiService, logService) {
            this.apiService = apiService;
            this.logService = logService;
            /**
             * Emitted when tag information is updated.
             */
            this.refresh = new core.EventEmitter();
        }
        /**
         * Gets a list of tags added to a node.
         * @param nodeId ID of the target node
         * @returns TagPaging object (defined in JSAPI) containing the tags
         */
        /**
         * Gets a list of tags added to a node.
         * @param {?} nodeId ID of the target node
         * @return {?} TagPaging object (defined in JSAPI) containing the tags
         */
        TagService.prototype.getTagsByNodeId = /**
         * Gets a list of tags added to a node.
         * @param {?} nodeId ID of the target node
         * @return {?} TagPaging object (defined in JSAPI) containing the tags
         */
            function (nodeId) {
                var _this = this;
                return rxjs.from(this.apiService.getInstance().core.tagsApi.getNodeTags(nodeId)).pipe(operators.catchError(function (err) { return _this.handleError(err); }));
            };
        /**
         * Gets a list of all the tags already defined in the repository.
         * @param opts Options supported by JSAPI
         * @returns TagPaging object (defined in JSAPI) containing the tags
         */
        /**
         * Gets a list of all the tags already defined in the repository.
         * @param {?=} opts Options supported by JSAPI
         * @return {?} TagPaging object (defined in JSAPI) containing the tags
         */
        TagService.prototype.getAllTheTags = /**
         * Gets a list of all the tags already defined in the repository.
         * @param {?=} opts Options supported by JSAPI
         * @return {?} TagPaging object (defined in JSAPI) containing the tags
         */
            function (opts) {
                var _this = this;
                return rxjs.from(this.apiService.getInstance().core.tagsApi.getTags(opts))
                    .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
            };
        /**
         * Adds a tag to a node.
         * @param nodeId ID of the target node
         * @param tagName Name of the tag to add
         * @returns TagEntry object (defined in JSAPI) with details of the new tag
         */
        /**
         * Adds a tag to a node.
         * @param {?} nodeId ID of the target node
         * @param {?} tagName Name of the tag to add
         * @return {?} TagEntry object (defined in JSAPI) with details of the new tag
         */
        TagService.prototype.addTag = /**
         * Adds a tag to a node.
         * @param {?} nodeId ID of the target node
         * @param {?} tagName Name of the tag to add
         * @return {?} TagEntry object (defined in JSAPI) with details of the new tag
         */
            function (nodeId, tagName) {
                var _this = this;
                /** @type {?} */
                var alfrescoApi = this.apiService.getInstance();
                /** @type {?} */
                var tagBody = new alfrescoApi.core.TagBody();
                tagBody.tag = tagName;
                /** @type {?} */
                var promiseAdd = rxjs.from(this.apiService.getInstance().core.tagsApi.addTag(nodeId, tagBody));
                promiseAdd.subscribe(function (data) {
                    _this.refresh.emit(data);
                }, function (err) {
                    _this.handleError(err);
                });
                return promiseAdd;
            };
        /**
         * Removes a tag from a node.
         * @param nodeId ID of the target node
         * @param tag Name of the tag to remove
         * @returns Null object when the operation completes
         */
        /**
         * Removes a tag from a node.
         * @param {?} nodeId ID of the target node
         * @param {?} tag Name of the tag to remove
         * @return {?} Null object when the operation completes
         */
        TagService.prototype.removeTag = /**
         * Removes a tag from a node.
         * @param {?} nodeId ID of the target node
         * @param {?} tag Name of the tag to remove
         * @return {?} Null object when the operation completes
         */
            function (nodeId, tag) {
                var _this = this;
                /** @type {?} */
                var promiseRemove = rxjs.from(this.apiService.getInstance().core.tagsApi.removeTag(nodeId, tag));
                promiseRemove.subscribe(function (data) {
                    _this.refresh.emit(data);
                }, function (err) {
                    _this.handleError(err);
                });
                return promiseRemove;
            };
        /**
         * @param {?} error
         * @return {?}
         */
        TagService.prototype.handleError = /**
         * @param {?} error
         * @return {?}
         */
            function (error) {
                this.logService.error(error);
                return rxjs.throwError(error || 'Server error');
            };
        TagService.decorators = [
            { type: core.Injectable }
        ];
        /** @nocollapse */
        TagService.ctorParameters = function () {
            return [
                { type: adfCore.AlfrescoApiService },
                { type: adfCore.LogService }
            ];
        };
        TagService.propDecorators = {
            refresh: [{ type: core.Output }]
        };
        return TagService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /**
     *
     * This component, provide a list of the tags relative a node with actions button to add or remove new tag
     */
    var TagActionsComponent = /** @class */ (function () {
        function TagActionsComponent(tagService, translateService) {
            this.tagService = tagService;
            this.translateService = translateService;
            /**
             * Emitted when a tag is added successfully.
             */
            this.successAdd = new core.EventEmitter();
            /**
             * Emitted when an error occurs.
             */
            this.error = new core.EventEmitter();
            /**
             * Emitted when an action is chosen.
             */
            this.result = new core.EventEmitter();
            this.disableAddTag = true;
            this.subscriptions = [];
        }
        /**
         * @return {?}
         */
        TagActionsComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.subscriptions.push(this.tagService.refresh.subscribe(function () {
                    _this.refreshTag();
                }));
            };
        /**
         * @return {?}
         */
        TagActionsComponent.prototype.ngOnChanges = /**
         * @return {?}
         */
            function () {
                return this.refreshTag();
            };
        /**
         * @return {?}
         */
        TagActionsComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                this.subscriptions.forEach(function (subscription) { return subscription.unsubscribe(); });
                this.subscriptions = [];
            };
        /**
         * @return {?}
         */
        TagActionsComponent.prototype.refreshTag = /**
         * @return {?}
         */
            function () {
                var _this = this;
                if (this.nodeId) {
                    this.tagService.getTagsByNodeId(this.nodeId).subscribe(function (data) {
                        _this.tagsEntries = data.list.entries;
                        _this.disableAddTag = false;
                        _this.result.emit(_this.tagsEntries);
                    }, function () {
                        _this.tagsEntries = null;
                        _this.disableAddTag = true;
                        _this.result.emit(_this.tagsEntries);
                    });
                }
            };
        /**
         * @return {?}
         */
        TagActionsComponent.prototype.addTag = /**
         * @return {?}
         */
            function () {
                var _this = this;
                if (this.searchTag(this.newTagName)) {
                    this.translateService.get('TAG.MESSAGES.EXIST').subscribe(function (error) {
                        _this.errorMsg = error;
                    });
                    this.error.emit(this.errorMsg);
                }
                else {
                    this.tagService.addTag(this.nodeId, this.newTagName).subscribe(function () {
                        _this.newTagName = '';
                        _this.successAdd.emit(_this.nodeId);
                    });
                }
            };
        /**
         * @param {?} searchTagName
         * @return {?}
         */
        TagActionsComponent.prototype.searchTag = /**
         * @param {?} searchTagName
         * @return {?}
         */
            function (searchTagName) {
                if (this.tagsEntries) {
                    return this.tagsEntries.find(function (currentTag) {
                        return (searchTagName === currentTag.entry.tag);
                    });
                }
            };
        /**
         * @return {?}
         */
        TagActionsComponent.prototype.cleanErrorMsg = /**
         * @return {?}
         */
            function () {
                this.errorMsg = '';
            };
        /**
         * @param {?} tag
         * @return {?}
         */
        TagActionsComponent.prototype.removeTag = /**
         * @param {?} tag
         * @return {?}
         */
            function (tag) {
                this.tagService.removeTag(this.nodeId, tag);
            };
        TagActionsComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-tag-node-actions-list',
                        template: "<mat-list>\n    <mat-list-item *ngFor=\"let currentEntry of tagsEntries; let idx = index\">\n        <div class=\"adf-tag-actions-container\" id=\"tag_delete_{{currentEntry.entry.tag}}\" (click)=\"removeTag(currentEntry.entry.id)\">\n            <div class=\"adf-tag-actions-delete-text\" id=\"tag_name_{{currentEntry.entry.tag}}\">\n                {{currentEntry.entry.tag}}\n            </div>\n            <mat-icon class=\"adf-tag-actions-delete-icon\">delete</mat-icon>\n        </div>\n    </mat-list-item>\n</mat-list>\n<table class=\"adf-full-width\" cellspacing=\"0\">\n    <tr>\n        <td>\n            <mat-form-field class=\"adf-full-width\">\n                <input matInput placeholder=\"{{'TAG.LABEL.NEWTAG' | translate }}\"\n                       type=\"text\"\n                       (keypress)=\"cleanErrorMsg()\"\n                       [(ngModel)]=\"newTagName\"\n                       id=\"new-tag-text\"/>\n                <mat-hint data-automation-id=\"errorMessage\" *ngIf=\"error\" [ngStyle]=\"{'color': 'red'}\" align=\"start\">{{errorMsg}}</mat-hint>\n            </mat-form-field>\n        </td>\n        <td>\n            <button class=\"adf-full-width\" color=\"primary\" id=\"add-tag\" (click)=\"addTag()\" [disabled]=\"disableAddTag\"\n                    mat-raised-button>\n                {{'TAG.BUTTON.ADD' | translate }}\n            </button>\n        </td>\n    </tr>\n</table>\n",
                        encapsulation: core.ViewEncapsulation.None,
                        styles: [".adf-full-width{width:100%}.adf-tag-actions-delete-icon{float:right;cursor:pointer}.adf-tag-actions-delete-text{font-size:16px;float:left}.adf-tag-actions-container{padding:8px 0;height:20px}"]
                    }] }
        ];
        /** @nocollapse */
        TagActionsComponent.ctorParameters = function () {
            return [
                { type: TagService },
                { type: adfCore.TranslationService }
            ];
        };
        TagActionsComponent.propDecorators = {
            nodeId: [{ type: core.Input }],
            successAdd: [{ type: core.Output }],
            error: [{ type: core.Output }],
            result: [{ type: core.Output }]
        };
        return TagActionsComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /**
     * This component provide a list of all the tag inside the ECM
     */
    var TagListComponent = /** @class */ (function () {
        /**
         * Constructor
         * @param tagService
         */
        function TagListComponent(tagService) {
            var _this = this;
            this.tagService = tagService;
            /**
             * Emitted when a tag is selected.
             */
            this.result = new core.EventEmitter();
            /**
             * Array of tags that are displayed
             */
            this.tagsEntries = [];
            /**
             * Number of items per iteration
             */
            this.size = 10;
            this.isLoading = false;
            this.isSizeMinimum = true;
            this.defaultPagination = {
                skipCount: 0,
                maxItems: this.size,
                hasMoreItems: false
            };
            this.pagination = this.defaultPagination;
            this.tagService.refresh.subscribe(function () {
                _this.tagsEntries = [];
                _this.refreshTag(_this.defaultPagination);
            });
        }
        /**
         * @return {?}
         */
        TagListComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                return this.refreshTag(this.defaultPagination);
            };
        /**
         * @param {?=} opts
         * @return {?}
         */
        TagListComponent.prototype.refreshTag = /**
         * @param {?=} opts
         * @return {?}
         */
            function (opts) {
                var _this = this;
                this.tagService.getAllTheTags(opts).subscribe(function (tags) {
                    _this.tagsEntries = _this.tagsEntries.concat(tags.list.entries);
                    _this.pagination = tags.list.pagination;
                    _this.result.emit(_this.tagsEntries);
                    _this.isLoading = false;
                });
            };
        /**
         * @return {?}
         */
        TagListComponent.prototype.loadMoreTags = /**
         * @return {?}
         */
            function () {
                if (this.pagination.hasMoreItems) {
                    this.isLoading = true;
                    this.isSizeMinimum = false;
                    this.refreshTag({
                        skipCount: this.pagination.skipCount + this.pagination.count,
                        maxItems: this.size
                    });
                }
            };
        /**
         * @return {?}
         */
        TagListComponent.prototype.loadLessTags = /**
         * @return {?}
         */
            function () {
                this.isSizeMinimum = false;
                this.tagsEntries = this.tagsEntries.slice(0, this.tagsEntries.length - this.pagination.count);
                this.pagination.skipCount = this.pagination.skipCount - this.pagination.count;
                this.pagination.hasMoreItems = true;
                if (this.tagsEntries.length <= this.size) {
                    this.isSizeMinimum = true;
                }
            };
        TagListComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-tag-list',
                        template: "<mat-chip-list class=\"adf-tag-chips-list\">\n    <div class=\"adf-list-tag\" *ngFor=\"let currentEntry of tagsEntries; let idx = index\">\n        <mat-chip class=\"adf-primary-background-color\">\n            <span id=\"tag_name_{{idx}}\">{{currentEntry.entry.tag}}</span>\n        </mat-chip>\n    </div>\n</mat-chip-list>\n\n<div class=\"adf-tag-list-controls\">\n    <button\n        *ngIf=\"!isSizeMinimum\"\n        [disabled]=\"isLoading\"\n        data-automation-id=\"show-fewer-tags\"\n        mat-icon-button\n        (click)=\"loadLessTags()\">\n        <mat-icon>keyboard_arrow_up</mat-icon>\n    </button>\n    <button\n        *ngIf=\"pagination.hasMoreItems\"\n        [disabled]=\"isLoading\"\n        data-automation-id=\"show-more-tags\"\n        mat-icon-button\n        (click)=\"loadMoreTags()\">\n        <mat-icon>keyboard_arrow_down</mat-icon>\n    </button>\n</div>\n",
                        encapsulation: core.ViewEncapsulation.None,
                        styles: [".adf-tag-chips-list,.adf-tag-chips-list div{display:flex;flex-direction:column}.adf-list-tag{display:block;font-size:16px}.adf-tag-list-controls{margin-top:30px;display:flex;justify-content:center}"]
                    }] }
        ];
        /** @nocollapse */
        TagListComponent.ctorParameters = function () {
            return [
                { type: TagService }
            ];
        };
        TagListComponent.propDecorators = {
            result: [{ type: core.Output }]
        };
        return TagListComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /**
     *
     * This component, ShowNodeTag a list of the tag on relative a node
     */
    var TagNodeListComponent = /** @class */ (function () {
        /**
         * Constructor
         * @param tagService
         */
        function TagNodeListComponent(tagService) {
            var _this = this;
            this.tagService = tagService;
            /**
             * Show delete button
             */
            this.showDelete = true;
            /**
             * Emitted when a tag is selected.
             */
            this.results = new core.EventEmitter();
            this.tagService.refresh.subscribe(function () {
                _this.refreshTag();
            });
        }
        /**
         * @return {?}
         */
        TagNodeListComponent.prototype.ngOnChanges = /**
         * @return {?}
         */
            function () {
                return this.refreshTag();
            };
        /**
         * @return {?}
         */
        TagNodeListComponent.prototype.refreshTag = /**
         * @return {?}
         */
            function () {
                var _this = this;
                if (this.nodeId) {
                    this.tagService.getTagsByNodeId(this.nodeId).subscribe(function (data) {
                        _this.tagsEntries = data.list.entries;
                        _this.results.emit(_this.tagsEntries);
                    });
                }
            };
        /**
         * @param {?} tag
         * @return {?}
         */
        TagNodeListComponent.prototype.removeTag = /**
         * @param {?} tag
         * @return {?}
         */
            function (tag) {
                var _this = this;
                this.tagService.removeTag(this.nodeId, tag).subscribe(function () {
                    _this.refreshTag();
                });
            };
        TagNodeListComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-tag-node-list',
                        template: "<mat-chip-list>\n    <mat-chip class=\"adf-tag-chips adf-primary-background-color\" *ngFor=\"let currentEntry of tagsEntries; let idx = index\">\n        <span id=\"tag_name_{{idx}}\">{{currentEntry.entry.tag}}</span>\n        <button *ngIf=\"showDelete\" class=\"adf-tag-chips-delete\" id=\"tag_chips_delete_{{currentEntry.entry.tag}}\" type=\"button\" (click)=\"removeTag(currentEntry.entry.id)\">\n            <mat-icon class=\"adf-tag-chips-delete-icon adf-primary-contrast-text-color\" matChipRemove>cancel</mat-icon>\n        </button>\n    </mat-chip>\n</mat-chip-list>\n",
                        encapsulation: core.ViewEncapsulation.None,
                        styles: [".adf-tag-chips-delete{overflow:visible;cursor:pointer;height:17px;width:20px;float:right;border:0;background:0 0;padding:0;margin:-1px 0 0 10px}.adf-tag-chips-delete-icon{font-size:20px;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:20px;width:20px}"]
                    }] }
        ];
        /** @nocollapse */
        TagNodeListComponent.ctorParameters = function () {
            return [
                { type: TagService }
            ];
        };
        TagNodeListComponent.propDecorators = {
            nodeId: [{ type: core.Input }],
            showDelete: [{ type: core.Input }],
            results: [{ type: core.Output }]
        };
        return TagNodeListComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var TagModule = /** @class */ (function () {
        function TagModule() {
        }
        TagModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            MaterialModule,
                            forms.FormsModule,
                            forms.ReactiveFormsModule,
                            adfCore.CoreModule.forChild()
                        ],
                        exports: [
                            TagActionsComponent,
                            TagListComponent,
                            TagNodeListComponent
                        ],
                        declarations: [
                            TagActionsComponent,
                            TagListComponent,
                            TagNodeListComponent
                        ]
                    },] }
        ];
        return TagModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /**
     * <adf-webscript-get [scriptPath]="string"
     *                         [scriptArgs]="Object"
     *                         [contextRoot]="string"
     *                         [servicePath]="string"
     *                         [contentType]="JSON|HTML|DATATABLE"
     *                         (success)="customMethod($event)>
     * </adf-webscript-get>
     *
     * This component, provide a get webscript viewer
     *
     * \@InputParam {string} scriptPath path to Web Script (as defined by Web Script)
     * \@InputParam {Object} scriptArgs arguments to pass to Web Script
     * \@InputParam {string} contextRoot path where application is deployed default value 'alfresco'
     * \@InputParam {string} servicePath path where Web Script service is mapped default value 'service'
     * \@InputParam {string} contentType JSON | HTML | DATATABLE | TEXT
     *
     * \@Output - success - The event is emitted when the data are recived
     *
     */
    var WebscriptComponent = /** @class */ (function () {
        function WebscriptComponent(apiService, logService) {
            this.apiService = apiService;
            this.logService = logService;
            /**
             * Toggles whether to show or hide the data.
             */
            this.showData = true;
            /**
             * Path where the application is deployed
             */
            this.contextRoot = 'alfresco';
            /**
             * Path that the webscript service is mapped to.
             */
            this.servicePath = 'service';
            /**
             * Content type to interpret the data received from the webscript.
             * Can be "JSON" , "HTML" , "DATATABLE" or "TEXT"
             */
            this.contentType = 'TEXT';
            /**
             * Emitted when the operation succeeds. You can get the plain data from
             * the webscript through the **success** event parameter and use it as you
             * need in your application.
             */
            this.success = new core.EventEmitter();
            this.data = undefined;
            this.showError = false;
        }
        /**
         * @param {?} changes
         * @return {?}
         */
        WebscriptComponent.prototype.ngOnChanges = /**
         * @param {?} changes
         * @return {?}
         */
            function (changes) {
                var _this = this;
                if (this.showData) {
                    this.clean();
                }
                return new Promise(function (resolve, reject) {
                    _this.apiService.getInstance().webScript.executeWebScript('GET', _this.scriptPath, _this.scriptArgs, _this.contextRoot, _this.servicePath).then(function (webScriptdata) {
                        _this.data = webScriptdata;
                        if (_this.showData) {
                            if (_this.contentType === 'DATATABLE') {
                                _this.data = _this.showDataAsDataTable(webScriptdata);
                            }
                        }
                        _this.success.emit(_this.data);
                        resolve();
                    }, function (error) {
                        _this.logService.log('Error' + error);
                        reject();
                    });
                });
            };
        /**
         * show the data in a ng2-alfresco-datatable
         *
         * @param data
         *
         * @retutns the data as datatable
         */
        /**
         * show the data in a ng2-alfresco-datatable
         *
         * \@retutns the data as datatable
         * @param {?} data
         *
         * @return {?}
         */
        WebscriptComponent.prototype.showDataAsDataTable = /**
         * show the data in a ng2-alfresco-datatable
         *
         * \@retutns the data as datatable
         * @param {?} data
         *
         * @return {?}
         */
            function (data) {
                /** @type {?} */
                var datatableData = null;
                try {
                    if (!data.schema) {
                        data.schema = adfCore.ObjectDataTableAdapter.generateSchema(data.data);
                    }
                    if (data.schema && data.schema.length > 0) {
                        this.data = new adfCore.ObjectDataTableAdapter(data.data, data.schema);
                    }
                }
                catch (e) {
                    this.logService.error('error during the cast as datatable');
                }
                return datatableData;
            };
        /**
         * @return {?}
         */
        WebscriptComponent.prototype.clean = /**
         * @return {?}
         */
            function () {
                this.data = undefined;
            };
        /**
         * @return {?}
         */
        WebscriptComponent.prototype.isDataTableContent = /**
         * @return {?}
         */
            function () {
                return this.contentType === 'DATATABLE';
            };
        WebscriptComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-webscript-get',
                        template: "<div *ngIf=\"showData\">\n    <div *ngIf=\"contentType === 'JSON'\" id=\"webscript-data-JSON\">{{data | json}}</div>\n    <div *ngIf=\"contentType === 'HTML'\" id=\"webscript-data-HTML\" [innerHTML]=\"data\"></div>\n    <div *ngIf=\"contentType === 'TEXT'\" id=\"webscript-data-TEXT\">{{data}}</div>\n    <div *ngIf=\"isDataTableContent()\">\n        <adf-datatable id=\"webscript-datatable-wrapper\" [data]=\"data\"></adf-datatable>\n        <div>\n            <div *ngIf=\"showError\" id=\"error\">{{'WEBSCRIPT.ERROR' | translate: {\n                data: data,\n                contentType: contentType\n                }\n                }}\n            </div>\n        </div>\n    </div>\n</div>\n"
                    }] }
        ];
        /** @nocollapse */
        WebscriptComponent.ctorParameters = function () {
            return [
                { type: adfCore.AlfrescoApiService },
                { type: adfCore.LogService }
            ];
        };
        WebscriptComponent.propDecorators = {
            scriptPath: [{ type: core.Input }],
            scriptArgs: [{ type: core.Input }],
            showData: [{ type: core.Input }],
            contextRoot: [{ type: core.Input }],
            servicePath: [{ type: core.Input }],
            contentType: [{ type: core.Input }],
            success: [{ type: core.Output }]
        };
        return WebscriptComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var WebScriptModule = /** @class */ (function () {
        function WebScriptModule() {
        }
        WebScriptModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            MaterialModule,
                            adfCore.CoreModule.forChild()
                        ],
                        exports: [
                            WebscriptComponent
                        ],
                        declarations: [
                            WebscriptComponent
                        ]
                    },] }
        ];
        return WebScriptModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var ShareDataRow = /** @class */ (function () {
        function ShareDataRow(obj, documentListService, permissionsStyle, thumbnailService) {
            this.obj = obj;
            this.documentListService = documentListService;
            this.permissionsStyle = permissionsStyle;
            this.thumbnailService = thumbnailService;
            this.cache = {};
            this.isSelected = false;
            this.cssClass = '';
            if (!obj) {
                throw new Error(ShareDataRow.ERR_OBJECT_NOT_FOUND);
            }
            this.isDropTarget = this.isFolderAndHasPermissionToUpload(obj);
            if (permissionsStyle) {
                this.cssClass = this.getPermissionClass(obj);
            }
        }
        Object.defineProperty(ShareDataRow.prototype, "node", {
            get: /**
             * @return {?}
             */ function () {
                return this.obj;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @param {?} nodeEntity
         * @return {?}
         */
        ShareDataRow.prototype.getPermissionClass = /**
         * @param {?} nodeEntity
         * @return {?}
         */
            function (nodeEntity) {
                var _this = this;
                /** @type {?} */
                var permissionsClasses = '';
                this.permissionsStyle.forEach(function (currentPermissionsStyle) {
                    if (_this.applyPermissionStyleToFolder(nodeEntity.entry, currentPermissionsStyle) || _this.applyPermissionStyleToFile(nodeEntity.entry, currentPermissionsStyle)) {
                        if (_this.documentListService.hasPermission(nodeEntity.entry, currentPermissionsStyle.permission)) {
                            permissionsClasses += " " + currentPermissionsStyle.css;
                        }
                    }
                });
                return permissionsClasses;
            };
        /**
         * @param {?} node
         * @param {?} currentPermissionsStyle
         * @return {?}
         */
        ShareDataRow.prototype.applyPermissionStyleToFile = /**
         * @param {?} node
         * @param {?} currentPermissionsStyle
         * @return {?}
         */
            function (node, currentPermissionsStyle) {
                return (currentPermissionsStyle.isFile && node.isFile);
            };
        /**
         * @param {?} node
         * @param {?} currentPermissionsStyle
         * @return {?}
         */
        ShareDataRow.prototype.applyPermissionStyleToFolder = /**
         * @param {?} node
         * @param {?} currentPermissionsStyle
         * @return {?}
         */
            function (node, currentPermissionsStyle) {
                return (currentPermissionsStyle.isFolder && node.isFolder);
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        ShareDataRow.prototype.isFolderAndHasPermissionToUpload = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                return this.isFolder(obj) && this.documentListService.hasPermission(obj.entry, 'create');
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        ShareDataRow.prototype.isFolder = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                return obj.entry && obj.entry.isFolder;
            };
        /**
         * @param {?} key
         * @param {?} value
         * @return {?}
         */
        ShareDataRow.prototype.cacheValue = /**
         * @param {?} key
         * @param {?} value
         * @return {?}
         */
            function (key, value) {
                this.cache[key] = value;
                return value;
            };
        /**
         * @param {?} key
         * @return {?}
         */
        ShareDataRow.prototype.getValue = /**
         * @param {?} key
         * @return {?}
         */
            function (key) {
                if (this.cache[key] !== undefined) {
                    return this.cache[key];
                }
                return adfCore.ObjectUtils.getValue(this.obj.entry, key);
            };
        /**
         * @param {?} event
         * @return {?}
         */
        ShareDataRow.prototype.imageErrorResolver = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                return this.thumbnailService.getMimeTypeIcon(this.obj.entry.content.mimeType);
            };
        /**
         * @param {?} key
         * @return {?}
         */
        ShareDataRow.prototype.hasValue = /**
         * @param {?} key
         * @return {?}
         */
            function (key) {
                return this.getValue(key) !== undefined;
            };
        ShareDataRow.ERR_OBJECT_NOT_FOUND = 'Object source not found';
        return ShareDataRow;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var ShareDataTableAdapter = /** @class */ (function () {
        function ShareDataTableAdapter(documentListService, thumbnailService, schema, sorting, sortingMode) {
            if (schema === void 0) {
                schema = [];
            }
            if (sortingMode === void 0) {
                sortingMode = 'client';
            }
            this.documentListService = documentListService;
            this.thumbnailService = thumbnailService;
            this.ERR_ROW_NOT_FOUND = 'Row not found';
            this.ERR_COL_NOT_FOUND = 'Column not found';
            this.thumbnails = false;
            this.rows = [];
            this.columns = schema || [];
            this.sorting = sorting;
            this.sortingMode = sortingMode;
        }
        Object.defineProperty(ShareDataTableAdapter.prototype, "sortingMode", {
            get: /**
             * @return {?}
             */ function () {
                return this._sortingMode;
            },
            set: /**
             * @param {?} value
             * @return {?}
             */ function (value) {
                /** @type {?} */
                var newValue = (value || 'client').toLowerCase();
                if (newValue !== 'client' && newValue !== 'server') {
                    newValue = 'client';
                }
                this._sortingMode = newValue;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        ShareDataTableAdapter.prototype.getRows = /**
         * @return {?}
         */
            function () {
                return this.rows;
            };
        // TODO: disable this api
        /**
         * @param {?} rows
         * @return {?}
         */
        ShareDataTableAdapter.prototype.setRows = /**
         * @param {?} rows
         * @return {?}
         */
            function (rows) {
                this.rows = rows || [];
                this.sort();
            };
        /**
         * @return {?}
         */
        ShareDataTableAdapter.prototype.getColumns = /**
         * @return {?}
         */
            function () {
                return this.columns;
            };
        /**
         * @param {?} columns
         * @return {?}
         */
        ShareDataTableAdapter.prototype.setColumns = /**
         * @param {?} columns
         * @return {?}
         */
            function (columns) {
                this.columns = columns || [];
            };
        /**
         * @param {?} row
         * @param {?} col
         * @return {?}
         */
        ShareDataTableAdapter.prototype.getValue = /**
         * @param {?} row
         * @param {?} col
         * @return {?}
         */
            function (row, col) {
                if (!row) {
                    throw new Error(this.ERR_ROW_NOT_FOUND);
                }
                if (!col) {
                    throw new Error(this.ERR_COL_NOT_FOUND);
                }
                /** @type {?} */
                var dataRow = /** @type {?} */ (row);
                /** @type {?} */
                var value = row.getValue(col.key);
                if (dataRow.cache[col.key] !== undefined) {
                    return dataRow.cache[col.key];
                }
                if (col.key === '$thumbnail') {
                    if (this.imageResolver) {
                        /** @type {?} */
                        var resolved = this.imageResolver(row, col);
                        if (resolved) {
                            return resolved;
                        }
                    }
                    /** @type {?} */
                    var node = ( /** @type {?} */(row)).node;
                    if (node.entry.isFolder) {
                        if (this.isSmartFolder(node)) {
                            return this.documentListService.getMimeTypeIcon('smartFolder');
                        }
                        else {
                            return this.documentListService.getMimeTypeIcon('folder');
                        }
                    }
                    if (node.entry.isFile) {
                        if (this.thumbnails) {
                            return this.documentListService.getDocumentThumbnailUrl(node);
                        }
                    }
                    if (node.entry.content) {
                        /** @type {?} */
                        var mimeType = node.entry.content.mimeType;
                        if (mimeType) {
                            return this.documentListService.getMimeTypeIcon(mimeType);
                        }
                    }
                    return this.documentListService.getDefaultMimeTypeIcon();
                }
                if (col.type === 'image') {
                    if (this.imageResolver) {
                        /** @type {?} */
                        var resolved = this.imageResolver(row, col);
                        if (resolved) {
                            return resolved;
                        }
                    }
                }
                return dataRow.cacheValue(col.key, value);
            };
        /**
         * @return {?}
         */
        ShareDataTableAdapter.prototype.getSorting = /**
         * @return {?}
         */
            function () {
                return this.sorting;
            };
        /**
         * @param {?} sorting
         * @return {?}
         */
        ShareDataTableAdapter.prototype.setSorting = /**
         * @param {?} sorting
         * @return {?}
         */
            function (sorting) {
                this.sorting = sorting;
                this.sortRows(this.rows, this.sorting);
            };
        /**
         * @param {?=} key
         * @param {?=} direction
         * @return {?}
         */
        ShareDataTableAdapter.prototype.sort = /**
         * @param {?=} key
         * @param {?=} direction
         * @return {?}
         */
            function (key, direction) {
                /** @type {?} */
                var sorting = this.sorting || new adfCore.DataSorting();
                if (key) {
                    sorting.key = key;
                    sorting.direction = direction || 'asc';
                }
                this.setSorting(sorting);
            };
        /**
         * @param {?} filter
         * @return {?}
         */
        ShareDataTableAdapter.prototype.setFilter = /**
         * @param {?} filter
         * @return {?}
         */
            function (filter) {
                this.filter = filter;
            };
        /**
         * @param {?} resolver
         * @return {?}
         */
        ShareDataTableAdapter.prototype.setImageResolver = /**
         * @param {?} resolver
         * @return {?}
         */
            function (resolver) {
                this.imageResolver = resolver;
            };
        /**
         * @param {?} node
         * @return {?}
         */
        ShareDataTableAdapter.prototype.isSmartFolder = /**
         * @param {?} node
         * @return {?}
         */
            function (node) {
                /** @type {?} */
                var nodeAspects = this.getNodeAspectNames(node);
                return nodeAspects.indexOf('smf:customConfigSmartFolder') > -1 ||
                    (nodeAspects.indexOf('smf:systemConfigSmartFolder') > -1);
            };
        /**
         * @param {?} node
         * @return {?}
         */
        ShareDataTableAdapter.prototype.getNodeAspectNames = /**
         * @param {?} node
         * @return {?}
         */
            function (node) {
                return node.entry && node.entry.aspectNames ? node.entry.aspectNames : node.aspectNames ? node.aspectNames : [];
            };
        /**
         * @param {?} rows
         * @param {?} sorting
         * @return {?}
         */
        ShareDataTableAdapter.prototype.sortRows = /**
         * @param {?} rows
         * @param {?} sorting
         * @return {?}
         */
            function (rows, sorting) {
                if (this.sortingMode === 'server') {
                    return;
                }
                /** @type {?} */
                var options = {};
                if (sorting && sorting.key && rows && rows.length > 0) {
                    if (sorting.key.includes('sizeInBytes') || sorting.key === 'name') {
                        options.numeric = true;
                    }
                    rows.sort(function (a, b) {
                        if (a.node.entry.isFolder !== b.node.entry.isFolder) {
                            return a.node.entry.isFolder ? -1 : 1;
                        }
                        /** @type {?} */
                        var left = a.getValue(sorting.key);
                        if (left) {
                            left = (left instanceof Date) ? left.valueOf().toString() : left.toString();
                        }
                        else {
                            left = '';
                        }
                        /** @type {?} */
                        var right = b.getValue(sorting.key);
                        if (right) {
                            right = (right instanceof Date) ? right.valueOf().toString() : right.toString();
                        }
                        else {
                            right = '';
                        }
                        return sorting.direction === 'asc'
                            ? left.localeCompare(right, undefined, options)
                            : right.localeCompare(left, undefined, options);
                    });
                }
            };
        /**
         * @param {?} page
         * @param {?=} merge
         * @return {?}
         */
        ShareDataTableAdapter.prototype.loadPage = /**
         * @param {?} page
         * @param {?=} merge
         * @return {?}
         */
            function (page, merge) {
                var _this = this;
                if (merge === void 0) {
                    merge = false;
                }
                /** @type {?} */
                var rows = [];
                if (page && page.list) {
                    /** @type {?} */
                    var data = page.list.entries;
                    if (data && data.length > 0) {
                        rows = data.map(function (item) { return new ShareDataRow(item, _this.documentListService, _this.permissionsStyle, _this.thumbnailService); });
                        if (this.filter) {
                            rows = rows.filter(this.filter);
                        }
                        if (this.sortingMode !== 'server') {
                            // Sort by first sortable or just first column
                            if (this.columns && this.columns.length > 0) {
                                /** @type {?} */
                                var sorting = this.getSorting();
                                if (sorting) {
                                    this.sortRows(rows, sorting);
                                }
                                else {
                                    /** @type {?} */
                                    var sortable = this.columns.filter(function (c) { return c.sortable; });
                                    if (sortable.length > 0) {
                                        this.sort(sortable[0].key, 'asc');
                                    }
                                    else {
                                        this.sort(this.columns[0].key, 'asc');
                                    }
                                }
                            }
                        }
                    }
                }
                if (merge) {
                    /** @type {?} */
                    var listPrunedDuplicate = rows.filter(function (elemntToFilter) {
                        /** @type {?} */
                        var isPresent = _this.rows.find(function (currenRow) {
                            return currenRow.obj.entry.id === elemntToFilter.obj.entry.id;
                        });
                        return !isPresent;
                    });
                    this.rows = this.rows.concat(listPrunedDuplicate);
                }
                else {
                    this.rows = rows;
                }
            };
        return ShareDataTableAdapter;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /*!
     * @license
     * Copyright 2016 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /** @type {?} */
    var presetsDefaultModel = {
        '-trashcan-': [
            {
                key: '$thumbnail',
                type: 'image',
                srTitle: 'ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL',
                sortable: false
            },
            {
                key: 'name',
                type: 'text',
                title: 'ADF-DOCUMENT-LIST.LAYOUT.NAME',
                cssClass: 'full-width ellipsis-cell',
                sortable: true
            },
            {
                key: 'path',
                type: 'location',
                title: 'ADF-DOCUMENT-LIST.LAYOUT.LOCATION',
                sortable: true
            },
            {
                key: 'content.sizeInBytes',
                type: 'fileSize',
                title: 'ADF-DOCUMENT-LIST.LAYOUT.SIZE',
                sortable: true
            },
            {
                key: 'archivedAt',
                type: 'date',
                title: 'ADF-DOCUMENT-LIST.LAYOUT.DELETED_ON',
                format: 'timeAgo',
                sortable: true
            },
            {
                key: 'archivedByUser.displayName',
                type: 'text',
                title: 'ADF-DOCUMENT-LIST.LAYOUT.DELETED_BY',
                sortable: true
            }
        ],
        '-sites-': [
            {
                key: '$thumbnail',
                type: 'image',
                srTitle: 'ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL',
                sortable: false
            },
            {
                key: 'title',
                type: 'text',
                title: 'ADF-DOCUMENT-LIST.LAYOUT.NAME',
                cssClass: 'full-width ellipsis-cell',
                sortable: true
            },
            {
                key: 'visibility',
                type: 'text',
                title: 'ADF-DOCUMENT-LIST.LAYOUT.STATUS',
                sortable: true
            }
        ],
        '-mysites-': [
            {
                key: '$thumbnail',
                type: 'image',
                srTitle: 'ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL',
                sortable: false
            },
            {
                key: 'title',
                type: 'text',
                title: 'ADF-DOCUMENT-LIST.LAYOUT.NAME',
                cssClass: 'full-width ellipsis-cell',
                sortable: true
            },
            {
                key: 'visibility',
                type: 'text',
                title: 'ADF-DOCUMENT-LIST.LAYOUT.STATUS',
                sortable: true
            }
        ],
        '-favorites-': [
            {
                key: '$thumbnail',
                type: 'image',
                srTitle: 'ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL',
                sortable: false
            },
            {
                key: 'name',
                type: 'text',
                title: 'ADF-DOCUMENT-LIST.LAYOUT.NAME',
                cssClass: 'full-width ellipsis-cell',
                sortable: true
            },
            {
                key: 'path',
                type: 'location',
                title: 'ADF-DOCUMENT-LIST.LAYOUT.LOCATION',
                sortable: true
            },
            {
                key: 'content.sizeInBytes',
                type: 'fileSize',
                title: 'ADF-DOCUMENT-LIST.LAYOUT.SIZE',
                sortable: true
            },
            {
                key: 'modifiedAt',
                type: 'date',
                title: 'ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_ON',
                format: 'timeAgo',
                sortable: true
            },
            {
                key: 'modifiedByUser.displayName',
                type: 'text',
                title: 'ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_BY',
                sortable: true
            }
        ],
        '-recent-': [
            {
                key: '$thumbnail',
                type: 'image',
                srTitle: 'ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL',
                sortable: false
            },
            {
                key: 'name',
                type: 'text',
                title: 'ADF-DOCUMENT-LIST.LAYOUT.NAME',
                cssClass: 'full-width ellipsis-cell',
                sortable: true
            },
            {
                key: 'path',
                type: 'location',
                title: 'ADF-DOCUMENT-LIST.LAYOUT.LOCATION',
                cssClass: 'ellipsis-cell',
                sortable: true
            },
            {
                key: 'content.sizeInBytes',
                type: 'fileSize',
                title: 'ADF-DOCUMENT-LIST.LAYOUT.SIZE',
                sortable: true
            },
            {
                key: 'modifiedAt',
                type: 'date',
                title: 'ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_ON',
                format: 'timeAgo',
                sortable: true
            }
        ],
        '-sharedlinks-': [
            {
                key: '$thumbnail',
                type: 'image',
                srTitle: 'ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL',
                sortable: false
            },
            {
                key: 'name',
                type: 'text',
                title: 'ADF-DOCUMENT-LIST.LAYOUT.NAME',
                cssClass: 'full-width ellipsis-cell',
                sortable: true
            },
            {
                key: 'path',
                type: 'location',
                title: 'ADF-DOCUMENT-LIST.LAYOUT.LOCATION',
                cssClass: 'ellipsis-cell',
                sortable: true
            },
            {
                key: 'content.sizeInBytes',
                type: 'fileSize',
                title: 'ADF-DOCUMENT-LIST.LAYOUT.SIZE',
                sortable: true
            },
            {
                key: 'modifiedAt',
                type: 'date',
                title: 'ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_ON',
                format: 'timeAgo',
                sortable: true
            },
            {
                key: 'modifiedByUser.displayName',
                type: 'text',
                title: 'ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_BY',
                sortable: true
            },
            {
                key: 'sharedByUser.displayName',
                type: 'text',
                title: 'ADF-DOCUMENT-LIST.LAYOUT.SHARED_BY',
                sortable: true
            }
        ],
        'default': [
            {
                key: '$thumbnail',
                type: 'image',
                srTitle: 'ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL',
                sortable: false
            },
            {
                key: 'name',
                type: 'text',
                title: 'ADF-DOCUMENT-LIST.LAYOUT.NAME',
                cssClass: 'full-width ellipsis-cell',
                sortable: true
            },
            {
                key: 'content.sizeInBytes',
                type: 'fileSize',
                title: 'ADF-DOCUMENT-LIST.LAYOUT.SIZE',
                sortable: true
            },
            {
                key: 'modifiedAt',
                type: 'date',
                title: 'ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_ON',
                format: 'timeAgo',
                sortable: true
            },
            {
                key: 'modifiedByUser.displayName',
                type: 'text',
                title: 'ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_BY',
                sortable: true
            }
        ]
    };

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var ContentActionModel = /** @class */ (function () {
        function ContentActionModel(obj) {
            this.disableWithNoPermission = false;
            this.disabled = false;
            this.visible = true;
            if (obj) {
                this.icon = obj.icon;
                this.title = obj.title;
                this.handler = obj.handler;
                this.execute = obj.execute;
                this.target = obj.target;
                this.permission = obj.permission;
                this.disableWithNoPermission = obj.disableWithNoPermission;
                if (obj.hasOwnProperty('disabled')) {
                    this.disabled = obj.disabled;
                }
                if (obj.hasOwnProperty('visible')) {
                    this.visible = obj.visible;
                }
            }
        }
        return ContentActionModel;
    }());
    /** @enum {string} */
    var ContentActionTarget = {
        Document: 'document',
        Folder: 'folder',
        All: 'all',
    };
    var DocumentActionModel = /** @class */ (function (_super) {
        __extends(DocumentActionModel, _super);
        function DocumentActionModel(json) {
            var _this = _super.call(this, json) || this;
            _this.target = 'document';
            return _this;
        }
        return DocumentActionModel;
    }(ContentActionModel));
    var FolderActionModel = /** @class */ (function (_super) {
        __extends(FolderActionModel, _super);
        function FolderActionModel(json) {
            var _this = _super.call(this, json) || this;
            _this.target = 'folder';
            return _this;
        }
        return FolderActionModel;
    }(ContentActionModel));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var NodeEntityEvent = /** @class */ (function (_super) {
        __extends(NodeEntityEvent, _super);
        function NodeEntityEvent(entity) {
            var _this = _super.call(this) || this;
            _this.value = entity;
            return _this;
        }
        return NodeEntityEvent;
    }(adfCore.BaseEvent));
    var NodeEntryEvent = /** @class */ (function (_super) {
        __extends(NodeEntryEvent, _super);
        function NodeEntryEvent(entity) {
            var _this = _super.call(this) || this;
            _this.value = entity;
            return _this;
        }
        return NodeEntryEvent;
    }(adfCore.BaseEvent));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var CustomResourcesService = /** @class */ (function () {
        function CustomResourcesService(apiService, logService) {
            this.apiService = apiService;
            this.logService = logService;
            this.CREATE_PERMISSION = 'create';
        }
        /**
         * Gets files recently accessed by a user.
         * @param personId ID of the user
         * @param pagination Specifies how to paginate the results
         * @returns List of nodes for the recently used files
         */
        /**
         * Gets files recently accessed by a user.
         * @param {?} personId ID of the user
         * @param {?} pagination Specifies how to paginate the results
         * @return {?} List of nodes for the recently used files
         */
        CustomResourcesService.prototype.getRecentFiles = /**
         * Gets files recently accessed by a user.
         * @param {?} personId ID of the user
         * @param {?} pagination Specifies how to paginate the results
         * @return {?} List of nodes for the recently used files
         */
            function (personId, pagination) {
                var _this = this;
                return new rxjs.Observable(function (observer) {
                    _this.apiService.peopleApi.getPerson(personId)
                        .then(function (person) {
                        /** @type {?} */
                        var username = person.entry.id;
                        /** @type {?} */
                        var query = {
                            query: {
                                query: '*',
                                language: 'afts'
                            },
                            filterQueries: [
                                { query: "cm:modified:[NOW/DAY-30DAYS TO NOW/DAY+1DAY]" },
                                { query: "cm:modifier:" + username + " OR cm:creator:" + username },
                                { query: "TYPE:\"content\" AND -TYPE:\"app:filelink\" AND -TYPE:\"fm:post\"" }
                            ],
                            include: ['path', 'properties', 'allowableOperations'],
                            sort: [{
                                    type: 'FIELD',
                                    field: 'cm:modified',
                                    ascending: false
                                }],
                            paging: {
                                maxItems: pagination.maxItems,
                                skipCount: pagination.skipCount
                            }
                        };
                        return _this.apiService.searchApi.search(query)
                            .then(function (searchResult) {
                            observer.next(searchResult);
                            observer.complete();
                        }, function (err) {
                            observer.error(err);
                            observer.complete();
                        });
                    }, function (err) {
                        observer.error(err);
                        observer.complete();
                    });
                }).pipe(operators.catchError(function (err) { return _this.handleError(err); }));
            };
        /**
         * Gets favorite files for the current user.
         * @param pagination Specifies how to paginate the results
         * @param includeFields List of data field names to include in the results
         * @returns List of favorite files
         */
        /**
         * Gets favorite files for the current user.
         * @param {?} pagination Specifies how to paginate the results
         * @param {?=} includeFields List of data field names to include in the results
         * @return {?} List of favorite files
         */
        CustomResourcesService.prototype.loadFavorites = /**
         * Gets favorite files for the current user.
         * @param {?} pagination Specifies how to paginate the results
         * @param {?=} includeFields List of data field names to include in the results
         * @return {?} List of favorite files
         */
            function (pagination, includeFields) {
                var _this = this;
                if (includeFields === void 0) {
                    includeFields = [];
                }
                /** @type {?} */
                var includeFieldsRequest = this.getIncludesFields(includeFields);
                /** @type {?} */
                var options = {
                    maxItems: pagination.maxItems,
                    skipCount: pagination.skipCount,
                    where: '(EXISTS(target/file) OR EXISTS(target/folder))',
                    include: includeFieldsRequest
                };
                return new rxjs.Observable(function (observer) {
                    _this.apiService.favoritesApi.getFavorites('-me-', options)
                        .then(function (result) {
                        /** @type {?} */
                        var page = {
                            list: {
                                entries: result.list.entries
                                    .map(function (_a) {
                                    var target = _a.entry.target;
                                    return ({
                                        entry: target.file || target.folder
                                    });
                                })
                                    .map(function (_a) {
                                    var entry = _a.entry;
                                    entry.properties = {
                                        'cm:title': entry.title,
                                        'cm:description': entry.description
                                    };
                                    return { entry: entry };
                                }),
                                pagination: result.list.pagination
                            }
                        };
                        observer.next(page);
                        observer.complete();
                    }, function (err) {
                        observer.error(err);
                        observer.complete();
                    });
                }).pipe(operators.catchError(function (err) { return _this.handleError(err); }));
            };
        /**
         * Gets sites that the current user is a member of.
         * @param pagination Specifies how to paginate the results
         * @returns List of sites
         */
        /**
         * Gets sites that the current user is a member of.
         * @param {?} pagination Specifies how to paginate the results
         * @return {?} List of sites
         */
        CustomResourcesService.prototype.loadMemberSites = /**
         * Gets sites that the current user is a member of.
         * @param {?} pagination Specifies how to paginate the results
         * @return {?} List of sites
         */
            function (pagination) {
                var _this = this;
                /** @type {?} */
                var options = {
                    include: ['properties'],
                    maxItems: pagination.maxItems,
                    skipCount: pagination.skipCount
                };
                return new rxjs.Observable(function (observer) {
                    _this.apiService.peopleApi.getSiteMembership('-me-', options)
                        .then(function (result) {
                        /** @type {?} */
                        var page = {
                            list: {
                                entries: result.list.entries
                                    .map(function (_a) {
                                    var site = _a.entry.site;
                                    site.allowableOperations = site.allowableOperations ? site.allowableOperations : [_this.CREATE_PERMISSION];
                                    site.name = site.name || site.title;
                                    return {
                                        entry: site
                                    };
                                }),
                                pagination: result.list.pagination
                            }
                        };
                        observer.next(page);
                        observer.complete();
                    }, function (err) {
                        observer.error(err);
                        observer.complete();
                    });
                }).pipe(operators.catchError(function (err) { return _this.handleError(err); }));
            };
        /**
         * Gets all sites in the respository.
         * @param pagination Specifies how to paginate the results
         * @returns List of sites
         */
        /**
         * Gets all sites in the respository.
         * @param {?} pagination Specifies how to paginate the results
         * @return {?} List of sites
         */
        CustomResourcesService.prototype.loadSites = /**
         * Gets all sites in the respository.
         * @param {?} pagination Specifies how to paginate the results
         * @return {?} List of sites
         */
            function (pagination) {
                var _this = this;
                /** @type {?} */
                var options = {
                    include: ['properties', 'aspectNames'],
                    maxItems: pagination.maxItems,
                    skipCount: pagination.skipCount
                };
                return new rxjs.Observable(function (observer) {
                    _this.apiService.sitesApi.getSites(options)
                        .then(function (page) {
                        page.list.entries.map(function (_a) {
                            var entry = _a.entry;
                            entry.name = entry.name || entry.title;
                            return { entry: entry };
                        });
                        observer.next(page);
                        observer.complete();
                    }, function (err) {
                        observer.error(err);
                        observer.complete();
                    });
                }).pipe(operators.catchError(function (err) { return _this.handleError(err); }));
            };
        /**
         * Gets all items currently in the trash.
         * @param pagination Specifies how to paginate the results
         * @param includeFields List of data field names to include in the results
         * @returns List of deleted items
         */
        /**
         * Gets all items currently in the trash.
         * @param {?} pagination Specifies how to paginate the results
         * @param {?=} includeFields List of data field names to include in the results
         * @return {?} List of deleted items
         */
        CustomResourcesService.prototype.loadTrashcan = /**
         * Gets all items currently in the trash.
         * @param {?} pagination Specifies how to paginate the results
         * @param {?=} includeFields List of data field names to include in the results
         * @return {?} List of deleted items
         */
            function (pagination, includeFields) {
                var _this = this;
                if (includeFields === void 0) {
                    includeFields = [];
                }
                /** @type {?} */
                var includeFieldsRequest = this.getIncludesFields(includeFields);
                /** @type {?} */
                var options = {
                    include: includeFieldsRequest,
                    maxItems: pagination.maxItems,
                    skipCount: pagination.skipCount
                };
                return rxjs.from(this.apiService.nodesApi.getDeletedNodes(options))
                    .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
            };
        /**
         * Gets shared links for the current user.
         * @param pagination Specifies how to paginate the results
         * @param includeFields List of data field names to include in the results
         * @returns List of shared links
         */
        /**
         * Gets shared links for the current user.
         * @param {?} pagination Specifies how to paginate the results
         * @param {?=} includeFields List of data field names to include in the results
         * @return {?} List of shared links
         */
        CustomResourcesService.prototype.loadSharedLinks = /**
         * Gets shared links for the current user.
         * @param {?} pagination Specifies how to paginate the results
         * @param {?=} includeFields List of data field names to include in the results
         * @return {?} List of shared links
         */
            function (pagination, includeFields) {
                var _this = this;
                if (includeFields === void 0) {
                    includeFields = [];
                }
                /** @type {?} */
                var includeFieldsRequest = this.getIncludesFields(includeFields);
                /** @type {?} */
                var options = {
                    include: includeFieldsRequest,
                    maxItems: pagination.maxItems,
                    skipCount: pagination.skipCount
                };
                return rxjs.from(this.apiService.sharedLinksApi.findSharedLinks(options))
                    .pipe(operators.catchError(function (err) { return _this.handleError(err); }));
            };
        /**
         * Is the folder ID one of the well-known aliases?
         * @param folderId Folder ID name to check
         * @returns True if the ID is a well-known name, false otherwise
         */
        /**
         * Is the folder ID one of the well-known aliases?
         * @param {?} folderId Folder ID name to check
         * @return {?} True if the ID is a well-known name, false otherwise
         */
        CustomResourcesService.prototype.isCustomSource = /**
         * Is the folder ID one of the well-known aliases?
         * @param {?} folderId Folder ID name to check
         * @return {?} True if the ID is a well-known name, false otherwise
         */
            function (folderId) {
                /** @type {?} */
                var isCustomSources = false;
                /** @type {?} */
                var sources = ['-trashcan-', '-sharedlinks-', '-sites-', '-mysites-', '-favorites-', '-recent-'];
                if (sources.indexOf(folderId) > -1) {
                    isCustomSources = true;
                }
                return isCustomSources;
            };
        /**
         * Is the folder ID a "-my", "-root-", or "-shared-" alias?
         * @param folderId Folder ID name to check
         * @returns True if the ID is one of the suppored sources, false otherwise
         */
        /**
         * Is the folder ID a "-my", "-root-", or "-shared-" alias?
         * @param {?} folderId Folder ID name to check
         * @return {?} True if the ID is one of the suppored sources, false otherwise
         */
        CustomResourcesService.prototype.isSupportedSource = /**
         * Is the folder ID a "-my", "-root-", or "-shared-" alias?
         * @param {?} folderId Folder ID name to check
         * @return {?} True if the ID is one of the suppored sources, false otherwise
         */
            function (folderId) {
                /** @type {?} */
                var isSupportedSources = false;
                /** @type {?} */
                var sources = ['-my-', '-root-', '-shared-'];
                if (sources.indexOf(folderId) > -1) {
                    isSupportedSources = true;
                }
                return isSupportedSources;
            };
        /**
         * Gets a folder's contents.
         * @param nodeId ID of the target folder node
         * @param pagination Specifies how to paginate the results
         * @param includeFields List of data field names to include in the results
         * @returns List of items contained in the folder
         */
        /**
         * Gets a folder's contents.
         * @param {?} nodeId ID of the target folder node
         * @param {?} pagination Specifies how to paginate the results
         * @param {?} includeFields List of data field names to include in the results
         * @return {?} List of items contained in the folder
         */
        CustomResourcesService.prototype.loadFolderByNodeId = /**
         * Gets a folder's contents.
         * @param {?} nodeId ID of the target folder node
         * @param {?} pagination Specifies how to paginate the results
         * @param {?} includeFields List of data field names to include in the results
         * @return {?} List of items contained in the folder
         */
            function (nodeId, pagination, includeFields) {
                if (nodeId === '-trashcan-') {
                    return this.loadTrashcan(pagination, includeFields);
                }
                else if (nodeId === '-sharedlinks-') {
                    return this.loadSharedLinks(pagination, includeFields);
                }
                else if (nodeId === '-sites-') {
                    return this.loadSites(pagination);
                }
                else if (nodeId === '-mysites-') {
                    return this.loadMemberSites(pagination);
                }
                else if (nodeId === '-favorites-') {
                    return this.loadFavorites(pagination, includeFields);
                }
                else if (nodeId === '-recent-') {
                    return this.getRecentFiles('-me-', pagination);
                }
            };
        // TODO: remove it from here
        /**
         * Gets the contents of one of the well-known aliases in the form of node ID strings.
         * @param nodeId ID of the target folder node
         * @param pagination Specifies how to paginate the results
         * @returns List of node IDs
         */
        /**
         * Gets the contents of one of the well-known aliases in the form of node ID strings.
         * @param {?} nodeId ID of the target folder node
         * @param {?=} pagination Specifies how to paginate the results
         * @return {?} List of node IDs
         */
        CustomResourcesService.prototype.getCorrespondingNodeIds = /**
         * Gets the contents of one of the well-known aliases in the form of node ID strings.
         * @param {?} nodeId ID of the target folder node
         * @param {?=} pagination Specifies how to paginate the results
         * @return {?} List of node IDs
         */
            function (nodeId, pagination) {
                if (pagination === void 0) {
                    pagination = {};
                }
                if (this.isCustomSource(nodeId)) {
                    return this.loadFolderByNodeId(nodeId, pagination, [])
                        .pipe(operators.map(function (result) {
                        return result.list.entries.map(function (node) {
                            if (nodeId === '-sharedlinks-') {
                                return node.entry.nodeId;
                            }
                            else if (nodeId === '-sites-' || nodeId === '-mysites-') {
                                return node.entry.guid;
                            }
                            else if (nodeId === '-favorites-') {
                                return node.entry.targetGuid;
                            }
                            return node.entry.id;
                        });
                    }));
                }
                else if (nodeId) {
                    // cases when nodeId is '-my-', '-root-' or '-shared-'
                    return rxjs.from(this.apiService.nodesApi.getNode(nodeId)
                        .then(function (node) { return [node.entry.id]; }));
                }
                return rxjs.of([]);
            };
        /**
         * Does the well-known alias have a corresponding node ID?
         * @param nodeId Node to check
         * @returns True if the alias has a corresponding node ID, false otherwise
         */
        /**
         * Does the well-known alias have a corresponding node ID?
         * @param {?} nodeId Node to check
         * @return {?} True if the alias has a corresponding node ID, false otherwise
         */
        CustomResourcesService.prototype.hasCorrespondingNodeIds = /**
         * Does the well-known alias have a corresponding node ID?
         * @param {?} nodeId Node to check
         * @return {?} True if the alias has a corresponding node ID, false otherwise
         */
            function (nodeId) {
                return this.isCustomSource(nodeId) || this.isSupportedSource(nodeId);
            };
        /**
         * @param {?} includeFields
         * @return {?}
         */
        CustomResourcesService.prototype.getIncludesFields = /**
         * @param {?} includeFields
         * @return {?}
         */
            function (includeFields) {
                return __spread(['path', 'properties', 'allowableOperations', 'permissions', 'aspectNames'], includeFields).filter(function (element, index, array) { return index === array.indexOf(element); });
            };
        /**
         * @param {?} error
         * @return {?}
         */
        CustomResourcesService.prototype.handleError = /**
         * @param {?} error
         * @return {?}
         */
            function (error) {
                this.logService.error(error);
                return rxjs.throwError(error || 'Server error');
            };
        CustomResourcesService.decorators = [
            { type: core.Injectable }
        ];
        /** @nocollapse */
        CustomResourcesService.ctorParameters = function () {
            return [
                { type: adfCore.AlfrescoApiService },
                { type: adfCore.LogService }
            ];
        };
        return CustomResourcesService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @enum {number} */
    var PaginationStrategy = {
        Finite: 0,
        Infinite: 1,
    };
    PaginationStrategy[PaginationStrategy.Finite] = 'Finite';
    PaginationStrategy[PaginationStrategy.Infinite] = 'Infinite';
    var DocumentListComponent = /** @class */ (function () {
        function DocumentListComponent(documentListService, ngZone, elementRef, appConfig, preferences, customResourcesService, contentService, thumbnailService) {
            this.documentListService = documentListService;
            this.ngZone = ngZone;
            this.elementRef = elementRef;
            this.appConfig = appConfig;
            this.preferences = preferences;
            this.customResourcesService = customResourcesService;
            this.contentService = contentService;
            this.thumbnailService = thumbnailService;
            /**
             * Change the display mode of the table. Can be "list" or "gallery".
             */
            this.display = adfCore.DisplayMode.List;
            /**
             * Define a set of CSS styles styles to apply depending on the permission
             * of the user on that node. See the Permission Style model
             * page for further details and examples.
             */
            this.permissionsStyle = [];
            /**
             * The default route for all the location-based columns (if declared).
             */
            this.locationFormat = '/';
            /**
             * Toggles navigation to folder content or file preview
             */
            this.navigate = true;
            /**
             * Toggles the header
             */
            this.showHeader = true;
            /**
             * User interaction for folder navigation or file preview.
             * Valid values are "click" and "dblclick". Default value: "dblclick"
             */
            this.navigationMode = DocumentListComponent.DOUBLE_CLICK_NAVIGATION;
            /**
             * Show document thumbnails rather than icons
             */
            this.thumbnails = false;
            /**
             * Row selection mode. Can be null, `single` or `multiple`. For `multiple` mode,
             * you can use Cmd (macOS) or Ctrl (Win) modifier key to toggle selection for multiple rows.
             */
            this.selectionMode = 'single';
            /**
             * Toggles multiselect mode
             */
            this.multiselect = false;
            /**
             * Toggles content actions for each row
             */
            this.contentActions = false;
            /**
             * Position of the content actions dropdown menu. Can be set to "left" or "right".
             */
            this.contentActionsPosition = 'right';
            /**
             * Toggles context menus for each row
             */
            this.contextMenuActions = false;
            /**
             * Custom image for empty folder. Default value: './assets/images/empty_doc_lib.svg'
             */
            this.emptyFolderImageUrl = './assets/images/empty_doc_lib.svg';
            /**
             * Toggle file drop support for rows (see Upload Directive for further details
             */
            this.allowDropFiles = false;
            /**
             * Defines default sorting. The format is an array of 2 strings `[key, direction]`
             * i.e. `['name', 'desc']` or `['name', 'asc']`. Set this value only if you want to
             * override the default sorting detected by the component based on columns.
             */
            this.sorting = ['name', 'asc'];
            /**
             * Defines sorting mode. Can be either `client` or `server`.
             */
            this.sortingMode = 'client';
            /**
             * Toggles the loading state and animated spinners for the component. Used in
             * combination with `navigate=false` to perform custom navigation and loading
             * state indication.
             */
            this.loading = false;
            /**
             * Custom row filter
             */
            this.rowFilter = null;
            /**
             * Custom image resolver
             */
            this.imageResolver = null;
            /**
             * The ID of the folder node to display or a reserved string alias for special sources
             */
            this.currentFolderId = null;
            /**
             * Currently displayed folder node
             * @deprecated 2.3.0 - use currentFolderId or node
             */
            this.folderNode = null;
            /**
             * The Document list will show all the nodes contained in the NodePaging entity
             */
            this.node = null;
            /**
             * Number of elements to skip over for pagination purposes
             * @deprecated 2.3.0 - define it in pagination
             */
            this.skipCount = 0;
            /**
             * Set document list to work in infinite scrolling mode
             * @deprecated 2.3.0
             */
            this.enableInfiniteScrolling = false;
            /**
             * Emitted when the user clicks a list node
             */
            this.nodeClick = new core.EventEmitter();
            /**
             * Emitted when the user double-clicks a list node
             */
            this.nodeDblClick = new core.EventEmitter();
            /**
             * Emitted when the current display folder changes
             */
            this.folderChange = new core.EventEmitter();
            /**
             * Emitted when the user acts upon files with either single or double click
             * (depends on `navigation-mode`). Useful for integration with the
             * Viewer component.
             */
            this.preview = new core.EventEmitter();
            /**
             * Emitted when the Document List has loaded all items and is ready for use
             */
            this.ready = new core.EventEmitter();
            /**
             * Emitted when the API fails to get the Document List data
             */
            this.error = new core.EventEmitter();
            this.actions = [];
            this.contextActionHandler = new rxjs.Subject();
            this.noPermission = false;
            this.selection = new Array();
            this.layoutPresets = {};
            this.subscriptions = [];
            this.rowMenuCache = {};
        }
        /**
         * @param {?} node
         * @return {?}
         */
        DocumentListComponent.prototype.getContextActions = /**
         * @param {?} node
         * @return {?}
         */
            function (node) {
                var _this = this;
                if (node && node.entry) {
                    /** @type {?} */
                    var actions = this.getNodeActions(node);
                    if (actions && actions.length > 0) {
                        return actions.map(function (currentAction) {
                            return {
                                model: currentAction,
                                node: node,
                                subject: _this.contextActionHandler
                            };
                        });
                    }
                }
                return null;
            };
        Object.defineProperty(DocumentListComponent.prototype, "supportedPageSizes", {
            /** @deprecated 2.3.0 define it in pagination */
            get: /**
             * @deprecated 2.3.0 define it in pagination
             * @return {?}
             */ function () {
                return this.preferences.getDefaultPageSizes();
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(DocumentListComponent.prototype, "hasCustomLayout", {
            get: /**
             * @return {?}
             */ function () {
                return this.columnList && this.columnList.columns && this.columnList.columns.length > 0;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        DocumentListComponent.prototype.getDefaultSorting = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var defaultSorting;
                if (this.sorting) {
                    var _a = __read(this.sorting, 2), key = _a[0], direction = _a[1];
                    defaultSorting = new adfCore.DataSorting(key, direction);
                }
                return defaultSorting;
            };
        /**
         * @param {?=} name
         * @return {?}
         */
        DocumentListComponent.prototype.getLayoutPreset = /**
         * @param {?=} name
         * @return {?}
         */
            function (name) {
                if (name === void 0) {
                    name = 'default';
                }
                return (this.layoutPresets[name] || this.layoutPresets['default']).map(function (col) { return new adfCore.ObjectDataColumn(col); });
            };
        Object.defineProperty(DocumentListComponent.prototype, "pagination", {
            get: /**
             * @return {?}
             */ function () {
                /** @type {?} */
                var maxItems = this.preferences.paginationSize;
                if (!this._pagination) {
                    if (this.maxItems) {
                        maxItems = this.maxItems;
                    }
                    /** @type {?} */
                    var defaultPagination = /** @type {?} */ ({
                        maxItems: maxItems,
                        skipCount: 0,
                        totalItems: 0,
                        hasMoreItems: false
                    });
                    this._pagination = new rxjs.BehaviorSubject(defaultPagination);
                }
                return this._pagination;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        DocumentListComponent.prototype.isEmptyTemplateDefined = /**
         * @return {?}
         */
            function () {
                if (this.dataTable) {
                    if (this.emptyFolderTemplate) {
                        return true;
                    }
                }
                return false;
            };
        /**
         * @return {?}
         */
        DocumentListComponent.prototype.isNoPermissionTemplateDefined = /**
         * @return {?}
         */
            function () {
                if (this.dataTable) {
                    if (this.noPermissionTemplate) {
                        return true;
                    }
                }
                return false;
            };
        /**
         * @return {?}
         */
        DocumentListComponent.prototype.isMobile = /**
         * @return {?}
         */
            function () {
                return !!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            };
        /**
         * @return {?}
         */
        DocumentListComponent.prototype.isEmpty = /**
         * @return {?}
         */
            function () {
                return !this.data || this.data.getRows().length === 0;
            };
        /**
         * @return {?}
         */
        DocumentListComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.rowMenuCache = {};
                this.loadLayoutPresets();
                this.data = new ShareDataTableAdapter(this.documentListService, this.thumbnailService, null, this.getDefaultSorting(), this.sortingMode);
                this.data.thumbnails = this.thumbnails;
                this.data.permissionsStyle = this.permissionsStyle;
                if (this.rowFilter) {
                    this.data.setFilter(this.rowFilter);
                }
                if (this.imageResolver) {
                    this.data.setImageResolver(this.imageResolver);
                }
                this.subscriptions.push(this.contextActionHandler.subscribe(function (val) { return _this.contextActionCallback(val); }));
                this.enforceSingleClickNavigationForMobile();
            };
        /**
         * @return {?}
         */
        DocumentListComponent.prototype.ngAfterContentInit = /**
         * @return {?}
         */
            function () {
                var _this = this;
                if (this.columnList) {
                    this.subscriptions.push(this.columnList.columns.changes.subscribe(function () {
                        _this.setTableSchema();
                    }));
                }
                this.setTableSchema();
            };
        /**
         * @return {?}
         */
        DocumentListComponent.prototype.setTableSchema = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var schema = [];
                if (this.hasCustomLayout) {
                    schema = this.columnList.columns.map(function (c) { return (c); });
                }
                if (!this.data) {
                    this.data = new ShareDataTableAdapter(this.documentListService, this.thumbnailService, schema, this.getDefaultSorting(), this.sortingMode);
                }
                else if (schema && schema.length > 0) {
                    this.data.setColumns(schema);
                }
                /** @type {?} */
                var columns = this.data.getColumns();
                if (!columns || columns.length === 0) {
                    this.setupDefaultColumns(this.currentFolderId);
                }
            };
        /**
         * @param {?} changes
         * @return {?}
         */
        DocumentListComponent.prototype.ngOnChanges = /**
         * @param {?} changes
         * @return {?}
         */
            function (changes) {
                var _this = this;
                this.resetSelection();
                if (this.data) {
                    this.data.thumbnails = this.thumbnails;
                }
                if (changes["sortingMode"] && !changes["sortingMode"].firstChange && this.data) {
                    this.data.sortingMode = changes["sortingMode"].currentValue;
                }
                if (changes["sorting"] && !changes["sorting"].firstChange && this.data) {
                    /** @type {?} */
                    var newValue = changes["sorting"].currentValue;
                    if (newValue && newValue.length > 0) {
                        var _a = __read(newValue, 2), key = _a[0], direction = _a[1];
                        this.data.setSorting(new adfCore.DataSorting(key, direction));
                    }
                }
                if (changes["folderNode"] && changes["folderNode"].currentValue) {
                    this.currentFolderId = changes["folderNode"].currentValue.id;
                    this.resetNewFolderPagination();
                    this.loadFolder();
                }
                else if (changes["currentFolderId"] &&
                    changes["currentFolderId"].currentValue &&
                    changes["currentFolderId"].currentValue !== changes["currentFolderId"].previousValue) {
                    this.resetNewFolderPagination();
                    this.loadFolder();
                }
                else if (this.data) {
                    if (changes["node"] && changes["node"].currentValue) {
                        this.data.loadPage(changes["node"].currentValue);
                        this.onDataReady(changes["node"].currentValue);
                    }
                    else if (changes["rowFilter"] && changes["rowFilter"].currentValue !== changes["rowFilter"].previousValue) {
                        this.data.setFilter(changes["rowFilter"].currentValue);
                        if (this.currentFolderId) {
                            this.loadFolderNodesByFolderNodeId(this.currentFolderId, this.pagination.getValue()).catch(function (err) { return _this.error.emit(err); });
                        }
                    }
                    else if (changes["imageResolver"]) {
                        this.data.setImageResolver(changes["imageResolver"].currentValue);
                    }
                }
            };
        /**
         * @return {?}
         */
        DocumentListComponent.prototype.reload = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.ngZone.run(function () {
                    _this.resetSelection();
                    if (_this.node) {
                        _this.data.loadPage(_this.node);
                        _this.onDataReady(_this.node);
                    }
                    else {
                        _this.loadFolder();
                    }
                });
            };
        /**
         * @param {?} action
         * @return {?}
         */
        DocumentListComponent.prototype.contextActionCallback = /**
         * @param {?} action
         * @return {?}
         */
            function (action) {
                if (action) {
                    this.executeContentAction(action.node, action.model);
                }
            };
        /**
         * @param {?} node
         * @return {?}
         */
        DocumentListComponent.prototype.getNodeActions = /**
         * @param {?} node
         * @return {?}
         */
            function (node) {
                var _this = this;
                if (node && node.entry) {
                    /** @type {?} */
                    var target_1 = null;
                    if (node.entry.isFile) {
                        target_1 = 'document';
                    }
                    else if (node.entry.isFolder) {
                        target_1 = 'folder';
                    }
                    if (target_1) {
                        /** @type {?} */
                        var actions = this.rowMenuCache[node.entry.id];
                        if (actions) {
                            actions.forEach(function (action) {
                                _this.refreshAction(action, node);
                            });
                            return actions;
                        }
                        /** @type {?} */
                        var actionsByTarget = this.actions
                            .filter(function (entry) {
                            /** @type {?} */
                            var isVisible = (typeof entry.visible === 'function')
                                ? entry.visible(node)
                                : entry.visible;
                            return isVisible && entry.target.toLowerCase() === target_1;
                        })
                            .map(function (action) { return new ContentActionModel(action); });
                        actionsByTarget.forEach(function (action) {
                            _this.refreshAction(action, node);
                        });
                        this.rowMenuCache[node.entry.id] = actionsByTarget;
                        return actionsByTarget;
                    }
                }
                return [];
            };
        /**
         * @param {?} action
         * @param {?} node
         * @return {?}
         */
        DocumentListComponent.prototype.refreshAction = /**
         * @param {?} action
         * @param {?} node
         * @return {?}
         */
            function (action, node) {
                action.disabled = this.isActionDisabled(action, node);
                action.visible = this.isActionVisible(action, node);
            };
        /**
         * @param {?} action
         * @param {?} node
         * @return {?}
         */
        DocumentListComponent.prototype.isActionVisible = /**
         * @param {?} action
         * @param {?} node
         * @return {?}
         */
            function (action, node) {
                if (typeof action.visible === 'function') {
                    return action.visible(node);
                }
                return action.visible;
            };
        /**
         * @param {?} action
         * @param {?} node
         * @return {?}
         */
        DocumentListComponent.prototype.isActionDisabled = /**
         * @param {?} action
         * @param {?} node
         * @return {?}
         */
            function (action, node) {
                if (typeof action.disabled === 'function') {
                    return action.disabled(node);
                }
                if (action.permission && action.disableWithNoPermission && !this.contentService.hasPermission(node.entry, action.permission)) {
                    return true;
                }
                return action.disabled;
            };
        /**
         * @param {?=} e
         * @return {?}
         */
        DocumentListComponent.prototype.onShowContextMenu = /**
         * @param {?=} e
         * @return {?}
         */
            function (e) {
                if (e && this.contextMenuActions) {
                    e.preventDefault();
                }
            };
        /**
         * @param {?} node
         * @return {?}
         */
        DocumentListComponent.prototype.performNavigation = /**
         * @param {?} node
         * @return {?}
         */
            function (node) {
                if (this.canNavigateFolder(node)) {
                    this.updateFolderData(node);
                    return true;
                }
                return false;
            };
        /**
         * @param {?} node
         * @return {?}
         */
        DocumentListComponent.prototype.performCustomSourceNavigation = /**
         * @param {?} node
         * @return {?}
         */
            function (node) {
                if (this.customResourcesService.isCustomSource(this.currentFolderId)) {
                    this.updateFolderData(node);
                    return true;
                }
                return false;
            };
        /**
         * @param {?} node
         * @return {?}
         */
        DocumentListComponent.prototype.updateFolderData = /**
         * @param {?} node
         * @return {?}
         */
            function (node) {
                this.resetNewFolderPagination();
                this.currentFolderId = node.entry.id;
                this.reload();
                this.folderChange.emit(new NodeEntryEvent(node.entry));
            };
        /**
         * @param {?} nodeId
         * @return {?}
         */
        DocumentListComponent.prototype.updateCustomSourceData = /**
         * @param {?} nodeId
         * @return {?}
         */
            function (nodeId) {
                this.folderNode = null;
                this.currentFolderId = nodeId;
            };
        /**
         * Invoked when executing content action for a document or folder.
         * @param node Node to be the context of the execution.
         * @param action Action to be executed against the context.
         */
        /**
         * Invoked when executing content action for a document or folder.
         * @param {?} node Node to be the context of the execution.
         * @param {?} action Action to be executed against the context.
         * @return {?}
         */
        DocumentListComponent.prototype.executeContentAction = /**
         * Invoked when executing content action for a document or folder.
         * @param {?} node Node to be the context of the execution.
         * @param {?} action Action to be executed against the context.
         * @return {?}
         */
            function (node, action) {
                if (node && node.entry && action) {
                    /** @type {?} */
                    var handlerSub = void 0;
                    if (typeof action.handler === 'function') {
                        handlerSub = action.handler(node, this, action.permission);
                    }
                    else {
                        handlerSub = rxjs.of(true);
                    }
                    if (typeof action.execute === 'function' && handlerSub) {
                        handlerSub.subscribe(function () {
                            action.execute(node);
                        });
                    }
                }
            };
        /**
         * @return {?}
         */
        DocumentListComponent.prototype.loadFolder = /**
         * @return {?}
         */
            function () {
                var _this = this;
                if (!this.pagination.getValue().merge) {
                    this.loading = true;
                }
                if (!this.hasCustomLayout) {
                    this.setupDefaultColumns(this.currentFolderId);
                }
                if (this.folderNode) {
                    return this.loadFolderNodesByFolderNodeId(this.folderNode.id, this.pagination.getValue())
                        .catch(function (err) { return _this.handleError(err); });
                }
                else {
                    this.loadFolderByNodeId(this.currentFolderId);
                }
            };
        /**
         * @param {?} nodeId
         * @return {?}
         */
        DocumentListComponent.prototype.loadFolderByNodeId = /**
         * @param {?} nodeId
         * @return {?}
         */
            function (nodeId) {
                var _this = this;
                if (this.customResourcesService.isCustomSource(nodeId)) {
                    this.updateCustomSourceData(nodeId);
                    this.customResourcesService.loadFolderByNodeId(nodeId, this.pagination.getValue(), this.includeFields)
                        .subscribe(function (page) {
                        _this.onPageLoaded(page);
                    }, function (err) {
                        _this.error.emit(err);
                    });
                }
                else {
                    this.documentListService
                        .getFolderNode(nodeId, this.includeFields)
                        .subscribe(function (node) {
                        _this.folderNode = node;
                        return _this.loadFolderNodesByFolderNodeId(node.id, _this.pagination.getValue())
                            .catch(function (err) { return _this.handleError(err); });
                    }, function (err) {
                        _this.handleError(err);
                    });
                }
            };
        /**
         * @param {?} id
         * @param {?} pagination
         * @return {?}
         */
        DocumentListComponent.prototype.loadFolderNodesByFolderNodeId = /**
         * @param {?} id
         * @param {?} pagination
         * @return {?}
         */
            function (id, pagination) {
                var _this = this;
                return new Promise(function (resolve, reject) {
                    _this.documentListService
                        .getFolder(null, {
                        maxItems: pagination.maxItems,
                        skipCount: pagination.skipCount,
                        rootFolderId: id
                    }, _this.includeFields)
                        .subscribe(function (nodePaging) {
                        _this.data.loadPage(/** @type {?} */ (nodePaging), _this.pagination.getValue().merge);
                        _this.loading = false;
                        _this.onDataReady(nodePaging);
                        resolve(true);
                    }, function (err) {
                        _this.handleError(err);
                    });
                });
            };
        /**
         * @return {?}
         */
        DocumentListComponent.prototype.resetSelection = /**
         * @return {?}
         */
            function () {
                this.dataTable.resetSelection();
                this.selection = [];
                this.noPermission = false;
            };
        /**
         * @param {?} nodePaging
         * @return {?}
         */
        DocumentListComponent.prototype.onPageLoaded = /**
         * @param {?} nodePaging
         * @return {?}
         */
            function (nodePaging) {
                if (nodePaging) {
                    this.data.loadPage(nodePaging, this.pagination.getValue().merge);
                    this.loading = false;
                    this.onDataReady(nodePaging);
                }
            };
        /**
         * Creates a set of predefined columns.
         */
        /**
         * Creates a set of predefined columns.
         * @param {?=} preset
         * @return {?}
         */
        DocumentListComponent.prototype.setupDefaultColumns = /**
         * Creates a set of predefined columns.
         * @param {?=} preset
         * @return {?}
         */
            function (preset) {
                if (preset === void 0) {
                    preset = 'default';
                }
                if (this.data) {
                    /** @type {?} */
                    var columns = this.getLayoutPreset(preset);
                    this.data.setColumns(columns);
                }
            };
        /**
         * @param {?} node
         * @return {?}
         */
        DocumentListComponent.prototype.onPreviewFile = /**
         * @param {?} node
         * @return {?}
         */
            function (node) {
                if (node) {
                    this.preview.emit(new NodeEntityEvent(node));
                }
            };
        /**
         * @param {?} node
         * @return {?}
         */
        DocumentListComponent.prototype.onNodeClick = /**
         * @param {?} node
         * @return {?}
         */
            function (node) {
                /** @type {?} */
                var domEvent = new CustomEvent('node-click', {
                    detail: {
                        sender: this,
                        node: node
                    },
                    bubbles: true
                });
                this.elementRef.nativeElement.dispatchEvent(domEvent);
                /** @type {?} */
                var event = new NodeEntityEvent(node);
                this.nodeClick.emit(event);
                if (!event.defaultPrevented) {
                    if (this.navigate && this.navigationMode === DocumentListComponent.SINGLE_CLICK_NAVIGATION) {
                        if (node && node.entry) {
                            if (node.entry.isFile) {
                                this.onPreviewFile(node);
                            }
                            if (node.entry.isFolder) {
                                this.performNavigation(node);
                            }
                        }
                    }
                }
            };
        /**
         * @param {?} node
         * @return {?}
         */
        DocumentListComponent.prototype.onNodeDblClick = /**
         * @param {?} node
         * @return {?}
         */
            function (node) {
                /** @type {?} */
                var domEvent = new CustomEvent('node-dblclick', {
                    detail: {
                        sender: this,
                        node: node
                    },
                    bubbles: true
                });
                this.elementRef.nativeElement.dispatchEvent(domEvent);
                /** @type {?} */
                var event = new NodeEntityEvent(node);
                this.nodeDblClick.emit(event);
                if (!event.defaultPrevented) {
                    if (this.navigate && this.navigationMode === DocumentListComponent.DOUBLE_CLICK_NAVIGATION) {
                        if (node && node.entry) {
                            if (node.entry.isFile) {
                                this.onPreviewFile(node);
                            }
                            if (node.entry.isFolder) {
                                this.performNavigation(node);
                            }
                        }
                    }
                }
            };
        /**
         * @param {?} event
         * @return {?}
         */
        DocumentListComponent.prototype.onNodeSelect = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                this.selection = event.selection.map(function (entry) { return entry.node; });
                /** @type {?} */
                var domEvent = new CustomEvent('node-select', {
                    detail: {
                        node: event.row.node,
                        selection: this.selection
                    },
                    bubbles: true
                });
                this.elementRef.nativeElement.dispatchEvent(domEvent);
            };
        /**
         * @param {?} event
         * @return {?}
         */
        DocumentListComponent.prototype.onNodeUnselect = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                this.selection = event.selection.map(function (entry) { return entry.node; });
                /** @type {?} */
                var domEvent = new CustomEvent('node-unselect', {
                    detail: {
                        node: event.row.node,
                        selection: this.selection
                    },
                    bubbles: true
                });
                this.elementRef.nativeElement.dispatchEvent(domEvent);
            };
        /**
         * @param {?} event
         * @return {?}
         */
        DocumentListComponent.prototype.onShowRowContextMenu = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                if (this.contextMenuActions) {
                    /** @type {?} */
                    var args = event.value;
                    /** @type {?} */
                    var node = ( /** @type {?} */(args.row)).node;
                    if (node) {
                        args.actions = this.getContextActions(node) || [];
                    }
                }
            };
        /**
         * @param {?} event
         * @return {?}
         */
        DocumentListComponent.prototype.onShowRowActionsMenu = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                if (this.contentActions) {
                    /** @type {?} */
                    var args = event.value;
                    /** @type {?} */
                    var node = ( /** @type {?} */(args.row)).node;
                    if (node) {
                        args.actions = this.getNodeActions(node) || [];
                    }
                }
            };
        /**
         * @param {?} event
         * @return {?}
         */
        DocumentListComponent.prototype.onExecuteRowAction = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                if (this.contentActions) {
                    /** @type {?} */
                    var args = event.value;
                    /** @type {?} */
                    var node = ( /** @type {?} */(args.row)).node;
                    /** @type {?} */
                    var action = ( /** @type {?} */(args.action));
                    this.executeContentAction(node, action);
                }
            };
        /**
         * @return {?}
         */
        DocumentListComponent.prototype.enforceSingleClickNavigationForMobile = /**
         * @return {?}
         */
            function () {
                if (this.isMobile()) {
                    this.navigationMode = DocumentListComponent.SINGLE_CLICK_NAVIGATION;
                }
            };
        /**
         * @param {?} node
         * @return {?}
         */
        DocumentListComponent.prototype.canNavigateFolder = /**
         * @param {?} node
         * @return {?}
         */
            function (node) {
                /** @type {?} */
                var canNavigateFolder = false;
                if (this.customResourcesService.isCustomSource(this.currentFolderId)) {
                    canNavigateFolder = false;
                }
                else if (node && node.entry && node.entry.isFolder) {
                    canNavigateFolder = true;
                }
                return canNavigateFolder;
            };
        /**
         * @return {?}
         */
        DocumentListComponent.prototype.loadLayoutPresets = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var externalSettings = this.appConfig.get('document-list.presets', null);
                if (externalSettings) {
                    this.layoutPresets = Object.assign({}, presetsDefaultModel, externalSettings);
                }
                else {
                    this.layoutPresets = presetsDefaultModel;
                }
            };
        /**
         * @param {?} nodePaging
         * @return {?}
         */
        DocumentListComponent.prototype.onDataReady = /**
         * @param {?} nodePaging
         * @return {?}
         */
            function (nodePaging) {
                this.ready.emit(nodePaging);
                this.pagination.next(nodePaging.list.pagination);
            };
        /**
         * @param {?} pagination
         * @return {?}
         */
        DocumentListComponent.prototype.updatePagination = /**
         * @param {?} pagination
         * @return {?}
         */
            function (pagination) {
                this.pagination.next(pagination);
                this.reload();
            };
        /**
         * @param {?} nodeId
         * @return {?}
         */
        DocumentListComponent.prototype.navigateTo = /**
         * @param {?} nodeId
         * @return {?}
         */
            function (nodeId) {
                this.currentFolderId = nodeId;
                this.resetNewFolderPagination();
                this.loadFolder();
                this.folderChange.emit(new NodeEntryEvent({ id: nodeId }));
            };
        /**
         * @return {?}
         */
        DocumentListComponent.prototype.resetNewFolderPagination = /**
         * @return {?}
         */
            function () {
                this.folderNode = null;
                this.pagination.value.skipCount = 0;
            };
        /**
         * @return {?}
         */
        DocumentListComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                this.subscriptions.forEach(function (s) { return s.unsubscribe(); });
                this.subscriptions = [];
            };
        /**
         * @param {?} err
         * @return {?}
         */
        DocumentListComponent.prototype.handleError = /**
         * @param {?} err
         * @return {?}
         */
            function (err) {
                if (err.message) {
                    if (JSON.parse(err.message).error.statusCode === 403) {
                        this.loading = false;
                        this.noPermission = true;
                    }
                }
                this.error.emit(err);
            };
        DocumentListComponent.SINGLE_CLICK_NAVIGATION = 'click';
        DocumentListComponent.DOUBLE_CLICK_NAVIGATION = 'dblclick';
        DocumentListComponent.DEFAULT_PAGE_SIZE = 20;
        DocumentListComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-document-list',
                        template: "<adf-datatable\n    #dataTable\n    [selectionMode]=\"selectionMode\"\n    [data]=\"data\"\n    [actions]=\"contentActions\"\n    [actionsPosition]=\"contentActionsPosition\"\n    [multiselect]=\"multiselect\"\n    [allowDropFiles]=\"allowDropFiles\"\n    [contextMenu]=\"contextMenuActions\"\n    [rowStyle]=\"rowStyle\"\n    [rowStyleClass]=\"rowStyleClass\"\n    [loading]=\"loading\"\n    [display]=\"display\"\n    [noPermission]=\"noPermission\"\n    [showHeader]=\"!isEmpty() && showHeader\"\n    [rowMenuCacheEnabled]=\"false\"\n    (showRowContextMenu)=\"onShowRowContextMenu($event)\"\n    (showRowActionsMenu)=\"onShowRowActionsMenu($event)\"\n    (executeRowAction)=\"onExecuteRowAction($event)\"\n    (rowClick)=\"onNodeClick($event.value?.node)\"\n    (rowDblClick)=\"onNodeDblClick($event.value?.node)\"\n    (row-select)=\"onNodeSelect($event.detail)\"\n    (row-unselect)=\"onNodeUnselect($event.detail)\"\n    [class.adf-datatable-gallery-thumbnails]=\"data.thumbnails\">\n\n    <div *ngIf=\"!isEmptyTemplateDefined()\">\n        <no-content-template>\n            <ng-template>\n                <adf-empty-list>\n                    <div class=\"adf-empty-list_template adf-empty-folder\">\n                        <div class=\"adf-empty-folder-this-space-is-empty\">{{'ADF-DOCUMENT-LIST.EMPTY.HEADER' | translate}}</div>\n                        <div fxHide.lt-md=\"true\" class=\"adf-empty-folder-drag-drop\">{{ 'ADF-DATATABLE.EMPTY.DRAG-AND-DROP.TITLE' | translate }}</div>\n                        <div fxHide.lt-md=\"true\" class=\"adf-empty-folder-any-files-here-to-add\">{{ 'ADF-DATATABLE.EMPTY.DRAG-AND-DROP.SUBTITLE' | translate }}</div>\n                        <img class=\"adf-empty-folder-image\" [src]=\"emptyFolderImageUrl\">\n                    </div>\n                    <!-- <div adf-empty-list-header class=\"adf-empty-list-header\"> {{'ADF-DOCUMENT-LIST.EMPTY.HEADER' | translate}} </div> -->\n                </adf-empty-list>\n            </ng-template>\n        </no-content-template>\n    </div>\n\n    <div *ngIf=\"!isNoPermissionTemplateDefined()\">\n        <no-permission-template>\n            <ng-template>\n                <div class=\"adf-no-permission__template\">\n                    <mat-icon>ic_error</mat-icon>\n                    <p class=\"adf-no-permission__template--text\">{{ 'ADF-DOCUMENT-LIST.NO_PERMISSION' | translate }}</p>\n                </div>\n            </ng-template>\n        </no-permission-template>\n    </div>\n\n    <div>\n        <loading-content-template>\n            <ng-template>\n                <div class=\"adf-document-list-loading-container\">\n                    <mat-progress-spinner\n                        id=\"adf-document-list-loading\"\n                        class=\"adf-document-list-loading-margin\"\n                        [color]=\"'primary'\"\n                        [mode]=\"'indeterminate'\">\n                    </mat-progress-spinner>\n                </div>\n            </ng-template>\n        </loading-content-template>\n    </div>\n</adf-datatable>\n",
                        encapsulation: core.ViewEncapsulation.None,
                        styles: [""]
                    }] }
        ];
        /** @nocollapse */
        DocumentListComponent.ctorParameters = function () {
            return [
                { type: DocumentListService },
                { type: core.NgZone },
                { type: core.ElementRef },
                { type: adfCore.AppConfigService },
                { type: adfCore.UserPreferencesService },
                { type: CustomResourcesService },
                { type: adfCore.ContentService },
                { type: adfCore.ThumbnailService }
            ];
        };
        DocumentListComponent.propDecorators = {
            columnList: [{ type: core.ContentChild, args: [adfCore.DataColumnListComponent,] }],
            includeFields: [{ type: core.Input }],
            display: [{ type: core.Input }],
            permissionsStyle: [{ type: core.Input }],
            locationFormat: [{ type: core.Input }],
            navigate: [{ type: core.Input }],
            showHeader: [{ type: core.Input }],
            navigationMode: [{ type: core.Input }],
            thumbnails: [{ type: core.Input }],
            selectionMode: [{ type: core.Input }],
            multiselect: [{ type: core.Input }],
            contentActions: [{ type: core.Input }],
            contentActionsPosition: [{ type: core.Input }],
            contextMenuActions: [{ type: core.Input }],
            emptyFolderImageUrl: [{ type: core.Input }],
            allowDropFiles: [{ type: core.Input }],
            sorting: [{ type: core.Input }],
            sortingMode: [{ type: core.Input }],
            rowStyle: [{ type: core.Input }],
            rowStyleClass: [{ type: core.Input }],
            loading: [{ type: core.Input }],
            rowFilter: [{ type: core.Input }],
            imageResolver: [{ type: core.Input }],
            currentFolderId: [{ type: core.Input }],
            folderNode: [{ type: core.Input }],
            node: [{ type: core.Input }],
            maxItems: [{ type: core.Input }],
            skipCount: [{ type: core.Input }],
            enableInfiniteScrolling: [{ type: core.Input }],
            nodeClick: [{ type: core.Output }],
            nodeDblClick: [{ type: core.Output }],
            folderChange: [{ type: core.Output }],
            preview: [{ type: core.Output }],
            ready: [{ type: core.Output }],
            error: [{ type: core.Output }],
            dataTable: [{ type: core.ViewChild, args: ['dataTable',] }],
            onShowContextMenu: [{ type: core.HostListener, args: ['contextmenu', ['$event'],] }]
        };
        return DocumentListComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var ContentColumnListComponent = /** @class */ (function () {
        function ContentColumnListComponent(documentList, logService) {
            this.documentList = documentList;
            this.logService = logService;
            this.logService.log('ContentColumnListComponent is deprecated starting with 1.7.0 and may be removed in future versions. Use DataColumnListComponent instead.');
        }
        /**
         * Registers column model within the parent document list component.
         * @param column Column definition model to register.
         */
        /**
         * Registers column model within the parent document list component.
         * @param {?} column Column definition model to register.
         * @return {?}
         */
        ContentColumnListComponent.prototype.registerColumn = /**
         * Registers column model within the parent document list component.
         * @param {?} column Column definition model to register.
         * @return {?}
         */
            function (column) {
                if (this.documentList && column) {
                    /** @type {?} */
                    var columns = this.documentList.data.getColumns();
                    columns.push(column);
                    return true;
                }
                return false;
            };
        ContentColumnListComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'content-columns',
                        template: ''
                    }] }
        ];
        /** @nocollapse */
        ContentColumnListComponent.ctorParameters = function () {
            return [
                { type: DocumentListComponent },
                { type: adfCore.LogService }
            ];
        };
        return ContentColumnListComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var ContentColumnComponent = /** @class */ (function () {
        function ContentColumnComponent(list, logService) {
            this.list = list;
            this.logService = logService;
            this.type = 'text';
            this.sortable = false;
            this.title = '';
            this.logService.log('ContentColumnComponent is deprecated starting with 1.7.0 and may be removed in future versions. Use DataColumnComponent instead.');
        }
        /**
         * @return {?}
         */
        ContentColumnComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                if (!this.srTitle && this.key === '$thumbnail') {
                    this.srTitle = 'Thumbnail';
                }
            };
        /**
         * @return {?}
         */
        ContentColumnComponent.prototype.ngAfterContentInit = /**
         * @return {?}
         */
            function () {
                this.register();
            };
        /**
         * @return {?}
         */
        ContentColumnComponent.prototype.register = /**
         * @return {?}
         */
            function () {
                if (this.list) {
                    return this.list.registerColumn(this);
                }
                return false;
            };
        ContentColumnComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'content-column',
                        template: ''
                    }] }
        ];
        /** @nocollapse */
        ContentColumnComponent.ctorParameters = function () {
            return [
                { type: ContentColumnListComponent },
                { type: adfCore.LogService }
            ];
        };
        ContentColumnComponent.propDecorators = {
            key: [{ type: core.Input }],
            type: [{ type: core.Input }],
            format: [{ type: core.Input }],
            sortable: [{ type: core.Input }],
            title: [{ type: core.Input }],
            template: [{ type: core.ContentChild, args: [core.TemplateRef,] }],
            srTitle: [{ type: core.Input, args: ['sr-title',] }],
            cssClass: [{ type: core.Input, args: ['class',] }]
        };
        return ContentColumnComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /*!
     * @license
     * Copyright 2016 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var PermissionModel = /** @class */ (function () {
        function PermissionModel(obj) {
            if (obj) {
                this.type = obj.type || null;
                this.action = obj.action || null;
                this.permission = obj.permission || null;
            }
        }
        return PermissionModel;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var NodeActionsService = /** @class */ (function () {
        function NodeActionsService(contentDialogService, dialogRef, content, documentListService, apiService, dialog) {
            this.contentDialogService = contentDialogService;
            this.dialogRef = dialogRef;
            this.content = content;
            this.documentListService = documentListService;
            this.apiService = apiService;
            this.dialog = dialog;
            this.error = new core.EventEmitter();
        }
        /**
         * @param {?} node
         * @return {?}
         */
        NodeActionsService.prototype.downloadNode = /**
         * @param {?} node
         * @return {?}
         */
            function (node) {
                new NodeDownloadDirective(this.apiService, this.dialog)
                    .downloadNode(node);
            };
        /**
         * Copy content node
         *
         * @param {?} contentEntry node to copy
         * @param {?=} permission permission which is needed to apply the action
         * @return {?}
         */
        NodeActionsService.prototype.copyContent = /**
         * Copy content node
         *
         * @param {?} contentEntry node to copy
         * @param {?=} permission permission which is needed to apply the action
         * @return {?}
         */
            function (contentEntry, permission) {
                return this.doFileOperation('copy', 'content', contentEntry, permission);
            };
        /**
         * Copy folder node
         *
         * @param {?} contentEntry node to copy
         * @param {?=} permission permission which is needed to apply the action
         * @return {?}
         */
        NodeActionsService.prototype.copyFolder = /**
         * Copy folder node
         *
         * @param {?} contentEntry node to copy
         * @param {?=} permission permission which is needed to apply the action
         * @return {?}
         */
            function (contentEntry, permission) {
                return this.doFileOperation('copy', 'folder', contentEntry, permission);
            };
        /**
         * Move content node
         *
         * @param {?} contentEntry node to move
         * @param {?=} permission permission which is needed to apply the action
         * @return {?}
         */
        NodeActionsService.prototype.moveContent = /**
         * Move content node
         *
         * @param {?} contentEntry node to move
         * @param {?=} permission permission which is needed to apply the action
         * @return {?}
         */
            function (contentEntry, permission) {
                return this.doFileOperation('move', 'content', contentEntry, permission);
            };
        /**
         * Move folder node
         *
         * @param {?} contentEntry node to move
         * @param {?=} permission permission which is needed to apply the action
         * @return {?}
         */
        NodeActionsService.prototype.moveFolder = /**
         * Move folder node
         *
         * @param {?} contentEntry node to move
         * @param {?=} permission permission which is needed to apply the action
         * @return {?}
         */
            function (contentEntry, permission) {
                return this.doFileOperation('move', 'folder', contentEntry, permission);
            };
        /**
         * General method for performing the given operation (copy|move)
         *
         * @param {?} action the action to perform (copy|move)
         * @param {?} type type of the content (content|folder)
         * @param {?} contentEntry the contentEntry which has to have the action performed on
         * @param {?=} permission permission which is needed to apply the action
         * @return {?}
         */
        NodeActionsService.prototype.doFileOperation = /**
         * General method for performing the given operation (copy|move)
         *
         * @param {?} action the action to perform (copy|move)
         * @param {?} type type of the content (content|folder)
         * @param {?} contentEntry the contentEntry which has to have the action performed on
         * @param {?=} permission permission which is needed to apply the action
         * @return {?}
         */
            function (action, type, contentEntry, permission) {
                var _this = this;
                /** @type {?} */
                var observable = new rxjs.Subject();
                this.contentDialogService
                    .openCopyMoveDialog(action, contentEntry, permission)
                    .subscribe(function (selections) {
                    /** @type {?} */
                    var selection = selections[0];
                    _this.documentListService[action + "Node"].call(_this.documentListService, contentEntry.id, selection.id)
                        .subscribe(observable.next.bind(observable, "OPERATION.SUCCESS." + type.toUpperCase() + "." + action.toUpperCase()), observable.error.bind(observable));
                }, function (error) {
                    observable.error(error);
                    return observable;
                });
                return observable;
            };
        NodeActionsService.decorators = [
            { type: core.Injectable }
        ];
        /** @nocollapse */
        NodeActionsService.ctorParameters = function () {
            return [
                { type: ContentNodeDialogService },
                { type: material.MatDialog },
                { type: adfCore.ContentService },
                { type: DocumentListService },
                { type: adfCore.AlfrescoApiService },
                { type: material.MatDialog }
            ];
        };
        NodeActionsService.propDecorators = {
            error: [{ type: core.Output }]
        };
        return NodeActionsService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var DocumentActionsService = /** @class */ (function () {
        function DocumentActionsService(nodeActionsService, contentNodeDialogService, translation, documentListService, contentService) {
            this.nodeActionsService = nodeActionsService;
            this.contentNodeDialogService = contentNodeDialogService;
            this.translation = translation;
            this.documentListService = documentListService;
            this.contentService = contentService;
            this.permissionEvent = new rxjs.Subject();
            this.error = new rxjs.Subject();
            this.success = new rxjs.Subject();
            this.handlers = {};
            this.setupActionHandlers();
        }
        /**
         * Gets the handler for an action.
         * @param key Identifier of the action
         * @returns The handler for the action
         */
        /**
         * Gets the handler for an action.
         * @param {?} key Identifier of the action
         * @return {?} The handler for the action
         */
        DocumentActionsService.prototype.getHandler = /**
         * Gets the handler for an action.
         * @param {?} key Identifier of the action
         * @return {?} The handler for the action
         */
            function (key) {
                if (key) {
                    /** @type {?} */
                    var lkey = key.toLowerCase();
                    return this.handlers[lkey] || null;
                }
                return null;
            };
        /**
         * Sets a new handler for an action.
         * @param key Identifier of the action
         * @param handler Handler for the action
         * @returns False if the key was an empty/null string, true otherwise
         */
        /**
         * Sets a new handler for an action.
         * @param {?} key Identifier of the action
         * @param {?} handler Handler for the action
         * @return {?} False if the key was an empty/null string, true otherwise
         */
        DocumentActionsService.prototype.setHandler = /**
         * Sets a new handler for an action.
         * @param {?} key Identifier of the action
         * @param {?} handler Handler for the action
         * @return {?} False if the key was an empty/null string, true otherwise
         */
            function (key, handler) {
                if (key) {
                    /** @type {?} */
                    var lkey = key.toLowerCase();
                    this.handlers[lkey] = handler;
                    return true;
                }
                return false;
            };
        /**
         * Checks if actions can be executed for an item.
         * @param obj Item to receive an action
         * @returns True if the action can be executed on this item, false otherwise
         */
        /**
         * Checks if actions can be executed for an item.
         * @param {?} obj Item to receive an action
         * @return {?} True if the action can be executed on this item, false otherwise
         */
        DocumentActionsService.prototype.canExecuteAction = /**
         * Checks if actions can be executed for an item.
         * @param {?} obj Item to receive an action
         * @return {?} True if the action can be executed on this item, false otherwise
         */
            function (obj) {
                return this.documentListService && obj && obj.entry.isFile === true;
            };
        /**
         * @return {?}
         */
        DocumentActionsService.prototype.setupActionHandlers = /**
         * @return {?}
         */
            function () {
                this.handlers['copy'] = this.copyNode.bind(this);
                this.handlers['move'] = this.moveNode.bind(this);
                this.handlers['delete'] = this.deleteNode.bind(this);
                this.handlers['download'] = this.downloadNode.bind(this);
                this.handlers['lock'] = this.lockNode.bind(this);
            };
        /**
         * @param {?} node
         * @param {?=} target
         * @param {?=} permission
         * @return {?}
         */
        DocumentActionsService.prototype.lockNode = /**
         * @param {?} node
         * @param {?=} target
         * @param {?=} permission
         * @return {?}
         */
            function (node, target, permission) {
                return this.contentNodeDialogService.openLockNodeDialog(node.entry);
            };
        /**
         * @param {?} obj
         * @param {?=} target
         * @param {?=} permission
         * @return {?}
         */
        DocumentActionsService.prototype.downloadNode = /**
         * @param {?} obj
         * @param {?=} target
         * @param {?=} permission
         * @return {?}
         */
            function (obj, target, permission) {
                this.nodeActionsService.downloadNode(obj);
            };
        /**
         * @param {?} node
         * @param {?=} target
         * @param {?=} permission
         * @return {?}
         */
        DocumentActionsService.prototype.copyNode = /**
         * @param {?} node
         * @param {?=} target
         * @param {?=} permission
         * @return {?}
         */
            function (node, target, permission) {
                /** @type {?} */
                var actionObservable = this.nodeActionsService.copyContent(node.entry, permission);
                this.prepareHandlers(actionObservable, 'content', 'copy', target, permission);
                return actionObservable;
            };
        /**
         * @param {?} node
         * @param {?=} target
         * @param {?=} permission
         * @return {?}
         */
        DocumentActionsService.prototype.moveNode = /**
         * @param {?} node
         * @param {?=} target
         * @param {?=} permission
         * @return {?}
         */
            function (node, target, permission) {
                /** @type {?} */
                var actionObservable = this.nodeActionsService.moveContent(node.entry, permission);
                this.prepareHandlers(actionObservable, 'content', 'move', target, permission);
                return actionObservable;
            };
        /**
         * @param {?} actionObservable
         * @param {?} type
         * @param {?} action
         * @param {?=} target
         * @param {?=} permission
         * @return {?}
         */
        DocumentActionsService.prototype.prepareHandlers = /**
         * @param {?} actionObservable
         * @param {?} type
         * @param {?} action
         * @param {?=} target
         * @param {?=} permission
         * @return {?}
         */
            function (actionObservable, type, action, target, permission) {
                var _this = this;
                actionObservable.subscribe(function (fileOperationMessage) {
                    _this.success.next(fileOperationMessage);
                }, this.error.next.bind(this.error));
            };
        /**
         * @param {?} node
         * @param {?=} target
         * @param {?=} permission
         * @return {?}
         */
        DocumentActionsService.prototype.deleteNode = /**
         * @param {?} node
         * @param {?=} target
         * @param {?=} permission
         * @return {?}
         */
            function (node, target, permission) {
                var _this = this;
                /** @type {?} */
                var handlerObservable;
                if (this.canExecuteAction(node)) {
                    if (this.contentService.hasPermission(node.entry, permission)) {
                        handlerObservable = this.documentListService.deleteNode(node.entry.id);
                        handlerObservable.subscribe(function () {
                            /** @type {?} */
                            var message = _this.translation.instant('CORE.DELETE_NODE.SINGULAR', { name: node.entry.name });
                            _this.success.next(message);
                        }, function () {
                            /** @type {?} */
                            var message = _this.translation.instant('CORE.DELETE_NODE.ERROR_SINGULAR', { name: node.entry.name });
                            _this.error.next(message);
                        });
                        return handlerObservable;
                    }
                    else {
                        this.permissionEvent.next(new PermissionModel({
                            type: 'content',
                            action: 'delete',
                            permission: permission
                        }));
                        return rxjs.throwError(new Error('No permission to delete'));
                    }
                }
            };
        DocumentActionsService.decorators = [
            { type: core.Injectable }
        ];
        /** @nocollapse */
        DocumentActionsService.ctorParameters = function () {
            return [
                { type: NodeActionsService },
                { type: ContentNodeDialogService },
                { type: adfCore.TranslationService },
                { type: DocumentListService },
                { type: adfCore.ContentService }
            ];
        };
        return DocumentActionsService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var FolderActionsService = /** @class */ (function () {
        function FolderActionsService(nodeActionsService, documentListService, contentService, translation) {
            this.nodeActionsService = nodeActionsService;
            this.documentListService = documentListService;
            this.contentService = contentService;
            this.translation = translation;
            this.permissionEvent = new rxjs.Subject();
            this.error = new rxjs.Subject();
            this.success = new rxjs.Subject();
            this.handlers = {};
            this.setupActionHandlers();
        }
        /**
         * Gets the handler function for an action.
         * @param key Identifier for the action
         * @returns The handler function
         */
        /**
         * Gets the handler function for an action.
         * @param {?} key Identifier for the action
         * @return {?} The handler function
         */
        FolderActionsService.prototype.getHandler = /**
         * Gets the handler function for an action.
         * @param {?} key Identifier for the action
         * @return {?} The handler function
         */
            function (key) {
                if (key) {
                    /** @type {?} */
                    var lkey = key.toLowerCase();
                    return this.handlers[lkey] || null;
                }
                return null;
            };
        /**
         * Sets a new handler function for an action.
         * @param key Identifier for the action
         * @param handler The new handler function
         * @returns True if the key was a valid action identifier, false otherwise
         */
        /**
         * Sets a new handler function for an action.
         * @param {?} key Identifier for the action
         * @param {?} handler The new handler function
         * @return {?} True if the key was a valid action identifier, false otherwise
         */
        FolderActionsService.prototype.setHandler = /**
         * Sets a new handler function for an action.
         * @param {?} key Identifier for the action
         * @param {?} handler The new handler function
         * @return {?} True if the key was a valid action identifier, false otherwise
         */
            function (key, handler) {
                if (key) {
                    /** @type {?} */
                    var lkey = key.toLowerCase();
                    this.handlers[lkey] = handler;
                    return true;
                }
                return false;
            };
        /**
         * Checks if an action is available for a particular item.
         * @param obj Item to check
         * @returns True if the action is available, false otherwise
         */
        /**
         * Checks if an action is available for a particular item.
         * @param {?} obj Item to check
         * @return {?} True if the action is available, false otherwise
         */
        FolderActionsService.prototype.canExecuteAction = /**
         * Checks if an action is available for a particular item.
         * @param {?} obj Item to check
         * @return {?} True if the action is available, false otherwise
         */
            function (obj) {
                return this.documentListService && obj && obj.entry.isFolder === true;
            };
        /**
         * @return {?}
         */
        FolderActionsService.prototype.setupActionHandlers = /**
         * @return {?}
         */
            function () {
                this.handlers['copy'] = this.copyNode.bind(this);
                this.handlers['move'] = this.moveNode.bind(this);
                this.handlers['delete'] = this.deleteNode.bind(this);
                this.handlers['download'] = this.downloadNode.bind(this);
            };
        /**
         * @param {?} obj
         * @param {?=} target
         * @param {?=} permission
         * @return {?}
         */
        FolderActionsService.prototype.downloadNode = /**
         * @param {?} obj
         * @param {?=} target
         * @param {?=} permission
         * @return {?}
         */
            function (obj, target, permission) {
                this.nodeActionsService.downloadNode(obj);
            };
        /**
         * @param {?} obj
         * @param {?=} target
         * @param {?=} permission
         * @return {?}
         */
        FolderActionsService.prototype.copyNode = /**
         * @param {?} obj
         * @param {?=} target
         * @param {?=} permission
         * @return {?}
         */
            function (obj, target, permission) {
                /** @type {?} */
                var actionObservable = this.nodeActionsService.copyFolder(obj.entry, permission);
                this.prepareHandlers(actionObservable, 'folder', 'copy', target, permission);
                return actionObservable;
            };
        /**
         * @param {?} obj
         * @param {?=} target
         * @param {?=} permission
         * @return {?}
         */
        FolderActionsService.prototype.moveNode = /**
         * @param {?} obj
         * @param {?=} target
         * @param {?=} permission
         * @return {?}
         */
            function (obj, target, permission) {
                /** @type {?} */
                var actionObservable = this.nodeActionsService.moveFolder(obj.entry, permission);
                this.prepareHandlers(actionObservable, 'folder', 'move', target, permission);
                return actionObservable;
            };
        /**
         * @param {?} actionObservable
         * @param {?} type
         * @param {?} action
         * @param {?=} target
         * @param {?=} permission
         * @return {?}
         */
        FolderActionsService.prototype.prepareHandlers = /**
         * @param {?} actionObservable
         * @param {?} type
         * @param {?} action
         * @param {?=} target
         * @param {?=} permission
         * @return {?}
         */
            function (actionObservable, type, action, target, permission) {
                var _this = this;
                actionObservable.subscribe(function (fileOperationMessage) {
                    if (target && typeof target.reload === 'function') {
                        target.reload();
                    }
                    _this.success.next(fileOperationMessage);
                }, this.error.next.bind(this.error));
            };
        /**
         * @param {?} node
         * @param {?=} target
         * @param {?=} permission
         * @return {?}
         */
        FolderActionsService.prototype.deleteNode = /**
         * @param {?} node
         * @param {?=} target
         * @param {?=} permission
         * @return {?}
         */
            function (node, target, permission) {
                var _this = this;
                /** @type {?} */
                var handlerObservable;
                if (this.canExecuteAction(node)) {
                    if (this.contentService.hasPermission(node.entry, permission)) {
                        handlerObservable = this.documentListService.deleteNode(node.entry.id);
                        handlerObservable.subscribe(function () {
                            if (target && typeof target.reload === 'function') {
                                target.reload();
                            }
                            /** @type {?} */
                            var message = _this.translation.instant('CORE.DELETE_NODE.SINGULAR', { name: node.entry.name });
                            _this.success.next(message);
                        }, function () {
                            /** @type {?} */
                            var message = _this.translation.instant('CORE.DELETE_NODE.ERROR_SINGULAR', { name: node.entry.name });
                            _this.error.next(message);
                        });
                        return handlerObservable;
                    }
                    else {
                        this.permissionEvent.next(new PermissionModel({ type: 'folder', action: 'delete', permission: permission }));
                        return rxjs.throwError(new Error('No permission to delete'));
                    }
                }
            };
        FolderActionsService.decorators = [
            { type: core.Injectable }
        ];
        /** @nocollapse */
        FolderActionsService.ctorParameters = function () {
            return [
                { type: NodeActionsService },
                { type: DocumentListService },
                { type: adfCore.ContentService },
                { type: adfCore.TranslationService }
            ];
        };
        return FolderActionsService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var ContentActionListComponent = /** @class */ (function () {
        function ContentActionListComponent(documentList) {
            this.documentList = documentList;
        }
        /**
         * Registers action handler within the parent document list component.
         * @param action Action model to register.
         */
        /**
         * Registers action handler within the parent document list component.
         * @param {?} action Action model to register.
         * @return {?}
         */
        ContentActionListComponent.prototype.registerAction = /**
         * Registers action handler within the parent document list component.
         * @param {?} action Action model to register.
         * @return {?}
         */
            function (action) {
                if (this.documentList && action) {
                    this.documentList.actions.push(action);
                    return true;
                }
                return false;
            };
        /**
         * @param {?} action
         * @return {?}
         */
        ContentActionListComponent.prototype.unregisterAction = /**
         * @param {?} action
         * @return {?}
         */
            function (action) {
                if (this.documentList && action) {
                    /** @type {?} */
                    var idx = this.documentList.actions.indexOf(action);
                    if (idx >= 0) {
                        this.documentList.actions.splice(idx, 1);
                        return true;
                    }
                }
                return false;
            };
        ContentActionListComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'content-actions',
                        template: ''
                    }] }
        ];
        /** @nocollapse */
        ContentActionListComponent.ctorParameters = function () {
            return [
                { type: DocumentListComponent }
            ];
        };
        return ContentActionListComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var ContentActionComponent = /** @class */ (function () {
        function ContentActionComponent(list, documentActions, folderActions) {
            this.list = list;
            this.documentActions = documentActions;
            this.folderActions = folderActions;
            /**
             * The title of the action as shown in the menu.
             */
            this.title = 'Action';
            /**
             * Visibility state (see examples).
             */
            this.visible = true;
            /**
             * Type of item that the action applies to. Can be "document" or "folder"
             */
            this.target = ContentActionTarget.All;
            /**
             * Is the menu item disabled?
             */
            this.disabled = false;
            /**
             * Emitted when the user selects the action from the menu.
             */
            this.execute = new core.EventEmitter();
            /**
             * Emitted when a permission error occurs
             */
            this.permissionEvent = new core.EventEmitter();
            /**
             * Emitted when an error occurs during the action.
             * Applies to copy and move actions.
             */
            this.error = new core.EventEmitter();
            /**
             * Emitted when the action succeeds with the success string message.
             * Applies to copy, move and delete actions.
             */
            this.success = new core.EventEmitter();
            this.subscriptions = [];
        }
        /**
         * @return {?}
         */
        ContentActionComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                if (this.target === ContentActionTarget.All) {
                    this.folderActionModel = this.generateAction(ContentActionTarget.Folder);
                    this.documentActionModel = this.generateAction(ContentActionTarget.Document);
                }
                else {
                    this.documentActionModel = this.generateAction(this.target);
                }
            };
        /**
         * @param {?} changes
         * @return {?}
         */
        ContentActionComponent.prototype.ngOnChanges = /**
         * @param {?} changes
         * @return {?}
         */
            function (changes) {
                if (changes["visible"] && !changes["visible"].firstChange) {
                    if (this.documentActionModel) {
                        this.documentActionModel.visible = changes["visible"].currentValue;
                    }
                    if (this.folderActionModel) {
                        this.folderActionModel.visible = changes["visible"].currentValue;
                    }
                }
                if (changes["disabled"] && !changes["disabled"].firstChange) {
                    if (this.documentActionModel) {
                        this.documentActionModel.disabled = changes["disabled"].currentValue;
                    }
                    if (this.folderActionModel) {
                        this.folderActionModel.disabled = changes["disabled"].currentValue;
                    }
                }
            };
        /**
         * @return {?}
         */
        ContentActionComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                this.subscriptions.forEach(function (subscription) { return subscription.unsubscribe(); });
                this.subscriptions = [];
                if (this.documentActionModel) {
                    this.unregister(this.documentActionModel);
                    this.documentActionModel = null;
                }
                if (this.folderActionModel) {
                    this.unregister(this.folderActionModel);
                    this.folderActionModel = null;
                }
            };
        /**
         * @param {?} model
         * @return {?}
         */
        ContentActionComponent.prototype.register = /**
         * @param {?} model
         * @return {?}
         */
            function (model) {
                if (this.list) {
                    return this.list.registerAction(model);
                }
                return false;
            };
        /**
         * @param {?} model
         * @return {?}
         */
        ContentActionComponent.prototype.unregister = /**
         * @param {?} model
         * @return {?}
         */
            function (model) {
                if (this.list) {
                    return this.list.unregisterAction(model);
                }
                return false;
            };
        /**
         * @param {?} target
         * @return {?}
         */
        ContentActionComponent.prototype.generateAction = /**
         * @param {?} target
         * @return {?}
         */
            function (target) {
                var _this = this;
                /** @type {?} */
                var model = new ContentActionModel({
                    title: this.title,
                    icon: this.icon,
                    permission: this.permission,
                    disableWithNoPermission: this.disableWithNoPermission,
                    target: target,
                    disabled: this.disabled,
                    visible: this.visible
                });
                if (this.handler) {
                    model.handler = this.getSystemHandler(target, this.handler);
                }
                if (this.execute) {
                    model.execute = function (value) {
                        _this.execute.emit({ value: value });
                    };
                }
                this.register(model);
                return model;
            };
        /**
         * @param {?} target
         * @param {?} name
         * @return {?}
         */
        ContentActionComponent.prototype.getSystemHandler = /**
         * @param {?} target
         * @param {?} name
         * @return {?}
         */
            function (target, name) {
                var _this = this;
                if (target) {
                    target = target.toLowerCase();
                    if (target === ContentActionTarget.Document) {
                        if (this.documentActions) {
                            this.subscriptions.push(this.documentActions.permissionEvent.subscribe(function (permission) {
                                _this.permissionEvent.emit(permission);
                            }), this.documentActions.error.subscribe(function (errors) {
                                _this.error.emit(errors);
                            }), this.documentActions.success.subscribe(function (message) {
                                _this.success.emit(message);
                            }));
                            return this.documentActions.getHandler(name);
                        }
                        return null;
                    }
                    if (target === ContentActionTarget.Folder) {
                        if (this.folderActions) {
                            this.subscriptions.push(this.folderActions.permissionEvent.subscribe(function (permission) {
                                _this.permissionEvent.emit(permission);
                            }), this.folderActions.error.subscribe(function (errors) {
                                _this.error.emit(errors);
                            }), this.folderActions.success.subscribe(function (message) {
                                _this.success.emit(message);
                            }));
                            return this.folderActions.getHandler(name);
                        }
                        return null;
                    }
                }
                return null;
            };
        ContentActionComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'content-action',
                        template: '',
                        providers: [
                            DocumentActionsService,
                            FolderActionsService
                        ]
                    }] }
        ];
        /** @nocollapse */
        ContentActionComponent.ctorParameters = function () {
            return [
                { type: ContentActionListComponent },
                { type: DocumentActionsService },
                { type: FolderActionsService }
            ];
        };
        ContentActionComponent.propDecorators = {
            title: [{ type: core.Input }],
            icon: [{ type: core.Input }],
            visible: [{ type: core.Input }],
            handler: [{ type: core.Input }],
            target: [{ type: core.Input }],
            permission: [{ type: core.Input }],
            disableWithNoPermission: [{ type: core.Input }],
            disabled: [{ type: core.Input }],
            execute: [{ type: core.Output }],
            permissionEvent: [{ type: core.Output }],
            error: [{ type: core.Output }],
            success: [{ type: core.Output }]
        };
        return ContentActionComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var EmptyFolderContentDirective = /** @class */ (function () {
        function EmptyFolderContentDirective(documentList) {
            this.documentList = documentList;
        }
        /**
         * @return {?}
         */
        EmptyFolderContentDirective.prototype.ngAfterContentInit = /**
         * @return {?}
         */
            function () {
                this.documentList.emptyFolderTemplate = this.template;
                this.documentList.dataTable.noContentTemplate = this.template;
            };
        EmptyFolderContentDirective.decorators = [
            { type: core.Directive, args: [{
                        selector: 'empty-folder-content'
                    },] }
        ];
        /** @nocollapse */
        EmptyFolderContentDirective.ctorParameters = function () {
            return [
                { type: DocumentListComponent }
            ];
        };
        EmptyFolderContentDirective.propDecorators = {
            template: [{ type: core.ContentChild, args: [core.TemplateRef,] }]
        };
        return EmptyFolderContentDirective;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var NoPermissionContentDirective = /** @class */ (function () {
        function NoPermissionContentDirective(documentList) {
            this.documentList = documentList;
        }
        /**
         * @return {?}
         */
        NoPermissionContentDirective.prototype.ngAfterContentInit = /**
         * @return {?}
         */
            function () {
                this.documentList.noPermissionTemplate = this.template;
                this.documentList.dataTable.noPermissionTemplate = this.template;
            };
        NoPermissionContentDirective.decorators = [
            { type: core.Directive, args: [{
                        selector: 'no-permission-content'
                    },] }
        ];
        /** @nocollapse */
        NoPermissionContentDirective.ctorParameters = function () {
            return [
                { type: DocumentListComponent }
            ];
        };
        NoPermissionContentDirective.propDecorators = {
            template: [{ type: core.ContentChild, args: [core.TemplateRef,] }]
        };
        return NoPermissionContentDirective;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /*!
     * @license
     * Copyright 2016 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var NodePaging = /** @class */ (function () {
        function NodePaging() {
        }
        return NodePaging;
    }());
    var NodePagingList = /** @class */ (function () {
        function NodePagingList() {
        }
        return NodePagingList;
    }());
    var NodeMinimalEntry = /** @class */ (function () {
        function NodeMinimalEntry() {
        }
        return NodeMinimalEntry;
    }());
    var Pagination = /** @class */ (function () {
        function Pagination() {
        }
        return Pagination;
    }());
    var NodeMinimal = /** @class */ (function () {
        function NodeMinimal() {
            this.properties = {};
        }
        return NodeMinimal;
    }());
    var UserInfo = /** @class */ (function () {
        function UserInfo() {
        }
        return UserInfo;
    }());
    var ContentInfo = /** @class */ (function () {
        function ContentInfo() {
        }
        return ContentInfo;
    }());
    var PathInfoEntity = /** @class */ (function () {
        function PathInfoEntity() {
        }
        return PathInfoEntity;
    }());
    var PathElementEntity = /** @class */ (function () {
        function PathElementEntity() {
        }
        return PathElementEntity;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /*!
     * @license
     * Copyright 2016 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var PermissionStyleModel = /** @class */ (function () {
        function PermissionStyleModel(css, permission, isFile, isFolder) {
            if (isFile === void 0) {
                isFile = true;
            }
            if (isFolder === void 0) {
                isFolder = true;
            }
            this.isFolder = true;
            this.isFile = true;
            this.css = css;
            this.permission = permission;
            this.isFile = isFile;
            this.isFolder = isFolder;
        }
        return PermissionStyleModel;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var FileUploadingDialogComponent = /** @class */ (function () {
        function FileUploadingDialogComponent(uploadService, changeDetecor) {
            this.uploadService = uploadService;
            this.changeDetecor = changeDetecor;
            /**
             * Dialog position. Can be 'left' or 'right'.
             */
            this.position = 'right';
            /**
             * Emitted when a file in the list has an error.
             */
            this.error = new core.EventEmitter();
            this.filesUploadingList = [];
            this.isDialogActive = false;
            this.totalCompleted = 0;
            this.totalErrors = 0;
            this.isDialogMinimized = false;
            this.isConfirmation = false;
        }
        /**
         * @return {?}
         */
        FileUploadingDialogComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.listSubscription = this.uploadService
                    .queueChanged.subscribe(function (fileList) {
                    _this.filesUploadingList = fileList;
                    if (_this.filesUploadingList.length) {
                        _this.isDialogActive = true;
                    }
                });
                this.counterSubscription = rxjs.merge(this.uploadService.fileUploadComplete, this.uploadService.fileUploadDeleted)
                    .subscribe(function (event) {
                    _this.totalCompleted = event.totalComplete;
                    _this.changeDetecor.detectChanges();
                });
                this.errorSubscription = this.uploadService.fileUploadError
                    .subscribe(function (event) {
                    _this.totalErrors = event.totalError;
                    _this.changeDetecor.detectChanges();
                });
                this.fileUploadSubscription = this.uploadService
                    .fileUpload.subscribe(function () {
                    _this.changeDetecor.detectChanges();
                });
                this.uploadService.fileDeleted.subscribe(function (objId) {
                    if (_this.filesUploadingList) {
                        /** @type {?} */
                        var file = _this.filesUploadingList.find(function (item) {
                            return item.data.entry.id === objId;
                        });
                        if (file) {
                            file.status = adfCore.FileUploadStatus.Cancelled;
                            _this.changeDetecor.detectChanges();
                        }
                    }
                });
            };
        /**
         * Toggle confirmation message.
         */
        /**
         * Toggle confirmation message.
         * @return {?}
         */
        FileUploadingDialogComponent.prototype.toggleConfirmation = /**
         * Toggle confirmation message.
         * @return {?}
         */
            function () {
                this.isConfirmation = !this.isConfirmation;
                if (this.isDialogMinimized) {
                    this.isDialogMinimized = false;
                }
            };
        /**
         * Cancel uploads and hide confiramtion
         */
        /**
         * Cancel uploads and hide confiramtion
         * @return {?}
         */
        FileUploadingDialogComponent.prototype.cancelAllUploads = /**
         * Cancel uploads and hide confiramtion
         * @return {?}
         */
            function () {
                this.toggleConfirmation();
                this.uploadList.cancelAllFiles();
            };
        /**
         * Toggle dialog minimized state.
         */
        /**
         * Toggle dialog minimized state.
         * @return {?}
         */
        FileUploadingDialogComponent.prototype.toggleMinimized = /**
         * Toggle dialog minimized state.
         * @return {?}
         */
            function () {
                this.isDialogMinimized = !this.isDialogMinimized;
                this.changeDetecor.detectChanges();
            };
        /**
         * Dismiss dialog
         */
        /**
         * Dismiss dialog
         * @return {?}
         */
        FileUploadingDialogComponent.prototype.close = /**
         * Dismiss dialog
         * @return {?}
         */
            function () {
                this.isConfirmation = false;
                this.totalCompleted = 0;
                this.totalErrors = 0;
                this.filesUploadingList = [];
                this.isDialogActive = false;
                this.isDialogMinimized = false;
                this.uploadService.clearQueue();
                this.changeDetecor.detectChanges();
            };
        /**
         * @return {?}
         */
        FileUploadingDialogComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                this.uploadService.clearQueue();
                this.listSubscription.unsubscribe();
                this.counterSubscription.unsubscribe();
                this.fileUploadSubscription.unsubscribe();
                this.errorSubscription.unsubscribe();
            };
        FileUploadingDialogComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-file-uploading-dialog, file-uploading-dialog',
                        template: "<div *ngIf=\"isDialogActive\"\n     class=\"upload-dialog\"\n     id=\"upload-dialog\"\n     [class.upload-dialog--minimized]=\"isDialogMinimized\"\n     [class.upload-dialog--position-left]=\"position === 'left'\"\n     [class.upload-dialog--position-right]=\"position === 'right'\">\n    <header class=\"upload-dialog__header\">\n        <button\n            mat-button\n            color=\"secondary\"\n            [disabled]=\"isConfirmation\"\n            (click)=\"toggleMinimized()\">\n            <mat-icon\n                mat-list-icon\n                title=\"{{ (isDialogMinimized ? 'ADF_FILE_UPLOAD.BUTTON.MAXIMIZE': 'ADF_FILE_UPLOAD.BUTTON.MINIMIZE') | translate }}\">\n                    {{ isDialogMinimized ? 'keyboard_arrow_up' : 'keyboard_arrow_down' }}\n            </mat-icon>\n        </button>\n\n        <span\n            class=\"upload-dialog__title\"\n            *ngIf=\"!uploadList.isUploadCompleted() && !uploadList.isUploadCancelled()\">\n            {{ 'FILE_UPLOAD.MESSAGES.UPLOAD_PROGRESS'\n                | translate: {\n                    completed: totalCompleted,\n                    total: filesUploadingList.length\n                }\n            }}\n        </span>\n\n        <span\n            class=\"upload-dialog__title\"\n            *ngIf=\"uploadList.isUploadCompleted()\">\n            {{ 'FILE_UPLOAD.MESSAGES.UPLOAD_COMPLETED'\n                | translate: {\n                    completed: totalCompleted,\n                    total: filesUploadingList.length\n                }\n            }}\n        </span>\n\n        <span\n            class=\"upload-dialog__title\"\n            *ngIf=\"uploadList.isUploadCancelled()\">\n            {{ 'FILE_UPLOAD.MESSAGES.UPLOAD_CANCELED' | translate }}\n        </span>\n    </header>\n\n    <section class=\"upload-dialog__info\"\n        *ngIf=\"totalErrors\">\n        {{\n            (totalErrors > 1\n                 ? 'FILE_UPLOAD.MESSAGES.UPLOAD_ERRORS'\n                 : 'FILE_UPLOAD.MESSAGES.UPLOAD_ERROR')\n                 | translate: { total: totalErrors }\n        }}\n    </section>\n\n    <section class=\"upload-dialog__content\"\n        [class.upload-dialog--padding]=\"isConfirmation\">\n        <adf-file-uploading-list\n            [class.upload-dialog--hide]=\"isConfirmation\"\n            #uploadList\n            [files]=\"filesUploadingList\">\n                <ng-template let-file=\"$implicit\">\n                     <adf-file-uploading-list-row\n                        [file]=\"file\"\n                        (remove)=\"uploadList.removeFile(file)\"\n                        (cancel)=\"uploadList.cancelFile(file)\">\n                    </adf-file-uploading-list-row>\n                </ng-template>\n        </adf-file-uploading-list>\n\n        <div\n            class=\"upload-dialog__confirmation\"\n            [class.upload-dialog--hide]=\"!isConfirmation\">\n                <p class=\"upload-dialog__confirmation--title\">\n                    {{ 'ADF_FILE_UPLOAD.CONFIRMATION.MESSAGE.TITLE' | translate }}\n                </p>\n\n                <p class=\"upload-dialog__confirmation--text\">\n                    {{ 'ADF_FILE_UPLOAD.CONFIRMATION.MESSAGE.TEXT' | translate }}\n                </p>\n        </div>\n    </section>\n\n    <footer class=\"upload-dialog__actions\"\n            *ngIf=\"!isConfirmation\">\n        <button\n            id=\"adf-upload-dialog-cancel-all\"\n            color=\"primary\"\n            mat-button\n            *ngIf=\"!uploadList.isUploadCompleted() && !uploadList.isUploadCancelled()\"\n            (click)=\"toggleConfirmation()\">\n            {{ 'ADF_FILE_UPLOAD.BUTTON.CANCEL_ALL' | translate }}\n        </button>\n\n        <button\n            id=\"adf-upload-dialog-close\"\n            *ngIf=\"uploadList.isUploadCompleted() || uploadList.isUploadCancelled()\"\n            mat-button\n            color=\"primary\"\n            (click)=\"close()\">\n            {{ 'ADF_FILE_UPLOAD.BUTTON.CLOSE' | translate }}\n        </button>\n    </footer>\n\n    <footer class=\"upload-dialog__actions\"\n            *ngIf=\"isConfirmation\">\n        <button\n            id=\"adf-upload-dialog-cancel\"\n            color=\"secondary\"\n            mat-button\n            (click)=\"cancelAllUploads()\">\n            {{ 'ADF_FILE_UPLOAD.CONFIRMATION.BUTTON.CANCEL' | translate }}\n        </button>\n\n        <button\n            id=\"adf-upload-dialog-confirm\"\n            mat-button\n            color=\"primary\"\n            (click)=\"toggleConfirmation()\">\n            {{ 'ADF_FILE_UPLOAD.CONFIRMATION.BUTTON.CONTINUE' | translate }}\n        </button>\n    </footer>\n</div>\n",
                        styles: [""]
                    }] }
        ];
        /** @nocollapse */
        FileUploadingDialogComponent.ctorParameters = function () {
            return [
                { type: adfCore.UploadService },
                { type: core.ChangeDetectorRef }
            ];
        };
        FileUploadingDialogComponent.propDecorators = {
            uploadList: [{ type: core.ViewChild, args: ['uploadList',] }],
            position: [{ type: core.Input }],
            error: [{ type: core.Output }]
        };
        return FileUploadingDialogComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var FileUploadingListRowComponent = /** @class */ (function () {
        function FileUploadingListRowComponent() {
            this.cancel = new core.EventEmitter();
            this.remove = new core.EventEmitter();
            this.FileUploadStatus = adfCore.FileUploadStatus;
        }
        /**
         * @param {?} file
         * @return {?}
         */
        FileUploadingListRowComponent.prototype.onCancel = /**
         * @param {?} file
         * @return {?}
         */
            function (file) {
                this.cancel.emit(file);
            };
        /**
         * @param {?} file
         * @return {?}
         */
        FileUploadingListRowComponent.prototype.onRemove = /**
         * @param {?} file
         * @return {?}
         */
            function (file) {
                this.remove.emit(file);
            };
        FileUploadingListRowComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-file-uploading-list-row',
                        template: "<div class=\"adf-file-uploading-row\">\n    <mat-icon\n        mat-list-icon\n        class=\"adf-file-uploading-row__type\">\n        insert_drive_file\n    </mat-icon>\n\n    <span\n        class=\"adf-file-uploading-row__name\"\n        title=\"{{ file.name }}\">\n        {{ file.name }}\n    </span>\n\n    <div\n        *ngIf=\"file.status === FileUploadStatus.Progress || file.status === FileUploadStatus.Starting\"\n        (click)=\"onCancel(file)\"\n        class=\"adf-file-uploading-row__group adf-file-uploading-row__group--toggle\"\n        title=\"{{ 'ADF_FILE_UPLOAD.BUTTON.CANCEL_FILE' | translate }}\">\n        <span class=\"adf-file-uploading-row__status\">\n            {{ file.progress.loaded | adfFileSize }} / {{ file.progress.total | adfFileSize }}\n        </span>\n\n        <mat-icon\n            mat-list-icon\n            class=\"adf-file-uploading-row__action adf-file-uploading-row__action--cancel\">\n            clear\n        </mat-icon>\n    </div>\n\n    <div\n        *ngIf=\"file.status === FileUploadStatus.Complete\"\n        (click)=\"onRemove(file)\"\n        class=\"adf-file-uploading-row__group adf-file-uploading-row__group--toggle\"\n        title=\"{{ 'ADF_FILE_UPLOAD.BUTTON.REMOVE_FILE' | translate }}\">\n        <mat-icon\n            mat-list-icon\n            class=\"adf-file-uploading-row__status adf-file-uploading-row__status--done\">\n            check_circle\n        </mat-icon>\n\n        <mat-icon\n            mat-list-icon\n            class=\"adf-file-uploading-row__action adf-file-uploading-row__action--remove\">\n            remove_circle\n        </mat-icon>\n    </div>\n\n    <div\n        *ngIf=\"file.status === FileUploadStatus.Pending\"\n        (click)=\"onCancel(file)\"\n        class=\"adf-file-uploading-row__group adf-file-uploading-row__group--toggle\">\n        <mat-icon\n            mat-list-icon\n            class=\"adf-file-uploading-row__status adf-file-uploading-row__status--pending\">\n            schedule\n        </mat-icon>\n\n        <mat-icon\n            mat-list-icon\n            class=\"adf-file-uploading-row__action adf-file-uploading-row__action--remove\">\n            remove_circle\n        </mat-icon>\n    </div>\n\n    <div\n        *ngIf=\"file.status === FileUploadStatus.Error\"\n        class=\"adf-file-uploading-row__block adf-file-uploading-row__status--error\">\n        <mat-icon mat-list-icon>\n            report_problem\n        </mat-icon>\n    </div>\n\n    <div\n        *ngIf=\"file.status === FileUploadStatus.Cancelled  ||\n            file.status === FileUploadStatus.Aborted ||\n            file.status === FileUploadStatus.Deleted\"\n        class=\"adf-file-uploading-row__block adf-file-uploading-row__status--cancelled\">\n        {{ 'ADF_FILE_UPLOAD.STATUS.FILE_CANCELED_STATUS' | translate }}\n    </div>\n<div>\n",
                        styles: [""]
                    }] }
        ];
        FileUploadingListRowComponent.propDecorators = {
            file: [{ type: core.Input }],
            cancel: [{ type: core.Output }],
            remove: [{ type: core.Output }]
        };
        return FileUploadingListRowComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var FileUploadingListComponent = /** @class */ (function () {
        function FileUploadingListComponent(uploadService, nodesApi, translateService) {
            this.uploadService = uploadService;
            this.nodesApi = nodesApi;
            this.translateService = translateService;
            this.FileUploadStatus = adfCore.FileUploadStatus;
            this.files = [];
            /**
             * Emitted when a file in the list has an error.
             */
            this.error = new core.EventEmitter();
        }
        /**
         * Cancel file upload
         *
         * @param file File model to cancel upload for.
         *
         * @memberOf FileUploadingListComponent
         */
        /**
         * Cancel file upload
         *
         * \@memberOf FileUploadingListComponent
         * @param {?} file File model to cancel upload for.
         *
         * @return {?}
         */
        FileUploadingListComponent.prototype.cancelFile = /**
         * Cancel file upload
         *
         * \@memberOf FileUploadingListComponent
         * @param {?} file File model to cancel upload for.
         *
         * @return {?}
         */
            function (file) {
                this.uploadService.cancelUpload(file);
            };
        /**
         * @param {?} file
         * @return {?}
         */
        FileUploadingListComponent.prototype.removeFile = /**
         * @param {?} file
         * @return {?}
         */
            function (file) {
                var _this = this;
                this.deleteNode(file)
                    .subscribe(function () {
                    if (file.status === adfCore.FileUploadStatus.Error) {
                        _this.notifyError(file);
                    }
                    _this.uploadService.cancelUpload(file);
                });
            };
        /**
         * Call the appropriate method for each file, depending on state
         */
        /**
         * Call the appropriate method for each file, depending on state
         * @return {?}
         */
        FileUploadingListComponent.prototype.cancelAllFiles = /**
         * Call the appropriate method for each file, depending on state
         * @return {?}
         */
            function () {
                var _this = this;
                this.getUploadingFiles()
                    .forEach(function (file) { return _this.uploadService.cancelUpload(file); });
                /** @type {?} */
                var deletedFiles = this.files
                    .filter(function (file) { return file.status === adfCore.FileUploadStatus.Complete; })
                    .map(function (file) { return _this.deleteNode(file); });
                rxjs.forkJoin.apply(void 0, __spread(deletedFiles)).subscribe(function (files) {
                    var _a;
                    /** @type {?} */
                    var errors = files
                        .filter(function (file) { return file.status === adfCore.FileUploadStatus.Error; });
                    if (errors.length) {
                        _this.notifyError.apply(_this, __spread(errors));
                    }
                    (_a = _this.uploadService).cancelUpload.apply(_a, __spread(files));
                });
            };
        /**
         * Checks if all the files are uploaded false if there is at least one file in Progress | Starting | Pending
         */
        /**
         * Checks if all the files are uploaded false if there is at least one file in Progress | Starting | Pending
         * @return {?}
         */
        FileUploadingListComponent.prototype.isUploadCompleted = /**
         * Checks if all the files are uploaded false if there is at least one file in Progress | Starting | Pending
         * @return {?}
         */
            function () {
                return !this.isUploadCancelled() &&
                    Boolean(this.files.length) &&
                    !this.files
                        .some(function (_a) {
                        var status = _a.status;
                        return status === adfCore.FileUploadStatus.Starting ||
                            status === adfCore.FileUploadStatus.Progress ||
                            status === adfCore.FileUploadStatus.Pending;
                    });
            };
        /**
         * Check if all the files are Cancelled | Aborted | Error. false if there is at least one file in uploading states
         */
        /**
         * Check if all the files are Cancelled | Aborted | Error. false if there is at least one file in uploading states
         * @return {?}
         */
        FileUploadingListComponent.prototype.isUploadCancelled = /**
         * Check if all the files are Cancelled | Aborted | Error. false if there is at least one file in uploading states
         * @return {?}
         */
            function () {
                return !!this.files.length &&
                    this.files
                        .every(function (_a) {
                        var status = _a.status;
                        return status === adfCore.FileUploadStatus.Aborted ||
                            status === adfCore.FileUploadStatus.Cancelled ||
                            status === adfCore.FileUploadStatus.Deleted;
                    });
            };
        /**
         * @param {?} file
         * @return {?}
         */
        FileUploadingListComponent.prototype.deleteNode = /**
         * @param {?} file
         * @return {?}
         */
            function (file) {
                var id = file.data.entry.id;
                return this.nodesApi
                    .deleteNode(id, { permanent: true })
                    .pipe(operators.map(function () {
                    file.status = adfCore.FileUploadStatus.Deleted;
                    return file;
                }), operators.catchError(function () {
                    file.status = adfCore.FileUploadStatus.Error;
                    return rxjs.of(file);
                }));
            };
        /**
         * @param {...?} files
         * @return {?}
         */
        FileUploadingListComponent.prototype.notifyError = /**
         * @param {...?} files
         * @return {?}
         */
            function () {
                var files = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    files[_i] = arguments[_i];
                }
                /** @type {?} */
                var messageError = null;
                if (files.length === 1) {
                    messageError = this.translateService
                        .instant('FILE_UPLOAD.MESSAGES.REMOVE_FILE_ERROR', { fileName: files[0].name });
                }
                else {
                    messageError = this.translateService
                        .instant('FILE_UPLOAD.MESSAGES.REMOVE_FILES_ERROR', { total: files.length });
                }
                this.error.emit(messageError);
            };
        /**
         * @return {?}
         */
        FileUploadingListComponent.prototype.getUploadingFiles = /**
         * @return {?}
         */
            function () {
                return this.files.filter(function (item) {
                    if (item.status === adfCore.FileUploadStatus.Pending ||
                        item.status === adfCore.FileUploadStatus.Progress ||
                        item.status === adfCore.FileUploadStatus.Starting) {
                        return item;
                    }
                });
            };
        FileUploadingListComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-file-uploading-list',
                        template: "<div class=\"upload-list\">\n    <ng-template\n        ngFor\n        [ngForOf]=\"files\"\n        [ngForTemplate]=\"template\">\n    </ng-template>\n</div>\n",
                        styles: [":host{display:flex;flex-direction:column}"]
                    }] }
        ];
        /** @nocollapse */
        FileUploadingListComponent.ctorParameters = function () {
            return [
                { type: adfCore.UploadService },
                { type: adfCore.NodesApiService },
                { type: adfCore.TranslationService }
            ];
        };
        FileUploadingListComponent.propDecorators = {
            template: [{ type: core.ContentChild, args: [core.TemplateRef,] }],
            files: [{ type: core.Input }],
            error: [{ type: core.Output }]
        };
        return FileUploadingListComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var UploadFilesEvent = /** @class */ (function () {
        function UploadFilesEvent(files, uploadService, callback) {
            this.files = files;
            this.uploadService = uploadService;
            this.callback = callback;
            this.isDefaultPrevented = false;
        }
        Object.defineProperty(UploadFilesEvent.prototype, "defaultPrevented", {
            get: /**
             * @return {?}
             */ function () {
                return this.isDefaultPrevented;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        UploadFilesEvent.prototype.preventDefault = /**
         * @return {?}
         */
            function () {
                this.isDefaultPrevented = true;
            };
        /**
         * @return {?}
         */
        UploadFilesEvent.prototype.pauseUpload = /**
         * @return {?}
         */
            function () {
                this.preventDefault();
            };
        /**
         * @return {?}
         */
        UploadFilesEvent.prototype.resumeUpload = /**
         * @return {?}
         */
            function () {
                var _a;
                if (this.files && this.files.length > 0) {
                    (_a = this.uploadService).addToQueue.apply(_a, __spread(this.files));
                    this.uploadService.uploadFilesInTheQueue(this.callback);
                }
            };
        return UploadFilesEvent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /**
     * @abstract
     */
    var UploadBase = /** @class */ (function () {
        function UploadBase(uploadService, translationService, ngZone) {
            this.uploadService = uploadService;
            this.translationService = translationService;
            this.ngZone = ngZone;
            /**
             * The ID of the root. Use the nodeId for
             * Content Services or the taskId/processId for Process Services.
             */
            this.rootFolderId = '-root-';
            /**
             * Toggles component disabled state (if there is no node permission checking).
             */
            this.disabled = false;
            /**
             * Filter for accepted file types.
             */
            this.acceptedFilesType = '*';
            /**
             * Toggles versioning.
             */
            this.versioning = false;
            /**
             * majorVersion boolean field to true to indicate a major version should be created.
             */
            this.majorVersion = false;
            /**
             * Custom node type for uploaded file
             */
            this.nodeType = 'cm:content';
            /**
             * Emitted when the file is uploaded successfully.
             */
            this.success = new core.EventEmitter();
            /**
             * Emitted when a folder is created.
             * @deprecated 2.4.0 No longer used by the framework
             */
            this.createFolder = new core.EventEmitter();
            /**
             * Emitted when an error occurs.
             */
            this.error = new core.EventEmitter();
            /**
             * Emitted when the upload begins.
             */
            this.beginUpload = new core.EventEmitter();
            this.subscriptions = [];
        }
        /**
         * @return {?}
         */
        UploadBase.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.subscriptions.push(this.uploadService.fileUploadError.subscribe(function (error) {
                    _this.error.emit(error);
                }));
            };
        /**
         * @return {?}
         */
        UploadBase.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                this.subscriptions.forEach(function (subscription) { return subscription.unsubscribe(); });
                this.subscriptions = [];
            };
        /**
         * Upload a list of file in the specified path
         * @param files
         * @param path
         */
        /**
         * Upload a list of file in the specified path
         * @param {?} files
         * @return {?}
         */
        UploadBase.prototype.uploadFiles = /**
         * Upload a list of file in the specified path
         * @param {?} files
         * @return {?}
         */
            function (files) {
                var _this = this;
                /** @type {?} */
                var filteredFiles = files
                    .map(function (file) {
                    return _this.createFileModel(file, _this.rootFolderId, (file.webkitRelativePath || '').replace(/\/[^\/]*$/, ''));
                });
                this.uploadQueue(filteredFiles);
            };
        /**
         * @param {?} files
         * @return {?}
         */
        UploadBase.prototype.uploadFilesInfo = /**
         * @param {?} files
         * @return {?}
         */
            function (files) {
                var _this = this;
                /** @type {?} */
                var filteredFiles = files
                    .map(function (fileInfo) {
                    return _this.createFileModel(fileInfo.file, _this.rootFolderId, fileInfo.relativeFolder);
                });
                this.uploadQueue(filteredFiles);
            };
        /**
         * @param {?} files
         * @return {?}
         */
        UploadBase.prototype.uploadQueue = /**
         * @param {?} files
         * @return {?}
         */
            function (files) {
                var _this = this;
                /** @type {?} */
                var filteredFiles = files
                    .filter(this.isFileAcceptable.bind(this))
                    .filter(this.isFileSizeAcceptable.bind(this));
                this.ngZone.run(function () {
                    var _a;
                    /** @type {?} */
                    var event = new UploadFilesEvent(__spread(filteredFiles), _this.uploadService, _this.success);
                    _this.beginUpload.emit(event);
                    if (!event.defaultPrevented) {
                        if (filteredFiles.length > 0) {
                            (_a = _this.uploadService).addToQueue.apply(_a, __spread(filteredFiles));
                            _this.uploadService.uploadFilesInTheQueue(_this.success);
                        }
                    }
                });
            };
        /**
         * Checks if the given file is allowed by the extension filters
         *
         * @param file FileModel
         */
        /**
         * Checks if the given file is allowed by the extension filters
         *
         * @param {?} file FileModel
         * @return {?}
         */
        UploadBase.prototype.isFileAcceptable = /**
         * Checks if the given file is allowed by the extension filters
         *
         * @param {?} file FileModel
         * @return {?}
         */
            function (file) {
                if (this.acceptedFilesType === '*') {
                    return true;
                }
                /** @type {?} */
                var allowedExtensions = this.acceptedFilesType
                    .split(',')
                    .map(function (ext) { return ext.replace(/^\./, ''); });
                if (allowedExtensions.indexOf(file.extension) !== -1) {
                    return true;
                }
                return false;
            };
        /**
         * Creates FileModel from File
         *
         * @param file
         */
        /**
         * Creates FileModel from File
         *
         * @param {?} file
         * @param {?} parentId
         * @param {?} path
         * @param {?=} id
         * @return {?}
         */
        UploadBase.prototype.createFileModel = /**
         * Creates FileModel from File
         *
         * @param {?} file
         * @param {?} parentId
         * @param {?} path
         * @param {?=} id
         * @return {?}
         */
            function (file, parentId, path, id) {
                return new adfCore.FileModel(file, {
                    comment: this.comment,
                    majorVersion: this.majorVersion,
                    newVersion: this.versioning,
                    parentId: parentId,
                    path: path,
                    nodeType: this.nodeType
                }, id);
            };
        /**
         * @param {?} file
         * @return {?}
         */
        UploadBase.prototype.isFileSizeAllowed = /**
         * @param {?} file
         * @return {?}
         */
            function (file) {
                /** @type {?} */
                var isFileSizeAllowed = true;
                if (this.isMaxFileSizeDefined()) {
                    isFileSizeAllowed = this.isFileSizeCorrect(file);
                }
                return isFileSizeAllowed;
            };
        /**
         * @return {?}
         */
        UploadBase.prototype.isMaxFileSizeDefined = /**
         * @return {?}
         */
            function () {
                return this.maxFilesSize !== undefined && this.maxFilesSize !== null;
            };
        /**
         * @param {?} file
         * @return {?}
         */
        UploadBase.prototype.isFileSizeCorrect = /**
         * @param {?} file
         * @return {?}
         */
            function (file) {
                return this.maxFilesSize >= 0 && file.size <= this.maxFilesSize;
            };
        /**
         * Checks if the given file is an acceptable size
         *
         * @param {?} file FileModel
         * @return {?}
         */
        UploadBase.prototype.isFileSizeAcceptable = /**
         * Checks if the given file is an acceptable size
         *
         * @param {?} file FileModel
         * @return {?}
         */
            function (file) {
                /** @type {?} */
                var acceptableSize = true;
                if (!this.isFileSizeAllowed(file)) {
                    acceptableSize = false;
                    /** @type {?} */
                    var message = this.translationService.instant('FILE_UPLOAD.MESSAGES.EXCEED_MAX_FILE_SIZE', { fileName: file.name });
                    this.error.emit(message);
                }
                return acceptableSize;
            };
        UploadBase.propDecorators = {
            maxFilesSize: [{ type: core.Input }],
            rootFolderId: [{ type: core.Input }],
            disabled: [{ type: core.Input }],
            acceptedFilesType: [{ type: core.Input }],
            versioning: [{ type: core.Input }],
            majorVersion: [{ type: core.Input }],
            comment: [{ type: core.Input }],
            nodeType: [{ type: core.Input }],
            success: [{ type: core.Output }],
            createFolder: [{ type: core.Output }],
            error: [{ type: core.Output }],
            beginUpload: [{ type: core.Output }]
        };
        return UploadBase;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var UploadButtonComponent = /** @class */ (function (_super) {
        __extends(UploadButtonComponent, _super);
        function UploadButtonComponent(uploadService, contentService, translationService, logService, ngZone) {
            var _this = _super.call(this, uploadService, translationService, ngZone) || this;
            _this.uploadService = uploadService;
            _this.contentService = contentService;
            _this.translationService = translationService;
            _this.logService = logService;
            _this.ngZone = ngZone;
            /**
             * Allows/disallows upload folders (only for Chrome).
             */
            _this.uploadFolders = false;
            /**
             * Allows/disallows multiple files
             */
            _this.multipleFiles = false;
            /**
             * Custom tooltip text.
             */
            _this.tooltip = null;
            /**
             * Emitted when create permission is missing.
             */
            _this.permissionEvent = new core.EventEmitter();
            _this.hasPermission = false;
            _this.permissionValue = new rxjs.Subject();
            return _this;
        }
        /**
         * @return {?}
         */
        UploadButtonComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.permissionValue.subscribe(function (permission) {
                    _this.hasPermission = permission;
                });
            };
        /**
         * @param {?} changes
         * @return {?}
         */
        UploadButtonComponent.prototype.ngOnChanges = /**
         * @param {?} changes
         * @return {?}
         */
            function (changes) {
                /** @type {?} */
                var rootFolderId = changes['rootFolderId'];
                if (rootFolderId && rootFolderId.currentValue) {
                    this.checkPermission();
                }
            };
        /**
         * @return {?}
         */
        UploadButtonComponent.prototype.isButtonDisabled = /**
         * @return {?}
         */
            function () {
                return this.disabled ? true : undefined;
            };
        /**
         * @param {?} $event
         * @return {?}
         */
        UploadButtonComponent.prototype.onFilesAdded = /**
         * @param {?} $event
         * @return {?}
         */
            function ($event) {
                /** @type {?} */
                var files = adfCore.FileUtils.toFileArray($event.currentTarget.files);
                if (this.hasPermission) {
                    this.uploadFiles(files);
                }
                else {
                    this.permissionEvent.emit(new PermissionModel({ type: 'content', action: 'upload', permission: 'create' }));
                }
                // reset the value of the input file
                $event.target.value = '';
            };
        /**
         * @param {?} $event
         * @return {?}
         */
        UploadButtonComponent.prototype.onDirectoryAdded = /**
         * @param {?} $event
         * @return {?}
         */
            function ($event) {
                if (this.hasPermission) {
                    /** @type {?} */
                    var files = adfCore.FileUtils.toFileArray($event.currentTarget.files);
                    this.uploadFiles(files);
                }
                else {
                    this.permissionEvent.emit(new PermissionModel({ type: 'content', action: 'upload', permission: 'create' }));
                }
                // reset the value of the input file
                $event.target.value = '';
            };
        /**
         * @return {?}
         */
        UploadButtonComponent.prototype.checkPermission = /**
         * @return {?}
         */
            function () {
                var _this = this;
                if (this.rootFolderId) {
                    /** @type {?} */
                    var opts = {
                        includeSource: true,
                        include: ['allowableOperations']
                    };
                    this.contentService.getNode(this.rootFolderId, opts).subscribe(function (res) { return _this.permissionValue.next(_this.nodeHasPermission(res.entry, adfCore.PermissionsEnum.CREATE)); }, function (error) { return _this.error.emit(error); });
                }
            };
        /**
         * @param {?} node
         * @param {?} permission
         * @return {?}
         */
        UploadButtonComponent.prototype.nodeHasPermission = /**
         * @param {?} node
         * @param {?} permission
         * @return {?}
         */
            function (node, permission) {
                return this.contentService.hasPermission(node, permission);
            };
        UploadButtonComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-upload-button',
                        template: "<form class=\"adf-upload-button-file-container\">\n    <!--Files Upload-->\n    <a *ngIf=\"!uploadFolders\"\n        [disabled]=\"isButtonDisabled()\"\n        mat-raised-button color=\"primary\">\n        <mat-icon>file_upload</mat-icon>\n\n        <!--Multiple Files Upload-->\n        <span *ngIf=\"multipleFiles\">\n            <label\n                id=\"upload-multiple-file-label\"\n                *ngIf=\"!staticTitle\"\n                for=\"upload-multiple-files\">{{ 'FILE_UPLOAD.BUTTON.UPLOAD_FILE' | translate }}</label>\n            <label\n                id=\"upload-multiple-file-label-static\"\n                *ngIf=\"staticTitle\"\n                for=\"upload-multiple-files\">{{ staticTitle }}</label>\n            <input #uploadFiles\n                id=\"upload-multiple-files\"\n                data-automation-id=\"upload-multiple-files\"\n                type=\"file\"\n                name=\"uploadFiles\"\n                multiple=\"multiple\"\n                accept=\"{{acceptedFilesType}}\"\n                [attr.disabled]=\"isButtonDisabled()\"\n                [title]=\"tooltip\"\n                (change)=\"onFilesAdded($event)\">\n        </span>\n\n        <!--Single Files Upload-->\n        <span *ngIf=\"!multipleFiles\">\n            <label\n                id=\"upload-single-file-label\"\n                *ngIf=\"!staticTitle\"\n                for=\"upload-single-file\">{{ 'FILE_UPLOAD.BUTTON.UPLOAD_FILE' | translate }}</label>\n            <label\n                id=\"upload-single-file-label-static\"\n                *ngIf=\"staticTitle\"\n                for=\"upload-single-file\">{{ staticTitle }}</label>\n            <input #uploadFiles\n                id=\"upload-single-file\"\n                data-automation-id=\"upload-single-file\"\n                type=\"file\"\n                name=\"uploadFiles\"\n                accept=\"{{acceptedFilesType}}\"\n                [attr.disabled]=\"isButtonDisabled()\"\n                [title]=\"tooltip\"\n                (change)=\"onFilesAdded($event)\">\n        </span>\n    </a>\n\n    <!--Folders Upload-->\n    <a *ngIf=\"uploadFolders\"\n        [disabled]=\"isButtonDisabled()\" mat-raised-button color=\"primary\">\n        <mat-icon>file_upload</mat-icon>\n        <label\n            id=\"uploadFolder-label\"\n            *ngIf=\"!staticTitle\"\n            for=\"uploadFolder\">{{ 'FILE_UPLOAD.BUTTON.UPLOAD_FOLDER' | translate }}</label>\n        <label\n            id=\"uploadFolder-label-static\"\n            *ngIf=\"staticTitle\"\n            for=\"uploadFolder\">{{ staticTitle }}</label>\n        <input #uploadFolders\n            id=\"uploadFolder\"\n            data-automation-id=\"uploadFolder\"\n            type=\"file\"\n            name=\"uploadFiles\"\n            multiple=\"multiple\"\n            accept=\"{{acceptedFilesType}}\"\n            webkitdirectory directory\n            [attr.disabled]=\"isButtonDisabled()\"\n            [title]=\"tooltip\"\n            (change)=\"onDirectoryAdded($event)\">\n    </a>\n</form>\n",
                        viewProviders: [
                            { provide: adfCore.EXTENDIBLE_COMPONENT, useExisting: core.forwardRef(function () { return UploadButtonComponent; }) }
                        ],
                        encapsulation: core.ViewEncapsulation.None,
                        styles: [".adf-upload-button-file-container input{cursor:pointer;height:100%;right:0;opacity:0;position:absolute;top:0;width:300px;z-index:4}"]
                    }] }
        ];
        /** @nocollapse */
        UploadButtonComponent.ctorParameters = function () {
            return [
                { type: adfCore.UploadService },
                { type: adfCore.ContentService },
                { type: adfCore.TranslationService },
                { type: adfCore.LogService },
                { type: core.NgZone }
            ];
        };
        UploadButtonComponent.propDecorators = {
            uploadFolders: [{ type: core.Input }],
            multipleFiles: [{ type: core.Input }],
            staticTitle: [{ type: core.Input }],
            tooltip: [{ type: core.Input }],
            permissionEvent: [{ type: core.Output }]
        };
        return UploadButtonComponent;
    }(UploadBase));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var UploadVersionButtonComponent = /** @class */ (function (_super) {
        __extends(UploadVersionButtonComponent, _super);
        function UploadVersionButtonComponent() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        /**
         * @param {?} file
         * @return {?}
         */
        UploadVersionButtonComponent.prototype.createFileModel = /**
         * @param {?} file
         * @return {?}
         */
            function (file) {
                /** @type {?} */
                var fileModel = _super.prototype.createFileModel.call(this, file, this.rootFolderId, (file.webkitRelativePath || '').replace(/\/[^\/]*$/, ''), this.node.id);
                if (!this.isFileAcceptable(fileModel)) {
                    /** @type {?} */
                    var message = this.translationService.instant('FILE_UPLOAD.VERSION.MESSAGES.INCOMPATIBLE_VERSION');
                    this.error.emit(message);
                }
                return fileModel;
            };
        /**
         * @return {?}
         */
        UploadVersionButtonComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                _super.prototype.ngOnInit.call(this);
                this.checkPermission();
            };
        /**
         * @return {?}
         */
        UploadVersionButtonComponent.prototype.checkPermission = /**
         * @return {?}
         */
            function () {
                this.permissionValue.next(this.nodeHasPermission(this.node, adfCore.PermissionsEnum.UPDATE));
            };
        UploadVersionButtonComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-upload-version-button',
                        template: "<form class=\"adf-upload-button-file-container\">\n    <!--Files Upload-->\n    <a *ngIf=\"!uploadFolders\"\n        [disabled]=\"isButtonDisabled()\"\n        mat-raised-button color=\"primary\">\n        <mat-icon>file_upload</mat-icon>\n\n        <!--Multiple Files Upload-->\n        <span *ngIf=\"multipleFiles\">\n            <label\n                id=\"upload-multiple-file-label\"\n                *ngIf=\"!staticTitle\"\n                for=\"upload-multiple-files\">{{ 'FILE_UPLOAD.BUTTON.UPLOAD_FILE' | translate }}</label>\n            <label\n                id=\"upload-multiple-file-label-static\"\n                *ngIf=\"staticTitle\"\n                for=\"upload-multiple-files\">{{ staticTitle }}</label>\n            <input #uploadFiles\n                id=\"upload-multiple-files\"\n                data-automation-id=\"upload-multiple-files\"\n                type=\"file\"\n                name=\"uploadFiles\"\n                multiple=\"multiple\"\n                accept=\"{{acceptedFilesType}}\"\n                [attr.disabled]=\"isButtonDisabled()\"\n                [title]=\"tooltip\"\n                (change)=\"onFilesAdded($event)\">\n        </span>\n\n        <!--Single Files Upload-->\n        <span *ngIf=\"!multipleFiles\">\n            <label\n                id=\"upload-single-file-label\"\n                *ngIf=\"!staticTitle\"\n                for=\"upload-single-file\">{{ 'FILE_UPLOAD.BUTTON.UPLOAD_FILE' | translate }}</label>\n            <label\n                id=\"upload-single-file-label-static\"\n                *ngIf=\"staticTitle\"\n                for=\"upload-single-file\">{{ staticTitle }}</label>\n            <input #uploadFiles\n                id=\"upload-single-file\"\n                data-automation-id=\"upload-single-file\"\n                type=\"file\"\n                name=\"uploadFiles\"\n                accept=\"{{acceptedFilesType}}\"\n                [attr.disabled]=\"isButtonDisabled()\"\n                [title]=\"tooltip\"\n                (change)=\"onFilesAdded($event)\">\n        </span>\n    </a>\n\n    <!--Folders Upload-->\n    <a *ngIf=\"uploadFolders\"\n        [disabled]=\"isButtonDisabled()\" mat-raised-button color=\"primary\">\n        <mat-icon>file_upload</mat-icon>\n        <label\n            id=\"uploadFolder-label\"\n            *ngIf=\"!staticTitle\"\n            for=\"uploadFolder\">{{ 'FILE_UPLOAD.BUTTON.UPLOAD_FOLDER' | translate }}</label>\n        <label\n            id=\"uploadFolder-label-static\"\n            *ngIf=\"staticTitle\"\n            for=\"uploadFolder\">{{ staticTitle }}</label>\n        <input #uploadFolders\n            id=\"uploadFolder\"\n            data-automation-id=\"uploadFolder\"\n            type=\"file\"\n            name=\"uploadFiles\"\n            multiple=\"multiple\"\n            accept=\"{{acceptedFilesType}}\"\n            webkitdirectory directory\n            [attr.disabled]=\"isButtonDisabled()\"\n            [title]=\"tooltip\"\n            (change)=\"onDirectoryAdded($event)\">\n    </a>\n</form>\n",
                        viewProviders: [
                            { provide: adfCore.EXTENDIBLE_COMPONENT, useExisting: core.forwardRef(function () { return UploadVersionButtonComponent; }) }
                        ],
                        encapsulation: core.ViewEncapsulation.None,
                        styles: [".adf-upload-button-file-container input{cursor:pointer;height:100%;right:0;opacity:0;position:absolute;top:0;width:300px;z-index:4}"]
                    }] }
        ];
        UploadVersionButtonComponent.propDecorators = {
            node: [{ type: core.Input }]
        };
        return UploadVersionButtonComponent;
    }(UploadButtonComponent));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var UploadDragAreaComponent = /** @class */ (function (_super) {
        __extends(UploadDragAreaComponent, _super);
        function UploadDragAreaComponent(uploadService, translationService, notificationService, contentService, ngZone) {
            var _this = _super.call(this, uploadService, translationService, ngZone) || this;
            _this.uploadService = uploadService;
            _this.translationService = translationService;
            _this.notificationService = notificationService;
            _this.contentService = contentService;
            _this.ngZone = ngZone;
            return _this;
        }
        Object.defineProperty(UploadDragAreaComponent.prototype, "parentId", {
            /**
             * ID of parent folder node
             * @deprecated 2.4.0 - use rootFolderId ID of parent folder node
             */
            set: /**
             * ID of parent folder node
             * @deprecated 2.4.0 - use rootFolderId ID of parent folder node
             * @param {?} nodeId
             * @return {?}
             */ function (nodeId) {
                this.rootFolderId = nodeId;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * Method called when files are dropped in the drag area.
         *
         * @param files - files dropped in the drag area.
         */
        /**
         * Method called when files are dropped in the drag area.
         *
         * @param {?} files - files dropped in the drag area.
         * @return {?}
         */
        UploadDragAreaComponent.prototype.onFilesDropped = /**
         * Method called when files are dropped in the drag area.
         *
         * @param {?} files - files dropped in the drag area.
         * @return {?}
         */
            function (files) {
                if (!this.disabled && files.length) {
                    this.uploadFiles(files);
                }
            };
        /**
         * Called when the file are dropped in the drag area.
         * @deprecated in 2.4.0: use `onFilesDropped` instead
         * @param item - FileEntity
         */
        /**
         * Called when the file are dropped in the drag area.
         * @deprecated in 2.4.0: use `onFilesDropped` instead
         * @param {?} item - FileEntity
         * @return {?}
         */
        UploadDragAreaComponent.prototype.onFilesEntityDropped = /**
         * Called when the file are dropped in the drag area.
         * @deprecated in 2.4.0: use `onFilesDropped` instead
         * @param {?} item - FileEntity
         * @return {?}
         */
            function (item) {
                var _this = this;
                if (!this.disabled) {
                    item.file(function (file) {
                        // const fileModel = this.createFileModel(file, this.rootFolderId, item.fullPath.replace(item.name, ''));
                        // const fileModel = this.createFileModel(file, this.rootFolderId, item.fullPath.replace(item.name, ''));
                        _this.uploadFiles([file]);
                    });
                }
            };
        /**
         * Called when a folder are dropped in the drag area
         *
         * @param folder - name of the dropped folder
         */
        /**
         * Called when a folder are dropped in the drag area
         *
         * @param {?} folder - name of the dropped folder
         * @return {?}
         */
        UploadDragAreaComponent.prototype.onFolderEntityDropped = /**
         * Called when a folder are dropped in the drag area
         *
         * @param {?} folder - name of the dropped folder
         * @return {?}
         */
            function (folder) {
                var _this = this;
                if (!this.disabled && folder.isDirectory) {
                    adfCore.FileUtils.flattern(folder).then(function (filesInfo) {
                        _this.uploadFilesInfo(filesInfo);
                    });
                }
            };
        /**
         * Show undo notification bar.
         *
         * @param latestFilesAdded - files in the upload queue enriched with status flag and xhr object.
         */
        /**
         * Show undo notification bar.
         *
         * @param {?} latestFilesAdded - files in the upload queue enriched with status flag and xhr object.
         * @return {?}
         */
        UploadDragAreaComponent.prototype.showUndoNotificationBar = /**
         * Show undo notification bar.
         *
         * @param {?} latestFilesAdded - files in the upload queue enriched with status flag and xhr object.
         * @return {?}
         */
            function (latestFilesAdded) {
                var _this = this;
                /** @type {?} */
                var messageTranslate;
                /** @type {?} */
                var actionTranslate;
                messageTranslate = this.translationService.get('FILE_UPLOAD.MESSAGES.PROGRESS');
                actionTranslate = this.translationService.get('FILE_UPLOAD.ACTION.UNDO');
                this.notificationService.openSnackMessageAction(messageTranslate.value, actionTranslate.value, 3000).onAction().subscribe(function () {
                    var _a;
                    (_a = _this.uploadService).cancelUpload.apply(_a, __spread(latestFilesAdded));
                });
            };
        /** Returns true or false considering the component options and node permissions */
        /**
         * Returns true or false considering the component options and node permissions
         * @return {?}
         */
        UploadDragAreaComponent.prototype.isDroppable = /**
         * Returns true or false considering the component options and node permissions
         * @return {?}
         */
            function () {
                return !this.disabled;
            };
        /**
         * Handles 'upload-files' events raised by child components.
         *
         * @param event DOM event
         */
        /**
         * Handles 'upload-files' events raised by child components.
         *
         * @param {?} event DOM event
         * @return {?}
         */
        UploadDragAreaComponent.prototype.onUploadFiles = /**
         * Handles 'upload-files' events raised by child components.
         *
         * @param {?} event DOM event
         * @return {?}
         */
            function (event) {
                event.stopPropagation();
                event.preventDefault();
                /** @type {?} */
                var isAllowed = this.contentService.hasPermission(event.detail.data.obj.entry, adfCore.PermissionsEnum.CREATE);
                if (isAllowed) {
                    /** @type {?} */
                    var fileInfo = event.detail.files;
                    if (this.isTargetNodeFolder(event)) {
                        /** @type {?} */
                        var destinationFolderName_1 = event.detail.data.obj.entry.name;
                        fileInfo.map(function (file) { return file.relativeFolder = destinationFolderName_1 ? destinationFolderName_1.concat(file.relativeFolder) : file.relativeFolder; });
                    }
                    if (fileInfo && fileInfo.length > 0) {
                        this.uploadFilesInfo(fileInfo);
                    }
                }
            };
        /**
         * @param {?} event
         * @return {?}
         */
        UploadDragAreaComponent.prototype.isTargetNodeFolder = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                return event.detail.data.obj && event.detail.data.obj.entry.isFolder;
            };
        UploadDragAreaComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-upload-drag-area',
                        template: "<div [file-draggable]=\"isDroppable()\" class=\"upload-border\"\n     (filesDropped)=\"onFilesDropped($event)\"\n     (folderEntityDropped)=\"onFolderEntityDropped($event)\"\n     (upload-files)=\"onUploadFiles($event)\"\n     dropzone=\"\" webkitdropzone=\"*\" #droparea>\n    <ng-content></ng-content>\n</div>\n",
                        host: { 'class': 'adf-upload-drag-area' },
                        viewProviders: [
                            { provide: adfCore.EXTENDIBLE_COMPONENT, useExisting: core.forwardRef(function () { return UploadDragAreaComponent; }) }
                        ],
                        encapsulation: core.ViewEncapsulation.None,
                        styles: ["adf-upload-drag-area{overflow:hidden}.upload-border{vertical-align:middle;text-align:center;width:100%;box-sizing:border-box}.file-draggable__input-focus{color:#2196f3;border:1px dashed #2196f3}"]
                    }] }
        ];
        /** @nocollapse */
        UploadDragAreaComponent.ctorParameters = function () {
            return [
                { type: adfCore.UploadService },
                { type: adfCore.TranslationService },
                { type: adfCore.NotificationService },
                { type: adfCore.ContentService },
                { type: core.NgZone }
            ];
        };
        UploadDragAreaComponent.propDecorators = {
            parentId: [{ type: core.Input }]
        };
        return UploadDragAreaComponent;
    }(UploadBase));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var FileDraggableDirective = /** @class */ (function () {
        function FileDraggableDirective(el, ngZone) {
            this.ngZone = ngZone;
            /**
             * Enables/disables drag-and-drop functionality.
             */
            this.enabled = true;
            /**
             * Emitted when one or more files are dragged and dropped onto the draggable element.
             */
            this.filesDropped = new core.EventEmitter();
            /**
             * Emitted when one or more files are dragged and dropped onto the draggable element.
             * @deprecated in 2.4.0: use `filesDropped` instead
             */
            this.filesEntityDropped = new core.EventEmitter();
            /**
             * Emitted when a directory is dragged and dropped onto the draggable element.
             */
            this.folderEntityDropped = new core.EventEmitter();
            this.cssClassName = 'file-draggable__input-focus';
            this.element = el.nativeElement;
        }
        /**
         * @return {?}
         */
        FileDraggableDirective.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.ngZone.runOutsideAngular(function () {
                    _this.element.addEventListener('dragenter', _this.onDragEnter.bind(_this));
                    _this.element.addEventListener('dragover', _this.onDragOver.bind(_this));
                    _this.element.addEventListener('dragleave', _this.onDragLeave.bind(_this));
                    _this.element.addEventListener('drop', _this.onDropFiles.bind(_this));
                });
            };
        /**
         * @return {?}
         */
        FileDraggableDirective.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                this.element.removeEventListener('dragenter', this.onDragEnter);
                this.element.removeEventListener('dragover', this.onDragOver);
                this.element.removeEventListener('dragleave', this.onDragLeave);
                this.element.removeEventListener('drop', this.onDropFiles);
            };
        /**
         * Method called when files is dropped in the drag and drop area.
         * @param event DOM event.
         */
        /**
         * Method called when files is dropped in the drag and drop area.
         * @param {?} event DOM event.
         * @return {?}
         */
        FileDraggableDirective.prototype.onDropFiles = /**
         * Method called when files is dropped in the drag and drop area.
         * @param {?} event DOM event.
         * @return {?}
         */
            function (event) {
                if (this.enabled && !event.defaultPrevented) {
                    this.preventDefault(event);
                    /** @type {?} */
                    var items = event.dataTransfer.items;
                    if (items) {
                        /** @type {?} */
                        var files = [];
                        for (var i = 0; i < items.length; i++) {
                            if (items[i].webkitGetAsEntry) {
                                /** @type {?} */
                                var item = items[i].webkitGetAsEntry();
                                if (item) {
                                    if (item.isFile) {
                                        /** @type {?} */
                                        var file = items[i].getAsFile();
                                        if (file) {
                                            files.push(file);
                                        }
                                    }
                                    else if (item.isDirectory) {
                                        this.folderEntityDropped.emit(item);
                                    }
                                }
                            }
                        }
                        if (files.length > 0) {
                            this.filesDropped.emit(files);
                        }
                    }
                    else {
                        /** @type {?} */
                        var files = adfCore.FileUtils.toFileArray(event.dataTransfer.files);
                        this.filesDropped.emit(files);
                    }
                    this.element.classList.remove(this.cssClassName);
                }
            };
        /**
         * Change the style of the drag area when a file drag in.
         *
         * @param event - DOM event.
         */
        /**
         * Change the style of the drag area when a file drag in.
         *
         * @param {?} event - DOM event.
         * @return {?}
         */
        FileDraggableDirective.prototype.onDragEnter = /**
         * Change the style of the drag area when a file drag in.
         *
         * @param {?} event - DOM event.
         * @return {?}
         */
            function (event) {
                if (this.enabled && !event.defaultPrevented) {
                    this.preventDefault(event);
                    this.element.classList.add(this.cssClassName);
                }
            };
        /**
         * Change the style of the drag area when a file drag out.
         *
         * @param event - DOM event.
         */
        /**
         * Change the style of the drag area when a file drag out.
         *
         * @param {?} event - DOM event.
         * @return {?}
         */
        FileDraggableDirective.prototype.onDragLeave = /**
         * Change the style of the drag area when a file drag out.
         *
         * @param {?} event - DOM event.
         * @return {?}
         */
            function (event) {
                if (this.enabled && !event.defaultPrevented) {
                    this.preventDefault(event);
                    this.element.classList.remove(this.cssClassName);
                }
            };
        /**
         * Change the style of the drag area when a file is over the drag area.
         *
         * @param event
         */
        /**
         * Change the style of the drag area when a file is over the drag area.
         *
         * @param {?} event
         * @return {?}
         */
        FileDraggableDirective.prototype.onDragOver = /**
         * Change the style of the drag area when a file is over the drag area.
         *
         * @param {?} event
         * @return {?}
         */
            function (event) {
                if (this.enabled && !event.defaultPrevented) {
                    this.preventDefault(event);
                    this.element.classList.add(this.cssClassName);
                }
            };
        /**
         * Prevent default and stop propagation of the DOM event.
         *
         * @param $event - DOM event.
         */
        /**
         * Prevent default and stop propagation of the DOM event.
         *
         * @param {?} event
         * @return {?}
         */
        FileDraggableDirective.prototype.preventDefault = /**
         * Prevent default and stop propagation of the DOM event.
         *
         * @param {?} event
         * @return {?}
         */
            function (event) {
                event.stopPropagation();
                event.preventDefault();
            };
        FileDraggableDirective.decorators = [
            { type: core.Directive, args: [{
                        selector: '[file-draggable]'
                    },] }
        ];
        /** @nocollapse */
        FileDraggableDirective.ctorParameters = function () {
            return [
                { type: core.ElementRef },
                { type: core.NgZone }
            ];
        };
        FileDraggableDirective.propDecorators = {
            enabled: [{ type: core.Input, args: ['file-draggable',] }],
            filesDropped: [{ type: core.Output }],
            filesEntityDropped: [{ type: core.Output }],
            folderEntityDropped: [{ type: core.Output }]
        };
        return FileDraggableDirective;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var UploadModule = /** @class */ (function () {
        function UploadModule() {
        }
        UploadModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            adfCore.CoreModule.forChild(),
                            common.CommonModule,
                            MaterialModule
                        ],
                        declarations: [
                            FileDraggableDirective,
                            UploadDragAreaComponent,
                            UploadButtonComponent,
                            UploadVersionButtonComponent,
                            FileUploadingDialogComponent,
                            FileUploadingListComponent,
                            FileUploadingListRowComponent
                        ],
                        exports: [
                            FileDraggableDirective,
                            UploadDragAreaComponent,
                            UploadButtonComponent,
                            UploadVersionButtonComponent,
                            FileUploadingDialogComponent,
                            FileUploadingListComponent,
                            FileUploadingListRowComponent
                        ]
                    },] }
        ];
        return UploadModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var DocumentListModule = /** @class */ (function () {
        function DocumentListModule() {
        }
        DocumentListModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            adfCore.CoreModule.forChild(),
                            common.CommonModule,
                            flexLayout.FlexLayoutModule,
                            MaterialModule,
                            UploadModule
                        ],
                        declarations: [
                            DocumentListComponent,
                            ContentColumnComponent,
                            ContentColumnListComponent,
                            ContentActionComponent,
                            ContentActionListComponent,
                            EmptyFolderContentDirective,
                            NoPermissionContentDirective
                        ],
                        exports: [
                            DocumentListComponent,
                            ContentColumnComponent,
                            ContentColumnListComponent,
                            ContentActionComponent,
                            ContentActionListComponent,
                            EmptyFolderContentDirective,
                            NoPermissionContentDirective
                        ]
                    },] }
        ];
        return DocumentListModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var SearchQueryBuilderService = /** @class */ (function () {
        function SearchQueryBuilderService(appConfig, alfrescoApiService) {
            this.appConfig = appConfig;
            this.alfrescoApiService = alfrescoApiService;
            this._userQuery = '';
            this.updated = new rxjs.Subject();
            this.executed = new rxjs.Subject();
            this.categories = [];
            this.queryFragments = {};
            this.filterQueries = [];
            this.paging = null;
            this.sorting = [];
            this.userFacetQueries = [];
            this.userFacetBuckets = {};
            // TODO: to be supported in future iterations
            this.ranges = {};
            this.resetToDefaults();
        }
        Object.defineProperty(SearchQueryBuilderService.prototype, "userQuery", {
            get: /**
             * @return {?}
             */ function () {
                return this._userQuery;
            },
            set: /**
             * @param {?} value
             * @return {?}
             */ function (value) {
                value = (value || '').trim();
                this._userQuery = value ? "(" + value + ")" : '';
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        SearchQueryBuilderService.prototype.resetToDefaults = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var template = this.appConfig.get('search');
                if (template) {
                    this.config = JSON.parse(JSON.stringify(template));
                    this.categories = (this.config.categories || []).filter(function (category) { return category.enabled; });
                    this.filterQueries = this.config.filterQueries || [];
                    this.userFacetBuckets = {};
                    this.userFacetQueries = [];
                    if (this.config.sorting) {
                        this.sorting = this.config.sorting.defaults || [];
                    }
                }
            };
        /**
         * @param {?} query
         * @return {?}
         */
        SearchQueryBuilderService.prototype.addUserFacetQuery = /**
         * @param {?} query
         * @return {?}
         */
            function (query) {
                if (query) {
                    /** @type {?} */
                    var existing = this.userFacetQueries.find(function (facetQuery) { return facetQuery.label === query.label; });
                    if (existing) {
                        existing.query = query.query;
                    }
                    else {
                        this.userFacetQueries.push(__assign({}, query));
                    }
                }
            };
        /**
         * @param {?} query
         * @return {?}
         */
        SearchQueryBuilderService.prototype.removeUserFacetQuery = /**
         * @param {?} query
         * @return {?}
         */
            function (query) {
                if (query) {
                    this.userFacetQueries = this.userFacetQueries
                        .filter(function (facetQuery) { return facetQuery.label !== query.label; });
                }
            };
        /**
         * @param {?} field
         * @param {?} bucket
         * @return {?}
         */
        SearchQueryBuilderService.prototype.addUserFacetBucket = /**
         * @param {?} field
         * @param {?} bucket
         * @return {?}
         */
            function (field, bucket) {
                if (field && field.field && bucket) {
                    /** @type {?} */
                    var buckets = this.userFacetBuckets[field.field] || [];
                    /** @type {?} */
                    var existing = buckets.find(function (facetBucket) { return facetBucket.label === bucket.label; });
                    if (!existing) {
                        buckets.push(bucket);
                    }
                    this.userFacetBuckets[field.field] = buckets;
                }
            };
        /**
         * @param {?} field
         * @return {?}
         */
        SearchQueryBuilderService.prototype.getUserFacetBuckets = /**
         * @param {?} field
         * @return {?}
         */
            function (field) {
                return this.userFacetBuckets[field] || [];
            };
        /**
         * @param {?} field
         * @param {?} bucket
         * @return {?}
         */
        SearchQueryBuilderService.prototype.removeUserFacetBucket = /**
         * @param {?} field
         * @param {?} bucket
         * @return {?}
         */
            function (field, bucket) {
                if (field && field.field && bucket) {
                    /** @type {?} */
                    var buckets = this.userFacetBuckets[field.field] || [];
                    this.userFacetBuckets[field.field] = buckets
                        .filter(function (facetBucket) { return facetBucket.label !== bucket.label; });
                }
            };
        /**
         * @param {?} query
         * @return {?}
         */
        SearchQueryBuilderService.prototype.addFilterQuery = /**
         * @param {?} query
         * @return {?}
         */
            function (query) {
                if (query) {
                    /** @type {?} */
                    var existing = this.filterQueries.find(function (filterQuery) { return filterQuery.query === query; });
                    if (!existing) {
                        this.filterQueries.push({ query: query });
                    }
                }
            };
        /**
         * @param {?} query
         * @return {?}
         */
        SearchQueryBuilderService.prototype.removeFilterQuery = /**
         * @param {?} query
         * @return {?}
         */
            function (query) {
                if (query) {
                    this.filterQueries = this.filterQueries
                        .filter(function (filterQuery) { return filterQuery.query !== query; });
                }
            };
        /**
         * @param {?} label
         * @return {?}
         */
        SearchQueryBuilderService.prototype.getFacetQuery = /**
         * @param {?} label
         * @return {?}
         */
            function (label) {
                if (label && this.hasFacetQueries) {
                    /** @type {?} */
                    var result = this.config.facetQueries.queries.find(function (query) { return query.label === label; });
                    if (result) {
                        return __assign({}, result);
                    }
                }
                return null;
            };
        /**
         * @param {?} label
         * @return {?}
         */
        SearchQueryBuilderService.prototype.getFacetField = /**
         * @param {?} label
         * @return {?}
         */
            function (label) {
                if (label) {
                    /** @type {?} */
                    var fields = this.config.facetFields.fields || [];
                    /** @type {?} */
                    var result = fields.find(function (field) { return field.label === label; });
                    if (result) {
                        return __assign({}, result);
                    }
                }
                return null;
            };
        /**
         * @return {?}
         */
        SearchQueryBuilderService.prototype.update = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var query = this.buildQuery();
                this.updated.next(query);
            };
        /**
         * @return {?}
         */
        SearchQueryBuilderService.prototype.execute = /**
         * @return {?}
         */
            function () {
                return __awaiter(this, void 0, void 0, function () {
                    var query, data;
                    return __generator(this, function (_a) {
                        switch (_a.label) {
                            case 0:
                                query = this.buildQuery();
                                if (!query)
                                    return [3 /*break*/, 2];
                                return [4 /*yield*/, this.alfrescoApiService.searchApi.search(query)];
                            case 1:
                                data = _a.sent();
                                this.executed.next(data);
                                _a.label = 2;
                            case 2: return [2 /*return*/];
                        }
                    });
                });
            };
        /**
         * @return {?}
         */
        SearchQueryBuilderService.prototype.buildQuery = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var query = this.getFinalQuery();
                /** @type {?} */
                var include = this.config.include || [];
                if (include.length === 0) {
                    include.push('path', 'allowableOperations');
                }
                if (query) {
                    /** @type {?} */
                    var result = {
                        query: {
                            query: query,
                            language: 'afts'
                        },
                        include: include,
                        paging: this.paging,
                        fields: this.config.fields,
                        filterQueries: this.filterQueries,
                        facetQueries: this.facetQueries,
                        facetFields: this.facetFields,
                        sort: this.sort
                    };
                    return result;
                }
                return null;
            };
        /**
         * Returns primary sorting definition.
         */
        /**
         * Returns primary sorting definition.
         * @return {?}
         */
        SearchQueryBuilderService.prototype.getPrimarySorting = /**
         * Returns primary sorting definition.
         * @return {?}
         */
            function () {
                if (this.sorting && this.sorting.length > 0) {
                    return this.sorting[0];
                }
                return null;
            };
        /**
         * Returns all pre-configured sorting options that users can choose from.
         */
        /**
         * Returns all pre-configured sorting options that users can choose from.
         * @return {?}
         */
        SearchQueryBuilderService.prototype.getSortingOptions = /**
         * Returns all pre-configured sorting options that users can choose from.
         * @return {?}
         */
            function () {
                if (this.config && this.config.sorting) {
                    return this.config.sorting.options || [];
                }
                return [];
            };
        Object.defineProperty(SearchQueryBuilderService.prototype, "hasFacetQueries", {
            /**
             * Check if FacetQueries has been defined
             */
            get: /**
             * Check if FacetQueries has been defined
             * @return {?}
             */ function () {
                if (this.config
                    && this.config.facetQueries
                    && this.config.facetQueries.queries
                    && this.config.facetQueries.queries.length > 0) {
                    return true;
                }
                return false;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(SearchQueryBuilderService.prototype, "sort", {
            get: /**
             * @return {?}
             */ function () {
                return this.sorting.map(function (def) {
                    return {
                        type: def.type,
                        field: def.field,
                        ascending: def.ascending
                    };
                });
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(SearchQueryBuilderService.prototype, "facetQueries", {
            get: /**
             * @return {?}
             */ function () {
                if (this.hasFacetQueries) {
                    return this.config.facetQueries.queries.map(function (query) {
                        return /** @type {?} */ (__assign({}, query));
                    });
                }
                return null;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        SearchQueryBuilderService.prototype.getFinalQuery = /**
         * @return {?}
         */
            function () {
                var _this = this;
                /** @type {?} */
                var query = '';
                this.categories.forEach(function (facet) {
                    /** @type {?} */
                    var customQuery = _this.queryFragments[facet.id];
                    if (customQuery) {
                        if (query.length > 0) {
                            query += ' AND ';
                        }
                        query += "(" + customQuery + ")";
                    }
                });
                /** @type {?} */
                var result = [this.userQuery, query]
                    .filter(function (entry) { return entry; })
                    .join(' AND ');
                if (this.userFacetQueries && this.userFacetQueries.length > 0) {
                    /** @type {?} */
                    var combined = this.userFacetQueries
                        .map(function (userQuery) { return userQuery.query; })
                        .join(' OR ');
                    result += " AND (" + combined + ")";
                }
                if (this.userFacetBuckets) {
                    Object.keys(this.userFacetBuckets).forEach(function (key) {
                        /** @type {?} */
                        var subQuery = (_this.userFacetBuckets[key] || [])
                            .map(function (bucket) { return bucket.filterQuery; })
                            .join(' OR ');
                        if (subQuery) {
                            if (result.length > 0) {
                                result += ' AND ';
                            }
                            result += "(" + subQuery + ")";
                        }
                    });
                }
                return result;
            };
        Object.defineProperty(SearchQueryBuilderService.prototype, "facetFields", {
            get: /**
             * @return {?}
             */ function () {
                /** @type {?} */
                var facetFields = this.config.facetFields && this.config.facetFields.fields;
                if (facetFields && facetFields.length > 0) {
                    return {
                        facets: facetFields.map(function (facet) {
                            return ({
                                field: facet.field,
                                mincount: facet.mincount,
                                label: facet.label,
                                limit: facet.limit,
                                offset: facet.offset,
                                prefix: facet.prefix
                            });
                        })
                    };
                }
                return null;
            },
            enumerable: true,
            configurable: true
        });
        SearchQueryBuilderService.decorators = [
            { type: core.Injectable }
        ];
        /** @nocollapse */
        SearchQueryBuilderService.ctorParameters = function () {
            return [
                { type: adfCore.AppConfigService },
                { type: adfCore.AlfrescoApiService }
            ];
        };
        return SearchQueryBuilderService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var SearchComponent = /** @class */ (function () {
        function SearchComponent(searchService, _elementRef) {
            var _this = this;
            this.searchService = searchService;
            this._elementRef = _elementRef;
            /**
             * Function that maps an option's value to its display value in the trigger.
             */
            this.displayWith = null;
            /**
             * Maximum number of results to show in the search.
             */
            this.maxResults = 20;
            /**
             * Number of results to skip from the results pagination.
             */
            this.skipResults = 0;
            /**
             * Search term to use when executing the search. Updating this value will
             * run a new search and update the results.
             */
            this.searchTerm = '';
            /**
             * Emitted when search results have fully loaded.
             */
            this.resultLoaded = new core.EventEmitter();
            /**
             * Emitted when an error occurs.
             */
            this.error = new core.EventEmitter();
            this.showPanel = false;
            this._isOpen = false;
            this.keyPressedStream = new rxjs.Subject();
            this._classList = {};
            this.keyPressedStream.asObservable()
                .pipe(operators.debounceTime(200))
                .subscribe(function (searchedWord) {
                _this.loadSearchResults(searchedWord);
            });
            searchService.dataLoaded.subscribe(function (data) { return _this.onSearchDataLoaded(data); }, function (error) { return _this.onSearchDataError(error); });
        }
        Object.defineProperty(SearchComponent.prototype, "classList", {
            /** CSS class for display. */
            set: /**
             * CSS class for display.
             * @param {?} classList
             * @return {?}
             */ function (classList) {
                var _this = this;
                if (classList && classList.length) {
                    classList.split(' ').forEach(function (className) { return _this._classList[className.trim()] = true; });
                    this._elementRef.nativeElement.className = '';
                }
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(SearchComponent.prototype, "isOpen", {
            get: /**
             * @return {?}
             */ function () {
                return this._isOpen && this.showPanel;
            },
            set: /**
             * @param {?} value
             * @return {?}
             */ function (value) {
                this._isOpen = value;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        SearchComponent.prototype.ngAfterContentInit = /**
         * @return {?}
         */
            function () {
                this.setVisibility();
            };
        /**
         * @param {?} changes
         * @return {?}
         */
        SearchComponent.prototype.ngOnChanges = /**
         * @param {?} changes
         * @return {?}
         */
            function (changes) {
                if (changes.queryBody &&
                    this.hasDifferentQueryBody(changes.queryBody.previousValue, changes.queryBody.currentValue)) {
                    this.loadSearchResults();
                }
                if (changes.searchTerm && changes.searchTerm.currentValue) {
                    this.loadSearchResults(changes.searchTerm.currentValue);
                }
            };
        /**
         * @return {?}
         */
        SearchComponent.prototype.resetResults = /**
         * @return {?}
         */
            function () {
                this.cleanResults();
                this.setVisibility();
            };
        /**
         * @return {?}
         */
        SearchComponent.prototype.reload = /**
         * @return {?}
         */
            function () {
                this.loadSearchResults(this.searchTerm);
            };
        /**
         * @param {?} previousQueryBody
         * @param {?} currentQueryBody
         * @return {?}
         */
        SearchComponent.prototype.hasDifferentQueryBody = /**
         * @param {?} previousQueryBody
         * @param {?} currentQueryBody
         * @return {?}
         */
            function (previousQueryBody, currentQueryBody) {
                return JSON.stringify(previousQueryBody) !== JSON.stringify(currentQueryBody);
            };
        /**
         * @return {?}
         */
        SearchComponent.prototype.cleanResults = /**
         * @return {?}
         */
            function () {
                if (this.results) {
                    this.results = {};
                }
            };
        /**
         * @param {?=} searchTerm
         * @return {?}
         */
        SearchComponent.prototype.loadSearchResults = /**
         * @param {?=} searchTerm
         * @return {?}
         */
            function (searchTerm) {
                var _this = this;
                this.resetResults();
                if (searchTerm) {
                    if (this.queryBody) {
                        this.searchService.searchByQueryBody(this.queryBody).subscribe(function (result) { return _this.onSearchDataLoaded(result); }, function (err) { return _this.onSearchDataError(err); });
                    }
                    else {
                        this.searchService.search(searchTerm, this.maxResults, this.skipResults).subscribe(function (result) { return _this.onSearchDataLoaded(result); }, function (err) { return _this.onSearchDataError(err); });
                    }
                }
                else {
                    this.cleanResults();
                }
            };
        /**
         * @param {?} data
         * @return {?}
         */
        SearchComponent.prototype.onSearchDataLoaded = /**
         * @param {?} data
         * @return {?}
         */
            function (data) {
                if (data) {
                    this.results = data;
                    this.resultLoaded.emit(this.results);
                    this.isOpen = true;
                    this.setVisibility();
                }
            };
        /**
         * @param {?} error
         * @return {?}
         */
        SearchComponent.prototype.onSearchDataError = /**
         * @param {?} error
         * @return {?}
         */
            function (error) {
                if (error && error.status !== 400) {
                    this.results = null;
                    this.error.emit(error);
                }
            };
        /**
         * @return {?}
         */
        SearchComponent.prototype.hidePanel = /**
         * @return {?}
         */
            function () {
                if (this.isOpen) {
                    this._classList['adf-search-show'] = false;
                    this._classList['adf-search-hide'] = true;
                    this.isOpen = false;
                }
            };
        /**
         * @return {?}
         */
        SearchComponent.prototype.setVisibility = /**
         * @return {?}
         */
            function () {
                this.showPanel = !!this.results && !!this.results.list;
                this._classList['adf-search-show'] = this.showPanel;
                this._classList['adf-search-hide'] = !this.showPanel;
            };
        SearchComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-search',
                        template: "<div role=\"listbox\" id=\"adf-search-results-content\" [ngClass]=\"_classList\" #panel>\n    <ng-template\n        [ngTemplateOutlet]=\"template\"\n        [ngTemplateOutletContext]=\"{ $implicit: results }\">\n    </ng-template>\n</div>\n\n\n",
                        encapsulation: core.ViewEncapsulation.None,
                        preserveWhitespaces: false,
                        exportAs: 'searchAutocomplete',
                        host: {
                            'class': 'adf-search'
                        },
                        styles: [""]
                    }] }
        ];
        /** @nocollapse */
        SearchComponent.ctorParameters = function () {
            return [
                { type: adfCore.SearchService },
                { type: core.ElementRef }
            ];
        };
        SearchComponent.propDecorators = {
            panel: [{ type: core.ViewChild, args: ['panel',] }],
            template: [{ type: core.ContentChild, args: [core.TemplateRef,] }],
            displayWith: [{ type: core.Input }],
            maxResults: [{ type: core.Input }],
            skipResults: [{ type: core.Input }],
            queryBody: [{ type: core.Input }],
            searchTerm: [{ type: core.Input }],
            classList: [{ type: core.Input, args: ['class',] }],
            resultLoaded: [{ type: core.Output }],
            error: [{ type: core.Output }]
        };
        return SearchComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var EmptySearchResultComponent = /** @class */ (function () {
        function EmptySearchResultComponent() {
        }
        EmptySearchResultComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-empty-search-result',
                        template: "<div class=\"adf-empty-search-result\">\n    <ng-content></ng-content>\n</div>\n",
                        encapsulation: core.ViewEncapsulation.None
                    }] }
        ];
        return EmptySearchResultComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var SearchControlComponent = /** @class */ (function () {
        function SearchControlComponent(authService, thumbnailService) {
            var _this = this;
            this.authService = authService;
            this.thumbnailService = thumbnailService;
            /**
             * Toggles whether to use an expanding search control. If false
             * then a regular input is used.
             */
            this.expandable = true;
            /**
             * Toggles highlighting of the search term in the results.
             */
            this.highlight = false;
            /**
             * Type of the input field to render, e.g. "search" or "text" (default).
             */
            this.inputType = 'text';
            /**
             * Toggles auto-completion of the search input field.
             */
            this.autocomplete = false;
            /**
             * Toggles "find-as-you-type" suggestions for possible matches.
             */
            this.liveSearchEnabled = true;
            /**
             * Maximum number of results to show in the live search.
             */
            this.liveSearchMaxResults = 5;
            /**
             * Emitted when the search is submitted pressing ENTER button.
             * The search term is provided as value of the event.
             */
            this.submit = new core.EventEmitter();
            /**
             * Emitted when the search term is changed. The search term is provided
             * in the 'value' property of the returned object.  If the term is less
             * than three characters in length then the term is truncated to an empty
             * string.
             */
            this.searchChange = new core.EventEmitter();
            /**
             * Emitted when a file item from the list of "find-as-you-type" results is selected.
             */
            this.optionClicked = new core.EventEmitter();
            this.searchTerm = '';
            this.noSearchResultTemplate = null;
            this.toggleSearch = new rxjs.Subject();
            this.focusSubject = new rxjs.Subject();
            this.toggleSearch.asObservable().pipe(operators.debounceTime(200)).subscribe(function () {
                if (_this.expandable) {
                    _this.subscriptAnimationState = _this.subscriptAnimationState === 'inactive' ? 'active' : 'inactive';
                    if (_this.subscriptAnimationState === 'inactive') {
                        _this.searchTerm = '';
                        _this.searchAutocomplete.resetResults();
                        if (document.activeElement.id === _this.searchInput.nativeElement.id) {
                            _this.searchInput.nativeElement.blur();
                        }
                    }
                }
            });
        }
        /**
         * @param {?} animationDoneEvent
         * @return {?}
         */
        SearchControlComponent.prototype.applySearchFocus = /**
         * @param {?} animationDoneEvent
         * @return {?}
         */
            function (animationDoneEvent) {
                if (animationDoneEvent.toState === 'active') {
                    this.searchInput.nativeElement.focus();
                }
            };
        /**
         * @return {?}
         */
        SearchControlComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                this.subscriptAnimationState = this.expandable ? 'inactive' : 'no-animation';
                this.setupFocusEventHandlers();
            };
        /**
         * @return {?}
         */
        SearchControlComponent.prototype.isNoSearchTemplatePresent = /**
         * @return {?}
         */
            function () {
                return this.emptySearchTemplate ? true : false;
            };
        /**
         * @return {?}
         */
        SearchControlComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                if (this.focusSubject) {
                    this.focusSubject.unsubscribe();
                    this.focusSubject = null;
                }
                if (this.toggleSearch) {
                    this.toggleSearch.unsubscribe();
                    this.toggleSearch = null;
                }
            };
        /**
         * @return {?}
         */
        SearchControlComponent.prototype.isLoggedIn = /**
         * @return {?}
         */
            function () {
                return this.authService.isEcmLoggedIn();
            };
        /**
         * @param {?} event
         * @return {?}
         */
        SearchControlComponent.prototype.searchSubmit = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                this.submit.emit(event);
                this.toggleSearchBar();
            };
        /**
         * @param {?} event
         * @return {?}
         */
        SearchControlComponent.prototype.inputChange = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                this.searchChange.emit(event);
            };
        /**
         * @return {?}
         */
        SearchControlComponent.prototype.getAutoComplete = /**
         * @return {?}
         */
            function () {
                return this.autocomplete ? 'on' : 'off';
            };
        /**
         * @param {?} node
         * @return {?}
         */
        SearchControlComponent.prototype.getMimeTypeIcon = /**
         * @param {?} node
         * @return {?}
         */
            function (node) {
                /** @type {?} */
                var mimeType;
                if (node.entry.content && node.entry.content.mimeType) {
                    mimeType = node.entry.content.mimeType;
                }
                if (node.entry.isFolder) {
                    mimeType = 'folder';
                }
                return this.thumbnailService.getMimeTypeIcon(mimeType);
            };
        /**
         * @return {?}
         */
        SearchControlComponent.prototype.isSearchBarActive = /**
         * @return {?}
         */
            function () {
                return this.subscriptAnimationState === 'active' && this.liveSearchEnabled;
            };
        /**
         * @return {?}
         */
        SearchControlComponent.prototype.toggleSearchBar = /**
         * @return {?}
         */
            function () {
                if (this.toggleSearch) {
                    this.toggleSearch.next();
                }
            };
        /**
         * @param {?} item
         * @return {?}
         */
        SearchControlComponent.prototype.elementClicked = /**
         * @param {?} item
         * @return {?}
         */
            function (item) {
                if (item.entry) {
                    this.optionClicked.next(item);
                    this.toggleSearchBar();
                }
            };
        /**
         * @param {?} $event
         * @return {?}
         */
        SearchControlComponent.prototype.onFocus = /**
         * @param {?} $event
         * @return {?}
         */
            function ($event) {
                this.focusSubject.next($event);
            };
        /**
         * @param {?} $event
         * @return {?}
         */
        SearchControlComponent.prototype.onBlur = /**
         * @param {?} $event
         * @return {?}
         */
            function ($event) {
                this.focusSubject.next($event);
            };
        /**
         * @return {?}
         */
        SearchControlComponent.prototype.activateToolbar = /**
         * @return {?}
         */
            function () {
                if (!this.isSearchBarActive()) {
                    this.toggleSearchBar();
                }
            };
        /**
         * @return {?}
         */
        SearchControlComponent.prototype.selectFirstResult = /**
         * @return {?}
         */
            function () {
                if (this.listResultElement && this.listResultElement.length > 0) {
                    /** @type {?} */
                    var firstElement = /** @type {?} */ (this.listResultElement.first);
                    firstElement._getHostElement().focus();
                }
            };
        /**
         * @param {?} $event
         * @return {?}
         */
        SearchControlComponent.prototype.onRowArrowDown = /**
         * @param {?} $event
         * @return {?}
         */
            function ($event) {
                /** @type {?} */
                var nextElement = this.getNextElementSibling(/** @type {?} */ ($event.target));
                if (nextElement) {
                    nextElement.focus();
                }
            };
        /**
         * @param {?} $event
         * @return {?}
         */
        SearchControlComponent.prototype.onRowArrowUp = /**
         * @param {?} $event
         * @return {?}
         */
            function ($event) {
                /** @type {?} */
                var previousElement = this.getPreviousElementSibling(/** @type {?} */ ($event.target));
                if (previousElement) {
                    previousElement.focus();
                }
                else {
                    this.searchInput.nativeElement.focus();
                    this.focusSubject.next(new FocusEvent('focus'));
                }
            };
        /**
         * @return {?}
         */
        SearchControlComponent.prototype.setupFocusEventHandlers = /**
         * @return {?}
         */
            function () {
                var _this = this;
                /** @type {?} */
                var focusEvents = this.focusSubject
                    .asObservable()
                    .pipe(operators.debounceTime(50), operators.filter(function ($event) {
                    return _this.isSearchBarActive() && ($event.type === 'blur' || $event.type === 'focusout');
                }));
                focusEvents.subscribe(function () {
                    _this.toggleSearchBar();
                });
            };
        /**
         * @param {?} node
         * @return {?}
         */
        SearchControlComponent.prototype.getNextElementSibling = /**
         * @param {?} node
         * @return {?}
         */
            function (node) {
                return node.nextElementSibling;
            };
        /**
         * @param {?} node
         * @return {?}
         */
        SearchControlComponent.prototype.getPreviousElementSibling = /**
         * @param {?} node
         * @return {?}
         */
            function (node) {
                return node.previousElementSibling;
            };
        SearchControlComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-search-control',
                        template: "<div class=\"adf-search-container\">\n    <div *ngIf=\"isLoggedIn()\" [@transitionMessages]=\"subscriptAnimationState\"\n         (@transitionMessages.done)=\"applySearchFocus($event)\">\n        <button mat-icon-button\n                *ngIf=\"expandable\"\n                id=\"adf-search-button\"\n                class=\"adf-search-button\"\n                [title]=\"'SEARCH.BUTTON.TOOLTIP' | translate\"\n                (click)=\"toggleSearchBar()\"\n                (keyup.enter)=\"toggleSearchBar()\">\n            <mat-icon [attr.aria-label]=\"'SEARCH.BUTTON.ARIA-LABEL' | translate\">search</mat-icon>\n        </button>\n        <mat-form-field class=\"adf-input-form-field-divider\">\n            <input matInput\n                   #searchInput\n                   [attr.aria-label]=\"'SEARCH.INPUT.ARIA-LABEL' | translate\"\n                   [attr.type]=\"inputType\"\n                   [autocomplete]=\"getAutoComplete()\"\n                   id=\"adf-control-input\"\n                   [(ngModel)]=\"searchTerm\"\n                   (focus)=\"activateToolbar()\"\n                   (blur)=\"onBlur($event)\"\n                   (keyup.escape)=\"toggleSearchBar()\"\n                   (keyup.arrowdown)=\"selectFirstResult()\"\n                   (ngModelChange)=\"inputChange($event)\"\n                   [searchAutocomplete]=\"auto\"\n                   (keyup.enter)=\"searchSubmit($event)\">\n        </mat-form-field>\n    </div>\n</div>\n\n<adf-search #search\n            #auto=\"searchAutocomplete\"\n            class=\"adf-search-result-autocomplete\"\n            [maxResults]=\"liveSearchMaxResults\"\n            [queryBody]=\"customQueryBody\">\n    <ng-template let-data>\n        <mat-list *ngIf=\"isSearchBarActive()\" id=\"autocomplete-search-result-list\">\n            <mat-list-item\n                *ngFor=\"let item of data?.list?.entries; let idx = index\"\n                id=\"result_option_{{idx}}\"\n                [attr.data-automation-id]=\"'autocomplete_for_' + item.entry.name\"\n                [tabindex]=\"0\"\n                (focus)=\"onFocus($event)\"\n                (blur)=\"onBlur($event)\"\n                (keyup.arrowdown)=\"onRowArrowDown($event)\"\n                (keyup.arrowup)=\"onRowArrowUp($event)\"\n                class=\"adf-search-autocomplete-item\"\n                (click)=\"elementClicked(item)\"\n                (keyup.enter)=\"elementClicked(item)\"\n                (touchend)=\"elementClicked(item)\">\n                <!-- This is a comment -->\n                <mat-icon mat-list-icon>\n                    <img [src]=\"getMimeTypeIcon(item)\"/>\n                </mat-icon>\n                <h4 mat-line id=\"result_name_{{idx}}\"\n                    *ngIf=\"highlight; else elseBlock\"\n                    class=\"adf-search-fixed-text\"\n                    [innerHtml]=\"item.entry.name | highlight: searchTerm\">\n                    {{ item?.entry.name }}\n                </h4>\n                <ng-template #elseBlock>\n                    <h4 class=\"adf-search-fixed-text\" mat-line id=\"result_name_{{idx}}\"\n                        [innerHtml]=\"item.entry.name\"></h4>\n                </ng-template>\n                <p mat-line class=\"adf-search-fixed-text\"> {{item?.entry.createdByUser.displayName}} </p>\n            </mat-list-item>\n            <mat-list-item id=\"search_no_result\"\n                           data-automation-id=\"search_no_result_found\"\n                           *ngIf=\"data?.list?.entries.length === 0\">\n                <ng-content\n                    selector=\"adf-empty-search-result\"\n                    *ngIf=\"isNoSearchTemplatePresent() else defaultNoResult\">\n                </ng-content>\n                <ng-template #defaultNoResult>\n                    <p mat-line class=\"adf-search-fixed-text\">{{ 'SEARCH.RESULTS.NONE' | translate:{searchTerm:\n                        searchTerm} }}</p>\n                </ng-template>\n            </mat-list-item>\n        </mat-list>\n    </ng-template>\n</adf-search>\n",
                        animations: [
                            animations.trigger('transitionMessages', [
                                animations.state('active', animations.style({ transform: 'translateX(0%)', 'margin-left': '13px' })),
                                animations.state('inactive', animations.style({ transform: 'translateX(81%)' })),
                                animations.state('no-animation', animations.style({ transform: 'translateX(0%)', width: '100%' })),
                                animations.transition('inactive => active', animations.animate('300ms cubic-bezier(0.55, 0, 0.55, 0.2)')),
                                animations.transition('active => inactive', animations.animate('300ms cubic-bezier(0.55, 0, 0.55, 0.2)'))
                            ])
                        ],
                        encapsulation: core.ViewEncapsulation.None,
                        host: { class: 'adf-search-control' },
                        styles: [""]
                    }] }
        ];
        /** @nocollapse */
        SearchControlComponent.ctorParameters = function () {
            return [
                { type: adfCore.AuthenticationService },
                { type: adfCore.ThumbnailService }
            ];
        };
        SearchControlComponent.propDecorators = {
            expandable: [{ type: core.Input }],
            highlight: [{ type: core.Input }],
            inputType: [{ type: core.Input }],
            autocomplete: [{ type: core.Input }],
            liveSearchEnabled: [{ type: core.Input }],
            liveSearchMaxResults: [{ type: core.Input }],
            customQueryBody: [{ type: core.Input }],
            submit: [{ type: core.Output }],
            searchChange: [{ type: core.Output }],
            optionClicked: [{ type: core.Output }],
            searchAutocomplete: [{ type: core.ViewChild, args: ['search',] }],
            searchInput: [{ type: core.ViewChild, args: ['searchInput',] }],
            listResultElement: [{ type: core.ViewChildren, args: [material.MatListItem,] }],
            emptySearchTemplate: [{ type: core.ContentChild, args: [EmptySearchResultComponent,] }]
        };
        return SearchControlComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @type {?} */
    var SEARCH_AUTOCOMPLETE_VALUE_ACCESSOR = {
        provide: forms.NG_VALUE_ACCESSOR,
        useExisting: core.forwardRef(function () { return SearchTriggerDirective; }),
        multi: true
    };
    var SearchTriggerDirective = /** @class */ (function () {
        function SearchTriggerDirective(element, ngZone, changeDetectorRef, document) {
            this.element = element;
            this.ngZone = ngZone;
            this.changeDetectorRef = changeDetectorRef;
            this.document = document;
            this.onDestroy$ = new rxjs.Subject();
            this.autocomplete = 'off';
            this._panelOpen = false;
            this.escapeEventStream = new rxjs.Subject();
            this.onChange = function () { };
            this.onTouched = function () { };
        }
        /**
         * @return {?}
         */
        SearchTriggerDirective.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                this.onDestroy$.next(true);
                this.onDestroy$.complete();
                if (this.escapeEventStream) {
                    this.escapeEventStream.unsubscribe();
                    this.escapeEventStream = null;
                }
                if (this.closingActionsSubscription) {
                    this.closingActionsSubscription.unsubscribe();
                }
            };
        Object.defineProperty(SearchTriggerDirective.prototype, "panelOpen", {
            get: /**
             * @return {?}
             */ function () {
                return this._panelOpen && this.searchPanel.showPanel;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        SearchTriggerDirective.prototype.openPanel = /**
         * @return {?}
         */
            function () {
                this.searchPanel.isOpen = this._panelOpen = true;
                this.closingActionsSubscription = this.subscribeToClosingActions();
            };
        /**
         * @return {?}
         */
        SearchTriggerDirective.prototype.closePanel = /**
         * @return {?}
         */
            function () {
                if (this._panelOpen) {
                    this.closingActionsSubscription.unsubscribe();
                    this._panelOpen = false;
                    this.searchPanel.resetResults();
                    this.searchPanel.hidePanel();
                    this.changeDetectorRef.detectChanges();
                }
            };
        Object.defineProperty(SearchTriggerDirective.prototype, "panelClosingActions", {
            get: /**
             * @return {?}
             */ function () {
                return rxjs.merge(this.escapeEventStream, this.outsideClickStream);
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(SearchTriggerDirective.prototype, "outsideClickStream", {
            get: /**
             * @return {?}
             */ function () {
                var _this = this;
                if (!this.document) {
                    return rxjs.of(null);
                }
                return rxjs.merge(rxjs.fromEvent(this.document, 'click'), rxjs.fromEvent(this.document, 'touchend')).pipe(operators.filter(function (event) {
                    /** @type {?} */
                    var clickTarget = /** @type {?} */ (event.target);
                    return _this._panelOpen && clickTarget !== _this.element.nativeElement;
                }));
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @param {?} value
         * @return {?}
         */
        SearchTriggerDirective.prototype.writeValue = /**
         * @param {?} value
         * @return {?}
         */
            function (value) {
                var _this = this;
                Promise.resolve(null).then(function () { return _this.setTriggerValue(value); });
            };
        /**
         * @param {?} fn
         * @return {?}
         */
        SearchTriggerDirective.prototype.registerOnChange = /**
         * @param {?} fn
         * @return {?}
         */
            function (fn) {
                this.onChange = fn;
            };
        /**
         * @param {?} fn
         * @return {?}
         */
        SearchTriggerDirective.prototype.registerOnTouched = /**
         * @param {?} fn
         * @return {?}
         */
            function (fn) {
                this.onTouched = fn;
            };
        /**
         * @param {?} event
         * @return {?}
         */
        SearchTriggerDirective.prototype.handleKeydown = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                /** @type {?} */
                var keyCode = event.keyCode;
                if (keyCode === keycodes.ESCAPE && this.panelOpen) {
                    this.escapeEventStream.next();
                    event.stopPropagation();
                }
                else if (keyCode === keycodes.ENTER) {
                    this.escapeEventStream.next();
                    event.preventDefault();
                }
            };
        /**
         * @param {?} event
         * @return {?}
         */
        SearchTriggerDirective.prototype.handleInput = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                if (document.activeElement === event.target) {
                    /** @type {?} */
                    var inputValue = ( /** @type {?} */(event.target)).value;
                    this.onChange(inputValue);
                    if (inputValue) {
                        this.searchPanel.keyPressedStream.next(inputValue);
                        this.openPanel();
                    }
                    else {
                        this.searchPanel.resetResults();
                        this.closePanel();
                    }
                }
            };
        /**
         * @param {?} event
         * @return {?}
         */
        SearchTriggerDirective.prototype.isPanelOptionClicked = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                /** @type {?} */
                var isPanelOption = false;
                if (event) {
                    /** @type {?} */
                    var clickTarget = /** @type {?} */ (event.target);
                    isPanelOption = !this.isNoResultOption(event) &&
                        !!this.searchPanel.panel &&
                        !!this.searchPanel.panel.nativeElement.contains(clickTarget);
                }
                return isPanelOption;
            };
        /**
         * @param {?} event
         * @return {?}
         */
        SearchTriggerDirective.prototype.isNoResultOption = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                return this.searchPanel.results.list ? this.searchPanel.results.list.entries.length === 0 : true;
            };
        /**
         * @return {?}
         */
        SearchTriggerDirective.prototype.subscribeToClosingActions = /**
         * @return {?}
         */
            function () {
                var _this = this;
                /** @type {?} */
                var firstStable = this.ngZone.onStable.asObservable();
                /** @type {?} */
                var optionChanges = this.searchPanel.keyPressedStream.asObservable();
                return rxjs.merge(firstStable, optionChanges)
                    .pipe(operators.takeUntil(this.onDestroy$), operators.switchMap(function () {
                    _this.searchPanel.setVisibility();
                    return _this.panelClosingActions;
                }))
                    .subscribe(function (event) { return _this.setValueAndClose(event); });
            };
        /**
         * @param {?} value
         * @return {?}
         */
        SearchTriggerDirective.prototype.setTriggerValue = /**
         * @param {?} value
         * @return {?}
         */
            function (value) {
                /** @type {?} */
                var toDisplay = this.searchPanel && this.searchPanel.displayWith ?
                    this.searchPanel.displayWith(value) : value;
                /** @type {?} */
                var inputValue = toDisplay != null ? toDisplay : '';
                this.element.nativeElement.value = inputValue;
            };
        /**
         * @param {?} event
         * @return {?}
         */
        SearchTriggerDirective.prototype.setValueAndClose = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                if (this.isPanelOptionClicked(event) && !event.defaultPrevented) {
                    this.setTriggerValue(event.target.textContent.trim());
                    this.onChange(event.target.textContent.trim());
                    this.element.nativeElement.focus();
                }
                this.closePanel();
            };
        SearchTriggerDirective.decorators = [
            { type: core.Directive, args: [{
                        selector: "input[searchAutocomplete], textarea[searchAutocomplete]",
                        host: {
                            'role': 'combobox',
                            '[attr.autocomplete]': 'autocomplete',
                            'aria-autocomplete': 'list',
                            '[attr.aria-expanded]': 'panelOpen.toString()',
                            '(blur)': 'onTouched()',
                            '(input)': 'handleInput($event)',
                            '(keydown)': 'handleKeydown($event)'
                        },
                        providers: [SEARCH_AUTOCOMPLETE_VALUE_ACCESSOR]
                    },] }
        ];
        /** @nocollapse */
        SearchTriggerDirective.ctorParameters = function () {
            return [
                { type: core.ElementRef },
                { type: core.NgZone },
                { type: core.ChangeDetectorRef },
                { type: undefined, decorators: [{ type: core.Optional }, { type: core.Inject, args: [common.DOCUMENT,] }] }
            ];
        };
        SearchTriggerDirective.propDecorators = {
            searchPanel: [{ type: core.Input, args: ['searchAutocomplete',] }],
            autocomplete: [{ type: core.Input }]
        };
        return SearchTriggerDirective;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /*!
     * @license
     * Copyright 2016 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /** @type {?} */
    var DEFAULT_PAGE_SIZE = 5;
    /**
     * @template T
     */
    var /**
     * @template T
     */ SearchFilterList = /** @class */ (function () {
        function SearchFilterList(items, pageSize) {
            if (items === void 0) {
                items = [];
            }
            this.filteredItems = [];
            this._filterText = '';
            this.items = [];
            this.pageSize = DEFAULT_PAGE_SIZE;
            this.currentPageSize = DEFAULT_PAGE_SIZE;
            this._filter = function () { return true; };
            this.items = items;
            this.filteredItems = items;
            this.pageSize = pageSize || DEFAULT_PAGE_SIZE;
            this.currentPageSize = pageSize || DEFAULT_PAGE_SIZE;
        }
        Object.defineProperty(SearchFilterList.prototype, "filterText", {
            get: /**
             * @return {?}
             */ function () {
                return this._filterText;
            },
            set: /**
             * @param {?} value
             * @return {?}
             */ function (value) {
                this._filterText = value;
                this.applyFilter();
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(SearchFilterList.prototype, "filter", {
            get: /**
             * @return {?}
             */ function () {
                return this._filter;
            },
            set: /**
             * @param {?} value
             * @return {?}
             */ function (value) {
                this._filter = value;
                this.applyFilter();
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        SearchFilterList.prototype.applyFilter = /**
         * @return {?}
         */
            function () {
                if (this.filter) {
                    this.filteredItems = this.items.filter(this.filter);
                }
                else {
                    this.filteredItems = this.items;
                }
                this.currentPageSize = this.pageSize;
            };
        Object.defineProperty(SearchFilterList.prototype, "visibleItems", {
            /** Returns visible portion of the items.  */
            get: /**
             * Returns visible portion of the items.
             * @return {?}
             */ function () {
                return this.filteredItems.slice(0, this.currentPageSize);
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(SearchFilterList.prototype, "length", {
            /** Returns entire collection length including items not displayed on the page. */
            get: /**
             * Returns entire collection length including items not displayed on the page.
             * @return {?}
             */ function () {
                return this.items.length;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(SearchFilterList.prototype, "canShowMoreItems", {
            /** Detects whether more items can be displayed. */
            get: /**
             * Detects whether more items can be displayed.
             * @return {?}
             */ function () {
                return this.filteredItems.length > this.currentPageSize;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(SearchFilterList.prototype, "canShowLessItems", {
            /** Detects whether less items can be displayed. */
            get: /**
             * Detects whether less items can be displayed.
             * @return {?}
             */ function () {
                return this.currentPageSize > this.pageSize;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(SearchFilterList.prototype, "fitsPage", {
            /** Detects whether content fits single page. */
            get: /**
             * Detects whether content fits single page.
             * @return {?}
             */ function () {
                return this.pageSize >= this.filteredItems.length;
            },
            enumerable: true,
            configurable: true
        });
        /** Display more items. */
        /**
         * Display more items.
         * @return {?}
         */
        SearchFilterList.prototype.showMoreItems = /**
         * Display more items.
         * @return {?}
         */
            function () {
                if (this.canShowMoreItems) {
                    this.currentPageSize += this.pageSize;
                }
            };
        /** Display less items. */
        /**
         * Display less items.
         * @return {?}
         */
        SearchFilterList.prototype.showLessItems = /**
         * Display less items.
         * @return {?}
         */
            function () {
                if (this.canShowLessItems) {
                    this.currentPageSize -= this.pageSize;
                }
            };
        /** Reset entire collection and page settings. */
        /**
         * Reset entire collection and page settings.
         * @return {?}
         */
        SearchFilterList.prototype.clear = /**
         * Reset entire collection and page settings.
         * @return {?}
         */
            function () {
                this.currentPageSize = this.pageSize;
                this.items = [];
                this.filteredItems = [];
                this.filterText = '';
            };
        /**
         * @return {?}
         */
        SearchFilterList.prototype[Symbol.iterator] = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var pointer = 0;
                /** @type {?} */
                var items = this.visibleItems;
                return {
                    next: /**
                     * @return {?}
                     */ function () {
                        if (pointer < items.length) {
                            return {
                                done: false,
                                value: items[pointer++]
                            };
                        }
                        else {
                            return {
                                done: true,
                                value: null
                            };
                        }
                    }
                };
            };
        return SearchFilterList;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var ResponseFacetQueryList = /** @class */ (function (_super) {
        __extends(ResponseFacetQueryList, _super);
        function ResponseFacetQueryList(items, pageSize) {
            if (items === void 0) {
                items = [];
            }
            if (pageSize === void 0) {
                pageSize = 5;
            }
            var _this = _super.call(this, items
                .filter(function (item) {
                return item.count > 0;
            }), pageSize) || this;
            _this.filter = function (query) {
                if (_this.filterText && query.label) {
                    /** @type {?} */
                    var pattern = (_this.filterText || '').toLowerCase();
                    /** @type {?} */
                    var label = query.label.toLowerCase();
                    return label.startsWith(pattern);
                }
                return true;
            };
            return _this;
        }
        return ResponseFacetQueryList;
    }(SearchFilterList));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var SearchFilterComponent = /** @class */ (function () {
        function SearchFilterComponent(queryBuilder, searchService, translationService) {
            var _this = this;
            this.queryBuilder = queryBuilder;
            this.searchService = searchService;
            this.translationService = translationService;
            this.DEFAULT_PAGE_SIZE = 5;
            this.isAlive = true;
            this.responseFacetQueries = null;
            this.responseFacetFields = null;
            this.facetQueriesPageSize = this.DEFAULT_PAGE_SIZE;
            this.facetQueriesLabel = 'Facet Queries';
            this.facetQueriesExpanded = false;
            this.facetFieldsExpanded = false;
            this.canResetSelectedQueries = false;
            this.selectedFacetQueries = [];
            this.selectedBuckets = [];
            if (queryBuilder.config && queryBuilder.config.facetQueries) {
                this.facetQueriesLabel = queryBuilder.config.facetQueries.label || 'Facet Queries';
                this.facetQueriesPageSize = queryBuilder.config.facetQueries.pageSize || this.DEFAULT_PAGE_SIZE;
                this.facetQueriesExpanded = queryBuilder.config.facetQueries.expanded;
            }
            if (queryBuilder.config && queryBuilder.config.facetFields) {
                this.facetFieldsExpanded = queryBuilder.config.facetFields.expanded;
            }
            this.queryBuilder.updated.pipe(operators.takeWhile(function () { return _this.isAlive; })).subscribe(function () {
                _this.queryBuilder.execute();
            });
        }
        /**
         * @return {?}
         */
        SearchFilterComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                var _this = this;
                if (this.queryBuilder) {
                    this.queryBuilder.executed.pipe(operators.takeWhile(function () { return _this.isAlive; })).subscribe(function (data) {
                        _this.onDataLoaded(data);
                        _this.searchService.dataLoaded.next(data);
                    });
                }
            };
        /**
         * @return {?}
         */
        SearchFilterComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                this.isAlive = false;
            };
        /**
         * @param {?} event
         * @param {?} facetQuery
         * @return {?}
         */
        SearchFilterComponent.prototype.onToggleFacetQuery = /**
         * @param {?} event
         * @param {?} facetQuery
         * @return {?}
         */
            function (event, facetQuery) {
                if (event && facetQuery) {
                    if (event.checked) {
                        this.selectFacetQuery(facetQuery);
                    }
                    else {
                        this.unselectFacetQuery(facetQuery);
                    }
                }
            };
        /**
         * @param {?} query
         * @return {?}
         */
        SearchFilterComponent.prototype.selectFacetQuery = /**
         * @param {?} query
         * @return {?}
         */
            function (query) {
                if (query) {
                    query.checked = true;
                    this.queryBuilder.addUserFacetQuery(query);
                    this.updateSelectedFields();
                    this.queryBuilder.update();
                }
            };
        /**
         * @param {?} query
         * @return {?}
         */
        SearchFilterComponent.prototype.unselectFacetQuery = /**
         * @param {?} query
         * @return {?}
         */
            function (query) {
                if (query) {
                    query.checked = false;
                    this.queryBuilder.removeUserFacetQuery(query);
                    this.updateSelectedFields();
                    this.queryBuilder.update();
                }
            };
        /**
         * @return {?}
         */
        SearchFilterComponent.prototype.updateSelectedBuckets = /**
         * @return {?}
         */
            function () {
                var e_1, _a;
                if (this.responseFacetFields) {
                    this.selectedBuckets = [];
                    var _loop_1 = function (field) {
                        var _a;
                        if (field.buckets) {
                            (_a = this_1.selectedBuckets).push.apply(_a, __spread(this_1.queryBuilder.getUserFacetBuckets(field.field)
                                .filter(function (bucket) { return bucket.checked; })
                                .map(function (bucket) {
                                return { field: field, bucket: bucket };
                            })));
                        }
                    };
                    var this_1 = this;
                    try {
                        for (var _b = __values(this.responseFacetFields), _c = _b.next(); !_c.done; _c = _b.next()) {
                            var field = _c.value;
                            _loop_1(field);
                        }
                    }
                    catch (e_1_1) {
                        e_1 = { error: e_1_1 };
                    }
                    finally {
                        try {
                            if (_c && !_c.done && (_a = _b.return))
                                _a.call(_b);
                        }
                        finally {
                            if (e_1)
                                throw e_1.error;
                        }
                    }
                }
                else {
                    this.selectedBuckets = [];
                }
            };
        /**
         * @return {?}
         */
        SearchFilterComponent.prototype.updateSelectedFields = /**
         * @return {?}
         */
            function () {
                if (this.responseFacetQueries) {
                    this.selectedFacetQueries = this.responseFacetQueries.items.filter(function (item) { return item.checked; });
                    this.canResetSelectedQueries = this.selectedFacetQueries.length > 0;
                }
                else {
                    this.selectedFacetQueries = [];
                    this.canResetSelectedQueries = false;
                }
            };
        /**
         * @param {?} event
         * @param {?} field
         * @param {?} bucket
         * @return {?}
         */
        SearchFilterComponent.prototype.onToggleBucket = /**
         * @param {?} event
         * @param {?} field
         * @param {?} bucket
         * @return {?}
         */
            function (event, field, bucket) {
                if (event && bucket) {
                    if (event.checked) {
                        this.selectFacetBucket(field, bucket);
                    }
                    else {
                        this.unselectFacetBucket(field, bucket);
                    }
                }
            };
        /**
         * @param {?} field
         * @param {?} bucket
         * @return {?}
         */
        SearchFilterComponent.prototype.selectFacetBucket = /**
         * @param {?} field
         * @param {?} bucket
         * @return {?}
         */
            function (field, bucket) {
                if (bucket) {
                    bucket.checked = true;
                    this.queryBuilder.addUserFacetBucket(field, bucket);
                    this.updateSelectedBuckets();
                    this.queryBuilder.update();
                }
            };
        /**
         * @param {?} field
         * @param {?} bucket
         * @return {?}
         */
        SearchFilterComponent.prototype.unselectFacetBucket = /**
         * @param {?} field
         * @param {?} bucket
         * @return {?}
         */
            function (field, bucket) {
                if (bucket) {
                    bucket.checked = false;
                    this.queryBuilder.removeUserFacetBucket(field, bucket);
                    this.updateSelectedBuckets();
                    this.queryBuilder.update();
                }
            };
        /**
         * @return {?}
         */
        SearchFilterComponent.prototype.resetSelectedQueries = /**
         * @return {?}
         */
            function () {
                var e_2, _a;
                if (this.canResetSelectedQueries) {
                    try {
                        for (var _b = __values(this.responseFacetQueries.items), _c = _b.next(); !_c.done; _c = _b.next()) {
                            var query = _c.value;
                            query.checked = false;
                            this.queryBuilder.removeUserFacetQuery(query);
                        }
                    }
                    catch (e_2_1) {
                        e_2 = { error: e_2_1 };
                    }
                    finally {
                        try {
                            if (_c && !_c.done && (_a = _b.return))
                                _a.call(_b);
                        }
                        finally {
                            if (e_2)
                                throw e_2.error;
                        }
                    }
                    this.selectedFacetQueries = [];
                    this.canResetSelectedQueries = false;
                    this.queryBuilder.update();
                }
            };
        /**
         * @param {?} field
         * @return {?}
         */
        SearchFilterComponent.prototype.canResetSelectedBuckets = /**
         * @param {?} field
         * @return {?}
         */
            function (field) {
                if (field && field.buckets) {
                    return field.buckets.items.some(function (bucket) { return bucket.checked; });
                }
                return false;
            };
        /**
         * @param {?} field
         * @return {?}
         */
        SearchFilterComponent.prototype.resetSelectedBuckets = /**
         * @param {?} field
         * @return {?}
         */
            function (field) {
                var e_3, _a;
                if (field && field.buckets) {
                    try {
                        for (var _b = __values(field.buckets.items), _c = _b.next(); !_c.done; _c = _b.next()) {
                            var bucket = _c.value;
                            bucket.checked = false;
                            this.queryBuilder.removeUserFacetBucket(field, bucket);
                        }
                    }
                    catch (e_3_1) {
                        e_3 = { error: e_3_1 };
                    }
                    finally {
                        try {
                            if (_c && !_c.done && (_a = _b.return))
                                _a.call(_b);
                        }
                        finally {
                            if (e_3)
                                throw e_3.error;
                        }
                    }
                    this.updateSelectedBuckets();
                    this.queryBuilder.update();
                }
            };
        /**
         * @param {?} data
         * @return {?}
         */
        SearchFilterComponent.prototype.onDataLoaded = /**
         * @param {?} data
         * @return {?}
         */
            function (data) {
                /** @type {?} */
                var context = data.list.context;
                if (context) {
                    this.parseFacetFields(context);
                    this.parseFacetQueries(context);
                }
                else {
                    this.responseFacetQueries = null;
                    this.responseFacetFields = null;
                }
            };
        /**
         * @param {?} context
         * @return {?}
         */
        SearchFilterComponent.prototype.parseFacetFields = /**
         * @param {?} context
         * @return {?}
         */
            function (context) {
                var _this = this;
                if (!this.responseFacetFields) {
                    /** @type {?} */
                    var configFacetFields = this.queryBuilder.config.facetFields && this.queryBuilder.config.facetFields.fields || [];
                    this.responseFacetFields = configFacetFields.map(function (field) {
                        /** @type {?} */
                        var responseField = (context.facetsFields || []).find(function (response) { return response.label === field.label; });
                        /** @type {?} */
                        var buckets = ((responseField && responseField.buckets) || []).map(function (bucket) {
                            /** @type {?} */
                            var selectedBucket = _this.selectedBuckets.find(function (facetBucket) {
                                return facetBucket.bucket.label === bucket.label && facetBucket.field.field === field.field;
                            });
                            return /** @type {?} */ (__assign({}, bucket, { checked: !!selectedBucket, display: _this.translationService.instant(bucket.display), label: _this.translationService.instant(bucket.label) }));
                        });
                        /** @type {?} */
                        var bucketList = new SearchFilterList(buckets, field.pageSize);
                        bucketList.filter = function (bucket) {
                            if (bucket && bucketList.filterText) {
                                /** @type {?} */
                                var pattern = (bucketList.filterText || '').toLowerCase();
                                /** @type {?} */
                                var label = (bucket.display || bucket.label || '').toLowerCase();
                                return label.startsWith(pattern);
                            }
                            return true;
                        };
                        return __assign({}, field, { label: _this.translationService.instant(field.label), pageSize: field.pageSize | _this.DEFAULT_PAGE_SIZE, currentPageSize: field.pageSize | _this.DEFAULT_PAGE_SIZE, buckets: bucketList });
                    });
                }
                else {
                    this.responseFacetFields = this.responseFacetFields
                        .map(function (field) {
                        /** @type {?} */
                        var responseField = (context.facetsFields || []).find(function (response) { return response.label === field.label; });
                        (field && field.buckets && field.buckets.items || [])
                            .map(function (bucket) {
                            /** @type {?} */
                            var responseBucket = ((responseField && responseField.buckets) || []).find(function (respBucket) { return respBucket.label === bucket.label; });
                            bucket.count = responseBucket ? responseBucket.count : 0;
                            return bucket;
                        });
                        return field;
                    });
                }
            };
        /**
         * @param {?} context
         * @return {?}
         */
        SearchFilterComponent.prototype.parseFacetQueries = /**
         * @param {?} context
         * @return {?}
         */
            function (context) {
                var _this = this;
                /** @type {?} */
                var responseQueries = this.getFacetQueryMap(context);
                if (this.queryBuilder.config.facetQueries) {
                    /** @type {?} */
                    var bkpResponseFacetQueries_1 = Object.assign({}, this.responseFacetQueries);
                    /** @type {?} */
                    var facetQueries = (this.queryBuilder.config.facetQueries.queries || [])
                        .map(function (query) {
                        /** @type {?} */
                        var queryResult = responseQueries[query.label];
                        /** @type {?} */
                        var bkpQuery = (bkpResponseFacetQueries_1.items || []).find(function (item) { return item.label === query.label; });
                        if (bkpQuery) {
                            bkpQuery.count = queryResult.count;
                            return bkpQuery;
                        }
                        return /** @type {?} */ (__assign({}, query, { label: _this.translationService.instant(query.label), count: queryResult.count }));
                    });
                    if (facetQueries.length > 0) {
                        if (this.responseFacetQueries) {
                            this.responseFacetQueries.items = facetQueries;
                        }
                        else {
                            this.responseFacetQueries = new ResponseFacetQueryList(facetQueries, this.facetQueriesPageSize);
                        }
                    }
                    else {
                        this.responseFacetQueries = null;
                    }
                }
            };
        /**
         * @param {?} context
         * @return {?}
         */
        SearchFilterComponent.prototype.getFacetQueryMap = /**
         * @param {?} context
         * @return {?}
         */
            function (context) {
                /** @type {?} */
                var result = {};
                (context.facetQueries || []).forEach(function (query) {
                    result[query.label] = query;
                });
                return result;
            };
        SearchFilterComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-search-filter',
                        template: "<mat-accordion multi=\"true\" displayMode=\"flat\">\n\n    <mat-expansion-panel\n        *ngFor=\"let category of queryBuilder.categories\"\n        [attr.data-automation-id]=\"'expansion-panel-'+category.name\"\n        [(expanded)]=\"category.expanded\">\n        <mat-expansion-panel-header>\n            <mat-panel-title>\n                {{ category.name | translate }}\n            </mat-panel-title>\n        </mat-expansion-panel-header>\n        <adf-search-widget-container\n            [id]=\"category.id\"\n            [selector]=\"category.component.selector\"\n            [settings]=\"category.component.settings\">\n        </adf-search-widget-container>\n    </mat-expansion-panel>\n\n    <ng-container *ngIf=\"responseFacetQueries\">\n        <mat-expansion-panel [expanded]=\"facetQueriesExpanded\" [attr.data-automation-id]=\"'expansion-panel-'+facetQueriesLabel\">\n            <mat-expansion-panel-header>\n                <mat-panel-title>{{ facetQueriesLabel | translate }}</mat-panel-title>\n            </mat-expansion-panel-header>\n            <div class=\"facet-result-filter\">\n                <mat-form-field>\n                    <input\n                        matInput\n                        placeholder=\"{{ 'SEARCH.FILTER.ACTIONS.FILTER-CATEGORY' | translate }}\"\n                        [attr.data-automation-id]=\"'facet-result-filter-'+facetQueriesLabel\"\n                        [(ngModel)]=\"responseFacetQueries.filterText\">\n                    <button *ngIf=\"responseFacetQueries.filterText\"\n                        mat-button matSuffix mat-icon-button\n                        (click)=\"responseFacetQueries.filterText = ''\">\n                        <mat-icon>close</mat-icon>\n                    </button>\n                </mat-form-field>\n            </div>\n            <div class=\"checklist\">\n                <ng-container *ngFor=\"let query of responseFacetQueries\">\n                    <mat-checkbox\n                        [checked]=\"query.checked\"\n                        [attr.data-automation-id]=\"'checkbox-'+facetQueriesLabel+'-'+query.label\"\n                        (change)=\"onToggleFacetQuery($event, query)\">\n                        {{ query.label }} ({{ query.count }})\n                    </mat-checkbox>\n                </ng-container>\n            </div>\n            <div class=\"facet-buttons\">\n                <button mat-icon-button\n                    *ngIf=\"canResetSelectedQueries\"\n                    title=\"{{ 'SEARCH.FILTER.ACTIONS.CLEAR-ALL' | translate }}\"\n                    (click)=\"resetSelectedQueries()\">\n                    <mat-icon>clear</mat-icon>\n                </button>\n                <button mat-icon-button\n                    *ngIf=\"responseFacetQueries.canShowLessItems\"\n                    title=\"{{ 'SEARCH.FILTER.ACTIONS.SHOW-LESS' | translate }}\"\n                    (click)=\"responseFacetQueries.showLessItems()\">\n                    <mat-icon>keyboard_arrow_up</mat-icon>\n                </button>\n                <button mat-icon-button\n                    *ngIf=\"responseFacetQueries.canShowMoreItems\"\n                    title=\"{{ 'SEARCH.FILTER.ACTIONS.SHOW-MORE' | translate }}\"\n                    (click)=\"responseFacetQueries.showMoreItems()\">\n                    <mat-icon>keyboard_arrow_down</mat-icon>\n                </button>\n            </div>\n        </mat-expansion-panel>\n    </ng-container>\n\n    <ng-container *ngIf=\"responseFacetFields\">\n        <mat-expansion-panel [attr.data-automation-id]=\"'expansion-panel-'+field.label\" *ngFor=\"let field of responseFacetFields\"\n                             [expanded]=\"facetFieldsExpanded\">\n            <mat-expansion-panel-header>\n                <mat-panel-title>{{ field.label }}</mat-panel-title>\n            </mat-expansion-panel-header>\n\n            <div class=\"facet-result-filter\">\n                <mat-form-field>\n                    <input\n                        matInput\n                        placeholder=\"{{ 'SEARCH.FILTER.ACTIONS.FILTER-CATEGORY' | translate }}\"\n                        [attr.data-automation-id]=\"'facet-result-filter-'+field.label\"\n                        [(ngModel)]=\"field.buckets.filterText\">\n                    <button *ngIf=\"field.buckets.filterText\"\n                        mat-button matSuffix mat-icon-button\n                        (click)=\"field.buckets.filterText = ''\">\n                        <mat-icon>close</mat-icon>\n                    </button>\n                </mat-form-field>\n            </div>\n\n            <div class=\"checklist\">\n                <mat-checkbox\n                    *ngFor=\"let bucket of field.buckets\"\n                    [checked]=\"bucket.checked\"\n                    [attr.data-automation-id]=\"'checkbox-'+field.label+'-'+(bucket.display || bucket.label)\"\n                    (change)=\"onToggleBucket($event, field, bucket)\">\n                    {{ bucket.display || bucket.label }} <span *ngIf=\"bucket.count!==null\">(</span>{{ bucket.count }}<span *ngIf=\"bucket.count!==null\">)</span>\n                </mat-checkbox>\n            </div>\n\n            <div class=\"facet-buttons\" *ngIf=\"field.buckets.fitsPage\">\n                <button *ngIf=\"canResetSelectedBuckets(field)\"\n                    mat-button\n                    color=\"primary\"\n                    (click)=\"resetSelectedBuckets(field)\">\n                    {{ 'SEARCH.FILTER.ACTIONS.CLEAR-ALL' | translate }}\n                </button>\n            </div>\n\n            <div class=\"facet-buttons\" *ngIf=\"!field.buckets.fitsPage\">\n                <button mat-icon-button\n                    *ngIf=\"canResetSelectedBuckets(field)\"\n                    title=\"{{ 'SEARCH.FILTER.ACTIONS.CLEAR-ALL' | translate }}\"\n                    (click)=\"resetSelectedBuckets(field)\">\n                    <mat-icon>clear</mat-icon>\n                </button>\n                <button mat-icon-button\n                    *ngIf=\"field.buckets.canShowLessItems\"\n                    (click)=\"field.buckets.showLessItems()\"\n                    title=\"{{ 'SEARCH.FILTER.ACTIONS.SHOW-LESS' | translate }}\">\n                    <mat-icon>keyboard_arrow_up</mat-icon>\n                </button>\n                <button mat-icon-button\n                    *ngIf=\"field.buckets.canShowMoreItems\"\n                    (click)=\"field.buckets.showMoreItems()\"\n                    title=\"{{ 'SEARCH.FILTER.ACTIONS.SHOW-MORE' | translate }}\">\n                    <mat-icon>keyboard_arrow_down</mat-icon>\n                </button>\n            </div>\n        </mat-expansion-panel>\n    </ng-container>\n</mat-accordion>\n",
                        encapsulation: core.ViewEncapsulation.None,
                        host: { class: 'adf-search-filter' },
                        styles: [".adf-search-filter .checklist{display:flex;flex-direction:column}.adf-search-filter .checklist .mat-checkbox{margin:5px}.adf-search-filter .checklist .mat-checkbox.mat-checkbox-checked .mat-checkbox-label{font-weight:700}.adf-search-filter .facet-result-filter{display:flex;flex-direction:column}.adf-search-filter .facet-result-filter>*{width:100%}.adf-search-filter .facet-buttons{text-align:right}.adf-search-filter .facet-buttons .mat-button{text-transform:uppercase}.adf-search-filter .facet-buttons--topSpace{padding-top:15px}"]
                    }] }
        ];
        /** @nocollapse */
        SearchFilterComponent.ctorParameters = function () {
            return [
                { type: SearchQueryBuilderService },
                { type: adfCore.SearchService },
                { type: adfCore.TranslationService }
            ];
        };
        return SearchFilterComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var SearchTextComponent = /** @class */ (function () {
        function SearchTextComponent() {
            /**
             * The content of the text box.
             */
            this.value = '';
        }
        /**
         * @return {?}
         */
        SearchTextComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                if (this.context && this.settings && this.settings["pattern"]) {
                    /** @type {?} */
                    var pattern = new RegExp(this.settings["pattern"], 'g');
                    /** @type {?} */
                    var match = pattern.exec(this.context.queryFragments[this.id] || '');
                    if (match && match.length > 1) {
                        this.value = match[1];
                    }
                }
            };
        /**
         * @return {?}
         */
        SearchTextComponent.prototype.reset = /**
         * @return {?}
         */
            function () {
                this.value = '';
                this.updateQuery(null);
            };
        /**
         * @param {?} event
         * @return {?}
         */
        SearchTextComponent.prototype.onChangedHandler = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                this.value = event.target.value;
                this.updateQuery(this.value);
            };
        /**
         * @param {?} value
         * @return {?}
         */
        SearchTextComponent.prototype.updateQuery = /**
         * @param {?} value
         * @return {?}
         */
            function (value) {
                if (this.context && this.settings && this.settings.field) {
                    this.context.queryFragments[this.id] = value ? this.settings.field + ":'" + value + "'" : '';
                    this.context.update();
                }
            };
        SearchTextComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-search-text',
                        template: "<mat-form-field>\n    <input\n        matInput\n        [placeholder]=\"settings?.placeholder\"\n        [(ngModel)]=\"value\"\n        (change)=\"onChangedHandler($event)\">\n    <button mat-button *ngIf=\"value\" matSuffix mat-icon-button (click)=\"reset()\">\n        <mat-icon>close</mat-icon>\n    </button>\n</mat-form-field>\n",
                        encapsulation: core.ViewEncapsulation.None,
                        host: { class: 'adf-search-text' },
                        styles: [".adf-search-text .mat-form-field{width:100%}"]
                    }] }
        ];
        SearchTextComponent.propDecorators = {
            value: [{ type: core.Input }]
        };
        return SearchTextComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var SearchRadioComponent = /** @class */ (function () {
        function SearchRadioComponent() {
            this.pageSize = 5;
            this.options = new SearchFilterList();
        }
        /**
         * @return {?}
         */
        SearchRadioComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                if (this.settings) {
                    this.pageSize = this.settings["pageSize"] || 5;
                    if (this.settings["options"] && this.settings["options"].length > 0) {
                        this.options = new SearchFilterList(this.settings["options"], this.pageSize);
                    }
                }
                this.setValue(this.getSelectedValue());
            };
        /**
         * @return {?}
         */
        SearchRadioComponent.prototype.getSelectedValue = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var options = this.settings['options'] || [];
                if (options && options.length > 0) {
                    /** @type {?} */
                    var selected = options.find(function (opt) { return opt.default; });
                    if (!selected) {
                        selected = options[0];
                    }
                    return selected.value;
                }
                return null;
            };
        /**
         * @param {?} newValue
         * @return {?}
         */
        SearchRadioComponent.prototype.setValue = /**
         * @param {?} newValue
         * @return {?}
         */
            function (newValue) {
                this.value = newValue;
                this.context.queryFragments[this.id] = newValue;
                this.context.update();
            };
        /**
         * @param {?} event
         * @return {?}
         */
        SearchRadioComponent.prototype.changeHandler = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                this.setValue(event.value);
            };
        SearchRadioComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-search-radio',
                        template: "<mat-radio-group\n    [(ngModel)]=\"value\"\n    (change)=\"changeHandler($event)\">\n    <mat-radio-button\n        *ngFor=\"let option of options\"\n        [value]=\"option.value\">\n        {{ option.name | translate }}\n    </mat-radio-button>\n</mat-radio-group>\n\n<div class=\"facet-buttons\" *ngIf=\"!options.fitsPage\">\n    <button mat-icon-button\n        *ngIf=\"options.canShowLessItems\"\n        title=\"{{ 'SEARCH.FILTER.ACTIONS.SHOW-LESS' | translate }}\"\n        (click)=\"options.showLessItems()\">\n        <mat-icon>keyboard_arrow_up</mat-icon>\n    </button>\n    <button mat-icon-button\n        *ngIf=\"options.canShowMoreItems\"\n        title=\"{{ 'SEARCH.FILTER.ACTIONS.SHOW-MORE' | translate }}\"\n        (click)=\"options.showMoreItems()\">\n        <mat-icon>keyboard_arrow_down</mat-icon>\n    </button>\n</div>\n",
                        encapsulation: core.ViewEncapsulation.None,
                        host: { class: 'adf-search-radio' },
                        styles: [".adf-search-radio .mat-radio-group{display:inline-flex;flex-direction:column}.adf-search-radio .mat-radio-button{margin:5px}"]
                    }] }
        ];
        /** @nocollapse */
        SearchRadioComponent.ctorParameters = function () { return []; };
        SearchRadioComponent.propDecorators = {
            value: [{ type: core.Input }]
        };
        return SearchRadioComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var SearchSliderComponent = /** @class */ (function () {
        function SearchSliderComponent() {
            this.thumbLabel = false;
        }
        /**
         * @return {?}
         */
        SearchSliderComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                if (this.settings) {
                    if (this.settings.hasOwnProperty('min')) {
                        this.min = this.settings['min'];
                    }
                    if (this.settings.hasOwnProperty('max')) {
                        this.max = this.settings['max'];
                    }
                    if (this.settings.hasOwnProperty('step')) {
                        this.step = this.settings['step'];
                    }
                    this.thumbLabel = this.settings['thumbLabel'] ? true : false;
                }
            };
        /**
         * @return {?}
         */
        SearchSliderComponent.prototype.reset = /**
         * @return {?}
         */
            function () {
                this.value = this.min || 0;
                this.updateQuery(null);
            };
        /**
         * @param {?} event
         * @return {?}
         */
        SearchSliderComponent.prototype.onChangedHandler = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                this.value = event.value;
                this.updateQuery(this.value);
            };
        /**
         * @param {?} value
         * @return {?}
         */
        SearchSliderComponent.prototype.updateQuery = /**
         * @param {?} value
         * @return {?}
         */
            function (value) {
                if (this.id && this.context && this.settings && this.settings.field) {
                    if (value === null) {
                        this.context.queryFragments[this.id] = '';
                    }
                    else {
                        this.context.queryFragments[this.id] = this.settings.field + ":[0 TO " + value + "]";
                    }
                    this.context.update();
                }
            };
        SearchSliderComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-search-slider',
                        template: "<mat-slider\n    [(value)]=\"value\"\n    [min]=\"min\"\n    [max]=\"max\"\n    [step]=\"step\"\n    [thumbLabel]=\"thumbLabel\"\n    (change)=\"onChangedHandler($event)\">\n</mat-slider>\n\n<div class=\"facet-buttons\">\n    <button mat-button color=\"primary\" (click)=\"reset()\">\n        {{ 'SEARCH.FILTER.ACTIONS.CLEAR' | translate }}\n    </button>\n</div>\n",
                        encapsulation: core.ViewEncapsulation.None,
                        host: { class: 'adf-search-slider' },
                        styles: [".adf-search-slider .mat-slider{width:100%}"]
                    }] }
        ];
        SearchSliderComponent.propDecorators = {
            value: [{ type: core.Input }]
        };
        return SearchSliderComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /*!
     * @license
     * Copyright 2016 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var LiveErrorStateMatcher = /** @class */ (function () {
        function LiveErrorStateMatcher() {
        }
        /**
         * @param {?} control
         * @param {?} form
         * @return {?}
         */
        LiveErrorStateMatcher.prototype.isErrorState = /**
         * @param {?} control
         * @param {?} form
         * @return {?}
         */
            function (control, form) {
                /** @type {?} */
                var isSubmitted = form && form.submitted;
                return !!(control && control.invalid && (control.dirty || control.touched || (!control.pristine && isSubmitted)));
            };
        return LiveErrorStateMatcher;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var SearchNumberRangeComponent = /** @class */ (function () {
        function SearchNumberRangeComponent() {
            this.matcher = new LiveErrorStateMatcher();
            this.format = '[{FROM} TO {TO}]';
        }
        /**
         * @return {?}
         */
        SearchNumberRangeComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                if (this.settings) {
                    this.field = this.settings.field;
                    this.format = this.settings["format"] || '[{FROM} TO {TO}]';
                }
                this.validators = forms.Validators.compose([
                    forms.Validators.required,
                    forms.Validators.pattern(/^-?(0|[1-9]\d*)?$/),
                    forms.Validators.min(0)
                ]);
                this.from = new forms.FormControl('', this.validators);
                this.to = new forms.FormControl('', this.validators);
                this.form = new forms.FormGroup({
                    from: this.from,
                    to: this.to
                }, this.formValidator);
            };
        /**
         * @param {?} formGroup
         * @return {?}
         */
        SearchNumberRangeComponent.prototype.formValidator = /**
         * @param {?} formGroup
         * @return {?}
         */
            function (formGroup) {
                return parseInt(formGroup.get('from').value, 10) < parseInt(formGroup.get('to').value, 10) ? null : { 'mismatch': true };
            };
        /**
         * @param {?} model
         * @param {?} isValid
         * @return {?}
         */
        SearchNumberRangeComponent.prototype.apply = /**
         * @param {?} model
         * @param {?} isValid
         * @return {?}
         */
            function (model, isValid) {
                if (isValid && this.id && this.context && this.field) {
                    /** @type {?} */
                    var map = new Map();
                    map.set('FROM', model.from);
                    map.set('TO', model.to);
                    /** @type {?} */
                    var value = this.formatString(this.format, map);
                    this.context.queryFragments[this.id] = this.field + ":" + value;
                    this.context.update();
                }
            };
        /**
         * @param {?} str
         * @param {?} map
         * @return {?}
         */
        SearchNumberRangeComponent.prototype.formatString = /**
         * @param {?} str
         * @param {?} map
         * @return {?}
         */
            function (str, map) {
                /** @type {?} */
                var result = str;
                map.forEach(function (value, key) {
                    /** @type {?} */
                    var expr = new RegExp('{' + key + '}', 'gm');
                    result = result.replace(expr, value);
                });
                return result;
            };
        /**
         * @return {?}
         */
        SearchNumberRangeComponent.prototype.reset = /**
         * @return {?}
         */
            function () {
                this.form.reset({
                    from: '',
                    to: ''
                });
                if (this.id && this.context) {
                    this.context.queryFragments[this.id] = '';
                    this.context.update();
                }
            };
        SearchNumberRangeComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-search-number-range',
                        template: "<form [formGroup]=\"form\" novalidate (ngSubmit)=\"apply(form.value, form.valid)\">\n\n    <mat-form-field>\n        <input\n            matInput [formControl]=\"from\" [errorStateMatcher]=\"matcher\"\n            placeholder=\"{{ 'SEARCH.FILTER.RANGE.FROM' | translate }}\"\n            autocomplete=\"off\">\n        <mat-error *ngIf=\"from.hasError('pattern') || from.hasError('min')\">\n            {{ 'SEARCH.FILTER.VALIDATION.INVALID-FORMAT' | translate }}\n        </mat-error>\n        <mat-error *ngIf=\"from.hasError('required')\">\n            {{ 'SEARCH.FILTER.VALIDATION.REQUIRED-VALUE' | translate }}\n        </mat-error>\n    </mat-form-field>\n\n    <mat-form-field>\n        <input\n            matInput [formControl]=\"to\" [errorStateMatcher]=\"matcher\"\n            placeholder=\"{{ 'SEARCH.FILTER.RANGE.TO' | translate }}\"\n            autocomplete=\"off\">\n        <mat-error *ngIf=\"to.hasError('pattern') || to.hasError('min')\">\n            {{ 'SEARCH.FILTER.VALIDATION.INVALID-FORMAT' | translate }}\n        </mat-error>\n        <mat-error *ngIf=\"to.hasError('required')\">\n            {{ 'SEARCH.FILTER.VALIDATION.REQUIRED-VALUE' | translate }}\n        </mat-error>\n    </mat-form-field>\n\n\n    <div class=\"facet-buttons\">\n        <button mat-button color=\"primary\" type=\"button\" (click)=\"reset()\">\n            {{ 'SEARCH.FILTER.ACTIONS.CLEAR' | translate }}\n        </button>\n        <button mat-button color=\"primary\" type=\"submit\" [disabled]=\"!form.valid\">\n            {{ 'SEARCH.FILTER.ACTIONS.APPLY' | translate }}\n        </button>\n    </div>\n</form>\n",
                        encapsulation: core.ViewEncapsulation.None,
                        host: { class: 'adf-search-number-range' },
                        styles: [".adf-search-number-range>form{display:inline-flex;flex-direction:column;width:100%}"]
                    }] }
        ];
        return SearchNumberRangeComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var SearchCheckListComponent = /** @class */ (function () {
        function SearchCheckListComponent() {
            this.operator = 'OR';
            this.pageSize = 5;
            this.options = new SearchFilterList();
        }
        /**
         * @return {?}
         */
        SearchCheckListComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                if (this.settings) {
                    this.operator = this.settings["operator"] || 'OR';
                    this.pageSize = this.settings["pageSize"] || 5;
                    if (this.settings["options"] && this.settings["options"].length > 0) {
                        this.options = new SearchFilterList(this.settings["options"], this.pageSize);
                    }
                }
            };
        /**
         * @return {?}
         */
        SearchCheckListComponent.prototype.reset = /**
         * @return {?}
         */
            function () {
                this.options.items.forEach(function (opt) {
                    opt.checked = false;
                });
                if (this.id && this.context) {
                    this.context.queryFragments[this.id] = '';
                    this.context.update();
                }
            };
        /**
         * @param {?} event
         * @param {?} option
         * @return {?}
         */
        SearchCheckListComponent.prototype.changeHandler = /**
         * @param {?} event
         * @param {?} option
         * @return {?}
         */
            function (event, option) {
                option.checked = event.checked;
                this.flush();
            };
        /**
         * @return {?}
         */
        SearchCheckListComponent.prototype.flush = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var checkedValues = this.options.items
                    .filter(function (option) { return option.checked; })
                    .map(function (option) { return option.value; });
                /** @type {?} */
                var query = checkedValues.join(" " + this.operator + " ");
                if (this.id && this.context) {
                    this.context.queryFragments[this.id] = query;
                    this.context.update();
                }
            };
        SearchCheckListComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-search-check-list',
                        template: "<div class=\"checklist\">\n    <mat-checkbox\n        *ngFor=\"let option of options\"\n        [checked]=\"option.checked\"\n        (change)=\"changeHandler($event, option)\">\n        {{ option.name | translate }}\n    </mat-checkbox>\n</div>\n\n<div class=\"facet-buttons\" *ngIf=\"options.fitsPage\">\n    <button mat-button color=\"primary\" (click)=\"reset()\">\n        {{ 'SEARCH.FILTER.ACTIONS.CLEAR-ALL' | translate }}\n    </button>\n</div>\n\n<div class=\"facet-buttons\" *ngIf=\"!options.fitsPage\">\n    <button mat-icon-button\n        title=\"{{ 'SEARCH.FILTER.ACTIONS.CLEAR-ALL' | translate }}\"\n        (click)=\"reset()\">\n        <mat-icon>clear</mat-icon>\n    </button>\n    <button mat-icon-button\n        *ngIf=\"options.canShowLessItems\"\n        title=\"{{ 'SEARCH.FILTER.ACTIONS.SHOW-LESS' | translate }}\"\n        (click)=\"options.showLessItems()\">\n        <mat-icon>keyboard_arrow_up</mat-icon>\n    </button>\n    <button mat-icon-button\n        *ngIf=\"options.canShowMoreItems\"\n        title=\"{{ 'SEARCH.FILTER.ACTIONS.SHOW-MORE' | translate }}\"\n        (click)=\"options.showMoreItems()\">\n        <mat-icon>keyboard_arrow_down</mat-icon>\n    </button>\n</div>\n",
                        encapsulation: core.ViewEncapsulation.None,
                        host: { class: 'adf-search-check-list' },
                        styles: [".adf-search-check-list{display:flex;flex-direction:column}"]
                    }] }
        ];
        /** @nocollapse */
        SearchCheckListComponent.ctorParameters = function () { return []; };
        return SearchCheckListComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @type {?} */
    var DEFAULT_FORMAT_DATE = 'DD/MM/YYYY';
    var ɵ0 = adfCore.MOMENT_DATE_FORMATS;
    var SearchDateRangeComponent = /** @class */ (function () {
        function SearchDateRangeComponent(dateAdapter, userPreferencesService) {
            this.dateAdapter = dateAdapter;
            this.userPreferencesService = userPreferencesService;
            this.matcher = new LiveErrorStateMatcher();
            this.datePickerDateFormat = DEFAULT_FORMAT_DATE;
        }
        /**
         * @return {?}
         */
        SearchDateRangeComponent.prototype.getFromValidationMessage = /**
         * @return {?}
         */
            function () {
                return this.from.hasError('invalidOnChange') || this.hasParseError(this.from) ? 'SEARCH.FILTER.VALIDATION.INVALID-DATE' :
                    this.from.hasError('matDatepickerMax') ? 'SEARCH.FILTER.VALIDATION.BEYOND-MAX-DATE' :
                        this.from.hasError('required') ? 'SEARCH.FILTER.VALIDATION.REQUIRED-VALUE' :
                            '';
            };
        /**
         * @return {?}
         */
        SearchDateRangeComponent.prototype.getToValidationMessage = /**
         * @return {?}
         */
            function () {
                return this.to.hasError('invalidOnChange') || this.hasParseError(this.to) ? 'SEARCH.FILTER.VALIDATION.INVALID-DATE' :
                    this.to.hasError('matDatepickerMin') ? 'SEARCH.FILTER.VALIDATION.NO-DAYS' :
                        this.to.hasError('matDatepickerMax') ? 'SEARCH.FILTER.VALIDATION.BEYOND-MAX-DATE' :
                            this.to.hasError('required') ? 'SEARCH.FILTER.VALIDATION.REQUIRED-VALUE' :
                                '';
            };
        /**
         * @return {?}
         */
        SearchDateRangeComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                var _this = this;
                if (this.settings) {
                    this.datePickerDateFormat = this.settings["dateFormat"] || DEFAULT_FORMAT_DATE;
                }
                /** @type {?} */
                var theCustomDateAdapter = /** @type {?} */ ( /** @type {?} */(this.dateAdapter));
                theCustomDateAdapter.overrideDisplyaFormat = this.datePickerDateFormat;
                this.userPreferencesService.select(adfCore.UserPreferenceValues.Locale).subscribe(function (locale) {
                    _this.setLocale(locale);
                });
                /** @type {?} */
                var validators = forms.Validators.compose([
                    forms.Validators.required
                ]);
                this.from = new forms.FormControl('', validators);
                this.to = new forms.FormControl('', validators);
                this.form = new forms.FormGroup({
                    from: this.from,
                    to: this.to
                });
                this.maxDate = this.dateAdapter.today().startOf('day');
            };
        /**
         * @param {?} model
         * @param {?} isValid
         * @return {?}
         */
        SearchDateRangeComponent.prototype.apply = /**
         * @param {?} model
         * @param {?} isValid
         * @return {?}
         */
            function (model, isValid) {
                if (isValid && this.id && this.context && this.settings && this.settings.field) {
                    /** @type {?} */
                    var start = moment(model.from).startOf('day').format();
                    /** @type {?} */
                    var end = moment(model.to).endOf('day').format();
                    this.context.queryFragments[this.id] = this.settings.field + ":['" + start + "' TO '" + end + "']";
                    this.context.update();
                }
            };
        /**
         * @return {?}
         */
        SearchDateRangeComponent.prototype.reset = /**
         * @return {?}
         */
            function () {
                this.form.reset({
                    from: '',
                    to: ''
                });
                if (this.id && this.context) {
                    this.context.queryFragments[this.id] = '';
                    this.context.update();
                }
            };
        /**
         * @param {?} event
         * @param {?} formControl
         * @return {?}
         */
        SearchDateRangeComponent.prototype.onChangedHandler = /**
         * @param {?} event
         * @param {?} formControl
         * @return {?}
         */
            function (event, formControl) {
                /** @type {?} */
                var inputValue = event.srcElement.value;
                /** @type {?} */
                var formatDate = this.dateAdapter.parse(inputValue, this.datePickerDateFormat);
                if (formatDate && formatDate.isValid()) {
                    formControl.setValue(formatDate);
                }
                else if (formatDate) {
                    formControl.setErrors({
                        'invalidOnChange': true
                    });
                }
                else {
                    formControl.setErrors({
                        'required': true
                    });
                }
            };
        /**
         * @param {?} locale
         * @return {?}
         */
        SearchDateRangeComponent.prototype.setLocale = /**
         * @param {?} locale
         * @return {?}
         */
            function (locale) {
                this.dateAdapter.setLocale(locale);
                moment.locale(locale);
            };
        /**
         * @param {?} formControl
         * @return {?}
         */
        SearchDateRangeComponent.prototype.hasParseError = /**
         * @param {?} formControl
         * @return {?}
         */
            function (formControl) {
                return formControl.hasError('matDatepickerParse') && formControl.getError('matDatepickerParse').text;
            };
        /**
         * @param {?} event
         * @return {?}
         */
        SearchDateRangeComponent.prototype.forcePlaceholder = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                event.srcElement.click();
            };
        SearchDateRangeComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-search-date-range',
                        template: "<form [formGroup]=\"form\" novalidate (ngSubmit)=\"apply(form.value, form.valid)\">\n    <mat-form-field>\n        <input matInput\n                (input)=\"forcePlaceholder($event)\"\n                [formControl]=\"from\"\n                [errorStateMatcher]=\"matcher\"\n                placeholder=\"{{ 'SEARCH.FILTER.RANGE.FROM-DATE' | translate }}\"\n                [matDatepicker]=\"fromDatepicker\"\n                [max]=\"maxDate\"\n                (focusout)=\"onChangedHandler($event, from)\">\n        <mat-datepicker-toggle matSuffix [for]=\"fromDatepicker\"></mat-datepicker-toggle>\n        <mat-datepicker #fromDatepicker></mat-datepicker>\n        <mat-error *ngIf=\"from.invalid\">\n            {{ getFromValidationMessage() | translate: { requiredFormat: datePickerDateFormat } }}\n        </mat-error>\n    </mat-form-field>\n\n    <mat-form-field>\n        <input matInput\n                (input)=\"forcePlaceholder($event)\"\n                [formControl]=\"to\"\n                [errorStateMatcher]=\"matcher\"\n                placeholder=\"{{ 'SEARCH.FILTER.RANGE.TO-DATE' | translate }}\"\n                [matDatepicker]=\"toDatepicker\"\n                [min]=\"from.value\"\n                [max]=\"maxDate\"\n                (focusout)=\"onChangedHandler($event, to)\">\n        <mat-datepicker-toggle matSuffix [for]=\"toDatepicker\"></mat-datepicker-toggle>\n        <mat-datepicker #toDatepicker></mat-datepicker>\n        <mat-error *ngIf=\"to.invalid\">\n            {{ getToValidationMessage() | translate: { requiredFormat: datePickerDateFormat } }}\n        </mat-error>\n    </mat-form-field>\n\n    <div class=\"facet-buttons facet-buttons--topSpace\">\n        <button mat-button color=\"primary\" type=\"button\" (click)=\"reset()\">\n            {{ 'SEARCH.FILTER.ACTIONS.CLEAR' | translate }}\n        </button>\n        <button mat-button color=\"primary\" type=\"submit\" [disabled]=\"!form.valid\">\n            {{ 'SEARCH.FILTER.ACTIONS.APPLY' | translate }}\n        </button>\n    </div>\n</form>\n",
                        providers: [
                            { provide: core$1.DateAdapter, useClass: adfCore.MomentDateAdapter, deps: [core$1.MAT_DATE_LOCALE] },
                            { provide: core$1.MAT_DATE_FORMATS, useValue: ɵ0 }
                        ],
                        encapsulation: core.ViewEncapsulation.None,
                        host: { class: 'adf-search-date-range' },
                        styles: [".adf-search-date-range>form{display:inline-flex;flex-direction:column;width:100%}"]
                    }] }
        ];
        /** @nocollapse */
        SearchDateRangeComponent.ctorParameters = function () {
            return [
                { type: core$1.DateAdapter },
                { type: adfCore.UserPreferencesService }
            ];
        };
        return SearchDateRangeComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var SearchFilterService = /** @class */ (function () {
        function SearchFilterService() {
            /**
             * Contains string-to-type mappings for registered widgets.
             */
            this.widgets = {
                'text': SearchTextComponent,
                'radio': SearchRadioComponent,
                'slider': SearchSliderComponent,
                'number-range': SearchNumberRangeComponent,
                'check-list': SearchCheckListComponent,
                'date-range': SearchDateRangeComponent
            };
        }
        SearchFilterService.decorators = [
            { type: core.Injectable }
        ];
        return SearchFilterService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var SearchChipListComponent = /** @class */ (function () {
        function SearchChipListComponent() {
        }
        SearchChipListComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-search-chip-list',
                        template: "<mat-chip-list>\n    <ng-container *ngIf=\"searchFilter && searchFilter.selectedFacetQueries.length\">\n        <mat-chip\n            *ngFor=\"let query of searchFilter.selectedFacetQueries\"\n            [removable]=\"true\"\n            (removed)=\"searchFilter.unselectFacetQuery(query)\">\n            {{ query.label | translate }}\n            <mat-icon matChipRemove>cancel</mat-icon>\n        </mat-chip>\n    </ng-container>\n    <ng-container *ngIf=\"searchFilter && searchFilter.selectedBuckets.length\">\n        <mat-chip\n            *ngFor=\"let selection of searchFilter.selectedBuckets\"\n            [removable]=\"true\"\n            (removed)=\"searchFilter.unselectFacetBucket(selection.field, selection.bucket)\">\n            {{ (selection.bucket.display || selection.bucket.label) | translate }}\n            <mat-icon matChipRemove>cancel</mat-icon>\n        </mat-chip>\n    </ng-container>\n</mat-chip-list>\n",
                        encapsulation: core.ViewEncapsulation.None,
                        host: { class: 'adf-search-chip-list' }
                    }] }
        ];
        SearchChipListComponent.propDecorators = {
            searchFilter: [{ type: core.Input }]
        };
        return SearchChipListComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var SearchSortingPickerComponent = /** @class */ (function () {
        function SearchSortingPickerComponent(queryBuilder) {
            this.queryBuilder = queryBuilder;
            this.options = [];
        }
        /**
         * @return {?}
         */
        SearchSortingPickerComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                this.options = this.queryBuilder.getSortingOptions();
                /** @type {?} */
                var primary = this.queryBuilder.getPrimarySorting();
                if (primary) {
                    this.value = primary.key;
                    this.ascending = primary.ascending;
                }
            };
        /**
         * @param {?} sorting
         * @return {?}
         */
        SearchSortingPickerComponent.prototype.onChanged = /**
         * @param {?} sorting
         * @return {?}
         */
            function (sorting) {
                this.value = sorting.key;
                this.ascending = sorting.ascending;
                this.applySorting();
            };
        /**
         * @param {?} key
         * @return {?}
         */
        SearchSortingPickerComponent.prototype.findOptionByKey = /**
         * @param {?} key
         * @return {?}
         */
            function (key) {
                if (key) {
                    return this.options.find(function (opt) { return opt.key === key; });
                }
                return null;
            };
        /**
         * @return {?}
         */
        SearchSortingPickerComponent.prototype.applySorting = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var option = this.findOptionByKey(this.value);
                if (option) {
                    this.queryBuilder.sorting = [__assign({}, option, { ascending: this.ascending })];
                    this.queryBuilder.update();
                }
            };
        SearchSortingPickerComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-search-sorting-picker',
                        template: "<adf-sorting-picker\n    [options]=\"options\"\n    [selected]=\"value\"\n    [ascending]=\"ascending\"\n    (change)=\"onChanged($event)\">\n</adf-sorting-picker>\n",
                        encapsulation: core.ViewEncapsulation.None,
                        host: { class: 'adf-search-sorting-picker' }
                    }] }
        ];
        /** @nocollapse */
        SearchSortingPickerComponent.ctorParameters = function () {
            return [
                { type: SearchQueryBuilderService }
            ];
        };
        return SearchSortingPickerComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var SearchWidgetContainerComponent = /** @class */ (function () {
        function SearchWidgetContainerComponent(searchFilterService, queryBuilder, componentFactoryResolver) {
            this.searchFilterService = searchFilterService;
            this.queryBuilder = queryBuilder;
            this.componentFactoryResolver = componentFactoryResolver;
        }
        /**
         * @return {?}
         */
        SearchWidgetContainerComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var componentType = this.searchFilterService.widgets[this.selector];
                if (componentType) {
                    /** @type {?} */
                    var factory = this.componentFactoryResolver.resolveComponentFactory(componentType);
                    if (factory) {
                        this.content.clear();
                        this.componentRef = this.content.createComponent(factory, 0);
                        this.setupWidget(this.componentRef);
                    }
                }
            };
        /**
         * @param {?} ref
         * @return {?}
         */
        SearchWidgetContainerComponent.prototype.setupWidget = /**
         * @param {?} ref
         * @return {?}
         */
            function (ref) {
                if (ref && ref.instance) {
                    ref.instance.id = this.id;
                    ref.instance.settings = __assign({}, this.settings);
                    ref.instance.context = this.queryBuilder;
                }
            };
        /**
         * @return {?}
         */
        SearchWidgetContainerComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                if (this.componentRef) {
                    this.componentRef.destroy();
                    this.componentRef = null;
                }
            };
        SearchWidgetContainerComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-search-widget-container',
                        template: '<div #content></div>'
                    }] }
        ];
        /** @nocollapse */
        SearchWidgetContainerComponent.ctorParameters = function () {
            return [
                { type: SearchFilterService },
                { type: SearchQueryBuilderService },
                { type: core.ComponentFactoryResolver }
            ];
        };
        SearchWidgetContainerComponent.propDecorators = {
            content: [{ type: core.ViewChild, args: ['content', { read: core.ViewContainerRef },] }],
            id: [{ type: core.Input }],
            selector: [{ type: core.Input }],
            settings: [{ type: core.Input }],
            config: [{ type: core.Input }]
        };
        return SearchWidgetContainerComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @type {?} */
    var ALFRESCO_SEARCH_DIRECTIVES = [
        SearchComponent,
        SearchControlComponent,
        SearchTriggerDirective,
        EmptySearchResultComponent,
        SearchFilterComponent,
        SearchChipListComponent
    ];
    var SearchModule = /** @class */ (function () {
        function SearchModule() {
        }
        SearchModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            forms.FormsModule,
                            forms.ReactiveFormsModule,
                            MaterialModule,
                            adfCore.CoreModule.forChild()
                        ],
                        declarations: __spread(ALFRESCO_SEARCH_DIRECTIVES, [
                            SearchWidgetContainerComponent,
                            SearchTextComponent,
                            SearchRadioComponent,
                            SearchSliderComponent,
                            SearchNumberRangeComponent,
                            SearchCheckListComponent,
                            SearchDateRangeComponent,
                            SearchSortingPickerComponent
                        ]),
                        exports: __spread(ALFRESCO_SEARCH_DIRECTIVES, [
                            SearchWidgetContainerComponent,
                            SearchTextComponent,
                            SearchRadioComponent,
                            SearchSliderComponent,
                            SearchNumberRangeComponent,
                            SearchCheckListComponent,
                            SearchDateRangeComponent,
                            SearchSortingPickerComponent
                        ]),
                        entryComponents: [
                            SearchWidgetContainerComponent,
                            SearchTextComponent,
                            SearchRadioComponent,
                            SearchSliderComponent,
                            SearchNumberRangeComponent,
                            SearchCheckListComponent,
                            SearchDateRangeComponent
                        ]
                    },] }
        ];
        return SearchModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @enum {string} */
    var Relations = {
        Members: 'members',
        Containers: 'containers',
    };
    var DropdownSitesComponent = /** @class */ (function () {
        function DropdownSitesComponent(sitesService, logService) {
            this.sitesService = sitesService;
            this.logService = logService;
            /**
             * Hide the "My Files" option.
             */
            this.hideMyFiles = false;
            /**
             * A custom list of sites to be displayed by the dropdown. If no value
             * is given, the sites of the current user are displayed by default. A
             * list of objects only with properties 'title' and 'guid' is enough to
             * be able to display the dropdown.
             */
            this.siteList = null;
            /**
             * Id of the selected site
             */
            this.value = null;
            /**
             * Text or a translation key to act as a placeholder. Default value is the
             * key "DROPDOWN.PLACEHOLDER_LABEL".
             */
            this.placeholder = 'DROPDOWN.PLACEHOLDER_LABEL';
            /**
             * Emitted when the user selects a site. When the default option is selected,
             * an empty model is emitted.
             */
            this.change = new core.EventEmitter();
            this.selected = null;
            this.MY_FILES_VALUE = '-my-';
        }
        /**
         * @return {?}
         */
        DropdownSitesComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                if (!this.siteList) {
                    this.setDefaultSiteList();
                }
            };
        /**
         * @param {?} event
         * @return {?}
         */
        DropdownSitesComponent.prototype.selectedSite = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                this.change.emit(event.value);
            };
        /**
         * @return {?}
         */
        DropdownSitesComponent.prototype.setDefaultSiteList = /**
         * @return {?}
         */
            function () {
                var _this = this;
                /** @type {?} */
                var extendedOptions = null;
                if (this.relations) {
                    extendedOptions = { relations: [this.relations] };
                }
                this.sitesService.getSites(extendedOptions).subscribe(function (result) {
                    _this.siteList = _this.relations === Relations.Members ? _this.filteredResultsByMember(result) : result;
                    if (!_this.hideMyFiles) {
                        /** @type {?} */
                        var myItem = { entry: { id: '-my-', guid: '-my-', title: 'DROPDOWN.MY_FILES_OPTION' } };
                        _this.siteList.list.entries.unshift(myItem);
                        if (!_this.value) {
                            _this.value = '-my-';
                        }
                    }
                    _this.selected = _this.siteList.list.entries.find(function (site) { return site.entry.id === _this.value; });
                }, function (error) {
                    _this.logService.error(error);
                });
            };
        /**
         * @param {?} sites
         * @return {?}
         */
        DropdownSitesComponent.prototype.filteredResultsByMember = /**
         * @param {?} sites
         * @return {?}
         */
            function (sites) {
                var _this = this;
                /** @type {?} */
                var loggedUserName = this.sitesService.getEcmCurrentLoggedUserName();
                sites.list.entries = sites.list.entries.filter(function (site) { return _this.isCurrentUserMember(site, loggedUserName); });
                return sites;
            };
        /**
         * @param {?} site
         * @param {?} loggedUserName
         * @return {?}
         */
        DropdownSitesComponent.prototype.isCurrentUserMember = /**
         * @param {?} site
         * @param {?} loggedUserName
         * @return {?}
         */
            function (site, loggedUserName) {
                return site.entry.visibility === 'PUBLIC' ||
                    !!site.relations.members.list.entries.find(function (member) {
                        return member.entry.id.toLowerCase() === loggedUserName.toLowerCase();
                    });
            };
        DropdownSitesComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-sites-dropdown',
                        template: "<div id=\"site-dropdown-container\" class=\"adf-site-dropdown-container\">\n    <mat-form-field>\n        <mat-select\n            data-automation-id=\"site-my-files-option\"\n            class=\"adf-site-dropdown-list-element\"\n            id=\"site-dropdown\"\n            placeholder=\"{{placeholder | translate}}\"\n            floatPlaceholder=\"never\"\n            data-automation-id=\"site-my-files-select\"\n            [(value)]=\"selected\"\n            (selectionChange)=\"selectedSite($event)\">\n            <mat-option *ngFor=\"let site of siteList?.list.entries\" [value]=\"site\">\n                {{ site.entry.title | translate}}\n            </mat-option>\n        </mat-select>\n    </mat-form-field>\n</div>\n",
                        encapsulation: core.ViewEncapsulation.None,
                        host: { 'class': 'adf-sites-dropdown' },
                        styles: [".adf-sites-dropdown.full-width .mat-form-field{width:100%}"]
                    }] }
        ];
        /** @nocollapse */
        DropdownSitesComponent.ctorParameters = function () {
            return [
                { type: adfCore.SitesService },
                { type: adfCore.LogService }
            ];
        };
        DropdownSitesComponent.propDecorators = {
            hideMyFiles: [{ type: core.Input }],
            siteList: [{ type: core.Input }],
            value: [{ type: core.Input }],
            placeholder: [{ type: core.Input }],
            relations: [{ type: core.Input }],
            change: [{ type: core.Output }]
        };
        return DropdownSitesComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var SitesDropdownModule = /** @class */ (function () {
        function SitesDropdownModule() {
        }
        SitesDropdownModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            MaterialModule,
                            forms.FormsModule,
                            forms.ReactiveFormsModule,
                            adfCore.CoreModule.forChild()
                        ],
                        exports: [
                            DropdownSitesComponent
                        ],
                        declarations: [
                            DropdownSitesComponent
                        ]
                    },] }
        ];
        return SitesDropdownModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var BreadcrumbComponent = /** @class */ (function () {
        function BreadcrumbComponent() {
            /**
             * Active node, builds UI based on folderNode.path.elements collection.
             */
            this.folderNode = null;
            /**
             * (optional) Name of the root element of the breadcrumb. You can use
             * this property to rename "Company Home" to "Personal Files" for
             * example. You can use an i18n resource key for the property value.
             */
            this.root = null;
            /**
             * (optional) The id of the root element. You can use this property
             * to set a custom element the breadcrumb should start with.
             */
            this.rootId = null;
            this.route = [];
            /**
             * Emitted when the user clicks on a breadcrumb.
             */
            this.navigate = new core.EventEmitter();
        }
        Object.defineProperty(BreadcrumbComponent.prototype, "hasRoot", {
            get: /**
             * @return {?}
             */ function () {
                return !!this.root;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        BreadcrumbComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                this.transform = this.transform ? this.transform : null;
            };
        /**
         * @param {?} changes
         * @return {?}
         */
        BreadcrumbComponent.prototype.ngOnChanges = /**
         * @param {?} changes
         * @return {?}
         */
            function (changes) {
                if (changes["folderNode"]) {
                    /** @type {?} */
                    var node = null;
                    node = this.transform ? this.transform(changes["folderNode"].currentValue) : changes["folderNode"].currentValue;
                    this.route = this.parseRoute(node);
                }
                if (changes["transform"]) {
                    /** @type {?} */
                    var node = this.transform ? this.transform(this.folderNode) : this.folderNode;
                    this.route = this.parseRoute(node);
                }
                this.recalculateNodes();
            };
        /**
         * @return {?}
         */
        BreadcrumbComponent.prototype.recalculateNodes = /**
         * @return {?}
         */
            function () {
                if (this.maxItems && this.route.length > this.maxItems) {
                    this.lastNodes = this.route.slice(this.route.length - this.maxItems);
                    this.previousNodes = this.route.slice(0, this.route.length - this.maxItems);
                    this.previousNodes.reverse();
                }
                else {
                    this.lastNodes = this.route;
                    this.previousNodes = null;
                }
            };
        /**
         * @return {?}
         */
        BreadcrumbComponent.prototype.open = /**
         * @return {?}
         */
            function () {
                if (this.dropdown) {
                    this.dropdown.open();
                }
            };
        /**
         * @return {?}
         */
        BreadcrumbComponent.prototype.hasPreviousNodes = /**
         * @return {?}
         */
            function () {
                return this.previousNodes ? true : false;
            };
        /**
         * @param {?} node
         * @return {?}
         */
        BreadcrumbComponent.prototype.parseRoute = /**
         * @param {?} node
         * @return {?}
         */
            function (node) {
                if (node && node.path) {
                    /** @type {?} */
                    var route = /** @type {?} */ ((node.path.elements || []).slice());
                    route.push(/** @type {?} */ ({
                        id: node.id,
                        name: node.name
                    }));
                    /** @type {?} */
                    var rootPos = this.getElementPosition(route, this.rootId);
                    if (rootPos > 0) {
                        route.splice(0, rootPos);
                    }
                    if (rootPos === -1 && this.rootId) {
                        route[0].id = this.rootId;
                    }
                    if (this.root) {
                        route[0].name = this.root;
                    }
                    return route;
                }
                return [];
            };
        /**
         * @param {?} route
         * @param {?} nodeId
         * @return {?}
         */
        BreadcrumbComponent.prototype.getElementPosition = /**
         * @param {?} route
         * @param {?} nodeId
         * @return {?}
         */
            function (route, nodeId) {
                /** @type {?} */
                var result = -1;
                if (route && route.length > 0 && nodeId) {
                    result = route.findIndex(function (el) { return el.id === nodeId; });
                }
                return result;
            };
        /**
         * @param {?} route
         * @param {?=} event
         * @return {?}
         */
        BreadcrumbComponent.prototype.onRoutePathClick = /**
         * @param {?} route
         * @param {?=} event
         * @return {?}
         */
            function (route, event) {
                if (event) {
                    event.preventDefault();
                }
                if (route) {
                    this.navigate.emit(route);
                    if (this.target) {
                        this.target.navigateTo(route.id);
                    }
                }
            };
        BreadcrumbComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-breadcrumb',
                        template: "<nav *ngIf=\"folderNode\" data-automation-id=\"breadcrumb\" class=\"adf-breadcrumb-container\" role=\"list\">\n    <button\n        *ngIf=\"hasPreviousNodes()\"\n        tabindex=\"0\"\n        class=\"adf-breadcrumb-dropdown-trigger\"\n        (click)=\"open()\">\n        <div class=\"adf-breadcrumb-dropdown-trigger-icon\">\n            <mat-icon [class.isRoot]=\"!hasPreviousNodes()\">folder</mat-icon>\n            <mat-icon [class.isRoot]=\"!hasPreviousNodes()\" class=\"adf-breadcrumb-dropdown-trigger-arrow\">arrow_drop_down</mat-icon>\n        </div>\n    </button>\n\n    <mat-select\n        #dropdown\n        *ngIf=\"hasPreviousNodes()\"\n        class=\"adf-breadcrumb-dropdown-path\"\n        tabindex=\"0\">\n\n        <mat-option\n            *ngFor=\"let node of previousNodes;\"\n            (click)=\"onRoutePathClick(node, $event)\"\n            class=\"adf-breadcrumb-path-option\"\n            tabindex=\"0\">\n            {{ node.name | translate }}\n        </mat-option>\n    </mat-select>\n\n    <div *ngFor=\"let item of lastNodes; let last = last\"\n        [class.active]=\"last\"\n        [ngSwitch]=\"last\"\n        title=\"{{ item.name | translate }}\"\n        class=\"adf-breadcrumb-item\"\n        role=\"listitem\">\n\n        <a *ngSwitchDefault href=\"#\" [attr.data-automation-id]=\"'breadcrumb_' + item.name\"\n            class=\"adf-breadcrumb-item-anchor\"\n            (click)=\"onRoutePathClick(item, $event)\">\n            {{ item.name | translate }}\n        </a>\n\n        <div *ngSwitchCase=\"true\" class=\"adf-breadcrumb-item-current\">\n            {{ item.name | translate }}\n        </div>\n\n        <mat-icon class=\"adf-breadcrumb-item-chevron\" *ngIf=\"!last\">\n            chevron_right\n        </mat-icon>\n    </div>\n</nav>\n\n<nav *ngIf=\"!folderNode && hasRoot\" data-automation-id=\"breadcrumb\" role=\"navigation\">\n    <div class=\"adf-breadcrumb-item active\" role=\"listitem\">\n        <div class=\"adf-breadcrumb-item-current\">\n            {{ root | translate }}\n        </div>\n    </div>\n</nav>\n",
                        encapsulation: core.ViewEncapsulation.None,
                        host: {
                            'class': 'adf-breadcrumb'
                        },
                        styles: [""]
                    }] }
        ];
        BreadcrumbComponent.propDecorators = {
            folderNode: [{ type: core.Input }],
            root: [{ type: core.Input }],
            rootId: [{ type: core.Input }],
            target: [{ type: core.Input }],
            transform: [{ type: core.Input }],
            dropdown: [{ type: core.ViewChild, args: ['dropdown',] }],
            maxItems: [{ type: core.Input }],
            navigate: [{ type: core.Output }]
        };
        return BreadcrumbComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var DropdownBreadcrumbComponent = /** @class */ (function (_super) {
        __extends(DropdownBreadcrumbComponent, _super);
        function DropdownBreadcrumbComponent() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        /**
         * @param {?} changes
         * @return {?}
         */
        DropdownBreadcrumbComponent.prototype.ngOnChanges = /**
         * @param {?} changes
         * @return {?}
         */
            function (changes) {
                if (changes["folderNode"]) {
                    /** @type {?} */
                    var node = null;
                    node = this.transform ? this.transform(changes["folderNode"].currentValue) : changes["folderNode"].currentValue;
                    this.route = this.parseRoute(node);
                }
                if (changes["transform"]) {
                    /** @type {?} */
                    var node = this.transform ? this.transform(this.folderNode) : this.folderNode;
                    this.route = this.parseRoute(node);
                }
                this.recalculateNodes();
            };
        /**
         * Calculate the current and previous nodes from the route array
         */
        /**
         * Calculate the current and previous nodes from the route array
         * @return {?}
         */
        DropdownBreadcrumbComponent.prototype.recalculateNodes = /**
         * Calculate the current and previous nodes from the route array
         * @return {?}
         */
            function () {
                this.currentNode = this.route[this.route.length - 1];
                this.previousNodes = this.route.slice(0, this.route.length - 1).reverse();
            };
        /**
         * Opens the node picker menu
         */
        /**
         * Opens the node picker menu
         * @return {?}
         */
        DropdownBreadcrumbComponent.prototype.open = /**
         * Opens the node picker menu
         * @return {?}
         */
            function () {
                if (this.dropdown) {
                    this.dropdown.open();
                }
            };
        /**
         * Return if route has more than one element (means: we are not in the root directory)
         */
        /**
         * Return if route has more than one element (means: we are not in the root directory)
         * @return {?}
         */
        DropdownBreadcrumbComponent.prototype.hasPreviousNodes = /**
         * Return if route has more than one element (means: we are not in the root directory)
         * @return {?}
         */
            function () {
                return this.previousNodes.length > 0;
            };
        DropdownBreadcrumbComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-dropdown-breadcrumb',
                        template: "<ng-container *ngIf=\"route.length > 0\">\n\n    <button\n        tabindex=\"0\"\n        class=\"adf-dropdown-breadcrumb-trigger\"\n        (click)=\"open()\"\n        data-automation-id=\"dropdown-breadcrumb-trigger\">\n        <mat-icon [class.isRoot]=\"!hasPreviousNodes()\">folder</mat-icon>\n    </button>\n    <mat-icon class=\"adf-dropdown-breadcrumb-item-chevron\">chevron_right</mat-icon>\n\n    <mat-select\n        #dropdown\n        *ngIf=\"hasPreviousNodes()\"\n        class=\"adf-dropdown-breadcrumb-path\"\n        tabindex=\"0\"\n        data-automation-id=\"dropdown-breadcrumb-path\" >\n\n        <mat-option\n            *ngFor=\"let node of previousNodes;\"\n            (click)=\"onRoutePathClick(node, $event)\"\n            class=\"adf-dropdown-breadcrumb-path-option\"\n            tabindex=\"0\"\n            data-automation-class=\"dropdown-breadcrumb-path-option\">\n            {{ node.name | translate }}\n        </mat-option>\n    </mat-select>\n\n    <span\n        class=\"adf-current-folder\"\n        [class.isRoot]=\"!hasPreviousNodes()\"\n        data-automation-id=\"current-folder\">{{ currentNode.name }}</span>\n</ng-container>\n",
                        encapsulation: core.ViewEncapsulation.None,
                        host: {
                            'class': 'adf-dropdown-breadcrumb'
                        },
                        styles: [""]
                    }] }
        ];
        DropdownBreadcrumbComponent.propDecorators = {
            dropdown: [{ type: core.ViewChild, args: ['dropdown',] }]
        };
        return DropdownBreadcrumbComponent;
    }(BreadcrumbComponent));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var BreadcrumbModule = /** @class */ (function () {
        function BreadcrumbModule() {
        }
        BreadcrumbModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            MaterialModule,
                            adfCore.CoreModule.forChild()
                        ],
                        exports: [
                            BreadcrumbComponent,
                            DropdownBreadcrumbComponent
                        ],
                        declarations: [
                            BreadcrumbComponent,
                            DropdownBreadcrumbComponent
                        ]
                    },] }
        ];
        return BreadcrumbModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var ConfirmDialogComponent = /** @class */ (function () {
        function ConfirmDialogComponent(data) {
            data = data || {};
            this.title = data.title || 'ADF_CONFIRM_DIALOG.CONFIRM';
            this.message = data.message || 'ADF_CONFIRM_DIALOG.MESSAGE';
            this.yesLabel = data.yesLabel || 'ADF_CONFIRM_DIALOG.YES_LABEL';
            this.noLabel = data.noLabel || 'ADF_CONFIRM_DIALOG.NO_LABEL';
        }
        ConfirmDialogComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-confirm-dialog',
                        template: "\n        <h1 mat-dialog-title>{{ title | translate }}</h1>\n        <mat-dialog-content>\n            <p>{{ message | translate }}</p>\n        </mat-dialog-content>\n        <mat-dialog-actions>\n            <span class=\"spacer\"></span>\n            <button id=\"adf-confirm-accept\" mat-button color=\"primary\" [mat-dialog-close]=\"true\">{{ yesLabel | translate }}</button>\n            <button id=\"adf-confirm-cancel\" mat-button [mat-dialog-close]=\"false\" cdkFocusInitial>{{ noLabel | translate }}</button>\n        </mat-dialog-actions>\n    ",
                        host: { 'class': 'adf-confirm-dialog' },
                        encapsulation: core.ViewEncapsulation.None,
                        styles: ["\n        .spacer { flex: 1 1 auto; }\n\n        .adf-confirm-dialog .mat-dialog-actions .mat-button-wrapper {\n            text-transform: uppercase;\n        }\n    "]
                    }] }
        ];
        /** @nocollapse */
        ConfirmDialogComponent.ctorParameters = function () {
            return [
                { type: undefined, decorators: [{ type: core.Inject, args: [material.MAT_DIALOG_DATA,] }] }
            ];
        };
        return ConfirmDialogComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var VersionListComponent = /** @class */ (function () {
        function VersionListComponent(alfrescoApi, contentService, dialog) {
            this.alfrescoApi = alfrescoApi;
            this.contentService = contentService;
            this.dialog = dialog;
            this.versions = [];
            this.isLoading = true;
            /**
             * Toggles showing/hiding of comments
             */
            this.showComments = true;
            /**
             * Enable/disable downloading a version of the current node.
             */
            this.allowDownload = true;
            /**
             * Toggles showing/hiding of version actions
             */
            this.showActions = true;
            /**
             * Emitted when a version is restored
             */
            this.restored = new core.EventEmitter();
            /**
             * Emitted when a version is deleted
             */
            this.deleted = new core.EventEmitter();
            this.versionsApi = this.alfrescoApi.versionsApi;
        }
        /**
         * @return {?}
         */
        VersionListComponent.prototype.ngOnChanges = /**
         * @return {?}
         */
            function () {
                this.loadVersionHistory();
            };
        /**
         * @return {?}
         */
        VersionListComponent.prototype.canUpdate = /**
         * @return {?}
         */
            function () {
                return this.contentService.hasPermission(this.node, 'update') && this.versions.length > 1;
            };
        /**
         * @return {?}
         */
        VersionListComponent.prototype.canDelete = /**
         * @return {?}
         */
            function () {
                return this.contentService.hasPermission(this.node, 'delete') && this.versions.length > 1;
            };
        /**
         * @param {?} versionId
         * @return {?}
         */
        VersionListComponent.prototype.restore = /**
         * @param {?} versionId
         * @return {?}
         */
            function (versionId) {
                var _this = this;
                if (this.canUpdate()) {
                    this.versionsApi
                        .revertVersion(this.node.id, versionId, { majorVersion: true, comment: '' })
                        .then(function () { return _this.onVersionRestored(_this.node); });
                }
            };
        /**
         * @return {?}
         */
        VersionListComponent.prototype.loadVersionHistory = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.isLoading = true;
                this.versionsApi.listVersionHistory(this.node.id).then(function (data) {
                    _this.versions = data.list.entries;
                    _this.isLoading = false;
                });
            };
        /**
         * @param {?} versionId
         * @return {?}
         */
        VersionListComponent.prototype.downloadVersion = /**
         * @param {?} versionId
         * @return {?}
         */
            function (versionId) {
                if (this.allowDownload) {
                    /** @type {?} */
                    var versionDownloadUrl = this.getVersionContentUrl(this.node.id, versionId, true);
                    this.downloadContent(versionDownloadUrl);
                }
            };
        /**
         * @param {?} versionId
         * @return {?}
         */
        VersionListComponent.prototype.deleteVersion = /**
         * @param {?} versionId
         * @return {?}
         */
            function (versionId) {
                var _this = this;
                if (this.canUpdate()) {
                    /** @type {?} */
                    var dialogRef = this.dialog.open(ConfirmDialogComponent, {
                        data: {
                            title: 'ADF_VERSION_LIST.CONFIRM_DELETE.TITLE',
                            message: 'ADF_VERSION_LIST.CONFIRM_DELETE.MESSAGE',
                            yesLabel: 'ADF_VERSION_LIST.CONFIRM_DELETE.YES_LABEL',
                            noLabel: 'ADF_VERSION_LIST.CONFIRM_DELETE.NO_LABEL'
                        },
                        minWidth: '250px'
                    });
                    dialogRef.afterClosed().subscribe(function (result) {
                        if (result === true) {
                            _this.alfrescoApi.versionsApi
                                .deleteVersion(_this.node.id, versionId)
                                .then(function () { return _this.onVersionDeleted(_this.node); });
                        }
                    });
                }
            };
        /**
         * @param {?} node
         * @return {?}
         */
        VersionListComponent.prototype.onVersionDeleted = /**
         * @param {?} node
         * @return {?}
         */
            function (node) {
                this.loadVersionHistory();
                this.deleted.emit(node);
            };
        /**
         * @param {?} node
         * @return {?}
         */
        VersionListComponent.prototype.onVersionRestored = /**
         * @param {?} node
         * @return {?}
         */
            function (node) {
                this.loadVersionHistory();
                this.restored.emit(node);
            };
        /**
         * @param {?} nodeId
         * @param {?} versionId
         * @param {?=} attachment
         * @return {?}
         */
        VersionListComponent.prototype.getVersionContentUrl = /**
         * @param {?} nodeId
         * @param {?} versionId
         * @param {?=} attachment
         * @return {?}
         */
            function (nodeId, versionId, attachment) {
                /** @type {?} */
                var nodeDownloadUrl = this.alfrescoApi.contentApi.getContentUrl(nodeId, attachment);
                return nodeDownloadUrl.replace('/content', '/versions/' + versionId + '/content');
            };
        /**
         * @param {?} url
         * @return {?}
         */
        VersionListComponent.prototype.downloadContent = /**
         * @param {?} url
         * @return {?}
         */
            function (url) {
                if (url) {
                    /** @type {?} */
                    var link = document.createElement('a');
                    link.style.display = 'none';
                    link.href = url;
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                }
            };
        VersionListComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-version-list',
                        template: "<mat-list class=\"adf-version-list\" *ngIf=\"!isLoading; else loading_template\">\n    <mat-list-item *ngFor=\"let version of versions; let idx = index\">\n        <mat-icon mat-list-icon>insert_drive_file</mat-icon>\n        <h4 mat-line class=\"adf-version-list-item-name\" [id]=\"'adf-version-list-item-name-' + version.entry.id\" >{{version.entry.name}}</h4>\n        <p mat-line>\n            <span class=\"adf-version-list-item-version\"  [id]=\"'adf-version-list-item-version-' + version.entry.id\" >{{version.entry.id}}</span> -\n            <span class=\"adf-version-list-item-date\"     [id]=\"'adf-version-list-item-date-' + version.entry.id\" >{{version.entry.modifiedAt | date}}</span>\n        </p>\n        <p mat-line [id]=\"'adf-version-list-item-comment-'+ version.entry.id\" class=\"adf-version-list-item-comment\"\n           *ngIf=\"showComments\">{{version.entry.versionComment}}</p>\n\n        <div *ngIf=\"showActions\">\n            <mat-menu [id]=\"'adf-version-list-action-menu-'+version.entry.id\"\n                      #versionMenu=\"matMenu\" yPosition=\"below\" xPosition=\"before\">\n                <button\n                    [id]=\"'adf-version-list-action-restore-'+version.entry.id\"\n                    [disabled]=\"!canUpdate()\"\n                    mat-menu-item\n                    (click)=\"restore(version.entry.id)\">\n                    {{ 'ADF_VERSION_LIST.ACTIONS.RESTORE' | translate }}\n                </button>\n                <button *ngIf=\"allowDownload\"\n                        [id]=\"'adf-version-list-action-download-'+version.entry.id\"\n                        mat-menu-item\n                        (click)=\"downloadVersion(version.entry.id)\">\n                    {{ 'ADF_VERSION_LIST.ACTIONS.DOWNLOAD' | translate }}\n                </button>\n                <button\n                    [disabled]=\"!canDelete()\"\n                    [id]=\"'adf-version-list-action-delete-'+version.entry.id\"\n                    (click)=\"deleteVersion(version.entry.id)\"\n                    mat-menu-item>\n                    {{ 'ADF_VERSION_LIST.ACTIONS.DELETE' | translate }}\n                </button>\n            </mat-menu>\n\n            <button mat-icon-button [matMenuTriggerFor]=\"versionMenu\" [id]=\"'adf-version-list-action-menu-button-'+version.entry.id\">\n                <mat-icon>more_vert</mat-icon>\n            </button>\n        </div>\n    </mat-list-item>\n</mat-list>\n\n<ng-template #loading_template>\n    <mat-progress-bar data-automation-id=\"version-history-loading-bar\" mode=\"indeterminate\"\n                      color=\"accent\"></mat-progress-bar>\n</ng-template>\n",
                        encapsulation: core.ViewEncapsulation.None,
                        host: {
                            'class': 'adf-version-list'
                        },
                        styles: [".adf-version-list .mat-list-item-content{border-bottom:1px solid #d8d8d8}.adf-version-list-item-version{font-weight:700}.adf-version-list-item-date{opacity:.6}.adf-version-list-item-comment{opacity:.5}"]
                    }] }
        ];
        /** @nocollapse */
        VersionListComponent.ctorParameters = function () {
            return [
                { type: adfCore.AlfrescoApiService },
                { type: adfCore.ContentService },
                { type: material.MatDialog }
            ];
        };
        VersionListComponent.propDecorators = {
            id: [{ type: core.Input }],
            node: [{ type: core.Input }],
            showComments: [{ type: core.Input }],
            allowDownload: [{ type: core.Input }],
            showActions: [{ type: core.Input }],
            restored: [{ type: core.Output }],
            deleted: [{ type: core.Output }]
        };
        return VersionListComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var VersionManagerComponent = /** @class */ (function () {
        function VersionManagerComponent(config, contentService, alfrescoApiService) {
            this.contentService = contentService;
            this.alfrescoApiService = alfrescoApiService;
            /**
             * Toggles showing/hiding of comments.
             */
            this.showComments = true;
            /**
             * Enable/disable downloading a version of the current node.
             */
            this.allowDownload = true;
            /**
             * Emitted when a file is uploaded successfully.
             */
            this.uploadSuccess = new core.EventEmitter();
            /**
             * Emitted when an error occurs during upload.
             */
            this.uploadError = new core.EventEmitter();
            this.uploadState = 'close';
        }
        /**
         * @param {?} node
         * @return {?}
         */
        VersionManagerComponent.prototype.refresh = /**
         * @param {?} node
         * @return {?}
         */
            function (node) {
                this.alfrescoApiService.nodeUpdated.next(node);
                this.versionListComponent.loadVersionHistory();
                this.uploadSuccess.emit(node);
                this.uploadState = 'close';
            };
        /**
         * @param {?} event
         * @return {?}
         */
        VersionManagerComponent.prototype.onUploadSuccess = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                this.alfrescoApiService.nodeUpdated.next(event.value.entry);
                this.versionListComponent.loadVersionHistory();
                this.uploadSuccess.emit(event.value.entry);
                this.uploadState = 'close';
            };
        /**
         * @param {?} event
         * @return {?}
         */
        VersionManagerComponent.prototype.onUploadError = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                this.uploadError.emit(event);
            };
        /**
         * @return {?}
         */
        VersionManagerComponent.prototype.onUploadCancel = /**
         * @return {?}
         */
            function () {
                this.uploadState = 'close';
            };
        /**
         * @return {?}
         */
        VersionManagerComponent.prototype.toggleNewVersion = /**
         * @return {?}
         */
            function () {
                this.uploadState = this.uploadState === 'open' ? 'close' : 'open';
            };
        /**
         * @return {?}
         */
        VersionManagerComponent.prototype.canUpdate = /**
         * @return {?}
         */
            function () {
                return this.contentService.hasPermission(this.node, 'update');
            };
        VersionManagerComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-version-manager',
                        template: "<div class=\"adf-new-version-container\">\n    <div class=\"adf-new-version-uploader-container\" id=\"adf-new-version-uploader-container\" fxLayout=\"row\" fxLayoutAlign=\"end center\" [@uploadToggle]=\"uploadState\">\n        <table class=\"adf-version-upload\" *ngIf=\"uploadState !== 'close'\">\n            <tr>\n                <td>\n                    <adf-version-upload\n                        id=\"adf-version-upload-button\"\n                        [node]=\"node\"\n                        (success)=\"onUploadSuccess($event)\"\n                        (cancel)=\"onUploadCancel()\"\n                        (error)=\"onUploadError($event)\">\n                    </adf-version-upload>\n                </td>\n            </tr>\n        </table>\n    </div>\n\n    <div class=\"adf-version-list-container\">\n        <div class=\"adf-version-list-table\">\n            <div>\n                <button mat-raised-button\n                        id=\"adf-show-version-upload-button\"\n                        (click)=\"toggleNewVersion()\" color=\"primary\"\n                        *ngIf=\"uploadState ==='close'\">{{\n                    'ADF_VERSION_LIST.ACTIONS.UPLOAD.ADD'|\n                    translate }}\n                </button>\n            </div>\n            <div>\n\n                <adf-version-list\n                    #versionList\n                    [node]=\"node\"\n                    [allowDownload]=\"allowDownload\"\n                    [showComments]=\"showComments\"\n                    (deleted)=\"refresh($event)\"\n                    (restored)=\"refresh($event)\">\n                </adf-version-list>\n            </div>\n        </div>\n    </div>\n</div>\n",
                        animations: [
                            animations.trigger('uploadToggle', [
                                animations.state('open', animations.style({ height: '175px', opacity: 1, visibility: 'visible' })),
                                animations.state('close', animations.style({ height: '0%', opacity: 0, visibility: 'hidden' })),
                                animations.transition('open => close', [
                                    animations.style({ visibility: 'hidden' }),
                                    animations.animate('0.4s cubic-bezier(0.25, 0.8, 0.25, 1)')
                                ]),
                                animations.transition('close => open', [
                                    animations.style({ visibility: 'visible' }),
                                    animations.animate('0.4s cubic-bezier(0.25, 0.8, 0.25, 1)')
                                ])
                            ])
                        ],
                        encapsulation: core.ViewEncapsulation.None,
                        styles: [".adf-button.upload-new-version{box-shadow:none;width:100%;height:175px;float:left;position:relative}.adf-new-version-uploader-container{border-bottom:1px solid #d8d8d8;padding:16px 0;width:100%;height:0%;position:relative;display:hidden;float:left!important}.adf-new-version-container{height:800px;overflow:hidden}.adf-version-list-table,.adf-version-upload-table{width:100%}.adf-version-list{width:100%!important;float:left!important}"]
                    }] }
        ];
        /** @nocollapse */
        VersionManagerComponent.ctorParameters = function () {
            return [
                { type: adfCore.AppConfigService },
                { type: adfCore.ContentService },
                { type: adfCore.AlfrescoApiService }
            ];
        };
        VersionManagerComponent.propDecorators = {
            node: [{ type: core.Input }],
            showComments: [{ type: core.Input }],
            allowDownload: [{ type: core.Input }],
            uploadSuccess: [{ type: core.Output }],
            uploadError: [{ type: core.Output }],
            versionListComponent: [{ type: core.ViewChild, args: ['versionList',] }]
        };
        return VersionManagerComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var VersionUploadComponent = /** @class */ (function () {
        function VersionUploadComponent(contentService) {
            this.contentService = contentService;
            this.semanticVersion = 'minor';
            this.uploadVersion = false;
            this.success = new core.EventEmitter();
            this.error = new core.EventEmitter();
            this.cancel = new core.EventEmitter();
        }
        /**
         * @return {?}
         */
        VersionUploadComponent.prototype.canUpload = /**
         * @return {?}
         */
            function () {
                return this.contentService.hasPermission(this.node, 'update');
            };
        /**
         * @return {?}
         */
        VersionUploadComponent.prototype.isMajorVersion = /**
         * @return {?}
         */
            function () {
                return this.semanticVersion === 'minor' ? false : true;
            };
        /**
         * @return {?}
         */
        VersionUploadComponent.prototype.cancelUpload = /**
         * @return {?}
         */
            function () {
                this.cancel.emit();
            };
        VersionUploadComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-version-upload',
                        template: "<div class=\"adf-new-version-max-width\">\n    <mat-radio-group class=\"adf-new-version-radio-group\" [(ngModel)]=\"semanticVersion\">\n        <mat-radio-button class=\"adf-new-version-radio-button\" id=\"adf-new-version-minor\"[value]=\"'minor'\">{{\n            'ADF_VERSION_LIST.ACTIONS.UPLOAD.MINOR' |\n            translate }}\n        </mat-radio-button>\n        <mat-radio-button class=\"adf-new-version-radio-button\" id=\"adf-new-version-major\" [value]=\"'major'\">{{\n            'ADF_VERSION_LIST.ACTIONS.UPLOAD.MAJOR' |\n            translate }}\n        </mat-radio-button>\n    </mat-radio-group>\n    <mat-form-field class=\"adf-new-version-max-width\">\n                    <textarea matInput [(ngModel)]=\"comment\" class=\"adf-new-version-text-area\" id=\"adf-new-version-text-area\"\n                              placeholder=\"{{ 'ADF_VERSION_LIST.ACTIONS.UPLOAD.COMMENT' | translate }}\"></textarea>\n    </mat-form-field>\n\n</div>\n<div class=\"adf-version-upload-buttons\">\n    <adf-upload-version-button\n        data-automation-id=\"adf-new-version-file-upload\"\n        staticTitle=\"{{ 'ADF_VERSION_LIST.ACTIONS.UPLOAD.TITLE' | translate }}\"\n        [node]=\"node\"\n        [disabled]=\"!canUpload()\"\n        [rootFolderId]=\"node.parentId\"\n        tooltip=\"{{ 'ADF_VERSION_LIST.ACTIONS.UPLOAD.TOOLTIP' | translate }}\"\n        [comment]=\"comment\"\n        [versioning]=\"true\"\n        [majorVersion]=\"isMajorVersion()\"\n        (success)=\"success.emit($event)\"\n        (error)=\"error.emit($event)\">\n    </adf-upload-version-button>\n    <button mat-raised-button (click)=\"cancelUpload()\" id=\"adf-new-version-cancel\"  >{{\n        'ADF_VERSION_LIST.ACTIONS.UPLOAD.CANCEL'| translate }}\n    </button>\n</div>\n\n",
                        encapsulation: core.ViewEncapsulation.None,
                        host: { 'class': 'adf-version-upload' },
                        styles: [".adf-new-version-radio-group{display:inline-flex;flex-direction:column}.adf-new-version-radio-button{margin:5px}.adf-version-upload-buttons{display:flex;float:right;justify-content:space-between;width:100%}.adf-new-version-max-width{width:100%;float:right}.adf-new-version-text-area{resize:none!important}"]
                    }] }
        ];
        /** @nocollapse */
        VersionUploadComponent.ctorParameters = function () {
            return [
                { type: adfCore.ContentService }
            ];
        };
        VersionUploadComponent.propDecorators = {
            node: [{ type: core.Input }],
            success: [{ type: core.Output }],
            error: [{ type: core.Output }],
            cancel: [{ type: core.Output }]
        };
        return VersionUploadComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var VersionManagerModule = /** @class */ (function () {
        function VersionManagerModule() {
        }
        VersionManagerModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            MaterialModule,
                            adfCore.CoreModule.forChild(),
                            UploadModule,
                            forms.FormsModule
                        ],
                        exports: [
                            VersionUploadComponent,
                            VersionManagerComponent,
                            VersionListComponent,
                            forms.FormsModule
                        ],
                        declarations: [
                            VersionUploadComponent,
                            VersionManagerComponent,
                            VersionListComponent
                        ]
                    },] }
        ];
        return VersionManagerModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var NameLocationCellComponent = /** @class */ (function () {
        function NameLocationCellComponent() {
            this.name = '';
            this.path = '';
        }
        /**
         * @return {?}
         */
        NameLocationCellComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                if (this.row) {
                    this.name = this.row.getValue('name');
                    /** @type {?} */
                    var fullPath = this.row.getValue('path');
                    if (fullPath) {
                        this.path = fullPath.name || '';
                    }
                }
            };
        NameLocationCellComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-name-location-cell',
                        template: "\n        <div class=\"adf-name-location-cell-name\">{{ name }}</div>\n        <div class=\"adf-name-location-cell-location\" [title]=\"path\">{{ path }}</div>\n    ",
                        encapsulation: core.ViewEncapsulation.None,
                        changeDetection: core.ChangeDetectionStrategy.OnPush,
                        host: { class: 'adf-name-location-cell' },
                        styles: [""]
                    }] }
        ];
        NameLocationCellComponent.propDecorators = {
            row: [{ type: core.Input }]
        };
        return NameLocationCellComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /**
     * Internal service used by ContentNodeSelector component.
     */
    var ContentNodeSelectorService = /** @class */ (function () {
        function ContentNodeSelectorService(searchService) {
            this.searchService = searchService;
        }
        /**
         * Performs a search for content node selection
         *
         * @param {?} searchTerm    The term to search for
         * @param {?=} rootNodeId    The root is to start the search from
         * @param {?=} skipCount     From where to start the loading
         * @param {?=} maxItems      How many items to load
         * @param {?=} extraNodeIds
         * @return {?}
         */
        ContentNodeSelectorService.prototype.search = /**
         * Performs a search for content node selection
         *
         * @param {?} searchTerm    The term to search for
         * @param {?=} rootNodeId    The root is to start the search from
         * @param {?=} skipCount     From where to start the loading
         * @param {?=} maxItems      How many items to load
         * @param {?=} extraNodeIds
         * @return {?}
         */
            function (searchTerm, rootNodeId, skipCount, maxItems, extraNodeIds) {
                if (rootNodeId === void 0) {
                    rootNodeId = null;
                }
                if (skipCount === void 0) {
                    skipCount = 0;
                }
                if (maxItems === void 0) {
                    maxItems = 25;
                }
                /** @type {?} */
                var extraParentFiltering = '';
                if (extraNodeIds && extraNodeIds.length) {
                    extraNodeIds
                        .filter(function (id) { return id !== rootNodeId; })
                        .forEach(function (extraId) {
                        extraParentFiltering += " OR ANCESTOR:'workspace://SpacesStore/" + extraId + "'";
                    });
                }
                /** @type {?} */
                var parentFiltering = rootNodeId ? [{ query: "ANCESTOR:'workspace://SpacesStore/" + rootNodeId + "'" + extraParentFiltering }] : [];
                /** @type {?} */
                var defaultSearchNode = {
                    query: {
                        query: searchTerm + "* OR name:" + searchTerm + "*"
                    },
                    include: ['path', 'allowableOperations'],
                    paging: {
                        maxItems: maxItems,
                        skipCount: skipCount
                    },
                    filterQueries: __spread([
                        { query: "TYPE:'cm:folder'" },
                        { query: 'NOT cm:creator:System' }
                    ], parentFiltering),
                    scope: {
                        locations: ['nodes']
                    }
                };
                return this.searchService.searchByQueryBody(defaultSearchNode);
            };
        ContentNodeSelectorService.decorators = [
            { type: core.Injectable }
        ];
        /** @nocollapse */
        ContentNodeSelectorService.ctorParameters = function () {
            return [
                { type: adfCore.SearchService }
            ];
        };
        return ContentNodeSelectorService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @type {?} */
    var defaultValidation = function () { return true; };
    var ContentNodeSelectorPanelComponent = /** @class */ (function () {
        function ContentNodeSelectorPanelComponent(contentNodeSelectorService, apiService, customResourcesService, preferences) {
            var _this = this;
            this.contentNodeSelectorService = contentNodeSelectorService;
            this.apiService = apiService;
            this.customResourcesService = customResourcesService;
            this.preferences = preferences;
            /**
             * Node ID of the folder currently listed.
             */
            this.currentFolderId = null;
            /**
             * Hide the "My Files" option added to the site list by default.
             * See the [Sites Dropdown component](sites-dropdown.component.md)
             * for more information.
             */
            this.dropdownHideMyFiles = false;
            /**
             * Custom site for site dropdown same as siteList. See the
             * [Sites Dropdown component](sites-dropdown.component.md)
             * for more information.
             */
            this.dropdownSiteList = null;
            /**
             * Custom row filter function. See the
             * [Document List component](document-list.component.md#custom-row-filter)
             * for more information.
             */
            this.rowFilter = null;
            /**
             * Custom image resolver function. See the
             * [Document List component](document-list.component.md#custom-row-filter)
             * for more information.
             */
            this.imageResolver = null;
            /**
             * Function used to decide if the selected node has permission to be selected.
             * Default value is a function that always returns true.
             */
            this.isSelectionValid = defaultValidation;
            /**
             * Emitted when the user has chosen an item.
             */
            this.select = new core.EventEmitter();
            this.nodes = null;
            this.searchTerm = '';
            this.showingSearchResults = false;
            this.loadingSearchResults = false;
            this.inDialog = false;
            this._chosenNode = null;
            this.folderIdToShow = null;
            this.paginationStrategy = PaginationStrategy.Infinite;
            this.skipCount = 0;
            this.infiniteScroll = false;
            this.debounceSearch = 200;
            this.searchInput = new forms.FormControl();
            this.searchInput.valueChanges
                .pipe(operators.debounceTime(this.debounceSearch))
                .subscribe(function (searchValue) {
                _this.search(searchValue);
            });
            this.pageSize = this.preferences.paginationSize;
            /** @type {?} */
            var defaultPagination = /** @type {?} */ ({
                maxItems: this.pageSize,
                skipCount: 0,
                totalItems: 0,
                hasMoreItems: false
            });
            this.pagination = new rxjs.BehaviorSubject(defaultPagination);
        }
        Object.defineProperty(ContentNodeSelectorPanelComponent.prototype, "chosenNode", {
            get: /**
             * @return {?}
             */ function () {
                return this._chosenNode;
            },
            set: /**
             * @param {?} value
             * @return {?}
             */ function (value) {
                this._chosenNode = value;
                /** @type {?} */
                var valuesArray = null;
                if (value) {
                    valuesArray = [value];
                }
                this.select.next(valuesArray);
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        ContentNodeSelectorPanelComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                this.folderIdToShow = this.currentFolderId;
                this.breadcrumbTransform = this.breadcrumbTransform ? this.breadcrumbTransform : null;
                this.isSelectionValid = this.isSelectionValid ? this.isSelectionValid : defaultValidation;
            };
        /**
         * Updates the site attribute and starts a new search
         *
         * @param chosenSite SiteEntry to search within
         */
        /**
         * Updates the site attribute and starts a new search
         *
         * @param {?} chosenSite SiteEntry to search within
         * @return {?}
         */
        ContentNodeSelectorPanelComponent.prototype.siteChanged = /**
         * Updates the site attribute and starts a new search
         *
         * @param {?} chosenSite SiteEntry to search within
         * @return {?}
         */
            function (chosenSite) {
                this.siteId = chosenSite.entry.guid;
                this.updateResults();
            };
        /**
         * Updates the searchTerm attribute and starts a new search
         *
         * @param searchTerm string value to search against
         */
        /**
         * Updates the searchTerm attribute and starts a new search
         *
         * @param {?} searchTerm string value to search against
         * @return {?}
         */
        ContentNodeSelectorPanelComponent.prototype.search = /**
         * Updates the searchTerm attribute and starts a new search
         *
         * @param {?} searchTerm string value to search against
         * @return {?}
         */
            function (searchTerm) {
                this.searchTerm = searchTerm;
                this.updateResults();
            };
        Object.defineProperty(ContentNodeSelectorPanelComponent.prototype, "breadcrumbFolderNode", {
            /**
             * Returns the actually selected|entered folder node or null in case of searching for the breadcrumb
             */
            get: /**
             * Returns the actually selected|entered folder node or null in case of searching for the breadcrumb
             * @return {?}
             */ function () {
                /** @type {?} */
                var folderNode;
                if (this.showingSearchResults && this.chosenNode) {
                    folderNode = this.chosenNode;
                }
                else {
                    folderNode = this.documentList.folderNode;
                }
                return folderNode;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * Clear the search input and reset to last folder node in which search was performed
         */
        /**
         * Clear the search input and reset to last folder node in which search was performed
         * @return {?}
         */
        ContentNodeSelectorPanelComponent.prototype.clear = /**
         * Clear the search input and reset to last folder node in which search was performed
         * @return {?}
         */
            function () {
                this.clearSearch();
                this.folderIdToShow = this.siteId || this.currentFolderId;
            };
        /**
         * Clear the search input and search related data
         */
        /**
         * Clear the search input and search related data
         * @return {?}
         */
        ContentNodeSelectorPanelComponent.prototype.clearSearch = /**
         * Clear the search input and search related data
         * @return {?}
         */
            function () {
                this.searchTerm = '';
                this.nodes = null;
                this.skipCount = 0;
                this.chosenNode = null;
                this.showingSearchResults = false;
            };
        /**
         * Update the result list depending on the criterias
         * @return {?}
         */
        ContentNodeSelectorPanelComponent.prototype.updateResults = /**
         * Update the result list depending on the criterias
         * @return {?}
         */
            function () {
                if (this.searchTerm.length === 0) {
                    this.clear();
                }
                else {
                    this.startNewSearch();
                }
            };
        /**
         * Load the first page of a new search result
         * @return {?}
         */
        ContentNodeSelectorPanelComponent.prototype.startNewSearch = /**
         * Load the first page of a new search result
         * @return {?}
         */
            function () {
                this.nodes = null;
                this.skipCount = 0;
                this.chosenNode = null;
                this.folderIdToShow = null;
                this.querySearch();
            };
        /**
         * Loads the next batch of search results
         *
         * @param event Pagination object
         */
        /**
         * Loads the next batch of search results
         *
         * @param {?} pagination
         * @return {?}
         */
        ContentNodeSelectorPanelComponent.prototype.updatePagination = /**
         * Loads the next batch of search results
         *
         * @param {?} pagination
         * @return {?}
         */
            function (pagination) {
                this.infiniteScroll = true;
                this.skipCount = pagination.skipCount;
                if (this.searchTerm.length > 0) {
                    this.querySearch();
                }
            };
        /**
         * Perform the call to searchService with the proper parameters
         * @return {?}
         */
        ContentNodeSelectorPanelComponent.prototype.querySearch = /**
         * Perform the call to searchService with the proper parameters
         * @return {?}
         */
            function () {
                var _this = this;
                this.loadingSearchResults = true;
                if (this.customResourcesService.hasCorrespondingNodeIds(this.siteId)) {
                    this.customResourcesService.getCorrespondingNodeIds(this.siteId)
                        .subscribe(function (nodeIds) {
                        _this.contentNodeSelectorService.search(_this.searchTerm, _this.siteId, _this.skipCount, _this.pageSize, nodeIds)
                            .subscribe(_this.showSearchResults.bind(_this));
                    }, function () {
                        _this.showSearchResults({ list: { entries: [] } });
                    });
                }
                else {
                    this.contentNodeSelectorService.search(this.searchTerm, this.siteId, this.skipCount, this.pageSize)
                        .subscribe(this.showSearchResults.bind(this));
                }
            };
        /**
         * Show the results of the search
         *
         * @param {?} nodePaging
         * @return {?}
         */
        ContentNodeSelectorPanelComponent.prototype.showSearchResults = /**
         * Show the results of the search
         *
         * @param {?} nodePaging
         * @return {?}
         */
            function (nodePaging) {
                this.showingSearchResults = true;
                this.loadingSearchResults = false;
                // Documentlist hack, since data displaying for preloaded nodes is a little bit messy there
                if (!this.nodes) {
                    this.nodes = nodePaging;
                }
                else {
                    this.documentList.data.loadPage(nodePaging, true);
                }
                this.pagination.next(nodePaging.list.pagination);
                this.highlight();
            };
        /**
         * Hightlight the actual searchterm in the next frame
         */
        /**
         * Hightlight the actual searchterm in the next frame
         * @return {?}
         */
        ContentNodeSelectorPanelComponent.prototype.highlight = /**
         * Hightlight the actual searchterm in the next frame
         * @return {?}
         */
            function () {
                var _this = this;
                setTimeout(function () {
                    _this.highlighter.highlight(_this.searchTerm);
                }, 0);
            };
        /**
         * Sets showingSearchResults state to be able to differentiate between search results or folder results
         */
        /**
         * Sets showingSearchResults state to be able to differentiate between search results or folder results
         * @return {?}
         */
        ContentNodeSelectorPanelComponent.prototype.onFolderChange = /**
         * Sets showingSearchResults state to be able to differentiate between search results or folder results
         * @return {?}
         */
            function () {
                this.showingSearchResults = false;
                this.infiniteScroll = false;
                this.clearSearch();
            };
        /**
         * Attempts to set the currently loaded node
         */
        /**
         * Attempts to set the currently loaded node
         * @param {?} nodePaging
         * @return {?}
         */
        ContentNodeSelectorPanelComponent.prototype.onFolderLoaded = /**
         * Attempts to set the currently loaded node
         * @param {?} nodePaging
         * @return {?}
         */
            function (nodePaging) {
                if (!this.showingSearchResults) {
                    this.attemptNodeSelection(this.documentList.folderNode);
                }
            };
        /**
         * Returns whether breadcrumb has to be shown or not
         */
        /**
         * Returns whether breadcrumb has to be shown or not
         * @return {?}
         */
        ContentNodeSelectorPanelComponent.prototype.showBreadcrumbs = /**
         * Returns whether breadcrumb has to be shown or not
         * @return {?}
         */
            function () {
                return !this.showingSearchResults || this.chosenNode;
            };
        /**
         * Loads the next batch of search results
         *
         * @param event Pagination object
         */
        /**
         * Loads the next batch of search results
         *
         * @param {?} event Pagination object
         * @return {?}
         */
        ContentNodeSelectorPanelComponent.prototype.getNextPageOfSearch = /**
         * Loads the next batch of search results
         *
         * @param {?} event Pagination object
         * @return {?}
         */
            function (event) {
                this.infiniteScroll = true;
                this.skipCount = event.skipCount;
                if (this.searchTerm.length > 0) {
                    this.querySearch();
                }
            };
        /**
         * Selects node as chosen if it has the right permission, clears the selection otherwise
         *
         * @param {?} entry
         * @return {?}
         */
        ContentNodeSelectorPanelComponent.prototype.attemptNodeSelection = /**
         * Selects node as chosen if it has the right permission, clears the selection otherwise
         *
         * @param {?} entry
         * @return {?}
         */
            function (entry) {
                if (this.isSelectionValid(entry)) {
                    this.chosenNode = entry;
                }
                else {
                    this.resetChosenNode();
                }
            };
        /**
         * Clears the chosen node
         */
        /**
         * Clears the chosen node
         * @return {?}
         */
        ContentNodeSelectorPanelComponent.prototype.resetChosenNode = /**
         * Clears the chosen node
         * @return {?}
         */
            function () {
                this.chosenNode = null;
            };
        /**
         * Invoked when user selects a node
         *
         * @param event CustomEvent for node-select
         */
        /**
         * Invoked when user selects a node
         *
         * @param {?} event CustomEvent for node-select
         * @return {?}
         */
        ContentNodeSelectorPanelComponent.prototype.onNodeSelect = /**
         * Invoked when user selects a node
         *
         * @param {?} event CustomEvent for node-select
         * @return {?}
         */
            function (event) {
                this.attemptNodeSelection(event.detail.node.entry);
            };
        /**
         * @param {?} e
         * @return {?}
         */
        ContentNodeSelectorPanelComponent.prototype.onNodeDoubleClick = /**
         * @param {?} e
         * @return {?}
         */
            function (e) {
                var _this = this;
                /** @type {?} */
                var node = e.detail.node.entry;
                if (node && node.guid) {
                    /** @type {?} */
                    var options = {
                        maxItems: this.pageSize,
                        skipCount: this.skipCount,
                        include: ['path', 'properties', 'allowableOperations']
                    };
                    this.apiService.nodesApi.getNode(node.guid, options)
                        .then(function (documentLibrary) {
                        _this.documentList.performCustomSourceNavigation(documentLibrary);
                    });
                }
            };
        ContentNodeSelectorPanelComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-content-node-selector-panel',
                        template: "<div class=\"adf-content-node-selector-content\" (node-select)=\"onNodeSelect($event)\">\n    <mat-form-field floatPlaceholder=\"never\" class=\"adf-content-node-selector-content-input\">\n        <input matInput\n            id=\"searchInput\"\n            [formControl]=\"searchInput\"\n            type=\"text\"\n            placeholder=\"{{'NODE_SELECTOR.SEARCH' | translate}}\"\n            [value]=\"searchTerm\"\n            data-automation-id=\"content-node-selector-search-input\">\n\n        <mat-icon *ngIf=\"searchTerm.length > 0\"\n            matSuffix (click)=\"clear()\"\n            class=\"adf-content-node-selector-content-input-icon\"\n            data-automation-id=\"content-node-selector-search-clear\">clear\n        </mat-icon>\n\n        <mat-icon *ngIf=\"searchTerm.length === 0\"\n            matSuffix\n            class=\"adf-content-node-selector-content-input-icon\"\n            data-automation-id=\"content-node-selector-search-icon\">search\n        </mat-icon>\n\n    </mat-form-field>\n\n    <adf-sites-dropdown\n        class=\"full-width\"\n        (change)=\"siteChanged($event)\"\n        [placeholder]=\"'NODE_SELECTOR.SELECT_LOCATION'\"\n        [hideMyFiles]=\"dropdownHideMyFiles\"\n        [siteList]=\"dropdownSiteList\"\n        data-automation-id=\"content-node-selector-sites-combo\">\n    </adf-sites-dropdown>\n\n    <adf-toolbar>\n        <adf-toolbar-title>\n            <ng-container *ngIf=\"!showBreadcrumbs()\">\n                <span class=\"search-results-label\">{{ 'NODE_SELECTOR.SEARCH_RESULTS' | translate }}</span>\n            </ng-container>\n            <adf-dropdown-breadcrumb *ngIf=\"showBreadcrumbs()\"\n                class=\"adf-content-node-selector-content-breadcrumb\"\n                (navigate)=\"clearSearch()\"\n                [target]=\"documentList\"\n                [transform]=\"breadcrumbTransform\"\n                [folderNode]=\"breadcrumbFolderNode\"\n                data-automation-id=\"content-node-selector-content-breadcrumb\">\n            </adf-dropdown-breadcrumb>\n        </adf-toolbar-title>\n    </adf-toolbar>\n\n    <div\n        class=\"adf-content-node-selector-content-list\"\n        [class.adf-content-node-selector-content-list-searchLayout]=\"showingSearchResults\"\n        data-automation-id=\"content-node-selector-content-list\">\n        <adf-document-list\n            #documentList\n            adf-highlight\n            adf-highlight-selector=\"adf-name-location-cell .adf-name-location-cell-name\"\n            [showHeader]=\"false\"\n            [node]=\"nodes\"\n            [maxItems]=\"pageSize\"\n            [rowFilter]=\"rowFilter\"\n            [imageResolver]=\"imageResolver\"\n            [currentFolderId]=\"folderIdToShow\"\n            selectionMode=\"single\"\n            [contextMenuActions]=\"false\"\n            [contentActions]=\"false\"\n            [allowDropFiles]=\"false\"\n            (folderChange)=\"onFolderChange()\"\n            (ready)=\"onFolderLoaded($event)\"\n            (node-dblclick)=\"onNodeDoubleClick($event)\"\n            data-automation-id=\"content-node-selector-document-list\">\n            <empty-folder-content>\n                <ng-template>\n                    <div>{{ 'NODE_SELECTOR.NO_RESULTS' | translate }}</div>\n                </ng-template>\n            </empty-folder-content>\n\n            <data-columns>\n                <data-column key=\"$thumbnail\" type=\"image\"></data-column>\n                <data-column key=\"name\" type=\"text\" class=\"full-width ellipsis-cell\">\n                    <ng-template let-context>\n                        <adf-name-location-cell [row]=\"context.row\"></adf-name-location-cell>\n                    </ng-template>\n                </data-column>\n                <data-column key=\"modifiedAt\" type=\"date\" format=\"timeAgo\" class=\"adf-content-selector-modified-cell\"></data-column>\n                <data-column key=\"modifiedByUser.displayName\" type=\"text\" class=\"adf-content-selector-modifier-cell\"></data-column>\n                <data-column key=\"visibility\" type=\"text\"></data-column>\n            </data-columns>\n\n        </adf-document-list>\n\n        <adf-infinite-pagination\n            [target]=\"documentList\"\n            [loading]=\"loadingSearchResults\"\n            (loadMore)=\"getNextPageOfSearch($event)\"\n            data-automation-id=\"content-node-selector-search-pagination\">\n            {{ 'ADF-DOCUMENT-LIST.LAYOUT.LOAD_MORE' | translate }}\n        </adf-infinite-pagination>\n    </div>\n</div>\n",
                        encapsulation: core.ViewEncapsulation.None,
                        host: { 'class': 'adf-content-node-selector-panel' },
                        styles: [""]
                    }] }
        ];
        /** @nocollapse */
        ContentNodeSelectorPanelComponent.ctorParameters = function () {
            return [
                { type: ContentNodeSelectorService },
                { type: adfCore.AlfrescoApiService },
                { type: CustomResourcesService },
                { type: adfCore.UserPreferencesService }
            ];
        };
        ContentNodeSelectorPanelComponent.propDecorators = {
            currentFolderId: [{ type: core.Input }],
            dropdownHideMyFiles: [{ type: core.Input }],
            dropdownSiteList: [{ type: core.Input }],
            rowFilter: [{ type: core.Input }],
            imageResolver: [{ type: core.Input }],
            pageSize: [{ type: core.Input }],
            isSelectionValid: [{ type: core.Input }],
            breadcrumbTransform: [{ type: core.Input }],
            select: [{ type: core.Output }],
            documentList: [{ type: core.ViewChild, args: ['documentList',] }],
            highlighter: [{ type: core.ViewChild, args: [adfCore.HighlightDirective,] }]
        };
        return ContentNodeSelectorPanelComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var ContentNodeSelectorModule = /** @class */ (function () {
        function ContentNodeSelectorModule() {
        }
        ContentNodeSelectorModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            forms.FormsModule,
                            forms.ReactiveFormsModule,
                            adfCore.CoreModule.forChild(),
                            common.CommonModule,
                            MaterialModule,
                            SitesDropdownModule,
                            BreadcrumbModule,
                            DocumentListModule
                        ],
                        exports: [
                            ContentNodeSelectorPanelComponent,
                            NameLocationCellComponent,
                            ContentNodeSelectorComponent
                        ],
                        entryComponents: [
                            ContentNodeSelectorPanelComponent,
                            ContentNodeSelectorComponent
                        ],
                        declarations: [
                            ContentNodeSelectorPanelComponent,
                            NameLocationCellComponent,
                            ContentNodeSelectorComponent
                        ]
                    },] }
        ];
        return ContentNodeSelectorModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /*!
     * @license
     * Copyright 2016 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /** @type {?} */
    var I18N_ERRORS_PATH = 'CORE.FOLDER_DIALOG.FOLDER_NAME.ERRORS';
    /**
     * @param {?} __0
     * @return {?}
     */
    function forbidSpecialCharacters(_a) {
        var value = _a.value;
        /** @type {?} */
        var specialCharacters = /([\*\"\<\>\\\/\?\:\|])/;
        /** @type {?} */
        var isValid = !specialCharacters.test(value);
        return (isValid) ? null : {
            message: I18N_ERRORS_PATH + ".SPECIAL_CHARACTERS"
        };
    }
    /**
     * @param {?} __0
     * @return {?}
     */
    function forbidEndingDot(_a) {
        var value = _a.value;
        /** @type {?} */
        var isValid = ((value || '').trim().split('').pop() !== '.');
        return isValid ? null : {
            message: I18N_ERRORS_PATH + ".ENDING_DOT"
        };
    }
    /**
     * @param {?} __0
     * @return {?}
     */
    function forbidOnlySpaces(_a) {
        var value = _a.value;
        /** @type {?} */
        var isValid = !!((value || '')).trim();
        return isValid ? null : {
            message: I18N_ERRORS_PATH + ".ONLY_SPACES"
        };
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var FolderDialogComponent = /** @class */ (function () {
        function FolderDialogComponent(formBuilder, dialog, nodesApi, translation, data) {
            this.formBuilder = formBuilder;
            this.dialog = dialog;
            this.nodesApi = nodesApi;
            this.translation = translation;
            this.data = data;
            this.folder = null;
            /**
             * Emitted when the edit/create folder give error for example a folder with same name already exist
             */
            this.error = new core.EventEmitter();
            /**
             * Emitted when the edit/create folder is successfully created/mmodified
             */
            this.success = new core.EventEmitter();
            this.editTitle = 'CORE.FOLDER_DIALOG.EDIT_FOLDER_TITLE';
            this.createTitle = 'CORE.FOLDER_DIALOG.CREATE_FOLDER_TITLE';
            this.nodeType = 'cm:folder';
            if (data) {
                this.editTitle = data.editTitle || this.editTitle;
                this.createTitle = data.createTitle || this.createTitle;
                this.nodeType = data.nodeType || this.nodeType;
            }
        }
        Object.defineProperty(FolderDialogComponent.prototype, "editing", {
            get: /**
             * @return {?}
             */ function () {
                return !!this.data.folder;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        FolderDialogComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                var folder = this.data.folder;
                /** @type {?} */
                var name = '';
                /** @type {?} */
                var description = '';
                if (folder) {
                    var properties = folder.properties;
                    name = folder.name || '';
                    description = properties ? properties['cm:description'] : '';
                }
                /** @type {?} */
                var validators = {
                    name: [
                        forms.Validators.required,
                        forbidSpecialCharacters,
                        forbidEndingDot,
                        forbidOnlySpaces
                    ]
                };
                this.form = this.formBuilder.group({
                    name: [name, validators.name],
                    description: [description]
                });
            };
        Object.defineProperty(FolderDialogComponent.prototype, "name", {
            get: /**
             * @return {?}
             */ function () {
                var name = this.form.value.name;
                return (name || '').trim();
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(FolderDialogComponent.prototype, "description", {
            get: /**
             * @return {?}
             */ function () {
                var description = this.form.value.description;
                return (description || '').trim();
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(FolderDialogComponent.prototype, "properties", {
            get: /**
             * @return {?}
             */ function () {
                var _a = this, title = _a.name, description = _a.description;
                return {
                    'cm:title': title,
                    'cm:description': description
                };
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        FolderDialogComponent.prototype.create = /**
         * @return {?}
         */
            function () {
                var _a = this, name = _a.name, properties = _a.properties, nodeType = _a.nodeType, nodesApi = _a.nodesApi, parentNodeId = _a.data.parentNodeId;
                return nodesApi.createFolder(parentNodeId, { name: name, properties: properties, nodeType: nodeType });
            };
        /**
         * @return {?}
         */
        FolderDialogComponent.prototype.edit = /**
         * @return {?}
         */
            function () {
                var _a = this, name = _a.name, properties = _a.properties, nodesApi = _a.nodesApi, nodeId = _a.data.folder.id;
                return nodesApi.updateNode(nodeId, { name: name, properties: properties });
            };
        /**
         * @return {?}
         */
        FolderDialogComponent.prototype.submit = /**
         * @return {?}
         */
            function () {
                var _this = this;
                var _a = this, form = _a.form, dialog = _a.dialog, editing = _a.editing;
                if (!form.valid) {
                    return;
                }
                (editing ? this.edit() : this.create())
                    .subscribe(function (folder) {
                    _this.success.emit(folder);
                    dialog.close(folder);
                }, function (error) { return _this.handleError(error); });
            };
        /**
         * @param {?} error
         * @return {?}
         */
        FolderDialogComponent.prototype.handleError = /**
         * @param {?} error
         * @return {?}
         */
            function (error) {
                /** @type {?} */
                var errorMessage = 'CORE.MESSAGES.ERRORS.GENERIC';
                try {
                    var statusCode = JSON.parse(error.message).error.statusCode;
                    if (statusCode === 409) {
                        errorMessage = 'CORE.MESSAGES.ERRORS.EXISTENT_FOLDER';
                    }
                }
                catch (err) { /* Do nothing, keep the original message */
                    /* Do nothing, keep the original message */
                }
                this.error.emit(this.translation.instant(errorMessage));
                return error;
            };
        FolderDialogComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-folder-dialog',
                        template: "<h2 mat-dialog-title>\n    {{ (editing ? editTitle : createTitle) | translate }}\n</h2>\n\n<mat-dialog-content>\n    <form [formGroup]=\"form\" (submit)=\"submit()\">\n        <mat-form-field class=\"adf-full-width\">\n            <input\n                id=\"adf-folder-name-input\"\n                placeholder=\"{{ 'CORE.FOLDER_DIALOG.FOLDER_NAME.LABEL' | translate }}\"\n                matInput\n                required\n                [formControl]=\"form.controls['name']\"/>\n\n            <mat-hint *ngIf=\"form.controls['name'].dirty\">\n                <span *ngIf=\"form.controls['name'].errors?.required\">\n                    {{ 'CORE.FOLDER_DIALOG.FOLDER_NAME.ERRORS.REQUIRED' | translate }}\n                </span>\n\n                <span *ngIf=\"!form.controls['name'].errors?.required && form.controls['name'].errors?.message\">\n                    {{ form.controls['name'].errors?.message | translate }}\n                </span>\n            </mat-hint>\n        </mat-form-field>\n\n        <br />\n        <br />\n\n        <mat-form-field class=\"adf-full-width\">\n            <textarea\n                id=\"adf-folder-description-input\"\n                matInput\n                placeholder=\"{{ 'CORE.FOLDER_DIALOG.FOLDER_DESCRIPTION.LABEL' | translate }}\"\n                rows=\"4\"\n                [formControl]=\"form.controls['description']\"></textarea>\n        </mat-form-field>\n    </form>\n</mat-dialog-content>\n\n<mat-dialog-actions class=\"adf-dialog-buttons\">\n    <span class=\"adf-fill-remaining-space\"></span>\n\n    <button\n        mat-button\n        id=\"adf-folder-cancel-button\"\n        mat-dialog-close>\n        {{ 'CORE.FOLDER_DIALOG.CANCEL_BUTTON.LABEL' | translate }}\n    </button>\n\n    <button class=\"adf-dialog-action-button\"\n            id=\"adf-folder-create-button\"\n            mat-button\n            (click)=\"submit()\"\n            [disabled]=\"!form.valid\">\n        {{\n        (editing\n        ? 'CORE.FOLDER_DIALOG.UPDATE_BUTTON.LABEL'\n        : 'CORE.FOLDER_DIALOG.CREATE_BUTTON.LABEL'\n        ) | translate\n        }}\n    </button>\n</mat-dialog-actions>\n",
                        styles: [".adf-fill-remaining-space{flex:1 1 auto}.adf-full-width,.adf-lock-file-name .mat-checkbox-layout{width:100%}.adf-lock-file-name .mat-checkbox-label{text-overflow:ellipsis;overflow:hidden}.adf-lock-file-name .mat-checkbox-inner-container{margin:auto 8px auto 0}"]
                    }] }
        ];
        /** @nocollapse */
        FolderDialogComponent.ctorParameters = function () {
            return [
                { type: forms.FormBuilder },
                { type: material.MatDialogRef },
                { type: adfCore.NodesApiService },
                { type: adfCore.TranslationService },
                { type: undefined, decorators: [{ type: core.Optional }, { type: core.Inject, args: [material.MAT_DIALOG_DATA,] }] }
            ];
        };
        FolderDialogComponent.propDecorators = {
            error: [{ type: core.Output }],
            success: [{ type: core.Output }]
        };
        return FolderDialogComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var DialogModule = /** @class */ (function () {
        function DialogModule() {
        }
        DialogModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            MaterialModule,
                            adfCore.CoreModule.forChild(),
                            forms.FormsModule,
                            forms.ReactiveFormsModule,
                            moment$2.MatMomentDatetimeModule,
                            core$2.MatDatetimepickerModule
                        ],
                        declarations: [
                            DownloadZipDialogComponent,
                            FolderDialogComponent,
                            NodeLockDialogComponent,
                            ConfirmDialogComponent
                        ],
                        exports: [
                            DownloadZipDialogComponent,
                            FolderDialogComponent,
                            NodeLockDialogComponent,
                            ConfirmDialogComponent
                        ],
                        entryComponents: [
                            DownloadZipDialogComponent,
                            FolderDialogComponent,
                            NodeLockDialogComponent,
                            ConfirmDialogComponent
                        ]
                    },] }
        ];
        return DialogModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @type {?} */
    var DEFAULT_FOLDER_PARENT_ID = '-my-';
    var FolderCreateDirective = /** @class */ (function () {
        function FolderCreateDirective(dialogRef, content) {
            this.dialogRef = dialogRef;
            this.content = content;
            /**
             * Parent folder where the new folder will be located after creation.
             */
            this.parentNodeId = DEFAULT_FOLDER_PARENT_ID;
            /**
             * Title of folder creation dialog.
             */
            this.title = null;
            /**
             * Type of node to create.
             */
            this.nodeType = 'cm:folder';
            /**
             * Emitted when an error occurs (eg, a folder with same name already exists).
             */
            this.error = new core.EventEmitter();
            /**
             * Emitted when the folder is created successfully.
             */
            this.success = new core.EventEmitter();
        }
        /**
         * @param {?} event
         * @return {?}
         */
        FolderCreateDirective.prototype.onClick = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                event.preventDefault();
                this.openDialog();
            };
        Object.defineProperty(FolderCreateDirective.prototype, "dialogConfig", {
            get: /**
             * @return {?}
             */ function () {
                var width = FolderCreateDirective.DIALOG_WIDTH;
                var _a = this, parentNodeId = _a.parentNodeId, createTitle = _a.title, nodeType = _a.nodeType;
                return {
                    data: { parentNodeId: parentNodeId, createTitle: createTitle, nodeType: nodeType },
                    width: width + "px"
                };
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        FolderCreateDirective.prototype.openDialog = /**
         * @return {?}
         */
            function () {
                var _this = this;
                var _a = this, dialogRef = _a.dialogRef, dialogConfig = _a.dialogConfig, content = _a.content;
                /** @type {?} */
                var dialogInstance = dialogRef.open(FolderDialogComponent, dialogConfig);
                dialogInstance.componentInstance.error.subscribe(function (error) {
                    _this.error.emit(error);
                });
                dialogInstance.componentInstance.success.subscribe(function (node) {
                    _this.success.emit(node);
                });
                dialogInstance.afterClosed().subscribe(function (node) {
                    if (node) {
                        content.folderCreate.next(node);
                    }
                });
            };
        FolderCreateDirective.DIALOG_WIDTH = 400;
        FolderCreateDirective.decorators = [
            { type: core.Directive, args: [{
                        selector: '[adf-create-folder]'
                    },] }
        ];
        /** @nocollapse */
        FolderCreateDirective.ctorParameters = function () {
            return [
                { type: material.MatDialog },
                { type: adfCore.ContentService }
            ];
        };
        FolderCreateDirective.propDecorators = {
            parentNodeId: [{ type: core.Input, args: ['adf-create-folder',] }],
            title: [{ type: core.Input }],
            nodeType: [{ type: core.Input }],
            error: [{ type: core.Output }],
            success: [{ type: core.Output }],
            onClick: [{ type: core.HostListener, args: ['click', ['$event'],] }]
        };
        return FolderCreateDirective;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var FolderEditDirective = /** @class */ (function () {
        function FolderEditDirective(dialogRef, elementRef, content) {
            this.dialogRef = dialogRef;
            this.elementRef = elementRef;
            this.content = content;
            /**
             * Emitted when an error occurs (eg, a folder with same name already exists).
             */
            this.error = new core.EventEmitter();
            /**
             * Title of folder edit dialog.
             */
            this.title = null;
            /**
             * Emitted when the folder has been edited successfully.
             */
            this.success = new core.EventEmitter();
        }
        /**
         * @param {?} event
         * @return {?}
         */
        FolderEditDirective.prototype.onClick = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                event.preventDefault();
                if (this.folder) {
                    this.openDialog();
                }
            };
        Object.defineProperty(FolderEditDirective.prototype, "dialogConfig", {
            get: /**
             * @return {?}
             */ function () {
                var width = FolderEditDirective.DIALOG_WIDTH;
                var folder = this.folder;
                return {
                    data: {
                        folder: folder,
                        editTitle: this.title
                    },
                    width: width + "px"
                };
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        FolderEditDirective.prototype.openDialog = /**
         * @return {?}
         */
            function () {
                var _this = this;
                var _a = this, dialogRef = _a.dialogRef, dialogConfig = _a.dialogConfig, content = _a.content;
                /** @type {?} */
                var dialogInstance = dialogRef.open(FolderDialogComponent, dialogConfig);
                dialogInstance.componentInstance.error.subscribe(function (error) {
                    _this.error.emit(error);
                });
                dialogInstance.componentInstance.success.subscribe(function (node) {
                    _this.success.emit(node);
                });
                dialogInstance.afterClosed().subscribe(function (node) {
                    if (node) {
                        content.folderEdit.next(node);
                    }
                });
            };
        FolderEditDirective.DIALOG_WIDTH = 400;
        FolderEditDirective.decorators = [
            { type: core.Directive, args: [{
                        selector: '[adf-edit-folder]'
                    },] }
        ];
        /** @nocollapse */
        FolderEditDirective.ctorParameters = function () {
            return [
                { type: material.MatDialog },
                { type: core.ElementRef },
                { type: adfCore.ContentService }
            ];
        };
        FolderEditDirective.propDecorators = {
            folder: [{ type: core.Input, args: ['adf-edit-folder',] }],
            error: [{ type: core.Output }],
            title: [{ type: core.Input }],
            success: [{ type: core.Output }],
            onClick: [{ type: core.HostListener, args: ['click', ['$event'],] }]
        };
        return FolderEditDirective;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var FolderDirectiveModule = /** @class */ (function () {
        function FolderDirectiveModule() {
        }
        FolderDirectiveModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            MaterialModule
                        ],
                        declarations: [
                            FolderCreateDirective,
                            FolderEditDirective
                        ],
                        exports: [
                            FolderCreateDirective,
                            FolderEditDirective
                        ]
                    },] }
        ];
        return FolderDirectiveModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var ContentMetadataCardComponent = /** @class */ (function () {
        function ContentMetadataCardComponent(contentService) {
            this.contentService = contentService;
            /**
             * (optional) This flag displays/hides empty metadata
             * fields.
             */
            this.displayEmpty = false;
            /**
             * (optional) This flag sets the metadata in read only mode
             * preventing changes.
             */
            this.readOnly = false;
            /**
             * (optional) This flag allows the component to display more
             * than one accordion at a time.
             */
            this.multi = false;
            this._displayDefaultProperties = true;
            this.editable = false;
        }
        Object.defineProperty(ContentMetadataCardComponent.prototype, "displayDefaultProperties", {
            get: /**
             * @return {?}
             */ function () {
                return this._displayDefaultProperties;
            },
            /** (optional) This flag displays/hides the metadata
             * properties.
             */
            set: /**
             * (optional) This flag displays/hides the metadata
             * properties.
             * @param {?} value
             * @return {?}
             */ function (value) {
                this._displayDefaultProperties = value;
                this.onDisplayDefaultPropertiesChange();
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        ContentMetadataCardComponent.prototype.onDisplayDefaultPropertiesChange = /**
         * @return {?}
         */
            function () {
                this.expanded = !this._displayDefaultProperties;
            };
        /**
         * @return {?}
         */
        ContentMetadataCardComponent.prototype.toggleEdit = /**
         * @return {?}
         */
            function () {
                this.editable = !this.editable;
            };
        /**
         * @return {?}
         */
        ContentMetadataCardComponent.prototype.toggleExpanded = /**
         * @return {?}
         */
            function () {
                this.expanded = !this.expanded;
            };
        /**
         * @return {?}
         */
        ContentMetadataCardComponent.prototype.hasPermission = /**
         * @return {?}
         */
            function () {
                return this.contentService.hasPermission(this.node, adfCore.PermissionsEnum.UPDATE);
            };
        ContentMetadataCardComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-content-metadata-card',
                        template: "<mat-card *ngIf=\"node\">\n    <mat-card-content>\n        <adf-content-metadata\n            [displayDefaultProperties]=\"displayDefaultProperties\"\n            [expanded]=\"expanded\"\n            [node]=\"node\"\n            [displayEmpty]=\"displayEmpty\"\n            [editable]=\"editable\"\n            [multi]=\"multi\"\n            [preset]=\"preset\">\n        </adf-content-metadata>\n    </mat-card-content>\n    <mat-card-footer class=\"adf-content-metadata-card-footer\" fxLayout=\"row\" fxLayoutAlign=\"space-between stretch\">\n        <div>\n            <button *ngIf=\"!readOnly && hasPermission()\"\n                mat-icon-button\n                (click)=\"toggleEdit()\"\n                [attr.title]=\"'CORE.METADATA.ACTIONS.EDIT' | translate\"\n                data-automation-id=\"meta-data-card-toggle-edit\">\n                <mat-icon>mode_edit</mat-icon>\n            </button>\n        </div>\n        <button *ngIf=\"displayDefaultProperties\" mat-button (click)=\"toggleExpanded()\" data-automation-id=\"meta-data-card-toggle-expand\">\n            <ng-container *ngIf=\"!expanded\">\n                <span data-automation-id=\"meta-data-card-toggle-expand-label\">{{ 'ADF_VIEWER.SIDEBAR.METADATA.MORE_INFORMATION' | translate }}</span>\n                <mat-icon>keyboard_arrow_down</mat-icon>\n            </ng-container>\n            <ng-container *ngIf=\"expanded\">\n                <span data-automation-id=\"meta-data-card-toggle-expand-label\">{{ 'ADF_VIEWER.SIDEBAR.METADATA.LESS_INFORMATION' | translate }}</span>\n                <mat-icon>keyboard_arrow_up</mat-icon>\n            </ng-container>\n        </button>\n    </mat-card-footer>\n</mat-card>\n",
                        encapsulation: core.ViewEncapsulation.None,
                        host: { 'class': 'adf-content-metadata-card' },
                        styles: [""]
                    }] }
        ];
        /** @nocollapse */
        ContentMetadataCardComponent.ctorParameters = function () {
            return [
                { type: adfCore.ContentService }
            ];
        };
        ContentMetadataCardComponent.propDecorators = {
            node: [{ type: core.Input }],
            displayEmpty: [{ type: core.Input }],
            preset: [{ type: core.Input }],
            readOnly: [{ type: core.Input }],
            multi: [{ type: core.Input }],
            displayDefaultProperties: [{ type: core.Input }]
        };
        return ContentMetadataCardComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var BasicPropertiesService = /** @class */ (function () {
        function BasicPropertiesService(fileSizePipe) {
            this.fileSizePipe = fileSizePipe;
        }
        /**
         * @param {?} node
         * @return {?}
         */
        BasicPropertiesService.prototype.getProperties = /**
         * @param {?} node
         * @return {?}
         */
            function (node) {
                /** @type {?} */
                var sizeInBytes = node.content ? node.content.sizeInBytes : '';
                /** @type {?} */
                var mimeTypeName = node.content ? node.content.mimeTypeName : '';
                /** @type {?} */
                var author = node.properties ? node.properties['cm:author'] : '';
                /** @type {?} */
                var description = node.properties ? node.properties['cm:description'] : '';
                /** @type {?} */
                var title = node.properties ? node.properties['cm:title'] : '';
                return [
                    new adfCore.CardViewTextItemModel({
                        label: 'CORE.METADATA.BASIC.NAME',
                        value: node.name,
                        key: 'name',
                        editable: true
                    }),
                    new adfCore.CardViewTextItemModel({
                        label: 'CORE.METADATA.BASIC.TITLE',
                        value: title,
                        key: 'properties.cm:title',
                        editable: true
                    }),
                    new adfCore.CardViewTextItemModel({
                        label: 'CORE.METADATA.BASIC.CREATOR',
                        value: node.createdByUser.displayName,
                        key: 'createdByUser.displayName',
                        editable: false
                    }),
                    new adfCore.CardViewDateItemModel({
                        label: 'CORE.METADATA.BASIC.CREATED_DATE',
                        value: node.createdAt,
                        key: 'createdAt',
                        editable: false
                    }),
                    new adfCore.CardViewTextItemModel({
                        label: 'CORE.METADATA.BASIC.SIZE',
                        value: sizeInBytes,
                        key: 'content.sizeInBytes',
                        pipes: [{ pipe: this.fileSizePipe }],
                        editable: false
                    }),
                    new adfCore.CardViewTextItemModel({
                        label: 'CORE.METADATA.BASIC.MODIFIER',
                        value: node.modifiedByUser.displayName,
                        key: 'modifiedByUser.displayName',
                        editable: false
                    }),
                    new adfCore.CardViewDateItemModel({
                        label: 'CORE.METADATA.BASIC.MODIFIED_DATE',
                        value: node.modifiedAt,
                        key: 'modifiedAt',
                        editable: false
                    }),
                    new adfCore.CardViewTextItemModel({
                        label: 'CORE.METADATA.BASIC.MIMETYPE',
                        value: mimeTypeName,
                        key: 'content.mimeTypeName',
                        editable: false
                    }),
                    new adfCore.CardViewTextItemModel({
                        label: 'CORE.METADATA.BASIC.AUTHOR',
                        value: author,
                        key: 'properties.cm:author',
                        editable: true
                    }),
                    new adfCore.CardViewTextItemModel({
                        label: 'CORE.METADATA.BASIC.DESCRIPTION',
                        value: description,
                        key: 'properties.cm:description',
                        multiline: true,
                        editable: true
                    })
                ];
            };
        BasicPropertiesService.decorators = [
            { type: core.Injectable }
        ];
        /** @nocollapse */
        BasicPropertiesService.ctorParameters = function () {
            return [
                { type: adfCore.FileSizePipe }
            ];
        };
        return BasicPropertiesService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @type {?} */
    var D_TEXT = 'd:text';
    /** @type {?} */
    var D_MLTEXT = 'd:mltext';
    /** @type {?} */
    var D_DATE = 'd:date';
    /** @type {?} */
    var D_DATETIME = 'd:datetime';
    /** @type {?} */
    var D_INT = 'd:int';
    /** @type {?} */
    var D_LONG = 'd:long';
    /** @type {?} */
    var D_FLOAT = 'd:float';
    /** @type {?} */
    var D_DOUBLE = 'd:double';
    /** @type {?} */
    var D_BOOLEAN = 'd:boolean';
    var PropertyGroupTranslatorService = /** @class */ (function () {
        function PropertyGroupTranslatorService(logService) {
            this.logService = logService;
        }
        /**
         * @param {?} propertyGroups
         * @param {?} propertyValues
         * @return {?}
         */
        PropertyGroupTranslatorService.prototype.translateToCardViewGroups = /**
         * @param {?} propertyGroups
         * @param {?} propertyValues
         * @return {?}
         */
            function (propertyGroups, propertyValues) {
                var _this = this;
                return propertyGroups.map(function (propertyGroup) {
                    /** @type {?} */
                    var translatedPropertyGroup = Object.assign({}, propertyGroup);
                    translatedPropertyGroup.properties = _this.translateArray(propertyGroup.properties, propertyValues);
                    return translatedPropertyGroup;
                });
            };
        /**
         * @param {?} properties
         * @param {?} propertyValues
         * @return {?}
         */
        PropertyGroupTranslatorService.prototype.translateArray = /**
         * @param {?} properties
         * @param {?} propertyValues
         * @return {?}
         */
            function (properties, propertyValues) {
                var _this = this;
                return properties.map(function (property) {
                    return _this.translate(property, propertyValues[property.name]);
                });
            };
        /**
         * @param {?} property
         * @param {?} propertyValue
         * @return {?}
         */
        PropertyGroupTranslatorService.prototype.translate = /**
         * @param {?} property
         * @param {?} propertyValue
         * @return {?}
         */
            function (property, propertyValue) {
                this.checkECMTypeValidity(property.dataType);
                /** @type {?} */
                var prefix = 'properties.';
                /** @type {?} */
                var propertyDefinition = {
                    label: property.title,
                    value: propertyValue,
                    key: "" + prefix + property.name,
                    default: property.defaultValue,
                    editable: true
                };
                /** @type {?} */
                var cardViewItemProperty;
                switch (property.dataType) {
                    case D_MLTEXT:
                        cardViewItemProperty = new adfCore.CardViewTextItemModel(Object.assign(propertyDefinition, {
                            multiline: true
                        }));
                        break;
                    case D_INT:
                    case D_LONG:
                        cardViewItemProperty = new adfCore.CardViewIntItemModel(propertyDefinition);
                        break;
                    case D_FLOAT:
                    case D_DOUBLE:
                        cardViewItemProperty = new adfCore.CardViewFloatItemModel(propertyDefinition);
                        break;
                    case D_DATE:
                        cardViewItemProperty = new adfCore.CardViewDateItemModel(propertyDefinition);
                        break;
                    case D_DATETIME:
                        cardViewItemProperty = new adfCore.CardViewDatetimeItemModel(propertyDefinition);
                        break;
                    case D_BOOLEAN:
                        cardViewItemProperty = new adfCore.CardViewBoolItemModel(propertyDefinition);
                        break;
                    case D_TEXT:
                    default:
                        cardViewItemProperty = new adfCore.CardViewTextItemModel(Object.assign(propertyDefinition, {
                            multiline: false
                        }));
                }
                return cardViewItemProperty;
            };
        /**
         * @param {?} ecmPropertyType
         * @return {?}
         */
        PropertyGroupTranslatorService.prototype.checkECMTypeValidity = /**
         * @param {?} ecmPropertyType
         * @return {?}
         */
            function (ecmPropertyType) {
                if (PropertyGroupTranslatorService.RECOGNISED_ECM_TYPES.indexOf(ecmPropertyType) === -1) {
                    this.logService.error("Unknown type for mapping: " + ecmPropertyType);
                }
            };
        PropertyGroupTranslatorService.RECOGNISED_ECM_TYPES = [D_TEXT, D_MLTEXT, D_DATE, D_DATETIME, D_INT, D_LONG, D_FLOAT, D_DOUBLE, D_BOOLEAN];
        PropertyGroupTranslatorService.decorators = [
            { type: core.Injectable }
        ];
        /** @nocollapse */
        PropertyGroupTranslatorService.ctorParameters = function () {
            return [
                { type: adfCore.LogService }
            ];
        };
        return PropertyGroupTranslatorService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /*!
     * @license
     * Copyright 2016 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /** @type {?} */
    var emptyGroup = {
        properties: {}
    };
    /**
     * @param {?} object
     * @return {?}
     */
    function convertObjectToArray(object) {
        return Object.keys(object).map(function (key) { return object[key]; });
    }
    /**
     * @param {?} propertyGroups
     * @param {?} groupName
     * @return {?}
     */
    function getGroup(propertyGroups, groupName) {
        return propertyGroups[groupName];
    }
    /**
     * @param {?} propertyGroups
     * @param {?} groupName
     * @param {?} propertyName
     * @return {?}
     */
    function getProperty(propertyGroups, groupName, propertyName) {
        /** @type {?} */
        var groupDefinition = getGroup(propertyGroups, groupName) || emptyGroup;
        /** @type {?} */
        var propertyDefinitions;
        if (propertyName === '*') {
            propertyDefinitions = convertObjectToArray(groupDefinition.properties);
        }
        else {
            propertyDefinitions = groupDefinition.properties[propertyName];
        }
        return propertyDefinitions;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var AspectOrientedConfigService = /** @class */ (function () {
        function AspectOrientedConfigService(config) {
            this.config = config;
        }
        /**
         * @param {?} groupName
         * @return {?}
         */
        AspectOrientedConfigService.prototype.isGroupAllowed = /**
         * @param {?} groupName
         * @return {?}
         */
            function (groupName) {
                /** @type {?} */
                var groupNames = Object.keys(this.config);
                return groupNames.indexOf(groupName) !== -1;
            };
        /**
         * @param {?} propertyGroups
         * @return {?}
         */
        AspectOrientedConfigService.prototype.reorganiseByConfig = /**
         * @param {?} propertyGroups
         * @return {?}
         */
            function (propertyGroups) {
                var _this = this;
                /** @type {?} */
                var aspects = this.config;
                /** @type {?} */
                var aspectNames = Object.keys(aspects);
                return aspectNames
                    .reduce(function (groupAccumulator, aspectName) {
                    /** @type {?} */
                    var newGroup = _this.getOrganisedPropertyGroup(propertyGroups, aspectName);
                    return groupAccumulator.concat(newGroup);
                }, [])
                    .filter(function (organisedPropertyGroup) { return organisedPropertyGroup.properties.length > 0; });
            };
        /**
         * @param {?} propertyGroups
         * @param {?} aspectName
         * @return {?}
         */
        AspectOrientedConfigService.prototype.getOrganisedPropertyGroup = /**
         * @param {?} propertyGroups
         * @param {?} aspectName
         * @return {?}
         */
            function (propertyGroups, aspectName) {
                /** @type {?} */
                var group = getGroup(propertyGroups, aspectName);
                /** @type {?} */
                var newGroup = [];
                if (group) {
                    /** @type {?} */
                    var aspectProperties = this.config[aspectName];
                    /** @type {?} */
                    var properties = void 0;
                    if (aspectProperties === '*') {
                        properties = getProperty(propertyGroups, aspectName, aspectProperties);
                    }
                    else {
                        properties = ( /** @type {?} */(aspectProperties))
                            .map(function (propertyName) { return getProperty(propertyGroups, aspectName, propertyName); })
                            .filter(function (props) { return props !== undefined; });
                    }
                    newGroup = [{ title: group.title, properties: properties }];
                }
                return newGroup;
            };
        return AspectOrientedConfigService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /*!
     * @license
     * Copyright 2016 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var IndifferentConfigService = /** @class */ (function () {
        function IndifferentConfigService(config) {
        }
        /**
         * @param {?} groupName
         * @return {?}
         */
        IndifferentConfigService.prototype.isGroupAllowed = /**
         * @param {?} groupName
         * @return {?}
         */
            function (groupName) {
                return true;
            };
        /**
         * @param {?} propertyGroups
         * @return {?}
         */
        IndifferentConfigService.prototype.reorganiseByConfig = /**
         * @param {?} propertyGroups
         * @return {?}
         */
            function (propertyGroups) {
                return Object.keys(propertyGroups)
                    .map(function (groupName) {
                    /** @type {?} */
                    var propertyGroup = propertyGroups[groupName];
                    /** @type {?} */
                    var properties = propertyGroup.properties;
                    return Object.assign({}, propertyGroup, {
                        properties: Object.keys(properties).map(function (propertyName) { return properties[propertyName]; })
                    });
                });
            };
        return IndifferentConfigService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var LayoutOrientedConfigService = /** @class */ (function () {
        function LayoutOrientedConfigService(config) {
            this.config = config;
        }
        /**
         * @param {?} groupName
         * @return {?}
         */
        LayoutOrientedConfigService.prototype.isGroupAllowed = /**
         * @param {?} groupName
         * @return {?}
         */
            function (groupName) {
                return this.getMatchingGroups(groupName).length > 0;
            };
        /**
         * @param {?} propertyGroups
         * @return {?}
         */
        LayoutOrientedConfigService.prototype.reorganiseByConfig = /**
         * @param {?} propertyGroups
         * @return {?}
         */
            function (propertyGroups) {
                var _this = this;
                /** @type {?} */
                var layoutBlocks = this.config;
                return layoutBlocks.map(function (layoutBlock) {
                    /** @type {?} */
                    var flattenedItems = _this.flattenItems(layoutBlock.items);
                    /** @type {?} */
                    var properties = flattenedItems.reduce(function (props, explodedItem) {
                        /** @type {?} */
                        var property = getProperty(propertyGroups, explodedItem.groupName, explodedItem.propertyName) || [];
                        return props.concat(property);
                    }, []);
                    return {
                        title: layoutBlock.title,
                        properties: properties
                    };
                });
            };
        /**
         * @param {?} items
         * @return {?}
         */
        LayoutOrientedConfigService.prototype.flattenItems = /**
         * @param {?} items
         * @return {?}
         */
            function (items) {
                return items.reduce(function (accumulator, item) {
                    /** @type {?} */
                    var properties = Array.isArray(item.properties) ? item.properties : [item.properties];
                    /** @type {?} */
                    var flattenedProperties = properties.map(function (propertyName) {
                        return {
                            groupName: item.aspect || item.type,
                            propertyName: propertyName
                        };
                    });
                    return accumulator.concat(flattenedProperties);
                }, []);
            };
        /**
         * @param {?} groupName
         * @return {?}
         */
        LayoutOrientedConfigService.prototype.getMatchingGroups = /**
         * @param {?} groupName
         * @return {?}
         */
            function (groupName) {
                return this.config
                    .map(function (layoutBlock) { return layoutBlock.items; })
                    .reduce(function (accumulator, items) { return accumulator.concat(items); }, [])
                    .filter(function (item) { return item.aspect === groupName || item.type === groupName; });
            };
        return LayoutOrientedConfigService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var ContentMetadataConfigFactory = /** @class */ (function () {
        function ContentMetadataConfigFactory(appConfigService, logService) {
            this.appConfigService = appConfigService;
            this.logService = logService;
        }
        /**
         * @param {?=} presetName
         * @return {?}
         */
        ContentMetadataConfigFactory.prototype.get = /**
         * @param {?=} presetName
         * @return {?}
         */
            function (presetName) {
                if (presetName === void 0) {
                    presetName = 'default';
                }
                /** @type {?} */
                var presetConfig;
                try {
                    presetConfig = this.appConfigService.config['content-metadata'].presets[presetName];
                }
                catch (_a) {
                    if (presetName !== ContentMetadataConfigFactory.DEFAULT_PRESET_NAME) {
                        this.logService.error("No content-metadata preset for: " + presetName);
                    }
                    presetConfig = ContentMetadataConfigFactory.INDIFFERENT_PRESET;
                }
                return this.createConfig(presetConfig);
            };
        /**
         * @param {?} presetConfig
         * @return {?}
         */
        ContentMetadataConfigFactory.prototype.createConfig = /**
         * @param {?} presetConfig
         * @return {?}
         */
            function (presetConfig) {
                /** @type {?} */
                var config;
                if (this.isLayoutOrientedPreset(presetConfig)) {
                    config = new LayoutOrientedConfigService(/** @type {?} */ (presetConfig));
                }
                else if (this.isAspectOrientedPreset(presetConfig)) {
                    config = new AspectOrientedConfigService(/** @type {?} */ (presetConfig));
                }
                else {
                    config = new IndifferentConfigService(/** @type {?} */ (presetConfig));
                }
                Object.freeze(config);
                return config;
            };
        /**
         * @param {?} presetConfig
         * @return {?}
         */
        ContentMetadataConfigFactory.prototype.isAspectOrientedPreset = /**
         * @param {?} presetConfig
         * @return {?}
         */
            function (presetConfig) {
                return this.isObject(presetConfig);
            };
        /**
         * @param {?} presetConfig
         * @return {?}
         */
        ContentMetadataConfigFactory.prototype.isLayoutOrientedPreset = /**
         * @param {?} presetConfig
         * @return {?}
         */
            function (presetConfig) {
                return Array.isArray(presetConfig);
            };
        /**
         * @param {?} x
         * @return {?}
         */
        ContentMetadataConfigFactory.prototype.isObject = /**
         * @param {?} x
         * @return {?}
         */
            function (x) {
                return x != null && typeof x === 'object';
            };
        ContentMetadataConfigFactory.INDIFFERENT_PRESET = '*';
        ContentMetadataConfigFactory.DEFAULT_PRESET_NAME = 'default';
        ContentMetadataConfigFactory.decorators = [
            { type: core.Injectable }
        ];
        /** @nocollapse */
        ContentMetadataConfigFactory.ctorParameters = function () {
            return [
                { type: adfCore.AppConfigService },
                { type: adfCore.LogService }
            ];
        };
        return ContentMetadataConfigFactory;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var PropertyDescriptorsService = /** @class */ (function () {
        function PropertyDescriptorsService(alfrescoApiService) {
            this.alfrescoApiService = alfrescoApiService;
        }
        /**
         * @param {?} groupNames
         * @return {?}
         */
        PropertyDescriptorsService.prototype.load = /**
         * @param {?} groupNames
         * @return {?}
         */
            function (groupNames) {
                var _this = this;
                /** @type {?} */
                var groupFetchStreams = groupNames
                    .map(function (groupName) { return groupName.replace(':', '_'); })
                    .map(function (groupName) { return rxjs.defer(function () { return _this.alfrescoApiService.classesApi.getClass(groupName); }); });
                return rxjs.forkJoin(groupFetchStreams).pipe(operators.map(this.convertToObject));
            };
        /**
         * @param {?} propertyGroupsArray
         * @return {?}
         */
        PropertyDescriptorsService.prototype.convertToObject = /**
         * @param {?} propertyGroupsArray
         * @return {?}
         */
            function (propertyGroupsArray) {
                return propertyGroupsArray.reduce(function (propertyGroups, propertyGroup) {
                    var _a;
                    return Object.assign({}, propertyGroups, (_a = {},
                        _a[propertyGroup.name] = propertyGroup,
                        _a));
                }, {});
            };
        PropertyDescriptorsService.decorators = [
            { type: core.Injectable }
        ];
        /** @nocollapse */
        PropertyDescriptorsService.ctorParameters = function () {
            return [
                { type: adfCore.AlfrescoApiService }
            ];
        };
        return PropertyDescriptorsService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var ContentMetadataService = /** @class */ (function () {
        function ContentMetadataService(basicPropertiesService, contentMetadataConfigFactory, propertyGroupTranslatorService, propertyDescriptorsService) {
            this.basicPropertiesService = basicPropertiesService;
            this.contentMetadataConfigFactory = contentMetadataConfigFactory;
            this.propertyGroupTranslatorService = propertyGroupTranslatorService;
            this.propertyDescriptorsService = propertyDescriptorsService;
        }
        /**
         * @param {?} node
         * @return {?}
         */
        ContentMetadataService.prototype.getBasicProperties = /**
         * @param {?} node
         * @return {?}
         */
            function (node) {
                return rxjs.of(this.basicPropertiesService.getProperties(node));
            };
        /**
         * @param {?} node
         * @param {?=} presetName
         * @return {?}
         */
        ContentMetadataService.prototype.getGroupedProperties = /**
         * @param {?} node
         * @param {?=} presetName
         * @return {?}
         */
            function (node, presetName) {
                var _this = this;
                if (presetName === void 0) {
                    presetName = 'default';
                }
                /** @type {?} */
                var groupedProperties = rxjs.of([]);
                if (node.aspectNames) {
                    /** @type {?} */
                    var config_1 = this.contentMetadataConfigFactory.get(presetName);
                    /** @type {?} */
                    var groupNames = node.aspectNames
                        .concat(node.nodeType)
                        .filter(function (groupName) { return config_1.isGroupAllowed(groupName); });
                    if (groupNames.length > 0) {
                        groupedProperties = this.propertyDescriptorsService.load(groupNames).pipe(operators.map(function (groups) { return config_1.reorganiseByConfig(groups); }), operators.map(function (groups) { return _this.propertyGroupTranslatorService.translateToCardViewGroups(groups, node.properties); }));
                    }
                }
                return groupedProperties;
            };
        ContentMetadataService.decorators = [
            { type: core.Injectable }
        ];
        /** @nocollapse */
        ContentMetadataService.ctorParameters = function () {
            return [
                { type: BasicPropertiesService },
                { type: ContentMetadataConfigFactory },
                { type: PropertyGroupTranslatorService },
                { type: PropertyDescriptorsService }
            ];
        };
        return ContentMetadataService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var ContentMetadataComponent = /** @class */ (function () {
        function ContentMetadataComponent(contentMetadataService, cardViewUpdateService, nodesApiService, logService, alfrescoApiService) {
            this.contentMetadataService = contentMetadataService;
            this.cardViewUpdateService = cardViewUpdateService;
            this.nodesApiService = nodesApiService;
            this.logService = logService;
            this.alfrescoApiService = alfrescoApiService;
            /**
             * Toggles whether the edit button should be shown
             */
            this.editable = false;
            /**
             * Toggles whether to display empty values in the card view
             */
            this.displayEmpty = false;
            /**
             * Toggles between expanded (ie, full information) and collapsed
             * (ie, reduced information) in the display
             */
            this.expanded = false;
            /**
             * The multi parameter of the underlying material expansion panel, set to true to allow multi accordion to be expanded at the same time
             */
            this.multi = false;
            /**
             * Toggles whether the metadata properties should be shown
             */
            this.displayDefaultProperties = true;
        }
        /**
         * @return {?}
         */
        ContentMetadataComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.disposableNodeUpdate = this.cardViewUpdateService.itemUpdated$
                    .pipe(operators.switchMap(this.saveNode.bind(this)))
                    .subscribe(function (updatedNode) {
                    Object.assign(_this.node, updatedNode);
                    _this.alfrescoApiService.nodeUpdated.next(_this.node);
                }, function (error) { return _this.logService.error(error); });
                this.loadProperties(this.node);
            };
        /**
         * @param {?} changes
         * @return {?}
         */
        ContentMetadataComponent.prototype.ngOnChanges = /**
         * @param {?} changes
         * @return {?}
         */
            function (changes) {
                if (changes["node"] && !changes["node"].firstChange) {
                    this.loadProperties(changes["node"].currentValue);
                }
            };
        /**
         * @param {?} node
         * @return {?}
         */
        ContentMetadataComponent.prototype.loadProperties = /**
         * @param {?} node
         * @return {?}
         */
            function (node) {
                if (node) {
                    this.basicProperties$ = this.contentMetadataService.getBasicProperties(node);
                    this.groupedProperties$ = this.contentMetadataService.getGroupedProperties(node, this.preset);
                }
            };
        /**
         * @param {?} __0
         * @return {?}
         */
        ContentMetadataComponent.prototype.saveNode = /**
         * @param {?} __0
         * @return {?}
         */
            function (_a) {
                var nodeBody = _a.changed;
                return this.nodesApiService.updateNode(this.node.id, nodeBody);
            };
        /**
         * @return {?}
         */
        ContentMetadataComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                this.disposableNodeUpdate.unsubscribe();
            };
        ContentMetadataComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-content-metadata',
                        template: "<div class=\"adf-metadata-properties\">\n    <mat-accordion displayMode=\"flat\" [multi]=\"multi\">\n        <mat-expansion-panel\n            *ngIf=\"displayDefaultProperties\"\n            [expanded]=\"!expanded\"\n            [hideToggle]=\"!expanded\"\n            [attr.data-automation-id]=\"'adf-metadata-group-properties'\" >\n            <mat-expansion-panel-header>\n                <mat-panel-title>\n                    {{ 'CORE.METADATA.BASIC.HEADER' | translate }}\n                </mat-panel-title>\n            </mat-expansion-panel-header>\n\n            <adf-card-view\n                [properties]=\"basicProperties$ | async\"\n                [editable]=\"editable\"\n                [displayEmpty]=\"displayEmpty\">\n            </adf-card-view>\n        </mat-expansion-panel>\n\n        <ng-container *ngIf=\"expanded\">\n            <ng-container *ngIf=\"groupedProperties$ | async; else loading; let groupedProperties\">\n                <div *ngFor=\"let group of groupedProperties; let first = first;\" class=\"adf-metadata-grouped-properties-container\">\n                    <mat-expansion-panel\n                    [attr.data-automation-id]=\"'adf-metadata-group-' + group.title\"\n                    [expanded]=\"!displayDefaultProperties && first\">\n                        <mat-expansion-panel-header>\n                            <mat-panel-title>\n                                {{ group.title | translate }}\n                            </mat-panel-title>\n                        </mat-expansion-panel-header>\n\n                        <adf-card-view\n                            [properties]=\"group.properties\"\n                            [editable]=\"editable\"\n                            [displayEmpty]=\"displayEmpty\">\n                        </adf-card-view>\n                    </mat-expansion-panel>\n\n                </div>\n            </ng-container>\n            <ng-template #loading>\n                <mat-progress-bar mode=\"indeterminate\"></mat-progress-bar>\n            </ng-template>\n        </ng-container>\n    </mat-accordion>\n</div>\n",
                        host: { 'class': 'adf-content-metadata' },
                        encapsulation: core.ViewEncapsulation.None,
                        styles: [""]
                    }] }
        ];
        /** @nocollapse */
        ContentMetadataComponent.ctorParameters = function () {
            return [
                { type: ContentMetadataService },
                { type: adfCore.CardViewUpdateService },
                { type: adfCore.NodesApiService },
                { type: adfCore.LogService },
                { type: adfCore.AlfrescoApiService }
            ];
        };
        ContentMetadataComponent.propDecorators = {
            node: [{ type: core.Input }],
            editable: [{ type: core.Input }],
            displayEmpty: [{ type: core.Input }],
            expanded: [{ type: core.Input }],
            multi: [{ type: core.Input }],
            preset: [{ type: core.Input }],
            displayDefaultProperties: [{ type: core.Input }]
        };
        return ContentMetadataComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var ContentMetadataModule = /** @class */ (function () {
        function ContentMetadataModule() {
        }
        ContentMetadataModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            MaterialModule,
                            flexLayout.FlexLayoutModule,
                            adfCore.CoreModule.forChild()
                        ],
                        exports: [
                            ContentMetadataComponent,
                            ContentMetadataCardComponent
                        ],
                        declarations: [
                            ContentMetadataComponent,
                            ContentMetadataCardComponent
                        ]
                    },] }
        ];
        return ContentMetadataModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /*!
     * @license
     * Copyright 2016 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var PermissionDisplayModel = /** @class */ (function () {
        function PermissionDisplayModel(obj) {
            this.isInherited = false;
            if (obj) {
                this.authorityId = obj.authorityId;
                this.name = obj.name;
                this.accessStatus = obj.accessStatus;
                this.isInherited = obj.isInherited !== null && obj.isInherited !== undefined ? obj.isInherited : false;
                this.icon = obj.icon ? obj.icon : 'vpn_key';
            }
        }
        return PermissionDisplayModel;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var NodePermissionService = /** @class */ (function () {
        function NodePermissionService(apiService, searchApiService, nodeService, translation) {
            this.apiService = apiService;
            this.searchApiService = searchApiService;
            this.nodeService = nodeService;
            this.translation = translation;
        }
        /**
         * Gets a list of roles for the current node.
         * @param node The target node
         * @returns Array of strings representing the roles
         */
        /**
         * Gets a list of roles for the current node.
         * @param {?} node The target node
         * @return {?} Array of strings representing the roles
         */
        NodePermissionService.prototype.getNodeRoles = /**
         * Gets a list of roles for the current node.
         * @param {?} node The target node
         * @return {?} Array of strings representing the roles
         */
            function (node) {
                var _this = this;
                /** @type {?} */
                var retrieveSiteQueryBody = this.buildRetrieveSiteQueryBody(node.path.elements);
                return this.searchApiService.searchByQueryBody(retrieveSiteQueryBody)
                    .pipe(operators.switchMap(function (siteNodeList) {
                    if (siteNodeList.list.entries.length > 0) {
                        /** @type {?} */
                        var siteName = siteNodeList.list.entries[0].entry.name;
                        return _this.getGroupMembersBySiteName(siteName);
                    }
                    else {
                        return rxjs.of(node.permissions.settable);
                    }
                }));
            };
        /**
         * Updates the permission role for a node.
         * @param node Target node
         * @param updatedPermissionRole Permission role to update or add
         * @returns Node with updated permission
         */
        /**
         * Updates the permission role for a node.
         * @param {?} node Target node
         * @param {?} updatedPermissionRole Permission role to update or add
         * @return {?} Node with updated permission
         */
        NodePermissionService.prototype.updatePermissionRole = /**
         * Updates the permission role for a node.
         * @param {?} node Target node
         * @param {?} updatedPermissionRole Permission role to update or add
         * @return {?} Node with updated permission
         */
            function (node, updatedPermissionRole) {
                /** @type {?} */
                var permissionBody = { permissions: { locallySet: [] } };
                /** @type {?} */
                var index = node.permissions.locallySet.map(function (permission) { return permission.authorityId; }).indexOf(updatedPermissionRole.authorityId);
                permissionBody.permissions.locallySet = permissionBody.permissions.locallySet.concat(node.permissions.locallySet);
                if (index !== -1) {
                    permissionBody.permissions.locallySet[index] = updatedPermissionRole;
                }
                else {
                    permissionBody.permissions.locallySet.push(updatedPermissionRole);
                }
                return this.nodeService.updateNode(node.id, permissionBody);
            };
        /**
         * Update permissions for a node.
         * @param nodeId ID of the target node
         * @param permissionList New permission settings
         * @returns Node with updated permissions
         */
        /**
         * Update permissions for a node.
         * @param {?} nodeId ID of the target node
         * @param {?} permissionList New permission settings
         * @return {?} Node with updated permissions
         */
        NodePermissionService.prototype.updateNodePermissions = /**
         * Update permissions for a node.
         * @param {?} nodeId ID of the target node
         * @param {?} permissionList New permission settings
         * @return {?} Node with updated permissions
         */
            function (nodeId, permissionList) {
                var _this = this;
                return this.nodeService.getNode(nodeId).pipe(operators.switchMap(function (node) {
                    return _this.getNodeRoles(node).pipe(operators.switchMap(function (nodeRoles) { return rxjs.of({ node: node, nodeRoles: nodeRoles }); }));
                }), operators.switchMap(function (_a) {
                    var node = _a.node, nodeRoles = _a.nodeRoles;
                    return _this.updateLocallySetPermissions(node, permissionList, nodeRoles);
                }));
            };
        /**
         * Updates the locally set permissions for a node.
         * @param node ID of the target node
         * @param nodes Permission settings
         * @param nodeRole Permission role
         * @returns Node with updated permissions
         */
        /**
         * Updates the locally set permissions for a node.
         * @param {?} node ID of the target node
         * @param {?} nodes Permission settings
         * @param {?} nodeRole Permission role
         * @return {?} Node with updated permissions
         */
        NodePermissionService.prototype.updateLocallySetPermissions = /**
         * Updates the locally set permissions for a node.
         * @param {?} node ID of the target node
         * @param {?} nodes Permission settings
         * @param {?} nodeRole Permission role
         * @return {?} Node with updated permissions
         */
            function (node, nodes, nodeRole) {
                /** @type {?} */
                var permissionBody = { permissions: { locallySet: [] } };
                /** @type {?} */
                var permissionList = this.transformNodeToPermissionElement(nodes, nodeRole[0]);
                /** @type {?} */
                var duplicatedPermissions = this.getDuplicatedPermissions(node.permissions.locallySet, permissionList);
                if (duplicatedPermissions.length > 0) {
                    /** @type {?} */
                    var list = duplicatedPermissions.map(function (permission) { return 'authority -> ' + permission.authorityId + ' / role -> ' + permission.name; }).join(', ');
                    /** @type {?} */
                    var duplicatePermissionMessage = this.translation.instant('PERMISSION_MANAGER.ERROR.DUPLICATE-PERMISSION', { list: list });
                    return rxjs.throwError(duplicatePermissionMessage);
                }
                permissionBody.permissions.locallySet = node.permissions.locallySet ? node.permissions.locallySet.concat(permissionList) : permissionList;
                return this.nodeService.updateNode(node.id, permissionBody);
            };
        /**
         * @param {?} nodeLocallySet
         * @param {?} permissionListAdded
         * @return {?}
         */
        NodePermissionService.prototype.getDuplicatedPermissions = /**
         * @param {?} nodeLocallySet
         * @param {?} permissionListAdded
         * @return {?}
         */
            function (nodeLocallySet, permissionListAdded) {
                var _this = this;
                /** @type {?} */
                var duplicatePermissions = [];
                if (nodeLocallySet) {
                    permissionListAdded.forEach(function (permission) {
                        /** @type {?} */
                        var duplicate = nodeLocallySet.find(function (localPermission) { return _this.isEqualPermission(localPermission, permission); });
                        if (duplicate) {
                            duplicatePermissions.push(duplicate);
                        }
                    });
                }
                return duplicatePermissions;
            };
        /**
         * @param {?} oldPermission
         * @param {?} newPermission
         * @return {?}
         */
        NodePermissionService.prototype.isEqualPermission = /**
         * @param {?} oldPermission
         * @param {?} newPermission
         * @return {?}
         */
            function (oldPermission, newPermission) {
                return oldPermission.accessStatus === newPermission.accessStatus &&
                    oldPermission.authorityId === newPermission.authorityId &&
                    oldPermission.name === newPermission.name;
            };
        /**
         * @param {?} nodes
         * @param {?} nodeRole
         * @return {?}
         */
        NodePermissionService.prototype.transformNodeToPermissionElement = /**
         * @param {?} nodes
         * @param {?} nodeRole
         * @return {?}
         */
            function (nodes, nodeRole) {
                return nodes.map(function (node) {
                    /** @type {?} */
                    var newPermissionElement = /** @type {?} */ ({
                        'authorityId': node.entry.properties['cm:authorityName'] ?
                            node.entry.properties['cm:authorityName'] :
                            node.entry.properties['cm:userName'],
                        'name': nodeRole,
                        'accessStatus': 'ALLOWED'
                    });
                    return newPermissionElement;
                });
            };
        /**
         * Removes a permission setting from a node.
         * @param node ID of the target node
         * @param permissionToRemove Permission setting to remove
         * @returns Node with modified permissions
         */
        /**
         * Removes a permission setting from a node.
         * @param {?} node ID of the target node
         * @param {?} permissionToRemove Permission setting to remove
         * @return {?} Node with modified permissions
         */
        NodePermissionService.prototype.removePermission = /**
         * Removes a permission setting from a node.
         * @param {?} node ID of the target node
         * @param {?} permissionToRemove Permission setting to remove
         * @return {?} Node with modified permissions
         */
            function (node, permissionToRemove) {
                /** @type {?} */
                var permissionBody = { permissions: { locallySet: [] } };
                /** @type {?} */
                var index = node.permissions.locallySet.map(function (permission) { return permission.authorityId; }).indexOf(permissionToRemove.authorityId);
                if (index !== -1) {
                    node.permissions.locallySet.splice(index, 1);
                    permissionBody.permissions.locallySet = node.permissions.locallySet;
                    return this.nodeService.updateNode(node.id, permissionBody);
                }
            };
        /**
         * @param {?} siteName
         * @return {?}
         */
        NodePermissionService.prototype.getGroupMembersBySiteName = /**
         * @param {?} siteName
         * @return {?}
         */
            function (siteName) {
                var _this = this;
                /** @type {?} */
                var groupName = 'GROUP_site_' + siteName;
                return this.getGroupMemeberByGroupName(groupName)
                    .pipe(operators.map(function (res) {
                    /** @type {?} */
                    var displayResult = [];
                    res.list.entries.forEach(function (member) {
                        displayResult.push(_this.formattedRoleName(member.entry.displayName, 'site_' + siteName));
                    });
                    return displayResult;
                }));
            };
        /**
         * Gets all members related to a group name.
         * @param groupName Name of group to look for members
         * @param opts Extra options supported by JSAPI
         * @returns List of members
         */
        /**
         * Gets all members related to a group name.
         * @param {?} groupName Name of group to look for members
         * @param {?=} opts Extra options supported by JSAPI
         * @return {?} List of members
         */
        NodePermissionService.prototype.getGroupMemeberByGroupName = /**
         * Gets all members related to a group name.
         * @param {?} groupName Name of group to look for members
         * @param {?=} opts Extra options supported by JSAPI
         * @return {?} List of members
         */
            function (groupName, opts) {
                return rxjs.from(this.apiService.groupsApi.getGroupMembers(groupName, opts));
            };
        /**
         * @param {?} displayName
         * @param {?} siteName
         * @return {?}
         */
        NodePermissionService.prototype.formattedRoleName = /**
         * @param {?} displayName
         * @param {?} siteName
         * @return {?}
         */
            function (displayName, siteName) {
                return displayName.replace(siteName + '_', '');
            };
        /**
         * @param {?} nodePath
         * @return {?}
         */
        NodePermissionService.prototype.buildRetrieveSiteQueryBody = /**
         * @param {?} nodePath
         * @return {?}
         */
            function (nodePath) {
                /** @type {?} */
                var pathNames = nodePath.map(function (node) { return 'name: "' + node.name + '"'; });
                /** @type {?} */
                var buildedPathNames = pathNames.join(' OR ');
                return {
                    'query': {
                        'query': buildedPathNames
                    },
                    'paging': {
                        'maxItems': 100,
                        'skipCount': 0
                    },
                    'include': ['aspectNames', 'properties'],
                    'filterQueries': [
                        {
                            'query': "TYPE:'st:site'"
                        }
                    ]
                };
            };
        NodePermissionService.decorators = [
            { type: core.Injectable }
        ];
        /** @nocollapse */
        NodePermissionService.ctorParameters = function () {
            return [
                { type: adfCore.AlfrescoApiService },
                { type: adfCore.SearchService },
                { type: adfCore.NodesApiService },
                { type: adfCore.TranslationService }
            ];
        };
        return NodePermissionService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var PermissionListComponent = /** @class */ (function () {
        function PermissionListComponent(nodeService, nodePermissionService) {
            this.nodeService = nodeService;
            this.nodePermissionService = nodePermissionService;
            /**
             * ID of the node whose permissions you want to show.
             */
            this.nodeId = '';
            /**
             * Emitted when the permission is updated.
             */
            this.update = new core.EventEmitter();
            /**
             * Emitted when an error occurs.
             */
            this.error = new core.EventEmitter();
        }
        /**
         * @return {?}
         */
        PermissionListComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                this.fetchNodePermissions();
            };
        /**
         * @return {?}
         */
        PermissionListComponent.prototype.reload = /**
         * @return {?}
         */
            function () {
                this.fetchNodePermissions();
            };
        /**
         * @return {?}
         */
        PermissionListComponent.prototype.fetchNodePermissions = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.nodeService.getNode(this.nodeId).subscribe(function (node) {
                    _this.actualNode = node;
                    _this.permissionList = _this.getPermissionList(node);
                    _this.nodePermissionService.getNodeRoles(node).subscribe(function (settableList) {
                        _this.settableRoles = settableList;
                    });
                });
            };
        /**
         * @param {?} node
         * @return {?}
         */
        PermissionListComponent.prototype.getPermissionList = /**
         * @param {?} node
         * @return {?}
         */
            function (node) {
                /** @type {?} */
                var allPermissions = [];
                if (node.permissions.locallySet) {
                    node.permissions.locallySet.map(function (element) {
                        /** @type {?} */
                        var permission = new PermissionDisplayModel(element);
                        allPermissions.push(permission);
                    });
                }
                if (node.permissions.inherited) {
                    node.permissions.inherited.map(function (element) {
                        /** @type {?} */
                        var permissionInherited = new PermissionDisplayModel(element);
                        permissionInherited.isInherited = true;
                        allPermissions.push(permissionInherited);
                    });
                }
                return allPermissions;
            };
        /**
         * @param {?} event
         * @param {?} permissionRow
         * @return {?}
         */
        PermissionListComponent.prototype.saveNewRole = /**
         * @param {?} event
         * @param {?} permissionRow
         * @return {?}
         */
            function (event, permissionRow) {
                var _this = this;
                /** @type {?} */
                var updatedPermissionRole = this.buildUpdatedPermission(event.value, permissionRow);
                this.nodePermissionService.updatePermissionRole(this.actualNode, updatedPermissionRole)
                    .subscribe(function (node) {
                    _this.update.emit(updatedPermissionRole);
                });
            };
        /**
         * @param {?} newRole
         * @param {?} permissionRow
         * @return {?}
         */
        PermissionListComponent.prototype.buildUpdatedPermission = /**
         * @param {?} newRole
         * @param {?} permissionRow
         * @return {?}
         */
            function (newRole, permissionRow) {
                /** @type {?} */
                var permissionRole = {};
                permissionRole.accessStatus = permissionRow.accessStatus;
                permissionRole.name = newRole;
                permissionRole.authorityId = permissionRow.authorityId;
                return permissionRole;
            };
        /**
         * @param {?} permissionRow
         * @return {?}
         */
        PermissionListComponent.prototype.removePermission = /**
         * @param {?} permissionRow
         * @return {?}
         */
            function (permissionRow) {
                var _this = this;
                this.nodePermissionService.removePermission(this.actualNode, permissionRow).subscribe(function (node) {
                    _this.update.emit(node);
                }, function (error) { return _this.error.emit(error); });
            };
        PermissionListComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-permission-list',
                        template: "<div id=\"adf-permission-display-container\" class=\"adf-display-permission-container\">\n\n    <div *ngIf=\"!permissionList || !permissionList.length\" id=\"adf-no-permissions-template\">\n        <div #ref>\n            <ng-content select=\"adf-no-permission-template\"></ng-content>\n        </div>\n\n        <p *ngIf=\"ref.children.length == 0\">\n            {{ 'PERMISSION_MANAGER.PERMISSION_DISPLAY.NO_PERMISSIONS' | translate }}\n        </p>\n    </div>\n\n    <adf-datatable [rows]=\"permissionList\" class=\"adf-datatable-permission\" *ngIf=\"permissionList && permissionList.length\">\n        <data-columns>\n            <data-column key=\"icon\" type=\"icon\" [sortable]=\"false\">\n            </data-column>\n            <data-column title=\"{{'PERMISSION_MANAGER.PERMISSION_DISPLAY.AUTHORITY_ID' | translate}}\" key=\"authorityId\"></data-column>\n            <data-column title=\"{{'PERMISSION_MANAGER.PERMISSION_DISPLAY.ROLE' | translate}}\" key=\"name\">\n                <ng-template let-entry=\"$implicit\">\n                    <mat-form-field *ngIf=\"!entry.row.getValue('isInherited') else show_only_label\">\n                        <mat-select id=\"adf-select-role-permission\"\n                                    [placeholder]=\"entry.data.getValue(entry.row, entry.col)\"\n                                    value=\"{{entry.data.getValue(entry.row, entry.col)}}\"\n                                    (selectionChange)=\"saveNewRole($event, entry.row.obj)\">\n                          <mat-option *ngFor=\"let role of settableRoles\" [value]=\"role\">\n                            {{ role }}\n                          </mat-option>\n                        </mat-select>\n                      </mat-form-field>\n                      <ng-template #show_only_label>\n                          <span>{{entry.data.getValue(entry.row, entry.col)}}</span>\n                      </ng-template>\n                </ng-template>\n            </data-column>\n            <data-column title=\"{{'PERMISSION_MANAGER.PERMISSION_DISPLAY.INHERITED' | translate}}\" key=\"isInherited\">\n                <ng-template let-entry=\"$implicit\">\n                    <mat-chip-list>\n                        <mat-chip *ngIf=\"!!entry.data.getValue(entry.row, entry.col) else locally_set_chip\"\n                                id=\"adf-permission-inherited-label\"\n                                color=\"primary\" selected=\"true\">{{'PERMISSION_MANAGER.PERMISSION_DISPLAY.INHERITED' | translate}}</mat-chip>\n                    </mat-chip-list>\n                    <ng-template #locally_set_chip>\n                            <mat-chip-list>\n                                    <mat-chip id=\"adf-permission-locallyset-label\"\n                                              color=\"accent\" selected=\"true\">\n                                              {{'PERMISSION_MANAGER.PERMISSION_DISPLAY.LOCALLY_SET' | translate}}\n                                    </mat-chip>\n                            </mat-chip-list>\n                    </ng-template>\n                </ng-template>\n            </data-column>\n            <data-column key=\"delete\">\n            <ng-template let-entry=\"$implicit\">\n                <button *ngIf=\"!entry.row.getValue('isInherited')\" mat-icon-button color=\"primary\" (click)=\"removePermission(entry.row.obj)\">\n                    <mat-icon>highlight_off</mat-icon>\n                </button>\n            </ng-template>\n        </data-column>\n        </data-columns>\n    </adf-datatable>\n</div>\n\n",
                        encapsulation: core.ViewEncapsulation.None,
                        styles: [""]
                    }] }
        ];
        /** @nocollapse */
        PermissionListComponent.ctorParameters = function () {
            return [
                { type: adfCore.NodesApiService },
                { type: NodePermissionService }
            ];
        };
        PermissionListComponent.propDecorators = {
            nodeId: [{ type: core.Input }],
            update: [{ type: core.Output }],
            error: [{ type: core.Output }]
        };
        return PermissionListComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var NoPermissionTemplateComponent = /** @class */ (function () {
        function NoPermissionTemplateComponent() {
        }
        NoPermissionTemplateComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-no-permission-template',
                        template: '<ng-content></ng-content>'
                    }] }
        ];
        return NoPermissionTemplateComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var InheritPermissionDirective = /** @class */ (function () {
        function InheritPermissionDirective(nodeService, contentService) {
            this.nodeService = nodeService;
            this.contentService = contentService;
            /**
             * Emitted when the node is updated.
             */
            this.updated = new core.EventEmitter();
            /**
             * Emitted when an error occurs.
             */
            this.error = new core.EventEmitter();
        }
        /**
         * @return {?}
         */
        InheritPermissionDirective.prototype.onInheritPermissionClicked = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.nodeService.getNode(this.nodeId).subscribe(function (node) {
                    if (_this.contentService.hasPermission(node, adfCore.PermissionsEnum.UPDATEPERMISSIONS)) {
                        /** @type {?} */
                        var nodeBody = { permissions: { isInheritanceEnabled: !node.permissions.isInheritanceEnabled } };
                        _this.nodeService.updateNode(_this.nodeId, nodeBody, { include: ['permissions'] }).subscribe(function (nodeUpdated) {
                            _this.updated.emit(nodeUpdated);
                        }, function (error) { return _this.error.emit(error); });
                    }
                    else {
                        _this.error.emit('PERMISSION_MANAGER.ERROR.NOT-ALLOWED');
                    }
                });
            };
        InheritPermissionDirective.decorators = [
            { type: core.Directive, args: [{
                        selector: 'button[adf-inherit-permission], mat-button-toggle[adf-inherit-permission]',
                        host: {
                            'role': 'button',
                            '(click)': 'onInheritPermissionClicked()'
                        }
                    },] }
        ];
        /** @nocollapse */
        InheritPermissionDirective.ctorParameters = function () {
            return [
                { type: adfCore.NodesApiService },
                { type: adfCore.ContentService }
            ];
        };
        InheritPermissionDirective.propDecorators = {
            nodeId: [{ type: core.Input }],
            updated: [{ type: core.Output }],
            error: [{ type: core.Output }]
        };
        return InheritPermissionDirective;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var AddPermissionDialogComponent = /** @class */ (function () {
        function AddPermissionDialogComponent(data) {
            this.data = data;
            this.currentSelection = [];
        }
        /**
         * @param {?} items
         * @return {?}
         */
        AddPermissionDialogComponent.prototype.onSelect = /**
         * @param {?} items
         * @return {?}
         */
            function (items) {
                this.currentSelection = items;
            };
        /**
         * @return {?}
         */
        AddPermissionDialogComponent.prototype.onAddClicked = /**
         * @return {?}
         */
            function () {
                this.data.confirm.next(this.currentSelection);
                this.data.confirm.complete();
            };
        AddPermissionDialogComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-add-permission-dialog',
                        template: "<h2 mat-dialog-title id=\"add-permission-dialog-title\">\n    {{(data?.title ? data?.title : 'PERMISSION_MANAGER.ADD-PERMISSION.BASE-DIALOG-TITLE') | translate}}\n</h2>\n<mat-dialog-content>\n    <adf-add-permission-panel\n        (select)=\"onSelect($event)\">\n    </adf-add-permission-panel>\n</mat-dialog-content>\n<mat-dialog-actions>\n    <button mat-button mat-dialog-close id=\"add-permission-dialog-close-button\">{{'PERMISSION_MANAGER.ADD-PERMISSION.CLOSE-ACTION' | translate}}</button>\n    <button mat-button id=\"add-permission-dialog-confirm-button\" [mat-dialog-close]=\"true\"\n            class=\"choose-action\"\n            [disabled]=\"currentSelection?.length === 0\"\n            (click)=\"onAddClicked()\">{{'PERMISSION_MANAGER.ADD-PERMISSION.ADD-ACTION' | translate}}</button>\n</mat-dialog-actions>\n\n",
                        encapsulation: core.ViewEncapsulation.None,
                        styles: [""]
                    }] }
        ];
        /** @nocollapse */
        AddPermissionDialogComponent.ctorParameters = function () {
            return [
                { type: undefined, decorators: [{ type: core.Inject, args: [material.MAT_DIALOG_DATA,] }] }
            ];
        };
        AddPermissionDialogComponent.propDecorators = {
            addPermissionComponent: [{ type: core.ViewChild, args: ['addPermission',] }]
        };
        return AddPermissionDialogComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var NodePermissionDialogService = /** @class */ (function () {
        function NodePermissionDialogService(dialog, nodePermissionService, contentService) {
            this.dialog = dialog;
            this.nodePermissionService = nodePermissionService;
            this.contentService = contentService;
        }
        /**
         * Opens a dialog to add permissions to a node.
         * @param node ID of the target node
         * @param title Dialog title
         * @returns Node with updated permissions
         */
        /**
         * Opens a dialog to add permissions to a node.
         * @param {?} node ID of the target node
         * @param {?=} title Dialog title
         * @return {?} Node with updated permissions
         */
        NodePermissionDialogService.prototype.openAddPermissionDialog = /**
         * Opens a dialog to add permissions to a node.
         * @param {?} node ID of the target node
         * @param {?=} title Dialog title
         * @return {?} Node with updated permissions
         */
            function (node, title) {
                if (this.contentService.hasPermission(node, adfCore.PermissionsEnum.UPDATEPERMISSIONS)) {
                    /** @type {?} */
                    var confirm_1 = new rxjs.Subject();
                    confirm_1.subscribe({
                        complete: this.close.bind(this)
                    });
                    /** @type {?} */
                    var data = {
                        nodeId: node.id,
                        title: title,
                        confirm: confirm_1
                    };
                    this.openDialog(data, 'adf-add-permission-dialog', '630px');
                    return confirm_1;
                }
                else {
                    /** @type {?} */
                    var errors = new Error(JSON.stringify({ error: { statusCode: 403 } }));
                    errors.message = 'PERMISSION_MANAGER.ERROR.NOT-ALLOWED';
                    return rxjs.throwError(errors);
                }
            };
        /**
         * @param {?} data
         * @param {?} currentPanelClass
         * @param {?} chosenWidth
         * @return {?}
         */
        NodePermissionDialogService.prototype.openDialog = /**
         * @param {?} data
         * @param {?} currentPanelClass
         * @param {?} chosenWidth
         * @return {?}
         */
            function (data, currentPanelClass, chosenWidth) {
                this.dialog.open(AddPermissionDialogComponent, { data: data, panelClass: currentPanelClass, width: chosenWidth });
            };
        /**
         * Closes the currently-open dialog.
         */
        /**
         * Closes the currently-open dialog.
         * @return {?}
         */
        NodePermissionDialogService.prototype.close = /**
         * Closes the currently-open dialog.
         * @return {?}
         */
            function () {
                this.dialog.closeAll();
            };
        /**
         * Opens a dialog to update permissions for a node.
         * @param nodeId ID of the target node
         * @param title Dialog title
         * @returns Node with updated permissions
         */
        /**
         * Opens a dialog to update permissions for a node.
         * @param {?=} nodeId ID of the target node
         * @param {?=} title Dialog title
         * @return {?} Node with updated permissions
         */
        NodePermissionDialogService.prototype.updateNodePermissionByDialog = /**
         * Opens a dialog to update permissions for a node.
         * @param {?=} nodeId ID of the target node
         * @param {?=} title Dialog title
         * @return {?} Node with updated permissions
         */
            function (nodeId, title) {
                var _this = this;
                return this.contentService.getNode(nodeId, { include: ['allowableOperations'] })
                    .pipe(operators.switchMap(function (node) {
                    return _this.openAddPermissionDialog(node.entry, title)
                        .pipe(operators.switchMap(function (selection) {
                        return _this.nodePermissionService.updateNodePermissions(nodeId, selection);
                    }));
                }));
            };
        NodePermissionDialogService.decorators = [
            { type: core.Injectable }
        ];
        /** @nocollapse */
        NodePermissionDialogService.ctorParameters = function () {
            return [
                { type: material.MatDialog },
                { type: NodePermissionService },
                { type: adfCore.ContentService }
            ];
        };
        return NodePermissionDialogService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /*!
     * @license
     * Copyright 2016 Alfresco Software, Ltd.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    var SearchPermissionConfigurationService = /** @class */ (function () {
        function SearchPermissionConfigurationService() {
        }
        /**
         * @param {?} searchTerm
         * @param {?} maxResults
         * @param {?} skipCount
         * @return {?}
         */
        SearchPermissionConfigurationService.prototype.generateQueryBody = /**
         * @param {?} searchTerm
         * @param {?} maxResults
         * @param {?} skipCount
         * @return {?}
         */
            function (searchTerm, maxResults, skipCount) {
                /** @type {?} */
                var defaultQueryBody = {
                    query: {
                        query: searchTerm ? "authorityName:*" + searchTerm + "* OR userName:*" + searchTerm + "*" : searchTerm
                    },
                    include: ['properties', 'aspectNames'],
                    paging: {
                        maxItems: maxResults,
                        skipCount: skipCount
                    },
                    filterQueries: [
                        /*tslint:disable-next-line */
                        { query: "TYPE:'cm:authority'" }
                    ]
                };
                return defaultQueryBody;
            };
        return SearchPermissionConfigurationService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var AddPermissionPanelComponent = /** @class */ (function () {
        function AddPermissionPanelComponent() {
            var _this = this;
            /**
             * Emitted when a permission list item is selected.
             */
            this.select = new core.EventEmitter();
            this.searchInput = new forms.FormControl();
            this.searchedWord = '';
            this.debounceSearch = 200;
            this.selectedItems = [];
            this.EVERYONE = { entry: { properties: { 'cm:authorityName': 'GROUP_EVERYONE' } } };
            this.searchInput.valueChanges
                .pipe(operators.debounceTime(this.debounceSearch))
                .subscribe(function (searchValue) {
                _this.searchedWord = searchValue;
                if (!searchValue) {
                    _this.search.resetResults();
                }
            });
        }
        /**
         * @param {?} item
         * @return {?}
         */
        AddPermissionPanelComponent.prototype.elementClicked = /**
         * @param {?} item
         * @return {?}
         */
            function (item) {
                if (this.isAlreadySelected(item)) {
                    this.selectedItems.splice(this.selectedItems.indexOf(item), 1);
                }
                else {
                    this.selectedItems.push(item);
                }
                this.select.emit(this.selectedItems);
            };
        /**
         * @param {?} item
         * @return {?}
         */
        AddPermissionPanelComponent.prototype.isAlreadySelected = /**
         * @param {?} item
         * @return {?}
         */
            function (item) {
                return this.selectedItems.indexOf(item) >= 0;
            };
        /**
         * @return {?}
         */
        AddPermissionPanelComponent.prototype.clearSearch = /**
         * @return {?}
         */
            function () {
                this.searchedWord = '';
                this.selectedItems.splice(0, this.selectedItems.length);
                this.search.resetResults();
            };
        AddPermissionPanelComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-add-permission-panel',
                        template: "<mat-form-field floatPlaceholder=\"never\" class=\"adf-permission-search-input\">\n    <input matInput\n        id=\"searchInput\"\n        [formControl]=\"searchInput\"\n        type=\"text\"\n        placeholder=\"{{'PERMISSION_MANAGER.ADD-PERMISSION.SEARCH' | translate}}\"\n        [value]=\"searchedWord\">\n\n    <mat-icon *ngIf=\"searchedWord?.length > 0\"\n        class=\"adf-permission-search-icon\"\n        data-automation-id=\"adf-permission-clear-input\"\n        id=\"adf-permission-clear-input\"\n        matSuffix (click)=\"clearSearch()\">clear\n    </mat-icon>\n\n    <mat-icon *ngIf=\"searchedWord?.length === 0\"\n        class=\"adf-permission-search-icon\"\n        data-automation-id=\"adf-permission-search-icon\"\n        matSuffix>search\n    </mat-icon>\n</mat-form-field>\n\n<div *ngIf=\"searchedWord?.length === 0\" id=\"adf-add-permission-type-search\">\n    <span class=\"adf-permission-start-message\">{{'PERMISSION_MANAGER.ADD-PERMISSION.TYPE-MESSAGE' | translate}}</span>\n</div>\n\n<adf-search #search [searchTerm]=\"searchedWord\"\n        id=\"adf-add-permission-authority-results\"\n        class=\"adf-permission-result-list\"\n        [class.adf-permission-result-list-search]=\"searchedWord.length === 0\">\n<ng-template let-data>\n    <mat-selection-list class=\"adf-permission-result-list-elements\">\n        <mat-list-option\n            id=\"adf-add-permission-group-everyone\"\n            class=\"adf-list-option-item\"\n            (click)=\"elementClicked(EVERYONE)\">\n            <mat-icon mat-list-icon id=\"add-group-icon\">\n                group_add\n            </mat-icon>\n            <p>\n                {{'PERMISSION_MANAGER.ADD-PERMISSION.EVERYONE' | translate}}\n            </p>\n        </mat-list-option>\n\n        <mat-list-option *ngFor=\"let item of data?.list?.entries; let idx = index\"\n                            (click)=\"elementClicked(item)\"\n                            class=\"adf-list-option-item\"\n                            id=\"result_option_{{idx}}\">\n            <mat-icon mat-list-icon id=\"add-group-icon\"\n                      *ngIf=\"item?.entry?.nodeType === 'cm:authorityContainer' else show_person_icon\">\n                      group_add\n            </mat-icon>\n            <ng-template #show_person_icon>\n                <mat-icon id=\"add-person-icon\" mat-list-icon>person_add</mat-icon>\n            </ng-template>\n            <p>\n             {{item.entry?.properties['cm:authorityName']?\n                                    item.entry?.properties['cm:authorityName'] :\n                                    item.entry?.properties['cm:firstName']}}</p>\n        </mat-list-option>\n    </mat-selection-list>\n</ng-template>\n</adf-search>\n",
                        encapsulation: core.ViewEncapsulation.None,
                        providers: [
                            { provide: adfCore.SearchConfigurationService, useClass: SearchPermissionConfigurationService },
                            adfCore.SearchService
                        ],
                        styles: [""]
                    }] }
        ];
        /** @nocollapse */
        AddPermissionPanelComponent.ctorParameters = function () { return []; };
        AddPermissionPanelComponent.propDecorators = {
            search: [{ type: core.ViewChild, args: ['search',] }],
            select: [{ type: core.Output }]
        };
        return AddPermissionPanelComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var AddPermissionComponent = /** @class */ (function () {
        function AddPermissionComponent(nodePermissionService, nodeApiService, contentService) {
            var _this = this;
            this.nodePermissionService = nodePermissionService;
            this.nodeApiService = nodeApiService;
            this.contentService = contentService;
            /**
             * Emitted when the node is updated successfully.
             */
            this.success = new core.EventEmitter();
            /**
             * Emitted when an error occurs during the update.
             */
            this.error = new core.EventEmitter();
            this.selectedItems = [];
            this.nodeApiService.getNode(this.nodeId).subscribe(function (node) { return _this.currentNode = node; });
        }
        /**
         * @param {?} selection
         * @return {?}
         */
        AddPermissionComponent.prototype.onSelect = /**
         * @param {?} selection
         * @return {?}
         */
            function (selection) {
                this.selectedItems = selection;
            };
        /**
         * @return {?}
         */
        AddPermissionComponent.prototype.isAddEnabled = /**
         * @return {?}
         */
            function () {
                return this.contentService.hasPermission(this.currentNode, adfCore.PermissionsEnum.UPDATEPERMISSIONS) &&
                    this.selectedItems.length !== 0;
            };
        /**
         * @return {?}
         */
        AddPermissionComponent.prototype.applySelection = /**
         * @return {?}
         */
            function () {
                var _this = this;
                if (this.contentService.hasPermission(this.currentNode, adfCore.PermissionsEnum.UPDATEPERMISSIONS)) {
                    this.nodePermissionService.updateNodePermissions(this.nodeId, this.selectedItems)
                        .subscribe(function (node) {
                        _this.success.emit(node);
                    }, function (error) {
                        _this.error.emit(error);
                    });
                }
            };
        AddPermissionComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-add-permission',
                        template: "<adf-add-permission-panel\n    (select)=\"onSelect($event)\">\n</adf-add-permission-panel>\n<div id=\"adf-add-permission-actions\">\n   <button mat-button\n          id=\"adf-add-permission-action-button\"\n          class=\"adf-permission-action\"\n          [disabled]=\"!isAddEnabled()\"\n          (click)=\"applySelection()\">\n     {{'PERMISSION_MANAGER.ADD-PERMISSION.ADD-ACTION' | translate}}\n    </button>\n</div>\n\n\n",
                        encapsulation: core.ViewEncapsulation.None,
                        styles: [""]
                    }] }
        ];
        /** @nocollapse */
        AddPermissionComponent.ctorParameters = function () {
            return [
                { type: NodePermissionService },
                { type: adfCore.NodesApiService },
                { type: adfCore.ContentService }
            ];
        };
        AddPermissionComponent.propDecorators = {
            nodeId: [{ type: core.Input }],
            success: [{ type: core.Output }],
            error: [{ type: core.Output }]
        };
        return AddPermissionComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var PermissionManagerModule = /** @class */ (function () {
        function PermissionManagerModule() {
        }
        PermissionManagerModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            adfCore.CoreModule.forChild(),
                            common.CommonModule,
                            forms.FormsModule,
                            forms.ReactiveFormsModule,
                            MaterialModule,
                            SearchModule
                        ],
                        declarations: [
                            PermissionListComponent,
                            NoPermissionTemplateComponent,
                            AddPermissionPanelComponent,
                            InheritPermissionDirective,
                            AddPermissionComponent,
                            AddPermissionDialogComponent
                        ],
                        entryComponents: [
                            AddPermissionPanelComponent,
                            AddPermissionComponent,
                            AddPermissionDialogComponent
                        ],
                        exports: [
                            PermissionListComponent,
                            NoPermissionTemplateComponent,
                            AddPermissionPanelComponent,
                            InheritPermissionDirective,
                            AddPermissionComponent,
                            AddPermissionDialogComponent
                        ]
                    },] }
        ];
        return PermissionManagerModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var ShareDialogComponent = /** @class */ (function () {
        function ShareDialogComponent(sharedLinksApiService, dialogRef, dialog, nodesApiService, contentService, data) {
            this.sharedLinksApiService = sharedLinksApiService;
            this.dialogRef = dialogRef;
            this.dialog = dialog;
            this.nodesApiService = nodesApiService;
            this.contentService = contentService;
            this.data = data;
            this.subscriptions = [];
            this.minDate = moment$1().add(1, 'd');
            this.isFileShared = false;
            this.isDisabled = false;
            this.form = new forms.FormGroup({
                'sharedUrl': new forms.FormControl(''),
                'time': new forms.FormControl({ value: '', disabled: false })
            });
        }
        /**
         * @return {?}
         */
        ShareDialogComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                var _this = this;
                if (!this.canUpdate) {
                    this.form.controls['time'].disable();
                }
                this.subscriptions.push(this.form.valueChanges
                    .pipe(operators.skip(1), operators.tap(function (updates) {
                    _this.updateNode(updates);
                }))
                    .subscribe(function (updates) { return _this.updateEntryExpiryDate(updates); }));
                if (this.data.node && this.data.node.entry) {
                    this.fileName = this.data.node.entry.name;
                    this.baseShareUrl = this.data.baseShareUrl;
                    /** @type {?} */
                    var properties = this.data.node.entry.properties;
                    if (properties && !properties['qshare:sharedId']) {
                        this.createSharedLinks(this.data.node.entry.id);
                    }
                    else {
                        this.sharedId = properties['qshare:sharedId'];
                        this.isFileShared = true;
                        this.updateForm();
                    }
                }
            };
        /**
         * @return {?}
         */
        ShareDialogComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                this.subscriptions.forEach(function (subscription) { return subscription.unsubscribe; });
            };
        /**
         * @return {?}
         */
        ShareDialogComponent.prototype.removeShare = /**
         * @return {?}
         */
            function () {
                this.deleteSharedLink(this.sharedId);
            };
        /**
         * @param {?} event
         * @return {?}
         */
        ShareDialogComponent.prototype.onSlideShareChange = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                if (event.checked) {
                    this.createSharedLinks(this.data.node.entry.id);
                }
                else {
                    this.openConfirmationDialog();
                }
            };
        Object.defineProperty(ShareDialogComponent.prototype, "canUpdate", {
            get: /**
             * @return {?}
             */ function () {
                return this.contentService.hasPermission(this.data.node.entry, 'update');
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        ShareDialogComponent.prototype.openConfirmationDialog = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.isFileShared = false;
                this.dialog
                    .open(ConfirmDialogComponent, {
                    data: {
                        title: 'SHARE.CONFIRMATION.DIALOG-TITLE',
                        message: 'SHARE.CONFIRMATION.MESSAGE',
                        yesLabel: 'SHARE.CONFIRMATION.REMOVE',
                        noLabel: 'SHARE.CONFIRMATION.CANCEL'
                    },
                    minWidth: '250px',
                    closeOnNavigation: true
                })
                    .beforeClose().subscribe(function (deleteSharedLink) {
                    if (deleteSharedLink) {
                        _this.deleteSharedLink(_this.sharedId);
                    }
                    else {
                        _this.isFileShared = true;
                    }
                });
            };
        /**
         * @param {?} nodeId
         * @return {?}
         */
        ShareDialogComponent.prototype.createSharedLinks = /**
         * @param {?} nodeId
         * @return {?}
         */
            function (nodeId) {
                var _this = this;
                this.isDisabled = true;
                this.sharedLinksApiService.createSharedLinks(nodeId)
                    .subscribe(function (sharedLink) {
                    if (sharedLink.entry) {
                        _this.sharedId = sharedLink.entry.id;
                        _this.data.node.entry.properties['qshare:sharedId'] = _this.sharedId;
                        _this.isDisabled = false;
                        _this.isFileShared = true;
                        _this.updateForm();
                    }
                }, function () {
                    _this.isDisabled = false;
                    _this.isFileShared = false;
                });
            };
        /**
         * @param {?} sharedId
         * @return {?}
         */
        ShareDialogComponent.prototype.deleteSharedLink = /**
         * @param {?} sharedId
         * @return {?}
         */
            function (sharedId) {
                var _this = this;
                this.isDisabled = true;
                this.sharedLinksApiService.deleteSharedLink(sharedId).subscribe(function () {
                    _this.data.node.entry.properties['qshare:sharedId'] = null;
                    _this.data.node.entry.properties['qshare:expiryDate'] = null;
                    _this.dialogRef.close(false);
                }, function () {
                    _this.isDisabled = false;
                    _this.isFileShared = false;
                });
            };
        /**
         * @return {?}
         */
        ShareDialogComponent.prototype.updateForm = /**
         * @return {?}
         */
            function () {
                var entry = this.data.node.entry;
                /** @type {?} */
                var expiryDate = entry.properties['qshare:expiryDate'];
                this.form.setValue({
                    'sharedUrl': "" + this.baseShareUrl + this.sharedId,
                    'time': expiryDate ? expiryDate : null
                });
            };
        /**
         * @param {?} updates
         * @return {?}
         */
        ShareDialogComponent.prototype.updateNode = /**
         * @param {?} updates
         * @return {?}
         */
            function (updates) {
                return this.nodesApiService.updateNode(this.data.node.entry.id, {
                    properties: {
                        'qshare:expiryDate': updates.time ? updates.time.utc().format() : null
                    }
                });
            };
        /**
         * @param {?} updates
         * @return {?}
         */
        ShareDialogComponent.prototype.updateEntryExpiryDate = /**
         * @param {?} updates
         * @return {?}
         */
            function (updates) {
                var properties = this.data.node.entry.properties;
                properties['qshare:expiryDate'] = updates.time
                    ? updates.time.local()
                    : null;
            };
        ShareDialogComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'adf-share-dialog',
                        template: "<div class=\"adf-share-link__dialog-content\">\n    <h1 data-automation-id=\"adf-share-dialog-title\"\n        class=\"adf-share-link__title\">\n        {{ 'SHARE.DIALOG-TITLE' | translate }} {{ fileName }}\n    </h1>\n\n    <mat-dialog-content>\n        <p class=\"adf-share-link__info\">{{ 'SHARE.DESCRIPTION' | translate }}</p>\n\n        <div class=\"adf-share-link--row\">\n            <h1 class=\"adf-share-link__label\">{{ 'SHARE.TITLE' | translate }}</h1>\n\n            <mat-slide-toggle\n                color=\"primary\"\n                data-automation-id=\"adf-share-toggle\"\n                [checked]=\"isFileShared\"\n                [disabled]=\"!canUpdate || isDisabled\"\n                (change)=\"onSlideShareChange($event)\">\n            </mat-slide-toggle>\n        </div>\n\n        <form [formGroup]=\"form\">\n            <mat-form-field class=\"full-width\">\n                <input #sharedLinkInput\n                    data-automation-id=\"adf-share-link\"\n                    class=\"adf-share-link__input\"\n                    matInput\n                    cdkFocusInitial\n                    placeholder=\"{{ 'SHARE.PUBLIC-LINK' | translate }}\"\n                    formControlName=\"sharedUrl\"\n                    readonly=\"readonly\">\n                    <mat-icon class=\"input-action\" matSuffix\n                          [clipboard-notification]=\"'SHARE.CLIPBOARD-MESSAGE' | translate\"\n                          [adf-clipboard]=\"sharedLinkInput\">\n                        link\n                    </mat-icon>\n            </mat-form-field>\n\n            <h1 class=\"adf-share-link__label\">{{ 'SHARE.EXPIRES' | translate }}</h1>\n            <mat-form-field class=\"full-width\">\n                <mat-datetimepicker-toggle [for]=\"datetimePicker\" matSuffix></mat-datetimepicker-toggle>\n                <mat-datetimepicker #datetimePicker type=\"datetime\" openOnFocus=\"true\" timeInterval=\"1\"></mat-datetimepicker>\n                <input class=\"adf-share-link__input\"\n                    matInput\n                    [min]=\"minDate\"\n                    formControlName=\"time\"\n                    [matDatetimepicker]=\"datetimePicker\">\n            </mat-form-field>\n        </form>\n    </mat-dialog-content>\n\n    <div mat-dialog-actions>\n        <button\n            data-automation-id=\"adf-share-dialog-close\"\n            mat-button color=\"primary\" mat-dialog-close>\n            {{ 'SHARE.CLOSE' | translate }}\n        </button>\n    </div>\n</div>\n",
                        host: { 'class': 'adf-share-dialog' },
                        encapsulation: core.ViewEncapsulation.None,
                        styles: [".adf-share-link-dialog .adf-share-link__dialog-content{display:flex;flex-direction:column}.adf-share-link-dialog .adf-share-link__label{letter-spacing:-.4px;line-height:2;font-weight:400;font-style:normal;font-stretch:normal;font-size:16px;opacity:.87;flex:1 1 auto}.adf-share-link-dialog .adf-share-link__title{letter-spacing:-.4px;line-height:2;font-weight:400;font-style:normal;font-stretch:normal;font-size:16px;opacity:.87}.adf-share-link-dialog .adf-share-link__info{letter-spacing:-.4px;line-height:2;font-weight:400;font-style:normal;font-stretch:normal;opacity:.87;opacity:.54;font-size:13px}.adf-share-link-dialog .adf-share-link--row{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center}.adf-share-link-dialog .adf-share-link__input{opacity:.54}.adf-share-link-dialog .input-action{cursor:pointer}.adf-share-link-dialog .full-width{width:100%}.adf-share-link-dialog .mat-form-field-infix{border-top:unset}.adf-share-link-dialog .mat-dialog-actions{justify-content:flex-end}.adf-share-link-dialog .mat-dialog-actions>button{text-transform:uppercase}.adf-share-link-dialog .mat-form-field-flex{align-items:center}"]
                    }] }
        ];
        /** @nocollapse */
        ShareDialogComponent.ctorParameters = function () {
            return [
                { type: adfCore.SharedLinksApiService },
                { type: material.MatDialogRef },
                { type: material.MatDialog },
                { type: adfCore.NodesApiService },
                { type: adfCore.ContentService },
                { type: undefined, decorators: [{ type: core.Inject, args: [material.MAT_DIALOG_DATA,] }] }
            ];
        };
        ShareDialogComponent.propDecorators = {
            sharedLinkInput: [{ type: core.ViewChild, args: ['sharedLinkInput',] }]
        };
        return ShareDialogComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var NodeSharedDirective = /** @class */ (function () {
        function NodeSharedDirective(dialog, zone) {
            this.dialog = dialog;
            this.zone = zone;
            this.isFile = false;
            this.isShared = false;
        }
        /**
         * @return {?}
         */
        NodeSharedDirective.prototype.onClick = /**
         * @return {?}
         */
            function () {
                if (this.node) {
                    this.shareNode(this.node);
                }
            };
        /**
         * @param {?} node
         * @return {?}
         */
        NodeSharedDirective.prototype.shareNode = /**
         * @param {?} node
         * @return {?}
         */
            function (node) {
                if (node && node.entry && node.entry.isFile) {
                    this.dialog.open(ShareDialogComponent, {
                        width: '600px',
                        panelClass: 'adf-share-link-dialog',
                        data: {
                            node: node,
                            baseShareUrl: this.baseShareUrl
                        }
                    });
                }
            };
        /**
         * @return {?}
         */
        NodeSharedDirective.prototype.ngOnChanges = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.zone.onStable.subscribe(function () {
                    if (_this.node) {
                        _this.isFile = _this.node.entry.isFile;
                        _this.isShared = _this.node.entry.properties['qshare:sharedId'];
                    }
                });
            };
        NodeSharedDirective.decorators = [
            { type: core.Directive, args: [{
                        selector: '[adf-share]',
                        exportAs: 'adfShare'
                    },] }
        ];
        /** @nocollapse */
        NodeSharedDirective.ctorParameters = function () {
            return [
                { type: material.MatDialog },
                { type: core.NgZone }
            ];
        };
        NodeSharedDirective.propDecorators = {
            node: [{ type: core.Input, args: ['adf-share',] }],
            baseShareUrl: [{ type: core.Input }],
            onClick: [{ type: core.HostListener, args: ['click',] }]
        };
        return NodeSharedDirective;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var ContentNodeShareModule = /** @class */ (function () {
        function ContentNodeShareModule() {
        }
        /**
         * @return {?}
         */
        ContentNodeShareModule.forRoot = /**
         * @return {?}
         */
            function () {
                return {
                    ngModule: ContentNodeShareModule
                };
            };
        /**
         * @return {?}
         */
        ContentNodeShareModule.forChild = /**
         * @return {?}
         */
            function () {
                return {
                    ngModule: ContentNodeShareModule
                };
            };
        ContentNodeShareModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            adfCore.CoreModule.forChild(),
                            common.CommonModule,
                            MaterialModule
                        ],
                        declarations: [
                            ShareDialogComponent,
                            NodeSharedDirective
                        ],
                        exports: [
                            ShareDialogComponent,
                            NodeSharedDirective
                        ],
                        entryComponents: [
                            ShareDialogComponent
                        ]
                    },] }
        ];
        return ContentNodeShareModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /**
     * @return {?}
     */
    function providers() {
        return [
            RatingService,
            ContentMetadataService,
            PropertyDescriptorsService,
            ContentMetadataConfigFactory,
            BasicPropertiesService,
            PropertyGroupTranslatorService,
            SearchQueryBuilderService,
            SearchFilterService,
            ContentNodeSelectorService,
            ContentNodeDialogService,
            DocumentListService,
            FolderActionsService,
            DocumentActionsService,
            NodeActionsService,
            CustomResourcesService,
            NodePermissionDialogService,
            NodePermissionService,
            TagService
        ];
    }
    var ContentModuleLazy = /** @class */ (function () {
        function ContentModuleLazy() {
        }
        ContentModuleLazy.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            adfCore.CoreModule.forChild(),
                            SocialModule,
                            TagModule,
                            common.CommonModule,
                            WebScriptModule,
                            forms.FormsModule,
                            forms.ReactiveFormsModule,
                            DialogModule,
                            SearchModule,
                            DocumentListModule,
                            UploadModule,
                            MaterialModule,
                            SitesDropdownModule,
                            BreadcrumbModule,
                            ContentNodeSelectorModule,
                            ContentNodeShareModule,
                            ContentMetadataModule,
                            FolderDirectiveModule,
                            ContentDirectiveModule,
                            PermissionManagerModule,
                            VersionManagerModule
                        ],
                        exports: [
                            SocialModule,
                            TagModule,
                            WebScriptModule,
                            DocumentListModule,
                            UploadModule,
                            SearchModule,
                            SitesDropdownModule,
                            BreadcrumbModule,
                            ContentNodeSelectorModule,
                            ContentNodeShareModule,
                            ContentMetadataModule,
                            DialogModule,
                            FolderDirectiveModule,
                            ContentDirectiveModule,
                            PermissionManagerModule,
                            VersionManagerModule
                        ]
                    },] }
        ];
        return ContentModuleLazy;
    }());
    var ɵ0$2 = {
        name: 'adf-content-services',
        source: 'assets/adf-content-services'
    };
    var ContentModule = /** @class */ (function () {
        function ContentModule() {
        }
        /**
         * @return {?}
         */
        ContentModule.forRoot = /**
         * @return {?}
         */
            function () {
                return {
                    ngModule: ContentModule,
                    providers: __spread(providers(), [
                        {
                            provide: adfCore.TRANSLATION_PROVIDER,
                            multi: true,
                            useValue: {
                                name: 'adf-content-services',
                                source: 'assets/adf-content-services'
                            }
                        }
                    ])
                };
            };
        /**
         * @return {?}
         */
        ContentModule.forChild = /**
         * @return {?}
         */
            function () {
                return {
                    ngModule: ContentModuleLazy
                };
            };
        ContentModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            adfCore.CoreModule.forChild(),
                            SocialModule,
                            TagModule,
                            common.CommonModule,
                            WebScriptModule,
                            forms.FormsModule,
                            forms.ReactiveFormsModule,
                            DialogModule,
                            SearchModule,
                            DocumentListModule,
                            UploadModule,
                            MaterialModule,
                            SitesDropdownModule,
                            BreadcrumbModule,
                            ContentNodeSelectorModule,
                            ContentNodeShareModule,
                            ContentMetadataModule,
                            FolderDirectiveModule,
                            ContentDirectiveModule,
                            PermissionManagerModule,
                            VersionManagerModule
                        ],
                        providers: __spread(providers(), [
                            {
                                provide: adfCore.TRANSLATION_PROVIDER,
                                multi: true,
                                useValue: ɵ0$2
                            }
                        ]),
                        exports: [
                            SocialModule,
                            TagModule,
                            WebScriptModule,
                            DocumentListModule,
                            UploadModule,
                            SearchModule,
                            SitesDropdownModule,
                            BreadcrumbModule,
                            ContentNodeSelectorModule,
                            ContentNodeShareModule,
                            ContentMetadataModule,
                            DialogModule,
                            FolderDirectiveModule,
                            ContentDirectiveModule,
                            PermissionManagerModule,
                            VersionManagerModule
                        ]
                    },] }
        ];
        return ContentModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    exports.NodeDownloadDirective = NodeDownloadDirective;
    exports.ContentDirectiveModule = ContentDirectiveModule;
    exports.RatingComponent = RatingComponent;
    exports.LikeComponent = LikeComponent;
    exports.RatingService = RatingService;
    exports.SocialModule = SocialModule;
    exports.TagActionsComponent = TagActionsComponent;
    exports.TagListComponent = TagListComponent;
    exports.TagNodeListComponent = TagNodeListComponent;
    exports.TagService = TagService;
    exports.TagModule = TagModule;
    exports.WebscriptComponent = WebscriptComponent;
    exports.WebScriptModule = WebScriptModule;
    exports.PaginationStrategy = PaginationStrategy;
    exports.DocumentListComponent = DocumentListComponent;
    exports.NodeEntityEvent = NodeEntityEvent;
    exports.NodeEntryEvent = NodeEntryEvent;
    exports.ContentColumnComponent = ContentColumnComponent;
    exports.ContentColumnListComponent = ContentColumnListComponent;
    exports.ContentActionComponent = ContentActionComponent;
    exports.ContentActionListComponent = ContentActionListComponent;
    exports.EmptyFolderContentDirective = EmptyFolderContentDirective;
    exports.NoPermissionContentDirective = NoPermissionContentDirective;
    exports.ShareDataTableAdapter = ShareDataTableAdapter;
    exports.ShareDataRow = ShareDataRow;
    exports.FolderActionsService = FolderActionsService;
    exports.DocumentActionsService = DocumentActionsService;
    exports.DocumentListService = DocumentListService;
    exports.NodeActionsService = NodeActionsService;
    exports.CustomResourcesService = CustomResourcesService;
    exports.ContentActionModel = ContentActionModel;
    exports.ContentActionTarget = ContentActionTarget;
    exports.DocumentActionModel = DocumentActionModel;
    exports.FolderActionModel = FolderActionModel;
    exports.NodePaging = NodePaging;
    exports.NodePagingList = NodePagingList;
    exports.NodeMinimalEntry = NodeMinimalEntry;
    exports.Pagination = Pagination;
    exports.NodeMinimal = NodeMinimal;
    exports.UserInfo = UserInfo;
    exports.ContentInfo = ContentInfo;
    exports.PathInfoEntity = PathInfoEntity;
    exports.PathElementEntity = PathElementEntity;
    exports.PermissionModel = PermissionModel;
    exports.PermissionStyleModel = PermissionStyleModel;
    exports.DocumentListModule = DocumentListModule;
    exports.UploadButtonComponent = UploadButtonComponent;
    exports.UploadVersionButtonComponent = UploadVersionButtonComponent;
    exports.FileUploadingDialogComponent = FileUploadingDialogComponent;
    exports.UploadDragAreaComponent = UploadDragAreaComponent;
    exports.FileUploadingListComponent = FileUploadingListComponent;
    exports.FileUploadingListRowComponent = FileUploadingListRowComponent;
    exports.UploadFilesEvent = UploadFilesEvent;
    exports.FileDraggableDirective = FileDraggableDirective;
    exports.UploadBase = UploadBase;
    exports.UploadModule = UploadModule;
    exports.SearchQueryBuilderService = SearchQueryBuilderService;
    exports.SearchComponent = SearchComponent;
    exports.SearchControlComponent = SearchControlComponent;
    exports.SEARCH_AUTOCOMPLETE_VALUE_ACCESSOR = SEARCH_AUTOCOMPLETE_VALUE_ACCESSOR;
    exports.SearchTriggerDirective = SearchTriggerDirective;
    exports.EmptySearchResultComponent = EmptySearchResultComponent;
    exports.SearchFilterComponent = SearchFilterComponent;
    exports.SearchFilterService = SearchFilterService;
    exports.SearchChipListComponent = SearchChipListComponent;
    exports.SearchSortingPickerComponent = SearchSortingPickerComponent;
    exports.ALFRESCO_SEARCH_DIRECTIVES = ALFRESCO_SEARCH_DIRECTIVES;
    exports.SearchModule = SearchModule;
    exports.Relations = Relations;
    exports.DropdownSitesComponent = DropdownSitesComponent;
    exports.SitesDropdownModule = SitesDropdownModule;
    exports.BreadcrumbComponent = BreadcrumbComponent;
    exports.DropdownBreadcrumbComponent = DropdownBreadcrumbComponent;
    exports.BreadcrumbModule = BreadcrumbModule;
    exports.VersionListComponent = VersionListComponent;
    exports.VersionManagerComponent = VersionManagerComponent;
    exports.VersionUploadComponent = VersionUploadComponent;
    exports.VersionManagerModule = VersionManagerModule;
    exports.NameLocationCellComponent = NameLocationCellComponent;
    exports.ContentNodeSelectorPanelComponent = ContentNodeSelectorPanelComponent;
    exports.ContentNodeSelectorComponent = ContentNodeSelectorComponent;
    exports.ContentNodeSelectorService = ContentNodeSelectorService;
    exports.ContentNodeDialogService = ContentNodeDialogService;
    exports.ContentNodeSelectorModule = ContentNodeSelectorModule;
    exports.DownloadZipDialogComponent = DownloadZipDialogComponent;
    exports.FolderDialogComponent = FolderDialogComponent;
    exports.NodeLockDialogComponent = NodeLockDialogComponent;
    exports.ConfirmDialogComponent = ConfirmDialogComponent;
    exports.DialogModule = DialogModule;
    exports.FolderCreateDirective = FolderCreateDirective;
    exports.FolderEditDirective = FolderEditDirective;
    exports.FolderDirectiveModule = FolderDirectiveModule;
    exports.ContentMetadataCardComponent = ContentMetadataCardComponent;
    exports.BasicPropertiesService = BasicPropertiesService;
    exports.ContentMetadataService = ContentMetadataService;
    exports.PropertyDescriptorsService = PropertyDescriptorsService;
    exports.PropertyGroupTranslatorService = PropertyGroupTranslatorService;
    exports.ContentMetadataConfigFactory = ContentMetadataConfigFactory;
    exports.IndifferentConfigService = IndifferentConfigService;
    exports.LayoutOrientedConfigService = LayoutOrientedConfigService;
    exports.AspectOrientedConfigService = AspectOrientedConfigService;
    exports.ContentMetadataModule = ContentMetadataModule;
    exports.PermissionListComponent = PermissionListComponent;
    exports.NoPermissionTemplateComponent = NoPermissionTemplateComponent;
    exports.InheritPermissionDirective = InheritPermissionDirective;
    exports.PermissionDisplayModel = PermissionDisplayModel;
    exports.NodePermissionDialogService = NodePermissionDialogService;
    exports.NodePermissionService = NodePermissionService;
    exports.AddPermissionPanelComponent = AddPermissionPanelComponent;
    exports.AddPermissionComponent = AddPermissionComponent;
    exports.AddPermissionDialogComponent = AddPermissionDialogComponent;
    exports.PermissionManagerModule = PermissionManagerModule;
    exports.ShareDialogComponent = ShareDialogComponent;
    exports.NodeSharedDirective = NodeSharedDirective;
    exports.ContentNodeShareModule = ContentNodeShareModule;
    exports.providers = providers;
    exports.ContentModuleLazy = ContentModuleLazy;
    exports.ContentModule = ContentModule;
    exports.ɵk = ContentMetadataComponent;
    exports.ɵc = NodeLockDirective;
    exports.ɵb = MaterialModule;
    exports.ɵa = modules;
    exports.ɵl = SearchPermissionConfigurationService;
    exports.ɵi = SearchCheckListComponent;
    exports.ɵj = SearchDateRangeComponent;
    exports.ɵh = SearchNumberRangeComponent;
    exports.ɵf = SearchRadioComponent;
    exports.ɵg = SearchSliderComponent;
    exports.ɵe = SearchTextComponent;
    exports.ɵd = SearchWidgetContainerComponent;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWRmLWNvbnRlbnQtc2VydmljZXMudW1kLmpzLm1hcCIsInNvdXJjZXMiOlsibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvZGlhbG9ncy9kb3dubG9hZC16aXAuZGlhbG9nLnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvZGlyZWN0aXZlcy9ub2RlLWRvd25sb2FkLmRpcmVjdGl2ZS50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL21hdGVyaWFsLm1vZHVsZS50cyIsbnVsbCwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvZG9jdW1lbnQtbGlzdC9zZXJ2aWNlcy9kb2N1bWVudC1saXN0LnNlcnZpY2UudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy9jb250ZW50LW5vZGUtc2VsZWN0b3IvY29udGVudC1ub2RlLXNlbGVjdG9yLmNvbXBvbmVudC50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL2RpYWxvZ3Mvbm9kZS1sb2NrLmRpYWxvZy50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL2NvbnRlbnQtbm9kZS1zZWxlY3Rvci9jb250ZW50LW5vZGUtZGlhbG9nLnNlcnZpY2UudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy9kaXJlY3RpdmVzL25vZGUtbG9jay5kaXJlY3RpdmUudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy9kaXJlY3RpdmVzL2NvbnRlbnQtZGlyZWN0aXZlLm1vZHVsZS50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL3NvY2lhbC9zZXJ2aWNlcy9yYXRpbmcuc2VydmljZS50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL3NvY2lhbC9yYXRpbmcuY29tcG9uZW50LnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvc29jaWFsL2xpa2UuY29tcG9uZW50LnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvc29jaWFsL3NvY2lhbC5tb2R1bGUudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy90YWcvc2VydmljZXMvdGFnLnNlcnZpY2UudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy90YWcvdGFnLWFjdGlvbnMuY29tcG9uZW50LnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvdGFnL3RhZy1saXN0LmNvbXBvbmVudC50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL3RhZy90YWctbm9kZS1saXN0LmNvbXBvbmVudC50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL3RhZy90YWcubW9kdWxlLnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvd2Vic2NyaXB0L3dlYnNjcmlwdC5jb21wb25lbnQudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy93ZWJzY3JpcHQvd2Vic2NyaXB0Lm1vZHVsZS50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL2RvY3VtZW50LWxpc3QvZGF0YS9zaGFyZS1kYXRhLXJvdy5tb2RlbC50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL2RvY3VtZW50LWxpc3QvZGF0YS9zaGFyZS1kYXRhdGFibGUtYWRhcHRlci50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL2RvY3VtZW50LWxpc3QvbW9kZWxzL3ByZXNldC5tb2RlbC50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL2RvY3VtZW50LWxpc3QvbW9kZWxzL2NvbnRlbnQtYWN0aW9uLm1vZGVsLnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvZG9jdW1lbnQtbGlzdC9jb21wb25lbnRzL25vZGUuZXZlbnQudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy9kb2N1bWVudC1saXN0L3NlcnZpY2VzL2N1c3RvbS1yZXNvdXJjZXMuc2VydmljZS50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL2RvY3VtZW50LWxpc3QvY29tcG9uZW50cy9kb2N1bWVudC1saXN0LmNvbXBvbmVudC50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL2RvY3VtZW50LWxpc3QvY29tcG9uZW50cy9jb250ZW50LWNvbHVtbi9jb250ZW50LWNvbHVtbi1saXN0LmNvbXBvbmVudC50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL2RvY3VtZW50LWxpc3QvY29tcG9uZW50cy9jb250ZW50LWNvbHVtbi9jb250ZW50LWNvbHVtbi5jb21wb25lbnQudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy9kb2N1bWVudC1saXN0L21vZGVscy9wZXJtaXNzaW9ucy5tb2RlbC50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL2RvY3VtZW50LWxpc3Qvc2VydmljZXMvbm9kZS1hY3Rpb25zLnNlcnZpY2UudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy9kb2N1bWVudC1saXN0L3NlcnZpY2VzL2RvY3VtZW50LWFjdGlvbnMuc2VydmljZS50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL2RvY3VtZW50LWxpc3Qvc2VydmljZXMvZm9sZGVyLWFjdGlvbnMuc2VydmljZS50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL2RvY3VtZW50LWxpc3QvY29tcG9uZW50cy9jb250ZW50LWFjdGlvbi9jb250ZW50LWFjdGlvbi1saXN0LmNvbXBvbmVudC50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL2RvY3VtZW50LWxpc3QvY29tcG9uZW50cy9jb250ZW50LWFjdGlvbi9jb250ZW50LWFjdGlvbi5jb21wb25lbnQudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy9kb2N1bWVudC1saXN0L2NvbXBvbmVudHMvZW1wdHktZm9sZGVyL2VtcHR5LWZvbGRlci1jb250ZW50LmRpcmVjdGl2ZS50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL2RvY3VtZW50LWxpc3QvY29tcG9uZW50cy9uby1wZXJtaXNzaW9uL25vLXBlcm1pc3Npb24tY29udGVudC5kaXJlY3RpdmUudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy9kb2N1bWVudC1saXN0L21vZGVscy9kb2N1bWVudC1saWJyYXJ5Lm1vZGVsLnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvZG9jdW1lbnQtbGlzdC9tb2RlbHMvcGVybWlzc2lvbnMtc3R5bGUubW9kZWwudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy91cGxvYWQvY29tcG9uZW50cy9maWxlLXVwbG9hZGluZy1kaWFsb2cuY29tcG9uZW50LnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvdXBsb2FkL2NvbXBvbmVudHMvZmlsZS11cGxvYWRpbmctbGlzdC1yb3cuY29tcG9uZW50LnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvdXBsb2FkL2NvbXBvbmVudHMvZmlsZS11cGxvYWRpbmctbGlzdC5jb21wb25lbnQudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy91cGxvYWQvY29tcG9uZW50cy91cGxvYWQtZmlsZXMuZXZlbnQudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy91cGxvYWQvY29tcG9uZW50cy9iYXNlLXVwbG9hZC91cGxvYWQtYmFzZS50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL3VwbG9hZC9jb21wb25lbnRzL3VwbG9hZC1idXR0b24uY29tcG9uZW50LnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvdXBsb2FkL2NvbXBvbmVudHMvdXBsb2FkLXZlcnNpb24tYnV0dG9uLmNvbXBvbmVudC50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL3VwbG9hZC9jb21wb25lbnRzL3VwbG9hZC1kcmFnLWFyZWEuY29tcG9uZW50LnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvdXBsb2FkL2RpcmVjdGl2ZXMvZmlsZS1kcmFnZ2FibGUuZGlyZWN0aXZlLnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvdXBsb2FkL3VwbG9hZC5tb2R1bGUudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy9kb2N1bWVudC1saXN0L2RvY3VtZW50LWxpc3QubW9kdWxlLnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvc2VhcmNoL3NlYXJjaC1xdWVyeS1idWlsZGVyLnNlcnZpY2UudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy9zZWFyY2gvY29tcG9uZW50cy9zZWFyY2guY29tcG9uZW50LnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvc2VhcmNoL2NvbXBvbmVudHMvZW1wdHktc2VhcmNoLXJlc3VsdC5jb21wb25lbnQudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy9zZWFyY2gvY29tcG9uZW50cy9zZWFyY2gtY29udHJvbC5jb21wb25lbnQudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy9zZWFyY2gvY29tcG9uZW50cy9zZWFyY2gtdHJpZ2dlci5kaXJlY3RpdmUudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy9zZWFyY2gvY29tcG9uZW50cy9zZWFyY2gtZmlsdGVyL21vZGVscy9zZWFyY2gtZmlsdGVyLWxpc3QubW9kZWwudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy9zZWFyY2gvY29tcG9uZW50cy9zZWFyY2gtZmlsdGVyL21vZGVscy9yZXNwb25zZS1mYWNldC1xdWVyeS1saXN0Lm1vZGVsLnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvc2VhcmNoL2NvbXBvbmVudHMvc2VhcmNoLWZpbHRlci9zZWFyY2gtZmlsdGVyLmNvbXBvbmVudC50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL3NlYXJjaC9jb21wb25lbnRzL3NlYXJjaC10ZXh0L3NlYXJjaC10ZXh0LmNvbXBvbmVudC50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL3NlYXJjaC9jb21wb25lbnRzL3NlYXJjaC1yYWRpby9zZWFyY2gtcmFkaW8uY29tcG9uZW50LnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvc2VhcmNoL2NvbXBvbmVudHMvc2VhcmNoLXNsaWRlci9zZWFyY2gtc2xpZGVyLmNvbXBvbmVudC50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL3NlYXJjaC9mb3Jtcy9saXZlLWVycm9yLXN0YXRlLW1hdGNoZXIudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy9zZWFyY2gvY29tcG9uZW50cy9zZWFyY2gtbnVtYmVyLXJhbmdlL3NlYXJjaC1udW1iZXItcmFuZ2UuY29tcG9uZW50LnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvc2VhcmNoL2NvbXBvbmVudHMvc2VhcmNoLWNoZWNrLWxpc3Qvc2VhcmNoLWNoZWNrLWxpc3QuY29tcG9uZW50LnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvc2VhcmNoL2NvbXBvbmVudHMvc2VhcmNoLWRhdGUtcmFuZ2Uvc2VhcmNoLWRhdGUtcmFuZ2UuY29tcG9uZW50LnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvc2VhcmNoL2NvbXBvbmVudHMvc2VhcmNoLWZpbHRlci9zZWFyY2gtZmlsdGVyLnNlcnZpY2UudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy9zZWFyY2gvY29tcG9uZW50cy9zZWFyY2gtY2hpcC1saXN0L3NlYXJjaC1jaGlwLWxpc3QuY29tcG9uZW50LnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvc2VhcmNoL2NvbXBvbmVudHMvc2VhcmNoLXNvcnRpbmctcGlja2VyL3NlYXJjaC1zb3J0aW5nLXBpY2tlci5jb21wb25lbnQudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy9zZWFyY2gvY29tcG9uZW50cy9zZWFyY2gtd2lkZ2V0LWNvbnRhaW5lci9zZWFyY2gtd2lkZ2V0LWNvbnRhaW5lci5jb21wb25lbnQudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy9zZWFyY2gvc2VhcmNoLm1vZHVsZS50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL3NpdGUtZHJvcGRvd24vc2l0ZXMtZHJvcGRvd24uY29tcG9uZW50LnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvc2l0ZS1kcm9wZG93bi9zaXRlcy1kcm9wZG93bi5tb2R1bGUudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy9icmVhZGNydW1iL2JyZWFkY3J1bWIuY29tcG9uZW50LnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvYnJlYWRjcnVtYi9kcm9wZG93bi1icmVhZGNydW1iLmNvbXBvbmVudC50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL2JyZWFkY3J1bWIvYnJlYWRjcnVtYi5tb2R1bGUudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy9kaWFsb2dzL2NvbmZpcm0uZGlhbG9nLnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvdmVyc2lvbi1tYW5hZ2VyL3ZlcnNpb24tbGlzdC5jb21wb25lbnQudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy92ZXJzaW9uLW1hbmFnZXIvdmVyc2lvbi1tYW5hZ2VyLmNvbXBvbmVudC50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL3ZlcnNpb24tbWFuYWdlci92ZXJzaW9uLXVwbG9hZC5jb21wb25lbnQudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy92ZXJzaW9uLW1hbmFnZXIvdmVyc2lvbi1tYW5hZ2VyLm1vZHVsZS50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL2NvbnRlbnQtbm9kZS1zZWxlY3Rvci9uYW1lLWxvY2F0aW9uLWNlbGwvbmFtZS1sb2NhdGlvbi1jZWxsLmNvbXBvbmVudC50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL2NvbnRlbnQtbm9kZS1zZWxlY3Rvci9jb250ZW50LW5vZGUtc2VsZWN0b3Iuc2VydmljZS50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL2NvbnRlbnQtbm9kZS1zZWxlY3Rvci9jb250ZW50LW5vZGUtc2VsZWN0b3ItcGFuZWwuY29tcG9uZW50LnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvY29udGVudC1ub2RlLXNlbGVjdG9yL2NvbnRlbnQtbm9kZS1zZWxlY3Rvci5tb2R1bGUudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy9kaWFsb2dzL2ZvbGRlci1uYW1lLnZhbGlkYXRvcnMudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy9kaWFsb2dzL2ZvbGRlci5kaWFsb2cudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy9kaWFsb2dzL2RpYWxvZy5tb2R1bGUudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy9mb2xkZXItZGlyZWN0aXZlL2ZvbGRlci1jcmVhdGUuZGlyZWN0aXZlLnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvZm9sZGVyLWRpcmVjdGl2ZS9mb2xkZXItZWRpdC5kaXJlY3RpdmUudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy9mb2xkZXItZGlyZWN0aXZlL2ZvbGRlci1kaXJlY3RpdmUubW9kdWxlLnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvY29udGVudC1tZXRhZGF0YS9jb21wb25lbnRzL2NvbnRlbnQtbWV0YWRhdGEtY2FyZC9jb250ZW50LW1ldGFkYXRhLWNhcmQuY29tcG9uZW50LnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvY29udGVudC1tZXRhZGF0YS9zZXJ2aWNlcy9iYXNpYy1wcm9wZXJ0aWVzLnNlcnZpY2UudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy9jb250ZW50LW1ldGFkYXRhL3NlcnZpY2VzL3Byb3BlcnR5LWdyb3Vwcy10cmFuc2xhdG9yLnNlcnZpY2UudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy9jb250ZW50LW1ldGFkYXRhL3NlcnZpY2VzL2NvbmZpZy9wcm9wZXJ0eS1ncm91cC1yZWFkZXIudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy9jb250ZW50LW1ldGFkYXRhL3NlcnZpY2VzL2NvbmZpZy9hc3BlY3Qtb3JpZW50ZWQtY29uZmlnLnNlcnZpY2UudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy9jb250ZW50LW1ldGFkYXRhL3NlcnZpY2VzL2NvbmZpZy9pbmRpZmZlcmVudC1jb25maWcuc2VydmljZS50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL2NvbnRlbnQtbWV0YWRhdGEvc2VydmljZXMvY29uZmlnL2xheW91dC1vcmllbnRlZC1jb25maWcuc2VydmljZS50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL2NvbnRlbnQtbWV0YWRhdGEvc2VydmljZXMvY29uZmlnL2NvbnRlbnQtbWV0YWRhdGEtY29uZmlnLmZhY3RvcnkudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy9jb250ZW50LW1ldGFkYXRhL3NlcnZpY2VzL3Byb3BlcnR5LWRlc2NyaXB0b3JzLnNlcnZpY2UudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy9jb250ZW50LW1ldGFkYXRhL3NlcnZpY2VzL2NvbnRlbnQtbWV0YWRhdGEuc2VydmljZS50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL2NvbnRlbnQtbWV0YWRhdGEvY29tcG9uZW50cy9jb250ZW50LW1ldGFkYXRhL2NvbnRlbnQtbWV0YWRhdGEuY29tcG9uZW50LnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvY29udGVudC1tZXRhZGF0YS9jb250ZW50LW1ldGFkYXRhLm1vZHVsZS50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL3Blcm1pc3Npb24tbWFuYWdlci9tb2RlbHMvcGVybWlzc2lvbi5tb2RlbC50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL3Blcm1pc3Npb24tbWFuYWdlci9zZXJ2aWNlcy9ub2RlLXBlcm1pc3Npb24uc2VydmljZS50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL3Blcm1pc3Npb24tbWFuYWdlci9jb21wb25lbnRzL3Blcm1pc3Npb24tbGlzdC9wZXJtaXNzaW9uLWxpc3QuY29tcG9uZW50LnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvcGVybWlzc2lvbi1tYW5hZ2VyL2NvbXBvbmVudHMvcGVybWlzc2lvbi1saXN0L25vLXBlcm1pc3Npb24uY29tcG9uZW50LnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvcGVybWlzc2lvbi1tYW5hZ2VyL2NvbXBvbmVudHMvaW5oZXJpdGVkLWJ1dHRvbi5kaXJlY3RpdmUudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy9wZXJtaXNzaW9uLW1hbmFnZXIvY29tcG9uZW50cy9hZGQtcGVybWlzc2lvbi9hZGQtcGVybWlzc2lvbi1kaWFsb2cuY29tcG9uZW50LnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvcGVybWlzc2lvbi1tYW5hZ2VyL3NlcnZpY2VzL25vZGUtcGVybWlzc2lvbi1kaWFsb2cuc2VydmljZS50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL3Blcm1pc3Npb24tbWFuYWdlci9jb21wb25lbnRzL2FkZC1wZXJtaXNzaW9uL3NlYXJjaC1jb25maWctcGVybWlzc2lvbi5zZXJ2aWNlLnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvcGVybWlzc2lvbi1tYW5hZ2VyL2NvbXBvbmVudHMvYWRkLXBlcm1pc3Npb24vYWRkLXBlcm1pc3Npb24tcGFuZWwuY29tcG9uZW50LnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvcGVybWlzc2lvbi1tYW5hZ2VyL2NvbXBvbmVudHMvYWRkLXBlcm1pc3Npb24vYWRkLXBlcm1pc3Npb24uY29tcG9uZW50LnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvcGVybWlzc2lvbi1tYW5hZ2VyL3Blcm1pc3Npb24tbWFuYWdlci5tb2R1bGUudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy9jb250ZW50LW5vZGUtc2hhcmUvY29udGVudC1ub2RlLXNoYXJlLmRpYWxvZy50cyIsIm5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzL2NvbnRlbnQtbm9kZS1zaGFyZS9jb250ZW50LW5vZGUtc2hhcmUuZGlyZWN0aXZlLnRzIiwibmc6Ly9AYWxmcmVzY28vYWRmLWNvbnRlbnQtc2VydmljZXMvY29udGVudC1ub2RlLXNoYXJlL2NvbnRlbnQtbm9kZS1zaGFyZS5tb2R1bGUudHMiLCJuZzovL0BhbGZyZXNjby9hZGYtY29udGVudC1zZXJ2aWNlcy9jb250ZW50Lm1vZHVsZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQsIEluamVjdCwgT25Jbml0LCBWaWV3RW5jYXBzdWxhdGlvbiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTUFUX0RJQUxPR19EQVRBLCBNYXREaWFsb2dSZWYgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbCc7XG5pbXBvcnQgeyBEb3dubG9hZEVudHJ5LCBNaW5pbWFsTm9kZUVudGl0eSB9IGZyb20gJ2FsZnJlc2NvLWpzLWFwaSc7XG5pbXBvcnQgeyBMb2dTZXJ2aWNlLCBBbGZyZXNjb0FwaVNlcnZpY2UgfSBmcm9tICdAYWxmcmVzY28vYWRmLWNvcmUnO1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ2FkZi1kb3dubG9hZC16aXAtZGlhbG9nJyxcbiAgICB0ZW1wbGF0ZVVybDogJy4vZG93bmxvYWQtemlwLmRpYWxvZy5odG1sJyxcbiAgICBzdHlsZVVybHM6IFsnLi9kb3dubG9hZC16aXAuZGlhbG9nLnNjc3MnXSxcbiAgICBob3N0OiB7ICdjbGFzcyc6ICdhZGYtZG93bmxvYWQtemlwLWRpYWxvZycgfSxcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lXG59KVxuZXhwb3J0IGNsYXNzIERvd25sb2FkWmlwRGlhbG9nQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcblxuICAgIC8vIGZsYWcgZm9yIGFzeW5jIHRocmVhZHNcbiAgICBwcml2YXRlIGNhbmNlbGxlZCA9IGZhbHNlO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBhcGlTZXJ2aWNlOiBBbGZyZXNjb0FwaVNlcnZpY2UsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSBkaWFsb2dSZWY6IE1hdERpYWxvZ1JlZjxEb3dubG9hZFppcERpYWxvZ0NvbXBvbmVudD4sXG4gICAgICAgICAgICAgICAgQEluamVjdChNQVRfRElBTE9HX0RBVEEpIHByaXZhdGUgZGF0YTogYW55LFxuICAgICAgICAgICAgICAgIHByaXZhdGUgbG9nU2VydmljZTogTG9nU2VydmljZSkge1xuICAgIH1cblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICBpZiAodGhpcy5kYXRhICYmIHRoaXMuZGF0YS5ub2RlSWRzICYmIHRoaXMuZGF0YS5ub2RlSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5jYW5jZWxsZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRvd25sb2FkWmlwKHRoaXMuZGF0YS5ub2RlSWRzKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dTZXJ2aWNlLmxvZygnQ2FuY2VsbGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjYW5jZWxEb3dubG9hZCgpIHtcbiAgICAgICAgdGhpcy5jYW5jZWxsZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmRpYWxvZ1JlZi5jbG9zZShmYWxzZSk7XG4gICAgfVxuXG4gICAgZG93bmxvYWRaaXAobm9kZUlkczogc3RyaW5nW10pIHtcbiAgICAgICAgaWYgKG5vZGVJZHMgJiYgbm9kZUlkcy5sZW5ndGggPiAwKSB7XG5cbiAgICAgICAgICAgIGNvbnN0IHByb21pc2U6IGFueSA9IHRoaXMuYXBpU2VydmljZS5nZXRJbnN0YW5jZSgpLmNvcmUuZG93bmxvYWRzQXBpLmNyZWF0ZURvd25sb2FkKHsgbm9kZUlkcyB9KTtcblxuICAgICAgICAgICAgcHJvbWlzZS5vbigncHJvZ3Jlc3MnLCBwcm9ncmVzcyA9PiB0aGlzLmxvZ1NlcnZpY2UubG9nKCdQcm9ncmVzcycsIHByb2dyZXNzKSk7XG4gICAgICAgICAgICBwcm9taXNlLm9uKCdlcnJvcicsIGVycm9yID0+IHRoaXMubG9nU2VydmljZS5lcnJvcignRXJyb3InLCBlcnJvcikpO1xuICAgICAgICAgICAgcHJvbWlzZS5vbignYWJvcnQnLCBkYXRhID0+IHRoaXMubG9nU2VydmljZS5sb2coJ0Fib3J0JywgZGF0YSkpO1xuXG4gICAgICAgICAgICBwcm9taXNlLm9uKCdzdWNjZXNzJywgKGRhdGE6IERvd25sb2FkRW50cnkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmVudHJ5ICYmIGRhdGEuZW50cnkuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXJsID0gdGhpcy5hcGlTZXJ2aWNlLmdldEluc3RhbmNlKCkuY29udGVudC5nZXRDb250ZW50VXJsKGRhdGEuZW50cnkuaWQsIHRydWUpO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBpU2VydmljZS5nZXRJbnN0YW5jZSgpLmNvcmUubm9kZXNBcGkuZ2V0Tm9kZShkYXRhLmVudHJ5LmlkKS50aGVuKChkb3dubG9hZE5vZGU6IE1pbmltYWxOb2RlRW50aXR5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ1NlcnZpY2UubG9nKGRvd25sb2FkTm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlTmFtZSA9IGRvd25sb2FkTm9kZS5lbnRyeS5uYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53YWl0QW5kRG93bmxvYWQoZGF0YS5lbnRyeS5pZCwgdXJsLCBmaWxlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgd2FpdEFuZERvd25sb2FkKGRvd25sb2FkSWQ6IHN0cmluZywgdXJsOiBzdHJpbmcsIGZpbGVOYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKHRoaXMuY2FuY2VsbGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmFwaVNlcnZpY2UuZ2V0SW5zdGFuY2UoKS5jb3JlLmRvd25sb2Fkc0FwaS5nZXREb3dubG9hZChkb3dubG9hZElkKS50aGVuKChkb3dubG9hZEVudHJ5OiBEb3dubG9hZEVudHJ5KSA9PiB7XG4gICAgICAgICAgICBpZiAoZG93bmxvYWRFbnRyeS5lbnRyeSkge1xuICAgICAgICAgICAgICAgIGlmIChkb3dubG9hZEVudHJ5LmVudHJ5LnN0YXR1cyA9PT0gJ0RPTkUnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZG93bmxvYWQodXJsLCBmaWxlTmFtZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndhaXRBbmREb3dubG9hZChkb3dubG9hZElkLCB1cmwsIGZpbGVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgMTAwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBkb3dubG9hZCh1cmw6IHN0cmluZywgZmlsZU5hbWU6IHN0cmluZykge1xuICAgICAgICBpZiAodXJsICYmIGZpbGVOYW1lKSB7XG4gICAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuXG4gICAgICAgICAgICBsaW5rLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICBsaW5rLmRvd25sb2FkID0gZmlsZU5hbWU7XG4gICAgICAgICAgICBsaW5rLmhyZWYgPSB1cmw7XG5cbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7XG4gICAgICAgICAgICBsaW5rLmNsaWNrKCk7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGlhbG9nUmVmLmNsb3NlKHRydWUpO1xuICAgIH1cbn1cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IERpcmVjdGl2ZSwgSW5wdXQsIEhvc3RMaXN0ZW5lciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTWF0RGlhbG9nIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwnO1xuaW1wb3J0IHsgTWluaW1hbE5vZGVFbnRpdHkgfSBmcm9tICdhbGZyZXNjby1qcy1hcGknO1xuaW1wb3J0IHsgQWxmcmVzY29BcGlTZXJ2aWNlIH0gZnJvbSAnQGFsZnJlc2NvL2FkZi1jb3JlJztcblxuaW1wb3J0IHsgRG93bmxvYWRaaXBEaWFsb2dDb21wb25lbnQgfSBmcm9tICcuLi9kaWFsb2dzL2Rvd25sb2FkLXppcC5kaWFsb2cnO1xuXG5ARGlyZWN0aXZlKHtcbiAgICBzZWxlY3RvcjogJ1thZGZOb2RlRG93bmxvYWRdJ1xufSlcbmV4cG9ydCBjbGFzcyBOb2RlRG93bmxvYWREaXJlY3RpdmUge1xuXG4gICAgLyoqIE5vZGVzIHRvIGRvd25sb2FkLiAqL1xuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1pbnB1dC1yZW5hbWVcbiAgICBASW5wdXQoJ2FkZk5vZGVEb3dubG9hZCcpXG4gICAgbm9kZXM6IE1pbmltYWxOb2RlRW50aXR5W107XG5cbiAgICBASG9zdExpc3RlbmVyKCdjbGljaycpXG4gICAgb25DbGljaygpIHtcbiAgICAgICAgdGhpcy5kb3dubG9hZE5vZGVzKHRoaXMubm9kZXMpO1xuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGFwaVNlcnZpY2U6IEFsZnJlc2NvQXBpU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBkaWFsb2c6IE1hdERpYWxvZykge1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERvd25sb2FkcyBtdWx0aXBsZSBzZWxlY3RlZCBub2Rlcy5cbiAgICAgKiBQYWNrcyByZXN1bHQgaW50byBhIC5aSVAgYXJjaGl2ZSBpZiB0aGVyZSBpcyBtb3JlIHRoYW4gb25lIG5vZGUgc2VsZWN0ZWQuXG4gICAgICogQHBhcmFtIHNlbGVjdGlvbiBNdWx0aXBsZSBzZWxlY3RlZCBub2RlcyB0byBkb3dubG9hZFxuICAgICAqL1xuICAgIGRvd25sb2FkTm9kZXMoc2VsZWN0aW9uOiBBcnJheTxNaW5pbWFsTm9kZUVudGl0eT4pIHtcbiAgICAgICAgaWYgKCFzZWxlY3Rpb24gfHwgc2VsZWN0aW9uLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGVjdGlvbi5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIHRoaXMuZG93bmxvYWROb2RlKHNlbGVjdGlvblswXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRvd25sb2FkWmlwKHNlbGVjdGlvbik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEb3dubG9hZHMgYSBzaW5nbGUgbm9kZS5cbiAgICAgKiBQYWNrcyByZXN1bHQgaW50byBhIC5aSVAgYXJjaGl2ZSBpcyB0aGUgbm9kZSBpcyBhIEZvbGRlci5cbiAgICAgKiBAcGFyYW0gbm9kZSBOb2RlIHRvIGRvd25sb2FkXG4gICAgICovXG4gICAgZG93bmxvYWROb2RlKG5vZGU6IE1pbmltYWxOb2RlRW50aXR5KSB7XG4gICAgICAgIGlmIChub2RlICYmIG5vZGUuZW50cnkpIHtcbiAgICAgICAgICAgIGNvbnN0IGVudHJ5ID0gbm9kZS5lbnRyeTtcblxuICAgICAgICAgICAgaWYgKGVudHJ5LmlzRmlsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZG93bmxvYWRGaWxlKG5vZGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZW50cnkuaXNGb2xkZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRvd25sb2FkWmlwKFtub2RlXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZXJlJ3Mgbm9kZUlkIGZvciBTaGFyZWQgRmlsZXNcbiAgICAgICAgICAgIGlmICghZW50cnkuaXNGaWxlICYmICFlbnRyeS5pc0ZvbGRlciAmJiAoPGFueT4gZW50cnkpLm5vZGVJZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZG93bmxvYWRGaWxlKG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBkb3dubG9hZEZpbGUobm9kZTogTWluaW1hbE5vZGVFbnRpdHkpIHtcbiAgICAgICAgaWYgKG5vZGUgJiYgbm9kZS5lbnRyeSkge1xuICAgICAgICAgICAgY29uc3QgY29udGVudEFwaSA9IHRoaXMuYXBpU2VydmljZS5nZXRJbnN0YW5jZSgpLmNvbnRlbnQ7XG4gICAgICAgICAgICAvLyBub2RlSWQgZm9yIFNoYXJlZCBub2RlXG4gICAgICAgICAgICBjb25zdCBpZCA9ICg8YW55PiBub2RlLmVudHJ5KS5ub2RlSWQgfHwgbm9kZS5lbnRyeS5pZDtcblxuICAgICAgICAgICAgY29uc3QgdXJsID0gY29udGVudEFwaS5nZXRDb250ZW50VXJsKGlkLCB0cnVlKTtcbiAgICAgICAgICAgIGNvbnN0IGZpbGVOYW1lID0gbm9kZS5lbnRyeS5uYW1lO1xuXG4gICAgICAgICAgICB0aGlzLmRvd25sb2FkKHVybCwgZmlsZU5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBkb3dubG9hZFppcChzZWxlY3Rpb246IEFycmF5PE1pbmltYWxOb2RlRW50aXR5Pikge1xuICAgICAgICBpZiAoc2VsZWN0aW9uICYmIHNlbGVjdGlvbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyBub2RlSWQgZm9yIFNoYXJlZCBub2RlXG4gICAgICAgICAgICBjb25zdCBub2RlSWRzID0gc2VsZWN0aW9uLm1hcCgobm9kZTogYW55KSA9PiAobm9kZS5lbnRyeS5ub2RlSWQgfHwgbm9kZS5lbnRyeS5pZCkpO1xuXG4gICAgICAgICAgICB0aGlzLmRpYWxvZy5vcGVuKERvd25sb2FkWmlwRGlhbG9nQ29tcG9uZW50LCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6ICc2MDBweCcsXG4gICAgICAgICAgICAgICAgZGlzYWJsZUNsb3NlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZUlkc1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBkb3dubG9hZCh1cmw6IHN0cmluZywgZmlsZU5hbWU6IHN0cmluZykge1xuICAgICAgICBpZiAodXJsICYmIGZpbGVOYW1lKSB7XG4gICAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuXG4gICAgICAgICAgICBsaW5rLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICBsaW5rLmRvd25sb2FkID0gZmlsZU5hbWU7XG4gICAgICAgICAgICBsaW5rLmhyZWYgPSB1cmw7XG5cbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7XG4gICAgICAgICAgICBsaW5rLmNsaWNrKCk7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7XG4gICAgTWF0QnV0dG9uTW9kdWxlLFxuICAgIE1hdENoaXBzTW9kdWxlLFxuICAgIE1hdERpYWxvZ01vZHVsZSxcbiAgICBNYXRJY29uTW9kdWxlLFxuICAgIE1hdENhcmRNb2R1bGUsXG4gICAgTWF0SW5wdXRNb2R1bGUsXG4gICAgTWF0TGlzdE1vZHVsZSxcbiAgICBNYXRNZW51TW9kdWxlLFxuICAgIE1hdE9wdGlvbk1vZHVsZSxcbiAgICBNYXRQcm9ncmVzc0Jhck1vZHVsZSxcbiAgICBNYXRQcm9ncmVzc1NwaW5uZXJNb2R1bGUsXG4gICAgTWF0UmlwcGxlTW9kdWxlLFxuICAgIE1hdEV4cGFuc2lvbk1vZHVsZSxcbiAgICBNYXRTZWxlY3RNb2R1bGUsXG4gICAgTWF0Q2hlY2tib3hNb2R1bGUsXG4gICAgTWF0RGF0ZXBpY2tlck1vZHVsZSxcbiAgICBNYXRTbGlkZVRvZ2dsZU1vZHVsZSxcbiAgICBNYXRSYWRpb01vZHVsZSxcbiAgICBNYXRTbGlkZXJNb2R1bGVcbn0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwnO1xuXG5leHBvcnQgZnVuY3Rpb24gbW9kdWxlcygpIHtcbiAgICByZXR1cm4gW1xuICAgICAgICBNYXRCdXR0b25Nb2R1bGUsXG4gICAgICAgIE1hdENoaXBzTW9kdWxlLFxuICAgICAgICBNYXREaWFsb2dNb2R1bGUsXG4gICAgICAgIE1hdEljb25Nb2R1bGUsXG4gICAgICAgIE1hdENhcmRNb2R1bGUsXG4gICAgICAgIE1hdElucHV0TW9kdWxlLFxuICAgICAgICBNYXRMaXN0TW9kdWxlLFxuICAgICAgICBNYXRQcm9ncmVzc1NwaW5uZXJNb2R1bGUsXG4gICAgICAgIE1hdFByb2dyZXNzQmFyTW9kdWxlLFxuICAgICAgICBNYXRSaXBwbGVNb2R1bGUsXG4gICAgICAgIE1hdE1lbnVNb2R1bGUsXG4gICAgICAgIE1hdE9wdGlvbk1vZHVsZSxcbiAgICAgICAgTWF0RXhwYW5zaW9uTW9kdWxlLFxuICAgICAgICBNYXRTZWxlY3RNb2R1bGUsXG4gICAgICAgIE1hdENoZWNrYm94TW9kdWxlLFxuICAgICAgICBNYXREYXRlcGlja2VyTW9kdWxlLFxuICAgICAgICBNYXRTbGlkZVRvZ2dsZU1vZHVsZSxcbiAgICAgICAgTWF0UmFkaW9Nb2R1bGUsXG4gICAgICAgIE1hdFNsaWRlck1vZHVsZVxuICAgIF07XG59XG5cbkBOZ01vZHVsZSh7XG4gICAgaW1wb3J0czogbW9kdWxlcygpLFxuICAgIGV4cG9ydHM6IG1vZHVsZXMoKVxufSlcbmV4cG9ydCBjbGFzcyBNYXRlcmlhbE1vZHVsZSB7XG59XG4iLCIvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxyXG50aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZVxyXG5MaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG5cclxuVEhJUyBDT0RFIElTIFBST1ZJREVEIE9OIEFOICpBUyBJUyogQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG5LSU5ELCBFSVRIRVIgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgV0lUSE9VVCBMSU1JVEFUSU9OIEFOWSBJTVBMSUVEXHJcbldBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBUSVRMRSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsXHJcbk1FUkNIQU5UQUJMSVRZIE9SIE5PTi1JTkZSSU5HRU1FTlQuXHJcblxyXG5TZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnNcclxuYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDApXHJcbiAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUocmVzdWx0LnZhbHVlKTsgfSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgZXhwb3J0cykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSByZXN1bHRba10gPSBtb2Rba107XHJcbiAgICByZXN1bHQuZGVmYXVsdCA9IG1vZDtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gICAgQWxmcmVzY29BcGlTZXJ2aWNlLCBBdXRoZW50aWNhdGlvblNlcnZpY2UsIENvbnRlbnRTZXJ2aWNlLCBMb2dTZXJ2aWNlLFxuICAgIFBlcm1pc3Npb25zRW51bSwgVGh1bWJuYWlsU2VydmljZVxufSBmcm9tICdAYWxmcmVzY28vYWRmLWNvcmUnO1xuXG5pbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBNaW5pbWFsTm9kZUVudGl0eSwgTWluaW1hbE5vZGVFbnRyeUVudGl0eSwgIE5vZGVFbnRyeSwgTm9kZVBhZ2luZyB9IGZyb20gJ2FsZnJlc2NvLWpzLWFwaSc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBmcm9tLCB0aHJvd0Vycm9yIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBjYXRjaEVycm9yIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgRG9jdW1lbnRMaXN0U2VydmljZSB7XG5cbiAgICBzdGF0aWMgUk9PVF9JRCA9ICctcm9vdC0nO1xuXG4gICAgY29uc3RydWN0b3IoYXV0aFNlcnZpY2U6IEF1dGhlbnRpY2F0aW9uU2VydmljZSxcbiAgICAgICAgICAgICAgICBwcml2YXRlIGNvbnRlbnRTZXJ2aWNlOiBDb250ZW50U2VydmljZSxcbiAgICAgICAgICAgICAgICBwcml2YXRlIGFwaVNlcnZpY2U6IEFsZnJlc2NvQXBpU2VydmljZSxcbiAgICAgICAgICAgICAgICBwcml2YXRlIGxvZ1NlcnZpY2U6IExvZ1NlcnZpY2UsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSB0aHVtYm5haWxTZXJ2aWNlOiBUaHVtYm5haWxTZXJ2aWNlKSB7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXROb2Rlc1Byb21pc2UoZm9sZGVyOiBzdHJpbmcsIG9wdHM/OiBhbnksIGluY2x1ZGVGaWVsZHM6IHN0cmluZ1tdID0gW10pOiBQcm9taXNlPE5vZGVQYWdpbmc+IHtcblxuICAgICAgICBsZXQgcm9vdE5vZGVJZCA9IERvY3VtZW50TGlzdFNlcnZpY2UuUk9PVF9JRDtcbiAgICAgICAgaWYgKG9wdHMgJiYgb3B0cy5yb290Rm9sZGVySWQpIHtcbiAgICAgICAgICAgIHJvb3ROb2RlSWQgPSBvcHRzLnJvb3RGb2xkZXJJZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBpbmNsdWRlRmllbGRzUmVxdWVzdCA9IFsncGF0aCcsICdwcm9wZXJ0aWVzJywgJ2FsbG93YWJsZU9wZXJhdGlvbnMnLCAncGVybWlzc2lvbnMnLCAnYXNwZWN0TmFtZXMnLCAuLi5pbmNsdWRlRmllbGRzXVxuICAgICAgICAgICAgLmZpbHRlcigoZWxlbWVudCwgaW5kZXgsIGFycmF5KSA9PiBpbmRleCA9PT0gYXJyYXkuaW5kZXhPZihlbGVtZW50KSk7XG5cbiAgICAgICAgbGV0IHBhcmFtczogYW55ID0ge1xuICAgICAgICAgICAgaW5jbHVkZVNvdXJjZTogdHJ1ZSxcbiAgICAgICAgICAgIGluY2x1ZGU6IGluY2x1ZGVGaWVsZHNSZXF1ZXN0XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGZvbGRlcikge1xuICAgICAgICAgICAgcGFyYW1zLnJlbGF0aXZlUGF0aCA9IGZvbGRlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRzKSB7XG4gICAgICAgICAgICBpZiAob3B0cy5tYXhJdGVtcykge1xuICAgICAgICAgICAgICAgIHBhcmFtcy5tYXhJdGVtcyA9IG9wdHMubWF4SXRlbXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0cy5za2lwQ291bnQpIHtcbiAgICAgICAgICAgICAgICBwYXJhbXMuc2tpcENvdW50ID0gb3B0cy5za2lwQ291bnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5hcGlTZXJ2aWNlLmdldEluc3RhbmNlKCkubm9kZXMuZ2V0Tm9kZUNoaWxkcmVuKHJvb3ROb2RlSWQsIHBhcmFtcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVsZXRlcyBhIG5vZGUuXG4gICAgICogQHBhcmFtIG5vZGVJZCBJRCBvZiB0aGUgbm9kZSB0byBkZWxldGVcbiAgICAgKiBAcmV0dXJucyBFbXB0eSByZXNwb25zZSB3aGVuIHRoZSBvcGVyYXRpb24gaXMgY29tcGxldGVcbiAgICAgKi9cbiAgICBkZWxldGVOb2RlKG5vZGVJZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgcmV0dXJuIGZyb20odGhpcy5hcGlTZXJ2aWNlLmdldEluc3RhbmNlKCkubm9kZXMuZGVsZXRlTm9kZShub2RlSWQpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb3B5IGEgbm9kZSB0byBkZXN0aW5hdGlvbiBub2RlXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbm9kZUlkIFRoZSBpZCBvZiB0aGUgbm9kZSB0byBiZSBjb3BpZWRcbiAgICAgKiBAcGFyYW0gdGFyZ2V0UGFyZW50SWQgVGhlIGlkIG9mIHRoZSBmb2xkZXIgd2hlcmUgdGhlIG5vZGUgd2lsbCBiZSBjb3BpZWRcbiAgICAgKiBAcmV0dXJucyBOb2RlRW50cnkgZm9yIHRoZSBjb3BpZWQgbm9kZVxuICAgICAqL1xuICAgIGNvcHlOb2RlKG5vZGVJZDogc3RyaW5nLCB0YXJnZXRQYXJlbnRJZDogc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiBmcm9tKHRoaXMuYXBpU2VydmljZS5nZXRJbnN0YW5jZSgpLm5vZGVzLmNvcHlOb2RlKG5vZGVJZCwgeyB0YXJnZXRQYXJlbnRJZCB9KSkucGlwZShcbiAgICAgICAgICAgIGNhdGNoRXJyb3IoZXJyID0+IHRoaXMuaGFuZGxlRXJyb3IoZXJyKSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNb3ZlcyBhIG5vZGUgdG8gZGVzdGluYXRpb24gbm9kZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBub2RlSWQgVGhlIGlkIG9mIHRoZSBub2RlIHRvIGJlIG1vdmVkXG4gICAgICogQHBhcmFtIHRhcmdldFBhcmVudElkIFRoZSBpZCBvZiB0aGUgZm9sZGVyIHdoZXJlIHRoZSBub2RlIHdpbGwgYmUgbW92ZWRcbiAgICAgKiBAcmV0dXJucyBOb2RlRW50cnkgZm9yIHRoZSBtb3ZlZCBub2RlXG4gICAgICovXG4gICAgbW92ZU5vZGUobm9kZUlkOiBzdHJpbmcsIHRhcmdldFBhcmVudElkOiBzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIGZyb20odGhpcy5hcGlTZXJ2aWNlLmdldEluc3RhbmNlKCkubm9kZXMubW92ZU5vZGUobm9kZUlkLCB7IHRhcmdldFBhcmVudElkIH0pKS5waXBlKFxuICAgICAgICAgICAgY2F0Y2hFcnJvcihlcnIgPT4gdGhpcy5oYW5kbGVFcnJvcihlcnIpKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgZm9sZGVyIGluIHRoZSBwYXRoLlxuICAgICAqIEBwYXJhbSBuYW1lIEZvbGRlciBuYW1lXG4gICAgICogQHBhcmFtIHBhcmVudElkIFBhcmVudCBmb2xkZXIgSURcbiAgICAgKiBAcmV0dXJucyBEZXRhaWxzIG9mIHRoZSBjcmVhdGVkIGZvbGRlciBub2RlXG4gICAgICovXG4gICAgY3JlYXRlRm9sZGVyKG5hbWU6IHN0cmluZywgcGFyZW50SWQ6IHN0cmluZyk6IE9ic2VydmFibGU8TWluaW1hbE5vZGVFbnRpdHk+IHtcbiAgICAgICAgcmV0dXJuIGZyb20odGhpcy5hcGlTZXJ2aWNlLmdldEluc3RhbmNlKCkubm9kZXMuY3JlYXRlRm9sZGVyKG5hbWUsICcvJywgcGFyZW50SWQpKVxuICAgICAgICAgICAgLnBpcGUoXG4gICAgICAgICAgICAgICAgY2F0Y2hFcnJvcihlcnIgPT4gdGhpcy5oYW5kbGVFcnJvcihlcnIpKVxuICAgICAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBmb2xkZXIgbm9kZSB3aXRoIHRoZSBzcGVjaWZpZWQgcmVsYXRpdmUgbmFtZSBwYXRoIGJlbG93IHRoZSByb290IG5vZGUuXG4gICAgICogQHBhcmFtIGZvbGRlciBQYXRoIHRvIGZvbGRlci5cbiAgICAgKiBAcGFyYW0gb3B0cyBPcHRpb25zLlxuICAgICAqIEBwYXJhbSBpbmNsdWRlRmllbGRzIEV4dHJhIGluZm9ybWF0aW9uIHRvIGluY2x1ZGUgKGF2YWlsYWJsZSBvcHRpb25zIGFyZSBcImFzcGVjdE5hbWVzXCIsIFwiaXNMaW5rXCIgYW5kIFwiYXNzb2NpYXRpb25cIilcbiAgICAgKiBAcmV0dXJucyBEZXRhaWxzIG9mIHRoZSBmb2xkZXJcbiAgICAgKi9cbiAgICBnZXRGb2xkZXIoZm9sZGVyOiBzdHJpbmcsIG9wdHM/OiBhbnksIGluY2x1ZGVGaWVsZHM6IHN0cmluZ1tdID0gW10pOiBPYnNlcnZhYmxlPE5vZGVQYWdpbmc+IHtcbiAgICAgICAgcmV0dXJuIGZyb20odGhpcy5nZXROb2Rlc1Byb21pc2UoZm9sZGVyLCBvcHRzLCBpbmNsdWRlRmllbGRzKSlcbiAgICAgICAgICAgIC5waXBlKFxuICAgICAgICAgICAgICAgIGNhdGNoRXJyb3IoZXJyID0+IHRoaXMuaGFuZGxlRXJyb3IoZXJyKSlcbiAgICAgICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBhIG5vZGUgdmlhIGl0cyBub2RlIElELlxuICAgICAqIEBwYXJhbSBub2RlSWQgSUQgb2YgdGhlIHRhcmdldCBub2RlXG4gICAgICogQHBhcmFtIGluY2x1ZGVGaWVsZHMgRXh0cmEgaW5mb3JtYXRpb24gdG8gaW5jbHVkZSAoYXZhaWxhYmxlIG9wdGlvbnMgYXJlIFwiYXNwZWN0TmFtZXNcIiwgXCJpc0xpbmtcIiBhbmQgXCJhc3NvY2lhdGlvblwiKVxuICAgICAqIEByZXR1cm5zIERldGFpbHMgb2YgdGhlIGZvbGRlclxuICAgICAqL1xuICAgIGdldE5vZGUobm9kZUlkOiBzdHJpbmcsIGluY2x1ZGVGaWVsZHM6IHN0cmluZ1tdID0gW10pOiBPYnNlcnZhYmxlPE5vZGVFbnRyeT4ge1xuXG4gICAgICAgIGxldCBpbmNsdWRlRmllbGRzUmVxdWVzdCA9IFsncGF0aCcsICdwcm9wZXJ0aWVzJywgJ2FsbG93YWJsZU9wZXJhdGlvbnMnLCAncGVybWlzc2lvbnMnLCAuLi5pbmNsdWRlRmllbGRzXVxuICAgICAgICAgICAgLmZpbHRlcigoZWxlbWVudCwgaW5kZXgsIGFycmF5KSA9PiBpbmRleCA9PT0gYXJyYXkuaW5kZXhPZihlbGVtZW50KSk7XG5cbiAgICAgICAgbGV0IG9wdHM6IGFueSA9IHtcbiAgICAgICAgICAgIGluY2x1ZGVTb3VyY2U6IHRydWUsXG4gICAgICAgICAgICBpbmNsdWRlOiBpbmNsdWRlRmllbGRzUmVxdWVzdFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRTZXJ2aWNlLmdldE5vZGUobm9kZUlkLCBvcHRzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIGEgZm9sZGVyIG5vZGUgdmlhIGl0cyBub2RlIElELlxuICAgICAqIEBkZXByZWNhdGVkIDIuMy4wXG4gICAgICogQHBhcmFtIG5vZGVJZCBJRCBvZiB0aGUgZm9sZGVyIG5vZGVcbiAgICAgKiBAcGFyYW0gaW5jbHVkZUZpZWxkcyBFeHRyYSBpbmZvcm1hdGlvbiB0byBpbmNsdWRlIChhdmFpbGFibGUgb3B0aW9ucyBhcmUgXCJhc3BlY3ROYW1lc1wiLCBcImlzTGlua1wiIGFuZCBcImFzc29jaWF0aW9uXCIpXG4gICAgICogQHJldHVybnMgRGV0YWlscyBvZiB0aGUgZm9sZGVyXG4gICAgICovXG4gICAgZ2V0Rm9sZGVyTm9kZShub2RlSWQ6IHN0cmluZywgaW5jbHVkZUZpZWxkczogc3RyaW5nW10gPSBbXSk6IE9ic2VydmFibGU8TWluaW1hbE5vZGVFbnRyeUVudGl0eT4ge1xuXG4gICAgICAgIGxldCBpbmNsdWRlRmllbGRzUmVxdWVzdCA9IFsncGF0aCcsICdwcm9wZXJ0aWVzJywgJ2FsbG93YWJsZU9wZXJhdGlvbnMnLCAncGVybWlzc2lvbnMnLCAnYXNwZWN0TmFtZXMnLCAuLi5pbmNsdWRlRmllbGRzXVxuICAgICAgICAgICAgLmZpbHRlcigoZWxlbWVudCwgaW5kZXgsIGFycmF5KSA9PiBpbmRleCA9PT0gYXJyYXkuaW5kZXhPZihlbGVtZW50KSk7XG5cbiAgICAgICAgbGV0IG9wdHM6IGFueSA9IHtcbiAgICAgICAgICAgIGluY2x1ZGVTb3VyY2U6IHRydWUsXG4gICAgICAgICAgICBpbmNsdWRlOiBpbmNsdWRlRmllbGRzUmVxdWVzdFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBmcm9tKHRoaXMuYXBpU2VydmljZS5nZXRJbnN0YW5jZSgpLm5vZGVzLmdldE5vZGVJbmZvKG5vZGVJZCwgb3B0cykpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGh1bWJuYWlsIFVSTCBmb3IgdGhlIGdpdmVuIGRvY3VtZW50IG5vZGUuXG4gICAgICogQHBhcmFtIG5vZGUgTm9kZSB0byBnZXQgVVJMIGZvci5cbiAgICAgKiBAcmV0dXJucyBUaHVtYm5haWwgVVJMIHN0cmluZ1xuICAgICAqL1xuICAgIGdldERvY3VtZW50VGh1bWJuYWlsVXJsKG5vZGU6IE1pbmltYWxOb2RlRW50aXR5KTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGh1bWJuYWlsU2VydmljZS5nZXREb2N1bWVudFRodW1ibmFpbFVybChub2RlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBpY29uIHRoYXQgcmVwcmVzZW50cyBhIE1JTUUgdHlwZS5cbiAgICAgKiBAcGFyYW0gbWltZVR5cGUgTUlNRSB0eXBlIHRvIGdldCB0aGUgaWNvbiBmb3JcbiAgICAgKiBAcmV0dXJucyBQYXRoIHRvIHRoZSBpY29uIGZpbGVcbiAgICAgKi9cbiAgICBnZXRNaW1lVHlwZUljb24obWltZVR5cGU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLnRodW1ibmFpbFNlcnZpY2UuZ2V0TWltZVR5cGVJY29uKG1pbWVUeXBlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIGEgZGVmYXVsdCBpY29uIGZvciBNSU1FIHR5cGVzIHdpdGggbm8gc3BlY2lmaWMgaWNvbi5cbiAgICAgKiBAcmV0dXJucyBQYXRoIHRvIHRoZSBpY29uIGZpbGVcbiAgICAgKi9cbiAgICBnZXREZWZhdWx0TWltZVR5cGVJY29uKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLnRodW1ibmFpbFNlcnZpY2UuZ2V0RGVmYXVsdE1pbWVUeXBlSWNvbigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBhIG5vZGUgaGFzIHRoZSBzcGVjaWZpZWQgcGVybWlzc2lvbi5cbiAgICAgKiBAZGVwcmVjYXRlZCAyLjMuMCAtIHVzZSB0aGUgZXF1aXZhbGVudCBpbiB0aGUgY29udGVudCBzZXJ2aWNlXG4gICAgICogQHBhcmFtIG5vZGUgVGFyZ2V0IG5vZGVcbiAgICAgKiBAcGFyYW0gcGVybWlzc2lvbiBQZXJtaXNzaW9uIGxldmVsIHRvIHF1ZXJ5XG4gICAgICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgbm9kZSBoYXMgdGhlIHBlcm1pc3Npb24sIGZhbHNlIG90aGVyd2lzZVxuICAgICAqL1xuICAgIGhhc1Blcm1pc3Npb24obm9kZTogYW55LCBwZXJtaXNzaW9uOiBQZXJtaXNzaW9uc0VudW0gfCBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudFNlcnZpY2UuaGFzUGVybWlzc2lvbihub2RlLCBwZXJtaXNzaW9uKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUVycm9yKGVycm9yOiBhbnkpIHtcbiAgICAgICAgdGhpcy5sb2dTZXJ2aWNlLmVycm9yKGVycm9yKTtcbiAgICAgICAgcmV0dXJuIHRocm93RXJyb3IoZXJyb3IgfHwgJ1NlcnZlciBlcnJvcicpO1xuICAgIH1cbn1cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENvbXBvbmVudCwgSW5qZWN0LCBWaWV3RW5jYXBzdWxhdGlvbiwgSW5wdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE1BVF9ESUFMT0dfREFUQSB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsJztcbmltcG9ydCB7IE1pbmltYWxOb2RlRW50cnlFbnRpdHksIFNpdGVQYWdpbmcgfSBmcm9tICdhbGZyZXNjby1qcy1hcGknO1xuaW1wb3J0IHsgQ29udGVudE5vZGVTZWxlY3RvckNvbXBvbmVudERhdGEgfSBmcm9tICcuL2NvbnRlbnQtbm9kZS1zZWxlY3Rvci5jb21wb25lbnQtZGF0YS5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgUm93RmlsdGVyIH0gZnJvbSAnLi4vZG9jdW1lbnQtbGlzdC9kYXRhL3Jvdy1maWx0ZXIubW9kZWwnO1xuaW1wb3J0IHsgSW1hZ2VSZXNvbHZlciB9IGZyb20gJy4uL2RvY3VtZW50LWxpc3QvZGF0YS9pbWFnZS1yZXNvbHZlci5tb2RlbCc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnYWRmLWNvbnRlbnQtbm9kZS1zZWxlY3RvcicsXG4gICAgdGVtcGxhdGVVcmw6ICcuL2NvbnRlbnQtbm9kZS1zZWxlY3Rvci5jb21wb25lbnQuaHRtbCcsXG4gICAgc3R5bGVVcmxzOiBbJy4vY29udGVudC1ub2RlLXNlbGVjdG9yLmNvbXBvbmVudC5zY3NzJ10sXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZVxufSlcbmV4cG9ydCBjbGFzcyBDb250ZW50Tm9kZVNlbGVjdG9yQ29tcG9uZW50IHtcblxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIGluIDIuMS4wXG4gICAgICovXG4gICAgQElucHV0KClcbiAgICB0aXRsZTogc3RyaW5nID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIGluIDIuMS4wXG4gICAgICovXG4gICAgQElucHV0KClcbiAgICBjdXJyZW50Rm9sZGVySWQ6IHN0cmluZyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBpbiAyLjEuMFxuICAgICAqL1xuICAgIEBJbnB1dCgpXG4gICAgZHJvcGRvd25IaWRlTXlGaWxlczogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgaW4gMi4xLjBcbiAgICAgKi9cbiAgICBASW5wdXQoKVxuICAgIGRyb3Bkb3duU2l0ZUxpc3Q6IFNpdGVQYWdpbmcgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgaW4gMi4xLjBcbiAgICAgKi9cbiAgICBASW5wdXQoKVxuICAgIHJvd0ZpbHRlcjogUm93RmlsdGVyID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIGluIDIuMS4wXG4gICAgICovXG4gICAgQElucHV0KClcbiAgICBpbWFnZVJlc29sdmVyOiBJbWFnZVJlc29sdmVyID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIGluIDIuMS4wXG4gICAgICovXG4gICAgQElucHV0KClcbiAgICBwYWdlU2l6ZTogbnVtYmVyO1xuXG4gICAgYnV0dG9uQWN0aW9uTmFtZTogc3RyaW5nO1xuICAgIGNob3Nlbk5vZGU6IE1pbmltYWxOb2RlRW50cnlFbnRpdHlbXTtcblxuICAgIGNvbnN0cnVjdG9yKEBJbmplY3QoTUFUX0RJQUxPR19EQVRBKSBwdWJsaWMgZGF0YTogQ29udGVudE5vZGVTZWxlY3RvckNvbXBvbmVudERhdGEpIHtcbiAgICAgICAgdGhpcy5idXR0b25BY3Rpb25OYW1lID0gZGF0YS5hY3Rpb25OYW1lID8gYE5PREVfU0VMRUNUT1IuJHtkYXRhLmFjdGlvbk5hbWUudG9VcHBlckNhc2UoKX1gIDogJ05PREVfU0VMRUNUT1IuQ0hPT1NFJztcbiAgICB9XG5cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5kYXRhLnNlbGVjdC5jb21wbGV0ZSgpO1xuICAgIH1cblxuICAgIG9uU2VsZWN0KG5vZGVMaXN0OiBNaW5pbWFsTm9kZUVudHJ5RW50aXR5W10pIHtcbiAgICAgICAgdGhpcy5jaG9zZW5Ob2RlID0gbm9kZUxpc3Q7XG4gICAgfVxuXG4gICAgb25DbGljaygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5kYXRhLnNlbGVjdC5uZXh0KHRoaXMuY2hvc2VuTm9kZSk7XG4gICAgICAgIHRoaXMuZGF0YS5zZWxlY3QuY29tcGxldGUoKTtcbiAgICB9XG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudC1lczYnO1xuXG5pbXBvcnQgeyBDb21wb25lbnQsIEluamVjdCwgT25Jbml0LCBPcHRpb25hbCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTUFUX0RJQUxPR19EQVRBLCBNYXREaWFsb2dSZWYgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbCc7XG5pbXBvcnQgeyBGb3JtQnVpbGRlciwgRm9ybUdyb3VwIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuXG5pbXBvcnQgeyBNaW5pbWFsTm9kZUVudHJ5RW50aXR5LCBOb2RlRW50cnkgfSBmcm9tICdhbGZyZXNjby1qcy1hcGknO1xuaW1wb3J0IHsgQWxmcmVzY29BcGlTZXJ2aWNlIH0gZnJvbSAnQGFsZnJlc2NvL2FkZi1jb3JlJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdhZGYtbm9kZS1sb2NrJyxcbiAgICBzdHlsZVVybHM6IFsnLi9mb2xkZXIuZGlhbG9nLnNjc3MnXSxcbiAgICB0ZW1wbGF0ZVVybDogJy4vbm9kZS1sb2NrLmRpYWxvZy5odG1sJ1xufSlcbmV4cG9ydCBjbGFzcyBOb2RlTG9ja0RpYWxvZ0NvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG5cbiAgICBmb3JtOiBGb3JtR3JvdXA7XG4gICAgbm9kZTogTWluaW1hbE5vZGVFbnRyeUVudGl0eSA9IG51bGw7XG4gICAgbm9kZU5hbWU6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGZvcm1CdWlsZGVyOiBGb3JtQnVpbGRlcixcbiAgICAgICAgcHVibGljIGRpYWxvZzogTWF0RGlhbG9nUmVmPE5vZGVMb2NrRGlhbG9nQ29tcG9uZW50PixcbiAgICAgICAgcHJpdmF0ZSBhbGZyZXNjb0FwaTogQWxmcmVzY29BcGlTZXJ2aWNlLFxuICAgICAgICBAT3B0aW9uYWwoKVxuICAgICAgICBASW5qZWN0KE1BVF9ESUFMT0dfREFUQSlcbiAgICAgICAgcHVibGljIGRhdGE6IGFueVxuICAgICkge31cblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICBjb25zdCB7IG5vZGUgfSA9IHRoaXMuZGF0YTtcbiAgICAgICAgdGhpcy5ub2RlTmFtZSA9IG5vZGUubmFtZTtcblxuICAgICAgICB0aGlzLmZvcm0gPSB0aGlzLmZvcm1CdWlsZGVyLmdyb3VwKHtcbiAgICAgICAgICAgIGlzTG9ja2VkOiBub2RlLmlzTG9ja2VkIHx8IGZhbHNlLFxuICAgICAgICAgICAgYWxsb3dPd25lcjogbm9kZS5wcm9wZXJ0aWVzWydjbTpsb2NrVHlwZSddID09PSAnV1JJVEVfTE9DSycsXG4gICAgICAgICAgICBpc1RpbWVMb2NrOiAhIW5vZGUucHJvcGVydGllc1snY206ZXhwaXJ5RGF0ZSddLFxuICAgICAgICAgICAgdGltZTogISFub2RlLnByb3BlcnRpZXNbJ2NtOmV4cGlyeURhdGUnXSA/IG1vbWVudChub2RlLnByb3BlcnRpZXNbJ2NtOmV4cGlyeURhdGUnXSkgOiBtb21lbnQoKVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldCBsb2NrVGltZUluU2Vjb25kcygpOiBudW1iZXIge1xuICAgICAgICBpZiAodGhpcy5mb3JtLnZhbHVlLmlzVGltZUxvY2spIHtcbiAgICAgICAgICAgIGxldCBkdXJhdGlvbiA9IG1vbWVudC5kdXJhdGlvbihtb21lbnQodGhpcy5mb3JtLnZhbHVlLnRpbWUpLmRpZmYobW9tZW50KCkpKTtcbiAgICAgICAgICAgIHJldHVybiBkdXJhdGlvbi5hc1NlY29uZHMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0IG5vZGVCb2R5TG9jaygpOiBvYmplY3Qge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgJ3RpbWVUb0V4cGlyZSc6IHRoaXMubG9ja1RpbWVJblNlY29uZHMsXG4gICAgICAgICAgICAndHlwZSc6IHRoaXMuZm9ybS52YWx1ZS5hbGxvd093bmVyID8gJ0FMTE9XX09XTkVSX0NIQU5HRVMnIDogJ0ZVTEwnLFxuICAgICAgICAgICAgJ2xpZmV0aW1lJzogJ1BFUlNJU1RFTlQnXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB0b2dnbGVMb2NrKCk6IFByb21pc2U8Tm9kZUVudHJ5PiB7XG4gICAgICAgIGNvbnN0IHsgYWxmcmVzY29BcGk6IHsgbm9kZXNBcGkgfSwgZGF0YTogeyBub2RlIH0gfSA9IHRoaXM7XG5cbiAgICAgICAgaWYgKHRoaXMuZm9ybS52YWx1ZS5pc0xvY2tlZCkge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGVzQXBpLmxvY2tOb2RlKG5vZGUuaWQsIHRoaXMubm9kZUJvZHlMb2NrKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBub2Rlc0FwaS51bmxvY2tOb2RlKG5vZGUuaWQpO1xuICAgIH1cblxuICAgIHN1Ym1pdCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy50b2dnbGVMb2NrKClcbiAgICAgICAgICAgIC50aGVuKG5vZGUgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YS5ub2RlLmlzTG9ja2VkID0gdGhpcy5mb3JtLnZhbHVlLmlzTG9ja2VkO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nLmNsb3NlKG5vZGUuZW50cnkpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB0aGlzLmRhdGEub25FcnJvcihlcnJvcikpO1xuICAgIH1cbn1cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IE1hdERpYWxvZyB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlciwgSW5qZWN0YWJsZSwgT3V0cHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb250ZW50U2VydmljZSB9IGZyb20gJ0BhbGZyZXNjby9hZGYtY29yZSc7XG5pbXBvcnQgeyBTdWJqZWN0LCBPYnNlcnZhYmxlLCB0aHJvd0Vycm9yIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBTaGFyZURhdGFSb3cgfSBmcm9tICcuLi9kb2N1bWVudC1saXN0L2RhdGEvc2hhcmUtZGF0YS1yb3cubW9kZWwnO1xuaW1wb3J0IHsgTWluaW1hbE5vZGVFbnRyeUVudGl0eSwgU2l0ZVBhZ2luZyB9IGZyb20gJ2FsZnJlc2NvLWpzLWFwaSc7XG5pbXBvcnQgeyBEYXRhQ29sdW1uLCBTaXRlc1NlcnZpY2UsIFRyYW5zbGF0aW9uU2VydmljZSwgUGVybWlzc2lvbnNFbnVtIH0gZnJvbSAnQGFsZnJlc2NvL2FkZi1jb3JlJztcbmltcG9ydCB7IERvY3VtZW50TGlzdFNlcnZpY2UgfSBmcm9tICcuLi9kb2N1bWVudC1saXN0L3NlcnZpY2VzL2RvY3VtZW50LWxpc3Quc2VydmljZSc7XG5pbXBvcnQgeyBDb250ZW50Tm9kZVNlbGVjdG9yQ29tcG9uZW50IH0gZnJvbSAnLi9jb250ZW50LW5vZGUtc2VsZWN0b3IuY29tcG9uZW50JztcbmltcG9ydCB7IENvbnRlbnROb2RlU2VsZWN0b3JDb21wb25lbnREYXRhIH0gZnJvbSAnLi9jb250ZW50LW5vZGUtc2VsZWN0b3IuY29tcG9uZW50LWRhdGEuaW50ZXJmYWNlJztcbmltcG9ydCB7IE5vZGVMb2NrRGlhbG9nQ29tcG9uZW50IH0gZnJvbSAnLi4vZGlhbG9ncy9ub2RlLWxvY2suZGlhbG9nJztcbmltcG9ydCB7IHN3aXRjaE1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIENvbnRlbnROb2RlRGlhbG9nU2VydmljZSB7XG5cbiAgICAvKiogRW1pdHRlZCB3aGVuIGFuIGVycm9yIG9jY3Vycy4gKi9cbiAgICBAT3V0cHV0KClcbiAgICBlcnJvcjogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZGlhbG9nOiBNYXREaWFsb2csXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSBjb250ZW50U2VydmljZTogQ29udGVudFNlcnZpY2UsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSBkb2N1bWVudExpc3RTZXJ2aWNlOiBEb2N1bWVudExpc3RTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIHByaXZhdGUgc2l0ZVNlcnZpY2U6IFNpdGVzU2VydmljZSxcbiAgICAgICAgICAgICAgICBwcml2YXRlIHRyYW5zbGF0aW9uOiBUcmFuc2xhdGlvblNlcnZpY2UpIHtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPcGVucyBhIGZpbGUgYnJvd3NlciBhdCBhIGNob3NlbiBmb2xkZXIgbG9jYXRpb24uXG4gICAgICogQHBhcmFtIGZvbGRlck5vZGVJZCBJRCBvZiB0aGUgZm9sZGVyIHRvIHVzZVxuICAgICAqIEByZXR1cm5zIEluZm9ybWF0aW9uIGFib3V0IHRoZSBzZWxlY3RlZCBmaWxlKHMpXG4gICAgICovXG4gICAgb3BlbkZpbGVCcm93c2VEaWFsb2dCeUZvbGRlcklkKGZvbGRlck5vZGVJZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxNaW5pbWFsTm9kZUVudHJ5RW50aXR5W10+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRMaXN0U2VydmljZS5nZXRGb2xkZXJOb2RlKGZvbGRlck5vZGVJZCkucGlwZShzd2l0Y2hNYXAoKG5vZGU6IE1pbmltYWxOb2RlRW50cnlFbnRpdHkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9wZW5VcGxvYWRGaWxlRGlhbG9nKCdDaG9vc2UnLCBub2RlKTtcbiAgICAgICAgfSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9wZW5zIGEgbG9jayBub2RlIGRpYWxvZy5cbiAgICAgKiBAcGFyYW0gY29udGVudEVudHJ5IE5vZGUgdG8gbG9ja1xuICAgICAqIEByZXR1cm5zIEVycm9yL3N0YXR1cyBtZXNzYWdlIChpZiBhbnkpXG4gICAgICovXG4gICAgcHVibGljIG9wZW5Mb2NrTm9kZURpYWxvZyhjb250ZW50RW50cnk6IE1pbmltYWxOb2RlRW50cnlFbnRpdHkpOiBTdWJqZWN0PHN0cmluZz4ge1xuICAgICAgICBjb25zdCBvYnNlcnZhYmxlOiBTdWJqZWN0PHN0cmluZz4gPSBuZXcgU3ViamVjdDxzdHJpbmc+KCk7XG5cbiAgICAgICAgaWYgKHRoaXMuY29udGVudFNlcnZpY2UuaGFzUGVybWlzc2lvbihjb250ZW50RW50cnksIFBlcm1pc3Npb25zRW51bS5MT0NLKSkge1xuICAgICAgICAgICAgdGhpcy5kaWFsb2cub3BlbihOb2RlTG9ja0RpYWxvZ0NvbXBvbmVudCwge1xuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZTogY29udGVudEVudHJ5LFxuICAgICAgICAgICAgICAgICAgICBvbkVycm9yOiAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IuZW1pdChlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZhYmxlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgd2lkdGg6ICc0MDBweCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb2JzZXJ2YWJsZS5lcnJvcignT1BFUkFUSU9OLkZBSUwuTk9ERS5OT19QRVJNSVNTSU9OJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gb2JzZXJ2YWJsZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPcGVucyBhIGZpbGUgYnJvd3NlciBhdCBhIGNob3NlbiBzaXRlIGxvY2F0aW9uLlxuICAgICAqIEByZXR1cm5zIEluZm9ybWF0aW9uIGFib3V0IHRoZSBzZWxlY3RlZCBmaWxlKHMpXG4gICAgICovXG4gICAgb3BlbkZpbGVCcm93c2VEaWFsb2dCeVNpdGUoKTogT2JzZXJ2YWJsZTxNaW5pbWFsTm9kZUVudHJ5RW50aXR5W10+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l0ZVNlcnZpY2UuZ2V0U2l0ZXMoKS5waXBlKHN3aXRjaE1hcCgocmVzcG9uc2U6IFNpdGVQYWdpbmcpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9wZW5GaWxlQnJvd3NlRGlhbG9nQnlGb2xkZXJJZChyZXNwb25zZS5saXN0LmVudHJpZXNbMF0uZW50cnkuZ3VpZCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPcGVucyBhIGZvbGRlciBicm93c2VyIGF0IGEgY2hvc2VuIHNpdGUgbG9jYXRpb24uXG4gICAgICogQHJldHVybnMgSW5mb3JtYXRpb24gYWJvdXQgdGhlIHNlbGVjdGVkIGZvbGRlcihzKVxuICAgICAqL1xuICAgIG9wZW5Gb2xkZXJCcm93c2VEaWFsb2dCeVNpdGUoKTogT2JzZXJ2YWJsZTxNaW5pbWFsTm9kZUVudHJ5RW50aXR5W10+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l0ZVNlcnZpY2UuZ2V0U2l0ZXMoKS5waXBlKHN3aXRjaE1hcCgocmVzcG9uc2U6IFNpdGVQYWdpbmcpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9wZW5Gb2xkZXJCcm93c2VEaWFsb2dCeUZvbGRlcklkKHJlc3BvbnNlLmxpc3QuZW50cmllc1swXS5lbnRyeS5ndWlkKTtcbiAgICAgICAgfSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9wZW5zIGEgZm9sZGVyIGJyb3dzZXIgYXQgYSBjaG9zZW4gZm9sZGVyIGxvY2F0aW9uLlxuICAgICAqIEBwYXJhbSBmb2xkZXJOb2RlSWQgSUQgb2YgdGhlIGZvbGRlciB0byB1c2VcbiAgICAgKiBAcmV0dXJucyBJbmZvcm1hdGlvbiBhYm91dCB0aGUgc2VsZWN0ZWQgZm9sZGVyKHMpXG4gICAgICovXG4gICAgb3BlbkZvbGRlckJyb3dzZURpYWxvZ0J5Rm9sZGVySWQoZm9sZGVyTm9kZUlkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPE1pbmltYWxOb2RlRW50cnlFbnRpdHlbXT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudExpc3RTZXJ2aWNlLmdldEZvbGRlck5vZGUoZm9sZGVyTm9kZUlkKS5waXBlKHN3aXRjaE1hcCgobm9kZTogTWluaW1hbE5vZGVFbnRyeUVudGl0eSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3BlblVwbG9hZEZvbGRlckRpYWxvZygnQ2hvb3NlJywgbm9kZSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPcGVucyBhIGRpYWxvZyB0byBjb3B5IG9yIG1vdmUgYW4gaXRlbSB0byBhIG5ldyBsb2NhdGlvbi5cbiAgICAgKiBAcGFyYW0gYWN0aW9uIE5hbWUgb2YgdGhlIGFjdGlvbiAoZWcsIFwiQ29weVwiIG9yIFwiTW92ZVwiKSB0byBzaG93IGluIHRoZSB0aXRsZVxuICAgICAqIEBwYXJhbSBjb250ZW50RW50cnkgSXRlbSB0byBiZSBjb3BpZWQgb3IgbW92ZWRcbiAgICAgKiBAcGFyYW0gcGVybWlzc2lvbiBQZXJtaXNzaW9uIGZvciB0aGUgb3BlcmF0aW9uXG4gICAgICogQHJldHVybnMgSW5mb3JtYXRpb24gYWJvdXQgZmlsZXMgdGhhdCB3ZXJlIGNvcGllZC9tb3ZlZFxuICAgICAqL1xuICAgIG9wZW5Db3B5TW92ZURpYWxvZyhhY3Rpb246IHN0cmluZywgY29udGVudEVudHJ5OiBNaW5pbWFsTm9kZUVudHJ5RW50aXR5LCBwZXJtaXNzaW9uPzogc3RyaW5nKTogT2JzZXJ2YWJsZTxNaW5pbWFsTm9kZUVudHJ5RW50aXR5W10+IHtcbiAgICAgICAgaWYgKHRoaXMuY29udGVudFNlcnZpY2UuaGFzUGVybWlzc2lvbihjb250ZW50RW50cnksIHBlcm1pc3Npb24pKSB7XG5cbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdCA9IG5ldyBTdWJqZWN0PE1pbmltYWxOb2RlRW50cnlFbnRpdHlbXT4oKTtcbiAgICAgICAgICAgIHNlbGVjdC5zdWJzY3JpYmUoe1xuICAgICAgICAgICAgICAgIGNvbXBsZXRlOiB0aGlzLmNsb3NlLmJpbmQodGhpcylcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCB0aXRsZSA9IHRoaXMuZ2V0VGl0bGVUcmFuc2xhdGlvbihhY3Rpb24sIGNvbnRlbnRFbnRyeS5uYW1lKTtcblxuICAgICAgICAgICAgY29uc3QgZGF0YTogQ29udGVudE5vZGVTZWxlY3RvckNvbXBvbmVudERhdGEgPSB7XG4gICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgICAgICAgICAgIGFjdGlvbk5hbWU6IGFjdGlvbixcbiAgICAgICAgICAgICAgICBjdXJyZW50Rm9sZGVySWQ6IGNvbnRlbnRFbnRyeS5wYXJlbnRJZCxcbiAgICAgICAgICAgICAgICBpbWFnZVJlc29sdmVyOiB0aGlzLmltYWdlUmVzb2x2ZXIuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICByb3dGaWx0ZXI6IHRoaXMucm93RmlsdGVyLmJpbmQodGhpcywgY29udGVudEVudHJ5LmlkKSxcbiAgICAgICAgICAgICAgICBpc1NlbGVjdGlvblZhbGlkOiB0aGlzLmlzQ29weU1vdmVTZWxlY3Rpb25WYWxpZC5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIHNlbGVjdDogc2VsZWN0XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLm9wZW5Db250ZW50Tm9kZURpYWxvZyhkYXRhLCAnYWRmLWNvbnRlbnQtbm9kZS1zZWxlY3Rvci1kaWFsb2cnLCAnNjMwcHgnKTtcblxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBlcnJvcnMgPSBuZXcgRXJyb3IoSlNPTi5zdHJpbmdpZnkoeyBlcnJvcjogeyBzdGF0dXNDb2RlOiA0MDMgfSB9KSk7XG4gICAgICAgICAgICByZXR1cm4gdGhyb3dFcnJvcihlcnJvcnMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgdHJhbnNsYXRpb24gb2YgdGhlIGRpYWxvZyB0aXRsZS5cbiAgICAgKiBAcGFyYW0gYWN0aW9uIE5hbWUgb2YgdGhlIGFjdGlvbiB0byBkaXNwbGF5IGluIHRoZSBkaWFsb2cgdGl0bGVcbiAgICAgKiBAcGFyYW0gbmFtZSBOYW1lIG9mIHRoZSBpdGVtIG9uIHdoaWNoIHRoZSBhY3Rpb24gaXMgYmVpbmcgcGVyZm9ybWVkXG4gICAgICogQHJldHVybnMgVHJhbnNsYXRlZCB2ZXJzaW9uIG9mIHRoZSB0aXRsZVxuICAgICAqL1xuICAgIGdldFRpdGxlVHJhbnNsYXRpb24oYWN0aW9uOiBzdHJpbmcsIG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zbGF0aW9uLmluc3RhbnQoYE5PREVfU0VMRUNUT1IuJHthY3Rpb24udG9VcHBlckNhc2UoKX1fSVRFTWAsIHsgbmFtZSB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPcGVucyBhIGRpYWxvZyB0byBjaG9vc2UgZm9sZGVycyB0byB1cGxvYWQuXG4gICAgICogQHBhcmFtIGFjdGlvbiBOYW1lIG9mIHRoZSBhY3Rpb24gdG8gc2hvdyBpbiB0aGUgdGl0bGVcbiAgICAgKiBAcGFyYW0gY29udGVudEVudHJ5ICBJdGVtIHRvIHVwbG9hZFxuICAgICAqIEByZXR1cm5zIEluZm9ybWF0aW9uIGFib3V0IHRoZSBjaG9zZWQgZm9sZGVyKHMpXG4gICAgICovXG4gICAgb3BlblVwbG9hZEZvbGRlckRpYWxvZyhhY3Rpb246IHN0cmluZywgY29udGVudEVudHJ5OiBNaW5pbWFsTm9kZUVudHJ5RW50aXR5KTogT2JzZXJ2YWJsZTxNaW5pbWFsTm9kZUVudHJ5RW50aXR5W10+IHtcbiAgICAgICAgY29uc3Qgc2VsZWN0ID0gbmV3IFN1YmplY3Q8TWluaW1hbE5vZGVFbnRyeUVudGl0eVtdPigpO1xuICAgICAgICBzZWxlY3Quc3Vic2NyaWJlKHtcbiAgICAgICAgICAgIGNvbXBsZXRlOiB0aGlzLmNsb3NlLmJpbmQodGhpcylcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgZGF0YTogQ29udGVudE5vZGVTZWxlY3RvckNvbXBvbmVudERhdGEgPSB7XG4gICAgICAgICAgICB0aXRsZTogYCR7YWN0aW9ufSAnJHtjb250ZW50RW50cnkubmFtZX0nIHRvIC4uLmAsXG4gICAgICAgICAgICBhY3Rpb25OYW1lOiBhY3Rpb24sXG4gICAgICAgICAgICBjdXJyZW50Rm9sZGVySWQ6IGNvbnRlbnRFbnRyeS5pZCxcbiAgICAgICAgICAgIGltYWdlUmVzb2x2ZXI6IHRoaXMuaW1hZ2VSZXNvbHZlci5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgaXNTZWxlY3Rpb25WYWxpZDogdGhpcy5oYXNQZXJtaXNzaW9uT25Ob2RlRm9sZGVyLmJpbmQodGhpcyksXG4gICAgICAgICAgICByb3dGaWx0ZXI6IHRoaXMucm93RmlsdGVyLmJpbmQodGhpcywgY29udGVudEVudHJ5LmlkKSxcbiAgICAgICAgICAgIHNlbGVjdDogc2VsZWN0XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5vcGVuQ29udGVudE5vZGVEaWFsb2coZGF0YSwgJ2FkZi1jb250ZW50LW5vZGUtc2VsZWN0b3ItZGlhbG9nJywgJzYzMHB4Jyk7XG4gICAgICAgIHJldHVybiBzZWxlY3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3BlbnMgYSBkaWFsb2cgdG8gY2hvb3NlIGEgZmlsZSB0byB1cGxvYWQuXG4gICAgICogQHBhcmFtIGFjdGlvbiBOYW1lIG9mIHRoZSBhY3Rpb24gdG8gc2hvdyBpbiB0aGUgdGl0bGVcbiAgICAgKiBAcGFyYW0gY29udGVudEVudHJ5IEl0ZW0gdG8gdXBsb2FkXG4gICAgICogQHJldHVybnMgSW5mb3JtYXRpb24gYWJvdXQgdGhlIGNob3NlbiBmaWxlKHMpXG4gICAgICovXG4gICAgb3BlblVwbG9hZEZpbGVEaWFsb2coYWN0aW9uOiBzdHJpbmcsIGNvbnRlbnRFbnRyeTogTWluaW1hbE5vZGVFbnRyeUVudGl0eSk6IE9ic2VydmFibGU8TWluaW1hbE5vZGVFbnRyeUVudGl0eVtdPiB7XG4gICAgICAgIGNvbnN0IHNlbGVjdCA9IG5ldyBTdWJqZWN0PE1pbmltYWxOb2RlRW50cnlFbnRpdHlbXT4oKTtcbiAgICAgICAgc2VsZWN0LnN1YnNjcmliZSh7XG4gICAgICAgICAgICBjb21wbGV0ZTogdGhpcy5jbG9zZS5iaW5kKHRoaXMpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGRhdGE6IENvbnRlbnROb2RlU2VsZWN0b3JDb21wb25lbnREYXRhID0ge1xuICAgICAgICAgICAgdGl0bGU6IGAke2FjdGlvbn0gJyR7Y29udGVudEVudHJ5Lm5hbWV9JyB0byAuLi5gLFxuICAgICAgICAgICAgYWN0aW9uTmFtZTogYWN0aW9uLFxuICAgICAgICAgICAgY3VycmVudEZvbGRlcklkOiBjb250ZW50RW50cnkuaWQsXG4gICAgICAgICAgICBpbWFnZVJlc29sdmVyOiB0aGlzLmltYWdlUmVzb2x2ZXIuYmluZCh0aGlzKSxcbiAgICAgICAgICAgIGlzU2VsZWN0aW9uVmFsaWQ6IHRoaXMuaXNOb2RlRmlsZS5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgc2VsZWN0OiBzZWxlY3RcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm9wZW5Db250ZW50Tm9kZURpYWxvZyhkYXRhLCAnYWRmLWNvbnRlbnQtbm9kZS1zZWxlY3Rvci1kaWFsb2cnLCAnNjMwcHgnKTtcbiAgICAgICAgcmV0dXJuIHNlbGVjdDtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9wZW5Db250ZW50Tm9kZURpYWxvZyhkYXRhOiBDb250ZW50Tm9kZVNlbGVjdG9yQ29tcG9uZW50RGF0YSwgY3VycmVudFBhbmVsQ2xhc3M6IHN0cmluZywgY2hvc2VuV2lkdGg6IHN0cmluZykge1xuICAgICAgICB0aGlzLmRpYWxvZy5vcGVuKENvbnRlbnROb2RlU2VsZWN0b3JDb21wb25lbnQsIHsgZGF0YSwgcGFuZWxDbGFzczogY3VycmVudFBhbmVsQ2xhc3MsIHdpZHRoOiBjaG9zZW5XaWR0aCB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGltYWdlUmVzb2x2ZXIocm93OiBTaGFyZURhdGFSb3csIGNvbDogRGF0YUNvbHVtbik6IHN0cmluZyB8IG51bGwge1xuICAgICAgICBjb25zdCBlbnRyeTogTWluaW1hbE5vZGVFbnRyeUVudGl0eSA9IHJvdy5ub2RlLmVudHJ5O1xuICAgICAgICBpZiAoIXRoaXMuY29udGVudFNlcnZpY2UuaGFzUGVybWlzc2lvbihlbnRyeSwgJ2NyZWF0ZScpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudExpc3RTZXJ2aWNlLmdldE1pbWVUeXBlSWNvbignZGlzYWJsZS9mb2xkZXInKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHByaXZhdGUgcm93RmlsdGVyKGN1cnJlbnROb2RlSWQsIHJvdzogU2hhcmVEYXRhUm93KTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IG5vZGU6IE1pbmltYWxOb2RlRW50cnlFbnRpdHkgPSByb3cubm9kZS5lbnRyeTtcblxuICAgICAgICBpZiAobm9kZS5pZCA9PT0gY3VycmVudE5vZGVJZCB8fCBub2RlLmlzRmlsZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGlzTm9kZUZpbGUoZW50cnk6IE1pbmltYWxOb2RlRW50cnlFbnRpdHkpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGVudHJ5LmlzRmlsZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhc1Blcm1pc3Npb25Pbk5vZGVGb2xkZXIoZW50cnk6IE1pbmltYWxOb2RlRW50cnlFbnRpdHkpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNOb2RlRm9sZGVyKGVudHJ5KSAmJiB0aGlzLmNvbnRlbnRTZXJ2aWNlLmhhc1Blcm1pc3Npb24oZW50cnksICdjcmVhdGUnKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzTm9kZUZvbGRlcihlbnRyeTogTWluaW1hbE5vZGVFbnRyeUVudGl0eSk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gZW50cnkuaXNGb2xkZXI7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc0NvcHlNb3ZlU2VsZWN0aW9uVmFsaWQoZW50cnk6IE1pbmltYWxOb2RlRW50cnlFbnRpdHkpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzRW50aXR5Q3JlYXRlUGVybWlzc2lvbihlbnRyeSkgJiYgIXRoaXMuaXNTaXRlKGVudHJ5KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhc0VudGl0eUNyZWF0ZVBlcm1pc3Npb24oZW50cnk6IE1pbmltYWxOb2RlRW50cnlFbnRpdHkpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudFNlcnZpY2UuaGFzUGVybWlzc2lvbihlbnRyeSwgJ2NyZWF0ZScpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNTaXRlKGVudHJ5KSB7XG4gICAgICAgIHJldHVybiAhIWVudHJ5Lmd1aWQgfHwgZW50cnkubm9kZVR5cGUgPT09ICdzdDpzaXRlJyB8fCBlbnRyeS5ub2RlVHlwZSA9PT0gJ3N0OnNpdGVzJztcbiAgICB9XG5cbiAgICAvKiogQ2xvc2VzIHRoZSBjdXJyZW50bHkgb3BlbiBkaWFsb2cuICovXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuZGlhbG9nLmNsb3NlQWxsKCk7XG4gICAgfVxuXG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKiB0c2xpbnQ6ZGlzYWJsZTpuby1pbnB1dC1yZW5hbWUgICovXG5cbmltcG9ydCB7IERpcmVjdGl2ZSwgRWxlbWVudFJlZiwgUmVuZGVyZXIyLCBIb3N0TGlzdGVuZXIsIElucHV0LCBBZnRlclZpZXdJbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBNaW5pbWFsTm9kZUVudHJ5RW50aXR5IH0gZnJvbSAnYWxmcmVzY28tanMtYXBpJztcbmltcG9ydCB7IFBlcm1pc3Npb25zRW51bSwgQ29udGVudFNlcnZpY2UgfSBmcm9tICdAYWxmcmVzY28vYWRmLWNvcmUnO1xuaW1wb3J0IHsgQ29udGVudE5vZGVEaWFsb2dTZXJ2aWNlIH0gZnJvbSAnLi4vY29udGVudC1ub2RlLXNlbGVjdG9yL2NvbnRlbnQtbm9kZS1kaWFsb2cuc2VydmljZSc7XG5cbkBEaXJlY3RpdmUoe1xuICAgIHNlbGVjdG9yOiAnW2FkZi1ub2RlLWxvY2tdJ1xufSlcbmV4cG9ydCBjbGFzcyBOb2RlTG9ja0RpcmVjdGl2ZSBpbXBsZW1lbnRzIEFmdGVyVmlld0luaXQge1xuXG4gICAgLyoqIE5vZGUgdG8gbG9jay91bmxvY2suICovXG4gICAgQElucHV0KCdhZGYtbm9kZS1sb2NrJylcbiAgICBub2RlOiBNaW5pbWFsTm9kZUVudHJ5RW50aXR5O1xuXG4gICAgQEhvc3RMaXN0ZW5lcignY2xpY2snLCBbICckZXZlbnQnIF0pXG4gICAgb25DbGljayhldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLmNvbnRlbnROb2RlRGlhbG9nU2VydmljZS5vcGVuTG9ja05vZGVEaWFsb2codGhpcy5ub2RlKTtcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGVsZW1lbnQ6IEVsZW1lbnRSZWYsXG4gICAgICAgIHByaXZhdGUgcmVuZGVyZXI6IFJlbmRlcmVyMixcbiAgICAgICAgcHJpdmF0ZSBjb250ZW50U2VydmljZTogQ29udGVudFNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgY29udGVudE5vZGVEaWFsb2dTZXJ2aWNlOiBDb250ZW50Tm9kZURpYWxvZ1NlcnZpY2VcbiAgICApIHt9XG5cbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgICAgIGNvbnN0IGhhc1Blcm1pc3Npb24gPSB0aGlzLmNvbnRlbnRTZXJ2aWNlLmhhc1Blcm1pc3Npb24odGhpcy5ub2RlLCBQZXJtaXNzaW9uc0VudW0uTE9DSyk7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0UHJvcGVydHkodGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQsICdkaXNhYmxlZCcsICFoYXNQZXJtaXNzaW9uKTtcbiAgICB9XG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE1hdGVyaWFsTW9kdWxlIH0gZnJvbSAnLi4vbWF0ZXJpYWwubW9kdWxlJztcblxuaW1wb3J0IHsgTm9kZURvd25sb2FkRGlyZWN0aXZlIH0gZnJvbSAnLi9ub2RlLWRvd25sb2FkLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBOb2RlTG9ja0RpcmVjdGl2ZSB9IGZyb20gJy4vbm9kZS1sb2NrLmRpcmVjdGl2ZSc7XG5cbkBOZ01vZHVsZSh7XG4gICAgaW1wb3J0czogW1xuICAgICAgICBDb21tb25Nb2R1bGUsXG4gICAgICAgIE1hdGVyaWFsTW9kdWxlXG4gICAgXSxcbiAgICBkZWNsYXJhdGlvbnM6IFtcbiAgICAgICAgTm9kZURvd25sb2FkRGlyZWN0aXZlLFxuICAgICAgICBOb2RlTG9ja0RpcmVjdGl2ZVxuICAgIF0sXG4gICAgZXhwb3J0czogW1xuICAgICAgICBOb2RlRG93bmxvYWREaXJlY3RpdmUsXG4gICAgICAgIE5vZGVMb2NrRGlyZWN0aXZlXG4gICAgXVxufSlcbmV4cG9ydCBjbGFzcyBDb250ZW50RGlyZWN0aXZlTW9kdWxlIHtcbn1cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEFsZnJlc2NvQXBpU2VydmljZSB9IGZyb20gJ0BhbGZyZXNjby9hZGYtY29yZSc7XG5pbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBSZXNwb25zZSB9IGZyb20gJ0Bhbmd1bGFyL2h0dHAnO1xuaW1wb3J0IHsgUmF0aW5nQm9keSB9IGZyb20gJ2FsZnJlc2NvLWpzLWFwaSc7XG5pbXBvcnQgeyBmcm9tLCB0aHJvd0Vycm9yIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBjYXRjaEVycm9yIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgUmF0aW5nU2VydmljZSB7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGFwaVNlcnZpY2U6IEFsZnJlc2NvQXBpU2VydmljZSkge1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGN1cnJlbnQgdXNlcidzIHJhdGluZyBmb3IgYSBub2RlLlxuICAgICAqIEBwYXJhbSBub2RlSWQgTm9kZSB0byBnZXQgdGhlIHJhdGluZyBmcm9tXG4gICAgICogQHBhcmFtIHJhdGluZ1R5cGUgVHlwZSBvZiByYXRpbmcgKGNhbiBiZSBcImxpa2VzXCIgb3IgXCJmaXZlU3RhclwiKVxuICAgICAqIEByZXR1cm5zIFRoZSByYXRpbmcgdmFsdWVcbiAgICAgKi9cbiAgICBnZXRSYXRpbmcobm9kZUlkOiBzdHJpbmcsIHJhdGluZ1R5cGU6IGFueSk6IGFueSB7XG4gICAgICAgIHJldHVybiBmcm9tKHRoaXMuYXBpU2VydmljZS5nZXRJbnN0YW5jZSgpLmNvcmUucmF0aW5nc0FwaS5nZXRSYXRpbmcobm9kZUlkLCByYXRpbmdUeXBlKSlcbiAgICAgICAgICAgIC5waXBlKFxuICAgICAgICAgICAgICAgIGNhdGNoRXJyb3IodGhpcy5oYW5kbGVFcnJvcilcbiAgICAgICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyB0aGUgY3VycmVudCB1c2VyJ3MgcmF0aW5nIGZvciBhIG5vZGUuXG4gICAgICogQHBhcmFtIG5vZGVJZCBUYXJnZXQgbm9kZSBmb3IgdGhlIHJhdGluZ1xuICAgICAqIEBwYXJhbSByYXRpbmdUeXBlIFR5cGUgb2YgcmF0aW5nIChjYW4gYmUgXCJsaWtlc1wiIG9yIFwiZml2ZVN0YXJcIilcbiAgICAgKiBAcGFyYW0gdm90ZSBSYXRpbmcgdmFsdWUgKGJvb2xlYW4gZm9yIFwibGlrZXNcIiwgbnVtZXJpYyAwLi41IGZvciBcImZpdmVTdGFyXCIpXG4gICAgICogQHJldHVybnMgRGV0YWlscyBhYm91dCB0aGUgcmF0aW5nLCBpbmNsdWRpbmcgdGhlIG5ldyB2YWx1ZVxuICAgICAqL1xuICAgIHBvc3RSYXRpbmcobm9kZUlkOiBzdHJpbmcsIHJhdGluZ1R5cGU6IGFueSwgdm90ZTogYW55KTogYW55IHtcbiAgICAgICAgbGV0IHJhdGluZ0JvZHk6IFJhdGluZ0JvZHkgPSB7XG4gICAgICAgICAgICAnaWQnOiByYXRpbmdUeXBlLFxuICAgICAgICAgICAgJ215UmF0aW5nJzogdm90ZVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZnJvbSh0aGlzLmFwaVNlcnZpY2UuZ2V0SW5zdGFuY2UoKS5jb3JlLnJhdGluZ3NBcGkucmF0ZShub2RlSWQsIHJhdGluZ0JvZHkpKVxuICAgICAgICAgICAgLnBpcGUoXG4gICAgICAgICAgICAgICAgY2F0Y2hFcnJvcih0aGlzLmhhbmRsZUVycm9yKVxuICAgICAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBjdXJyZW50IHVzZXIncyByYXRpbmcgZm9yIGEgbm9kZS5cbiAgICAgKiBAcGFyYW0gbm9kZUlkIFRhcmdldCBub2RlXG4gICAgICogQHBhcmFtIHJhdGluZ1R5cGUgVHlwZSBvZiByYXRpbmcgdG8gcmVtb3ZlIChjYW4gYmUgXCJsaWtlc1wiIG9yIFwiZml2ZVN0YXJcIilcbiAgICAgKiBAcmV0dXJucyBOdWxsIHJlc3BvbnNlIGluZGljYXRpbmcgdGhhdCB0aGUgb3BlcmF0aW9uIGlzIGNvbXBsZXRlXG4gICAgICovXG4gICAgZGVsZXRlUmF0aW5nKG5vZGVJZDogc3RyaW5nLCByYXRpbmdUeXBlOiBhbnkpOiBhbnkge1xuICAgICAgICByZXR1cm4gZnJvbSh0aGlzLmFwaVNlcnZpY2UuZ2V0SW5zdGFuY2UoKS5jb3JlLnJhdGluZ3NBcGkucmVtb3ZlUmF0aW5nKG5vZGVJZCwgcmF0aW5nVHlwZSkpXG4gICAgICAgICAgICAucGlwZShcbiAgICAgICAgICAgICAgICBjYXRjaEVycm9yKHRoaXMuaGFuZGxlRXJyb3IpXG4gICAgICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRXJyb3IoZXJyb3I6IFJlc3BvbnNlKTogYW55IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIHJldHVybiB0aHJvd0Vycm9yKGVycm9yIHx8ICdTZXJ2ZXIgZXJyb3InKTtcbiAgICB9XG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE9uQ2hhbmdlcywgT3V0cHV0LCBWaWV3RW5jYXBzdWxhdGlvbiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgUmF0aW5nU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvcmF0aW5nLnNlcnZpY2UnO1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ2FkZi1yYXRpbmcnLFxuICAgIHN0eWxlVXJsczogWycuL3JhdGluZy5jb21wb25lbnQuc2NzcyddLFxuICAgIHRlbXBsYXRlVXJsOiAnLi9yYXRpbmcuY29tcG9uZW50Lmh0bWwnLFxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmVcbn0pXG5leHBvcnQgY2xhc3MgUmF0aW5nQ29tcG9uZW50IGltcGxlbWVudHMgT25DaGFuZ2VzIHtcblxuICAgIC8qKiBJZGVudGlmaWVyIG9mIHRoZSBub2RlIHRvIGFwcGx5IHRoZSByYXRpbmcgdG8uICovXG4gICAgQElucHV0KClcbiAgICBub2RlSWQ6IHN0cmluZztcblxuICAgIGF2ZXJhZ2U6IG51bWJlciA9IDA7XG5cbiAgICByYXRpbmdUeXBlOiBzdHJpbmcgPSAnZml2ZVN0YXInO1xuXG4gICAgLyoqIEVtaXR0ZWQgd2hlbiB0aGUgXCJ2b3RlXCIgZ2V0cyBjaGFuZ2VkLiAqL1xuICAgIEBPdXRwdXQoKVxuICAgIGNoYW5nZVZvdGUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgICBzdGFyczogQXJyYXk8YW55PiA9IFtdO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSByYXRpbmdTZXJ2aWNlOiBSYXRpbmdTZXJ2aWNlKSB7XG4gICAgfVxuXG4gICAgbmdPbkNoYW5nZXMoKSB7XG4gICAgICAgIGxldCByYXRpbmdPYnNlcnZlciA9IHRoaXMucmF0aW5nU2VydmljZS5nZXRSYXRpbmcodGhpcy5ub2RlSWQsIHRoaXMucmF0aW5nVHlwZSk7XG5cbiAgICAgICAgcmF0aW5nT2JzZXJ2ZXIuc3Vic2NyaWJlKFxuICAgICAgICAgICAgKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5lbnRyeS5hZ2dyZWdhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdmVyYWdlID0gZGF0YS5lbnRyeS5hZ2dyZWdhdGUuYXZlcmFnZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVTdGFycygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gcmF0aW5nT2JzZXJ2ZXI7XG4gICAgfVxuXG4gICAgY2FsY3VsYXRlU3RhcnMoKSB7XG4gICAgICAgIHRoaXMuc3RhcnMgPSBbXTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykge1xuICAgICAgICAgICAgaWYgKGkgPCB0aGlzLmF2ZXJhZ2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJzLnB1c2goe2ZpbGw6IHRydWV9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFycy5wdXNoKHtmaWxsOiBmYWxzZX0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jaGFuZ2VWb3RlLmVtaXQodGhpcy5hdmVyYWdlKTtcbiAgICB9XG5cbiAgICB1cGRhdGVWb3RlKHZvdGU6IG51bWJlcikge1xuICAgICAgICB0aGlzLnJhdGluZ1NlcnZpY2UucG9zdFJhdGluZyh0aGlzLm5vZGVJZCwgdGhpcy5yYXRpbmdUeXBlLCB2b3RlKS5zdWJzY3JpYmUoXG4gICAgICAgICAgICAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChkYXRhLmVudHJ5LmFnZ3JlZ2F0ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hdmVyYWdlICE9PSBkYXRhLmVudHJ5LmFnZ3JlZ2F0ZS5hdmVyYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmF2ZXJhZ2UgPSBkYXRhLmVudHJ5LmFnZ3JlZ2F0ZS5hdmVyYWdlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVTdGFycygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cbn1cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENvbXBvbmVudCwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgT25DaGFuZ2VzLCBPdXRwdXQsIFZpZXdFbmNhcHN1bGF0aW9uIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBSYXRpbmdTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlcy9yYXRpbmcuc2VydmljZSc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnYWRmLWxpa2UnLFxuICAgIHN0eWxlVXJsczogWycuL2xpa2UuY29tcG9uZW50LnNjc3MnXSxcbiAgICB0ZW1wbGF0ZVVybDogJy4vbGlrZS5jb21wb25lbnQuaHRtbCcsXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZVxufSlcbmV4cG9ydCBjbGFzcyBMaWtlQ29tcG9uZW50IGltcGxlbWVudHMgT25DaGFuZ2VzIHtcbiAgICAvKiogSWRlbnRpZmllciBvZiBhIG5vZGUgdG8gYXBwbHkgbGlrZXMgdG8uICovXG4gICAgQElucHV0KClcbiAgICBub2RlSWQ6IHN0cmluZztcblxuICAgIC8qKiBFbWl0dGVkIHdoZW4gdGhlIFwidm90ZVwiIGdldHMgY2hhbmdlZC4gKi9cbiAgICBAT3V0cHV0KClcbiAgICBjaGFuZ2VWb3RlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gICAgbGlrZXNDb3VudGVyOiBudW1iZXIgPSAwO1xuICAgIHJhdGluZ1R5cGU6IHN0cmluZyA9ICdsaWtlcyc7XG4gICAgaXNMaWtlOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJhdGluZ1NlcnZpY2U6IFJhdGluZ1NlcnZpY2UpIHt9XG5cbiAgICBuZ09uQ2hhbmdlcygpIHtcbiAgICAgICAgdGhpcy5jbGVhbigpO1xuXG4gICAgICAgIHRoaXMucmF0aW5nU2VydmljZS5nZXRSYXRpbmcodGhpcy5ub2RlSWQsIHRoaXMucmF0aW5nVHlwZSkuc3Vic2NyaWJlKFxuICAgICAgICAgICAgKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5lbnRyeS5hZ2dyZWdhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saWtlc0NvdW50ZXIgPSBkYXRhLmVudHJ5LmFnZ3JlZ2F0ZS5udW1iZXJPZlJhdGluZ3M7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmVudHJ5LnJhdGVkQXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNMaWtlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBsaWtlQ2xpY2soKSB7XG4gICAgICAgIGlmICh0aGlzLmlzTGlrZSkge1xuICAgICAgICAgICAgdGhpcy5yYXRpbmdTZXJ2aWNlLmRlbGV0ZVJhdGluZyh0aGlzLm5vZGVJZCwgdGhpcy5yYXRpbmdUeXBlKS5zdWJzY3JpYmUoXG4gICAgICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpa2VzQ291bnRlciAtPSAxO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzTGlrZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVZvdGUuZW1pdCh0aGlzLmxpa2VzQ291bnRlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmF0aW5nU2VydmljZS5wb3N0UmF0aW5nKHRoaXMubm9kZUlkLCB0aGlzLnJhdGluZ1R5cGUsIHRydWUpLnN1YnNjcmliZShcbiAgICAgICAgICAgICAgICAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpa2VzQ291bnRlciA9IGRhdGEuZW50cnkuYWdncmVnYXRlLm51bWJlck9mUmF0aW5ncztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0xpa2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVZvdGUuZW1pdCh0aGlzLmxpa2VzQ291bnRlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNsZWFuKCkge1xuICAgICAgICB0aGlzLmlzTGlrZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmxpa2VzQ291bnRlciA9IDA7XG4gICAgfVxufVxuIiwiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBNYXRlcmlhbE1vZHVsZSB9IGZyb20gJy4uL21hdGVyaWFsLm1vZHVsZSc7XG5cbmltcG9ydCB7IExpa2VDb21wb25lbnQgfSBmcm9tICcuL2xpa2UuY29tcG9uZW50JztcbmltcG9ydCB7IFJhdGluZ0NvbXBvbmVudCB9IGZyb20gJy4vcmF0aW5nLmNvbXBvbmVudCc7XG5cbkBOZ01vZHVsZSh7XG4gICAgaW1wb3J0czogW1xuICAgICAgICBDb21tb25Nb2R1bGUsXG4gICAgICAgIE1hdGVyaWFsTW9kdWxlXG4gICAgXSxcbiAgICBleHBvcnRzOiBbXG4gICAgICAgIFJhdGluZ0NvbXBvbmVudCxcbiAgICAgICAgTGlrZUNvbXBvbmVudFxuICAgIF0sXG4gICAgZGVjbGFyYXRpb25zOiBbXG4gICAgICAgIFJhdGluZ0NvbXBvbmVudCxcbiAgICAgICAgTGlrZUNvbXBvbmVudFxuICAgIF1cbn0pXG5leHBvcnQgY2xhc3MgU29jaWFsTW9kdWxlIHt9XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBBbGZyZXNjb0FwaVNlcnZpY2UsIExvZ1NlcnZpY2UgfSBmcm9tICdAYWxmcmVzY28vYWRmLWNvcmUnO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyLCBJbmplY3RhYmxlLCBPdXRwdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE9ic2VydmFibGUsIGZyb20sIHRocm93RXJyb3IgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IGNhdGNoRXJyb3IgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBUYWdQYWdpbmcgfSBmcm9tICdhbGZyZXNjby1qcy1hcGknO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgVGFnU2VydmljZSB7XG5cbiAgICAvKiogRW1pdHRlZCB3aGVuIHRhZyBpbmZvcm1hdGlvbiBpcyB1cGRhdGVkLiAqL1xuICAgIEBPdXRwdXQoKVxuICAgIHJlZnJlc2ggPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGFwaVNlcnZpY2U6IEFsZnJlc2NvQXBpU2VydmljZSxcbiAgICAgICAgICAgICAgICBwcml2YXRlIGxvZ1NlcnZpY2U6IExvZ1NlcnZpY2UpIHtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIGEgbGlzdCBvZiB0YWdzIGFkZGVkIHRvIGEgbm9kZS5cbiAgICAgKiBAcGFyYW0gbm9kZUlkIElEIG9mIHRoZSB0YXJnZXQgbm9kZVxuICAgICAqIEByZXR1cm5zIFRhZ1BhZ2luZyBvYmplY3QgKGRlZmluZWQgaW4gSlNBUEkpIGNvbnRhaW5pbmcgdGhlIHRhZ3NcbiAgICAgKi9cbiAgICBnZXRUYWdzQnlOb2RlSWQobm9kZUlkOiBzdHJpbmcpOiBhbnkge1xuICAgICAgICByZXR1cm4gZnJvbSh0aGlzLmFwaVNlcnZpY2UuZ2V0SW5zdGFuY2UoKS5jb3JlLnRhZ3NBcGkuZ2V0Tm9kZVRhZ3Mobm9kZUlkKSkucGlwZShcbiAgICAgICAgICAgIGNhdGNoRXJyb3IoZXJyID0+IHRoaXMuaGFuZGxlRXJyb3IoZXJyKSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIGEgbGlzdCBvZiBhbGwgdGhlIHRhZ3MgYWxyZWFkeSBkZWZpbmVkIGluIHRoZSByZXBvc2l0b3J5LlxuICAgICAqIEBwYXJhbSBvcHRzIE9wdGlvbnMgc3VwcG9ydGVkIGJ5IEpTQVBJXG4gICAgICogQHJldHVybnMgVGFnUGFnaW5nIG9iamVjdCAoZGVmaW5lZCBpbiBKU0FQSSkgY29udGFpbmluZyB0aGUgdGFnc1xuICAgICAqL1xuICAgIGdldEFsbFRoZVRhZ3Mob3B0cz86IGFueSk6IE9ic2VydmFibGU8VGFnUGFnaW5nPiB7XG4gICAgICAgIHJldHVybiBmcm9tKHRoaXMuYXBpU2VydmljZS5nZXRJbnN0YW5jZSgpLmNvcmUudGFnc0FwaS5nZXRUYWdzKG9wdHMpKVxuICAgICAgICAgICAgLnBpcGUoY2F0Y2hFcnJvcihlcnIgPT4gdGhpcy5oYW5kbGVFcnJvcihlcnIpKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBhIHRhZyB0byBhIG5vZGUuXG4gICAgICogQHBhcmFtIG5vZGVJZCBJRCBvZiB0aGUgdGFyZ2V0IG5vZGVcbiAgICAgKiBAcGFyYW0gdGFnTmFtZSBOYW1lIG9mIHRoZSB0YWcgdG8gYWRkXG4gICAgICogQHJldHVybnMgVGFnRW50cnkgb2JqZWN0IChkZWZpbmVkIGluIEpTQVBJKSB3aXRoIGRldGFpbHMgb2YgdGhlIG5ldyB0YWdcbiAgICAgKi9cbiAgICBhZGRUYWcobm9kZUlkOiBzdHJpbmcsIHRhZ05hbWU6IHN0cmluZyk6IGFueSB7XG4gICAgICAgIGNvbnN0IGFsZnJlc2NvQXBpOiBhbnkgPSB0aGlzLmFwaVNlcnZpY2UuZ2V0SW5zdGFuY2UoKTtcbiAgICAgICAgY29uc3QgdGFnQm9keSA9IG5ldyBhbGZyZXNjb0FwaS5jb3JlLlRhZ0JvZHkoKTtcbiAgICAgICAgdGFnQm9keS50YWcgPSB0YWdOYW1lO1xuXG4gICAgICAgIGxldCBwcm9taXNlQWRkID0gZnJvbSh0aGlzLmFwaVNlcnZpY2UuZ2V0SW5zdGFuY2UoKS5jb3JlLnRhZ3NBcGkuYWRkVGFnKG5vZGVJZCwgdGFnQm9keSkpO1xuXG4gICAgICAgIHByb21pc2VBZGQuc3Vic2NyaWJlKChkYXRhKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2guZW1pdChkYXRhKTtcbiAgICAgICAgfSwgKGVycikgPT4ge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnIpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcHJvbWlzZUFkZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgdGFnIGZyb20gYSBub2RlLlxuICAgICAqIEBwYXJhbSBub2RlSWQgSUQgb2YgdGhlIHRhcmdldCBub2RlXG4gICAgICogQHBhcmFtIHRhZyBOYW1lIG9mIHRoZSB0YWcgdG8gcmVtb3ZlXG4gICAgICogQHJldHVybnMgTnVsbCBvYmplY3Qgd2hlbiB0aGUgb3BlcmF0aW9uIGNvbXBsZXRlc1xuICAgICAqL1xuICAgIHJlbW92ZVRhZyhub2RlSWQ6IHN0cmluZywgdGFnOiBzdHJpbmcpOiBhbnkge1xuICAgICAgICBjb25zdCBwcm9taXNlUmVtb3ZlID0gZnJvbSh0aGlzLmFwaVNlcnZpY2UuZ2V0SW5zdGFuY2UoKS5jb3JlLnRhZ3NBcGkucmVtb3ZlVGFnKG5vZGVJZCwgdGFnKSk7XG5cbiAgICAgICAgcHJvbWlzZVJlbW92ZS5zdWJzY3JpYmUoKGRhdGEpID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaC5lbWl0KGRhdGEpO1xuICAgICAgICB9LCAoZXJyKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBwcm9taXNlUmVtb3ZlO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRXJyb3IoZXJyb3I6IGFueSkge1xuICAgICAgICB0aGlzLmxvZ1NlcnZpY2UuZXJyb3IoZXJyb3IpO1xuICAgICAgICByZXR1cm4gdGhyb3dFcnJvcihlcnJvciB8fCAnU2VydmVyIGVycm9yJyk7XG4gICAgfVxufVxuIiwiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgVHJhbnNsYXRpb25TZXJ2aWNlIH0gZnJvbSAnQGFsZnJlc2NvL2FkZi1jb3JlJztcbmltcG9ydCB7IENvbXBvbmVudCwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgT25DaGFuZ2VzLCBPdXRwdXQsIFZpZXdFbmNhcHN1bGF0aW9uLCBPbkRlc3Ryb3ksIE9uSW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgVGFnU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvdGFnLnNlcnZpY2UnO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XG5cbi8qKlxuICpcbiAqIFRoaXMgY29tcG9uZW50LCBwcm92aWRlIGEgbGlzdCBvZiB0aGUgdGFncyByZWxhdGl2ZSBhIG5vZGUgd2l0aCBhY3Rpb25zIGJ1dHRvbiB0byBhZGQgb3IgcmVtb3ZlIG5ldyB0YWdcbiAqL1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ2FkZi10YWctbm9kZS1hY3Rpb25zLWxpc3QnLFxuICAgIHRlbXBsYXRlVXJsOiAnLi90YWctYWN0aW9ucy5jb21wb25lbnQuaHRtbCcsXG4gICAgc3R5bGVVcmxzOiBbJy4vdGFnLWFjdGlvbnMuY29tcG9uZW50LnNjc3MnXSxcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lXG59KVxuZXhwb3J0IGNsYXNzIFRhZ0FjdGlvbnNDb21wb25lbnQgaW1wbGVtZW50cyBPbkNoYW5nZXMsIE9uSW5pdCwgT25EZXN0cm95IHtcblxuICAgIC8qKiBUaGUgaWRlbnRpZmllciBvZiBhIG5vZGUuICovXG4gICAgQElucHV0KClcbiAgICBub2RlSWQ6IHN0cmluZztcblxuICAgIC8qKiBFbWl0dGVkIHdoZW4gYSB0YWcgaXMgYWRkZWQgc3VjY2Vzc2Z1bGx5LiAqL1xuICAgIEBPdXRwdXQoKVxuICAgIHN1Y2Nlc3NBZGQ6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gICAgLyoqIEVtaXR0ZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMuICovXG4gICAgQE91dHB1dCgpXG4gICAgZXJyb3I6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gICAgLyoqIEVtaXR0ZWQgd2hlbiBhbiBhY3Rpb24gaXMgY2hvc2VuLiAqL1xuICAgIEBPdXRwdXQoKVxuICAgIHJlc3VsdCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICAgIG5ld1RhZ05hbWU6IHN0cmluZztcbiAgICB0YWdzRW50cmllczogYW55O1xuICAgIGVycm9yTXNnOiBzdHJpbmc7XG4gICAgZGlzYWJsZUFkZFRhZzogYm9vbGVhbiA9IHRydWU7XG5cbiAgICBwcml2YXRlIHN1YnNjcmlwdGlvbnM6IFN1YnNjcmlwdGlvbltdID0gW107XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHRhZ1NlcnZpY2U6IFRhZ1NlcnZpY2UsIHByaXZhdGUgdHJhbnNsYXRlU2VydmljZTogVHJhbnNsYXRpb25TZXJ2aWNlKSB7fVxuXG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKFxuICAgICAgICAgICAgdGhpcy50YWdTZXJ2aWNlLnJlZnJlc2guc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hUYWcoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgbmdPbkNoYW5nZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZnJlc2hUYWcoKTtcbiAgICB9XG5cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmZvckVhY2goc3Vic2NyaXB0aW9uID0+IHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gW107XG4gICAgfVxuXG4gICAgcmVmcmVzaFRhZygpIHtcbiAgICAgICAgaWYgKHRoaXMubm9kZUlkKSB7XG4gICAgICAgICAgICB0aGlzLnRhZ1NlcnZpY2UuZ2V0VGFnc0J5Tm9kZUlkKHRoaXMubm9kZUlkKS5zdWJzY3JpYmUoKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnRhZ3NFbnRyaWVzID0gZGF0YS5saXN0LmVudHJpZXM7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlQWRkVGFnID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXN1bHQuZW1pdCh0aGlzLnRhZ3NFbnRyaWVzKTtcbiAgICAgICAgICAgIH0sICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnRhZ3NFbnRyaWVzID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVBZGRUYWcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0LmVtaXQodGhpcy50YWdzRW50cmllcyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFkZFRhZygpIHtcbiAgICAgICAgaWYgKHRoaXMuc2VhcmNoVGFnKHRoaXMubmV3VGFnTmFtZSkpIHtcbiAgICAgICAgICAgIHRoaXMudHJhbnNsYXRlU2VydmljZS5nZXQoJ1RBRy5NRVNTQUdFUy5FWElTVCcpLnN1YnNjcmliZSgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmVycm9yTXNnID0gZXJyb3I7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZXJyb3IuZW1pdCh0aGlzLmVycm9yTXNnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudGFnU2VydmljZS5hZGRUYWcodGhpcy5ub2RlSWQsIHRoaXMubmV3VGFnTmFtZSkuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm5ld1RhZ05hbWUgPSAnJztcbiAgICAgICAgICAgICAgICB0aGlzLnN1Y2Nlc3NBZGQuZW1pdCh0aGlzLm5vZGVJZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNlYXJjaFRhZyhzZWFyY2hUYWdOYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKHRoaXMudGFnc0VudHJpZXMpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRhZ3NFbnRyaWVzLmZpbmQoKGN1cnJlbnRUYWcpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKHNlYXJjaFRhZ05hbWUgPT09IGN1cnJlbnRUYWcuZW50cnkudGFnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY2xlYW5FcnJvck1zZygpIHtcbiAgICAgICAgdGhpcy5lcnJvck1zZyA9ICcnO1xuICAgIH1cblxuICAgIHJlbW92ZVRhZyh0YWc6IHN0cmluZykge1xuICAgICAgICB0aGlzLnRhZ1NlcnZpY2UucmVtb3ZlVGFnKHRoaXMubm9kZUlkLCB0YWcpO1xuICAgIH1cbn1cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENvbXBvbmVudCwgRXZlbnRFbWl0dGVyLCBPbkluaXQsIE91dHB1dCwgVmlld0VuY2Fwc3VsYXRpb24gfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFRhZ1NlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL3RhZy5zZXJ2aWNlJztcbmltcG9ydCB7IFBhZ2luYXRpb25Nb2RlbCB9IGZyb20gJ0BhbGZyZXNjby9hZGYtY29yZSc7XG5cbi8qKlxuICogVGhpcyBjb21wb25lbnQgcHJvdmlkZSBhIGxpc3Qgb2YgYWxsIHRoZSB0YWcgaW5zaWRlIHRoZSBFQ01cbiAqL1xuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdhZGYtdGFnLWxpc3QnLFxuICAgIHRlbXBsYXRlVXJsOiAnLi90YWctbGlzdC5jb21wb25lbnQuaHRtbCcsXG4gICAgc3R5bGVVcmxzOiBbJy4vdGFnLWxpc3QuY29tcG9uZW50LnNjc3MnXSxcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lXG59KVxuZXhwb3J0IGNsYXNzIFRhZ0xpc3RDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuXG4gICAgLyoqIEVtaXR0ZWQgd2hlbiBhIHRhZyBpcyBzZWxlY3RlZC4gKi9cbiAgICBAT3V0cHV0KClcbiAgICByZXN1bHQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgICAvKipcbiAgICAgKiBBcnJheSBvZiB0YWdzIHRoYXQgYXJlIGRpc3BsYXllZFxuICAgICAqL1xuICAgIHRhZ3NFbnRyaWVzOiBhbnkgPSBbXTtcblxuICAgIC8qKlxuICAgICAqIE51bWJlciBvZiBpdGVtcyBwZXIgaXRlcmF0aW9uXG4gICAgICovXG4gICAgc2l6ZTogbnVtYmVyID0gMTA7XG5cbiAgICBkZWZhdWx0UGFnaW5hdGlvbjogUGFnaW5hdGlvbk1vZGVsO1xuICAgIHBhZ2luYXRpb246IFBhZ2luYXRpb25Nb2RlbDtcblxuICAgIGlzTG9hZGluZyA9IGZhbHNlO1xuICAgIGlzU2l6ZU1pbmltdW0gPSB0cnVlO1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0gdGFnU2VydmljZVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgdGFnU2VydmljZTogVGFnU2VydmljZSkge1xuXG4gICAgICAgIHRoaXMuZGVmYXVsdFBhZ2luYXRpb24gPSB7XG4gICAgICAgICAgICBza2lwQ291bnQ6IDAsXG4gICAgICAgICAgICBtYXhJdGVtczogdGhpcy5zaXplLFxuICAgICAgICAgICAgaGFzTW9yZUl0ZW1zOiBmYWxzZVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucGFnaW5hdGlvbiA9IHRoaXMuZGVmYXVsdFBhZ2luYXRpb247XG5cbiAgICAgICAgdGhpcy50YWdTZXJ2aWNlLnJlZnJlc2guc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudGFnc0VudHJpZXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFRhZyh0aGlzLmRlZmF1bHRQYWdpbmF0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZnJlc2hUYWcodGhpcy5kZWZhdWx0UGFnaW5hdGlvbik7XG4gICAgfVxuXG4gICAgcmVmcmVzaFRhZyhvcHRzPzogYW55KSB7XG4gICAgICAgIHRoaXMudGFnU2VydmljZS5nZXRBbGxUaGVUYWdzKG9wdHMpLnN1YnNjcmliZSgodGFnczogYW55KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRhZ3NFbnRyaWVzID0gdGhpcy50YWdzRW50cmllcy5jb25jYXQodGFncy5saXN0LmVudHJpZXMpO1xuICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uID0gdGFncy5saXN0LnBhZ2luYXRpb247XG4gICAgICAgICAgICB0aGlzLnJlc3VsdC5lbWl0KHRoaXMudGFnc0VudHJpZXMpO1xuICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgbG9hZE1vcmVUYWdzKCkge1xuICAgICAgICBpZiAodGhpcy5wYWdpbmF0aW9uLmhhc01vcmVJdGVtcykge1xuICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5pc1NpemVNaW5pbXVtID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFRhZyh7XG4gICAgICAgICAgICAgICAgc2tpcENvdW50OiB0aGlzLnBhZ2luYXRpb24uc2tpcENvdW50ICsgdGhpcy5wYWdpbmF0aW9uLmNvdW50LFxuICAgICAgICAgICAgICAgIG1heEl0ZW1zOiB0aGlzLnNpemVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbG9hZExlc3NUYWdzKCkge1xuICAgICAgICB0aGlzLmlzU2l6ZU1pbmltdW0gPSBmYWxzZTtcbiAgICAgICAgdGhpcy50YWdzRW50cmllcyA9IHRoaXMudGFnc0VudHJpZXMuc2xpY2UoMCwgdGhpcy50YWdzRW50cmllcy5sZW5ndGggLSB0aGlzLnBhZ2luYXRpb24uY291bnQpO1xuICAgICAgICB0aGlzLnBhZ2luYXRpb24uc2tpcENvdW50ID0gdGhpcy5wYWdpbmF0aW9uLnNraXBDb3VudCAtIHRoaXMucGFnaW5hdGlvbi5jb3VudDtcbiAgICAgICAgdGhpcy5wYWdpbmF0aW9uLmhhc01vcmVJdGVtcyA9IHRydWU7XG5cbiAgICAgICAgaWYgKHRoaXMudGFnc0VudHJpZXMubGVuZ3RoIDw9IHRoaXMuc2l6ZSkge1xuICAgICAgICAgICAgdGhpcy5pc1NpemVNaW5pbXVtID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENvbXBvbmVudCwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgT25DaGFuZ2VzLCBPdXRwdXQsIFZpZXdFbmNhcHN1bGF0aW9uIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBUYWdTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlcy90YWcuc2VydmljZSc7XG5cbi8qKlxuICpcbiAqIFRoaXMgY29tcG9uZW50LCBTaG93Tm9kZVRhZyBhIGxpc3Qgb2YgdGhlIHRhZyBvbiByZWxhdGl2ZSBhIG5vZGVcbiAqL1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ2FkZi10YWctbm9kZS1saXN0JyxcbiAgICB0ZW1wbGF0ZVVybDogJy4vdGFnLW5vZGUtbGlzdC5jb21wb25lbnQuaHRtbCcsXG4gICAgc3R5bGVVcmxzOiBbJy4vdGFnLW5vZGUtbGlzdC5jb21wb25lbnQuc2NzcyddLFxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmVcbn0pXG5leHBvcnQgY2xhc3MgVGFnTm9kZUxpc3RDb21wb25lbnQgaW1wbGVtZW50cyBPbkNoYW5nZXMge1xuICAgIC8qKiBUaGUgaWRlbnRpZmllciBvZiBhIG5vZGUuICovXG4gICAgQElucHV0KClcbiAgICBub2RlSWQ6IHN0cmluZztcblxuICAgIC8qKiBTaG93IGRlbGV0ZSBidXR0b24gKi9cbiAgICBASW5wdXQoKVxuICAgIHNob3dEZWxldGUgPSB0cnVlO1xuXG4gICAgdGFnc0VudHJpZXM6IGFueTtcblxuICAgIC8qKiBFbWl0dGVkIHdoZW4gYSB0YWcgaXMgc2VsZWN0ZWQuICovXG4gICAgQE91dHB1dCgpXG4gICAgcmVzdWx0cyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHRhZ1NlcnZpY2VcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHRhZ1NlcnZpY2U6IFRhZ1NlcnZpY2UpIHtcbiAgICAgICAgdGhpcy50YWdTZXJ2aWNlLnJlZnJlc2guc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFRhZygpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBuZ09uQ2hhbmdlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVmcmVzaFRhZygpO1xuICAgIH1cblxuICAgIHJlZnJlc2hUYWcoKSB7XG4gICAgICAgIGlmICh0aGlzLm5vZGVJZCkge1xuICAgICAgICAgICAgdGhpcy50YWdTZXJ2aWNlLmdldFRhZ3NCeU5vZGVJZCh0aGlzLm5vZGVJZCkuc3Vic2NyaWJlKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy50YWdzRW50cmllcyA9IGRhdGEubGlzdC5lbnRyaWVzO1xuICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0cy5lbWl0KHRoaXMudGFnc0VudHJpZXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW1vdmVUYWcodGFnOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy50YWdTZXJ2aWNlLnJlbW92ZVRhZyh0aGlzLm5vZGVJZCwgdGFnKS5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoVGFnKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRm9ybXNNb2R1bGUsIFJlYWN0aXZlRm9ybXNNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5cbmltcG9ydCB7IE1hdGVyaWFsTW9kdWxlIH0gZnJvbSAnLi4vbWF0ZXJpYWwubW9kdWxlJztcbmltcG9ydCB7IFRhZ0FjdGlvbnNDb21wb25lbnQgfSBmcm9tICcuL3RhZy1hY3Rpb25zLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBUYWdMaXN0Q29tcG9uZW50IH0gZnJvbSAnLi90YWctbGlzdC5jb21wb25lbnQnO1xuaW1wb3J0IHsgVGFnTm9kZUxpc3RDb21wb25lbnQgfSBmcm9tICcuL3RhZy1ub2RlLWxpc3QuY29tcG9uZW50JztcbmltcG9ydCB7IENvcmVNb2R1bGUgfSBmcm9tICdAYWxmcmVzY28vYWRmLWNvcmUnO1xuXG5ATmdNb2R1bGUoe1xuICAgIGltcG9ydHM6IFtcbiAgICAgICAgQ29tbW9uTW9kdWxlLFxuICAgICAgICBNYXRlcmlhbE1vZHVsZSxcbiAgICAgICAgRm9ybXNNb2R1bGUsXG4gICAgICAgIFJlYWN0aXZlRm9ybXNNb2R1bGUsXG4gICAgICAgIENvcmVNb2R1bGUuZm9yQ2hpbGQoKVxuICAgIF0sXG4gICAgZXhwb3J0czogW1xuICAgICAgICBUYWdBY3Rpb25zQ29tcG9uZW50LFxuICAgICAgICBUYWdMaXN0Q29tcG9uZW50LFxuICAgICAgICBUYWdOb2RlTGlzdENvbXBvbmVudFxuICAgIF0sXG4gICAgZGVjbGFyYXRpb25zOiBbXG4gICAgICAgIFRhZ0FjdGlvbnNDb21wb25lbnQsXG4gICAgICAgIFRhZ0xpc3RDb21wb25lbnQsXG4gICAgICAgIFRhZ05vZGVMaXN0Q29tcG9uZW50XG4gICAgXVxufSlcbmV4cG9ydCBjbGFzcyBUYWdNb2R1bGUge31cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IE9iamVjdERhdGFUYWJsZUFkYXB0ZXIgfSBmcm9tICdAYWxmcmVzY28vYWRmLWNvcmUnO1xuaW1wb3J0IHsgQWxmcmVzY29BcGlTZXJ2aWNlLCBMb2dTZXJ2aWNlIH0gZnJvbSAnQGFsZnJlc2NvL2FkZi1jb3JlJztcbmltcG9ydCB7IENvbXBvbmVudCwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgT25DaGFuZ2VzLCBPdXRwdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuLyoqXG4gKiA8YWRmLXdlYnNjcmlwdC1nZXQgW3NjcmlwdFBhdGhdPVwic3RyaW5nXCJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgIFtzY3JpcHRBcmdzXT1cIk9iamVjdFwiXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICBbY29udGV4dFJvb3RdPVwic3RyaW5nXCJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgIFtzZXJ2aWNlUGF0aF09XCJzdHJpbmdcIlxuICogICAgICAgICAgICAgICAgICAgICAgICAgW2NvbnRlbnRUeXBlXT1cIkpTT058SFRNTHxEQVRBVEFCTEVcIlxuICogICAgICAgICAgICAgICAgICAgICAgICAgKHN1Y2Nlc3MpPVwiY3VzdG9tTWV0aG9kKCRldmVudCk+XG4gKiA8L2FkZi13ZWJzY3JpcHQtZ2V0PlxuICpcbiAqIFRoaXMgY29tcG9uZW50LCBwcm92aWRlIGEgZ2V0IHdlYnNjcmlwdCB2aWV3ZXJcbiAqXG4gKiBASW5wdXRQYXJhbSB7c3RyaW5nfSBzY3JpcHRQYXRoIHBhdGggdG8gV2ViIFNjcmlwdCAoYXMgZGVmaW5lZCBieSBXZWIgU2NyaXB0KVxuICogQElucHV0UGFyYW0ge09iamVjdH0gc2NyaXB0QXJncyBhcmd1bWVudHMgdG8gcGFzcyB0byBXZWIgU2NyaXB0XG4gKiBASW5wdXRQYXJhbSB7c3RyaW5nfSBjb250ZXh0Um9vdCBwYXRoIHdoZXJlIGFwcGxpY2F0aW9uIGlzIGRlcGxveWVkIGRlZmF1bHQgdmFsdWUgJ2FsZnJlc2NvJ1xuICogQElucHV0UGFyYW0ge3N0cmluZ30gc2VydmljZVBhdGggcGF0aCB3aGVyZSBXZWIgU2NyaXB0IHNlcnZpY2UgaXMgbWFwcGVkIGRlZmF1bHQgdmFsdWUgJ3NlcnZpY2UnXG4gKiBASW5wdXRQYXJhbSB7c3RyaW5nfSBjb250ZW50VHlwZSBKU09OIHwgSFRNTCB8IERBVEFUQUJMRSB8IFRFWFRcbiAqXG4gKiBAT3V0cHV0IC0gc3VjY2VzcyAtIFRoZSBldmVudCBpcyBlbWl0dGVkIHdoZW4gdGhlIGRhdGEgYXJlIHJlY2l2ZWRcbiAqXG4gKi9cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnYWRmLXdlYnNjcmlwdC1nZXQnLFxuICAgIHRlbXBsYXRlVXJsOiAnd2Vic2NyaXB0LmNvbXBvbmVudC5odG1sJ1xufSlcbmV4cG9ydCBjbGFzcyBXZWJzY3JpcHRDb21wb25lbnQgaW1wbGVtZW50cyBPbkNoYW5nZXMge1xuXG4gICAgLyoqIChyZXF1aXJlZCkgUGF0aCB0byB0aGUgd2Vic2NyaXB0IChhcyBkZWZpbmVkIGJ5IHdlYnNjcmlwdCkuICovXG4gICAgQElucHV0KClcbiAgICBzY3JpcHRQYXRoOiBzdHJpbmc7XG5cbiAgICAvKiogQXJndW1lbnRzIHRvIHBhc3MgdG8gdGhlIHdlYnNjcmlwdC4gKi9cbiAgICBASW5wdXQoKVxuICAgIHNjcmlwdEFyZ3M6IGFueTtcblxuICAgIC8qKiBUb2dnbGVzIHdoZXRoZXIgdG8gc2hvdyBvciBoaWRlIHRoZSBkYXRhLiAqL1xuICAgIEBJbnB1dCgpXG4gICAgc2hvd0RhdGE6IGJvb2xlYW4gPSB0cnVlO1xuXG4gICAgLyoqIFBhdGggd2hlcmUgdGhlIGFwcGxpY2F0aW9uIGlzIGRlcGxveWVkICovXG4gICAgQElucHV0KClcbiAgICBjb250ZXh0Um9vdDogc3RyaW5nID0gJ2FsZnJlc2NvJztcblxuICAgIC8qKiBQYXRoIHRoYXQgdGhlIHdlYnNjcmlwdCBzZXJ2aWNlIGlzIG1hcHBlZCB0by4gKi9cbiAgICBASW5wdXQoKVxuICAgIHNlcnZpY2VQYXRoOiBzdHJpbmcgPSAnc2VydmljZSc7XG5cbiAgICAvKiogQ29udGVudCB0eXBlIHRvIGludGVycHJldCB0aGUgZGF0YSByZWNlaXZlZCBmcm9tIHRoZSB3ZWJzY3JpcHQuXG4gICAgICogQ2FuIGJlIFwiSlNPTlwiICwgXCJIVE1MXCIgLCBcIkRBVEFUQUJMRVwiIG9yIFwiVEVYVFwiXG4gICAgICovXG4gICAgQElucHV0KClcbiAgICBjb250ZW50VHlwZTogc3RyaW5nID0gJ1RFWFQnO1xuXG4gICAgLyoqIEVtaXR0ZWQgd2hlbiB0aGUgb3BlcmF0aW9uIHN1Y2NlZWRzLiBZb3UgY2FuIGdldCB0aGUgcGxhaW4gZGF0YSBmcm9tXG4gICAgICogdGhlIHdlYnNjcmlwdCB0aHJvdWdoIHRoZSAqKnN1Y2Nlc3MqKiBldmVudCBwYXJhbWV0ZXIgYW5kIHVzZSBpdCBhcyB5b3VcbiAgICAgKiBuZWVkIGluIHlvdXIgYXBwbGljYXRpb24uXG4gICAgICovXG4gICAgQE91dHB1dCgpXG4gICAgc3VjY2VzcyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICAgIGRhdGE6IGFueSA9IHVuZGVmaW5lZDtcbiAgICBzaG93RXJyb3I6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgYXBpU2VydmljZTogQWxmcmVzY29BcGlTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIHByaXZhdGUgbG9nU2VydmljZTogTG9nU2VydmljZSkge1xuICAgIH1cblxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXMpIHtcbiAgICAgICAgaWYgKHRoaXMuc2hvd0RhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYW4oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFwaVNlcnZpY2UuZ2V0SW5zdGFuY2UoKS53ZWJTY3JpcHQuZXhlY3V0ZVdlYlNjcmlwdCgnR0VUJywgdGhpcy5zY3JpcHRQYXRoLCB0aGlzLnNjcmlwdEFyZ3MsIHRoaXMuY29udGV4dFJvb3QsIHRoaXMuc2VydmljZVBhdGgpLnRoZW4oKHdlYlNjcmlwdGRhdGEpID0+IHtcblxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YSA9IHdlYlNjcmlwdGRhdGE7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaG93RGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb250ZW50VHlwZSA9PT0gJ0RBVEFUQUJMRScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YSA9IHRoaXMuc2hvd0RhdGFBc0RhdGFUYWJsZSh3ZWJTY3JpcHRkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuc3VjY2Vzcy5lbWl0KHRoaXMuZGF0YSk7XG5cbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ1NlcnZpY2UubG9nKCdFcnJvcicgKyBlcnJvcik7XG4gICAgICAgICAgICAgICAgcmVqZWN0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogc2hvdyB0aGUgZGF0YSBpbiBhIG5nMi1hbGZyZXNjby1kYXRhdGFibGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYXRhXG4gICAgICpcbiAgICAgKiBAcmV0dXRucyB0aGUgZGF0YSBhcyBkYXRhdGFibGVcbiAgICAgKi9cbiAgICBzaG93RGF0YUFzRGF0YVRhYmxlKGRhdGE6IGFueSkge1xuICAgICAgICBsZXQgZGF0YXRhYmxlRGF0YTogYW55ID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcblxuICAgICAgICAgICAgaWYgKCFkYXRhLnNjaGVtYSkge1xuICAgICAgICAgICAgICAgIGRhdGEuc2NoZW1hID0gT2JqZWN0RGF0YVRhYmxlQWRhcHRlci5nZW5lcmF0ZVNjaGVtYShkYXRhLmRhdGEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZGF0YS5zY2hlbWEgJiYgZGF0YS5zY2hlbWEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YSA9IG5ldyBPYmplY3REYXRhVGFibGVBZGFwdGVyKGRhdGEuZGF0YSwgZGF0YS5zY2hlbWEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRoaXMubG9nU2VydmljZS5lcnJvcignZXJyb3IgZHVyaW5nIHRoZSBjYXN0IGFzIGRhdGF0YWJsZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRhdGF0YWJsZURhdGE7XG4gICAgfVxuXG4gICAgY2xlYW4oKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBpc0RhdGFUYWJsZUNvbnRlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRUeXBlID09PSAnREFUQVRBQkxFJztcbiAgICB9XG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDb3JlTW9kdWxlIH0gZnJvbSAnQGFsZnJlc2NvL2FkZi1jb3JlJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBNYXRlcmlhbE1vZHVsZSB9IGZyb20gJy4uL21hdGVyaWFsLm1vZHVsZSc7XG5pbXBvcnQgeyBXZWJzY3JpcHRDb21wb25lbnQgfSBmcm9tICcuL3dlYnNjcmlwdC5jb21wb25lbnQnO1xuXG5ATmdNb2R1bGUoe1xuICAgIGltcG9ydHM6IFtcbiAgICAgICAgQ29tbW9uTW9kdWxlLFxuICAgICAgICBNYXRlcmlhbE1vZHVsZSxcbiAgICAgICAgQ29yZU1vZHVsZS5mb3JDaGlsZCgpXG4gICAgXSxcbiAgICBleHBvcnRzOiBbXG4gICAgICAgIFdlYnNjcmlwdENvbXBvbmVudFxuICAgIF0sXG4gICAgZGVjbGFyYXRpb25zOiBbXG4gICAgICAgIFdlYnNjcmlwdENvbXBvbmVudFxuICAgIF1cbn0pXG5leHBvcnQgY2xhc3MgV2ViU2NyaXB0TW9kdWxlIHt9XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBEYXRhUm93LCBPYmplY3RVdGlscywgVGh1bWJuYWlsU2VydmljZSB9IGZyb20gJ0BhbGZyZXNjby9hZGYtY29yZSc7XG5pbXBvcnQgeyBNaW5pbWFsTm9kZSwgTWluaW1hbE5vZGVFbnRpdHkgfSBmcm9tICdhbGZyZXNjby1qcy1hcGknO1xuaW1wb3J0IHsgUGVybWlzc2lvblN0eWxlTW9kZWwgfSBmcm9tICcuLy4uL21vZGVscy9wZXJtaXNzaW9ucy1zdHlsZS5tb2RlbCc7XG5pbXBvcnQgeyBEb2N1bWVudExpc3RTZXJ2aWNlIH0gZnJvbSAnLi8uLi9zZXJ2aWNlcy9kb2N1bWVudC1saXN0LnNlcnZpY2UnO1xuXG5leHBvcnQgY2xhc3MgU2hhcmVEYXRhUm93IGltcGxlbWVudHMgRGF0YVJvdyB7XG5cbiAgICBzdGF0aWMgRVJSX09CSkVDVF9OT1RfRk9VTkQ6IHN0cmluZyA9ICdPYmplY3Qgc291cmNlIG5vdCBmb3VuZCc7XG5cbiAgICBjYWNoZTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSA9IHt9O1xuICAgIGlzU2VsZWN0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBpc0Ryb3BUYXJnZXQ6IGJvb2xlYW47XG4gICAgY3NzQ2xhc3M6IHN0cmluZyA9ICcnO1xuXG4gICAgZ2V0IG5vZGUoKTogTWluaW1hbE5vZGVFbnRpdHkge1xuICAgICAgICByZXR1cm4gdGhpcy5vYmo7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBvYmo6IE1pbmltYWxOb2RlRW50aXR5LFxuICAgICAgICAgICAgICAgIHByaXZhdGUgZG9jdW1lbnRMaXN0U2VydmljZTogRG9jdW1lbnRMaXN0U2VydmljZSxcbiAgICAgICAgICAgICAgICBwcml2YXRlIHBlcm1pc3Npb25zU3R5bGU6IFBlcm1pc3Npb25TdHlsZU1vZGVsW10sXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSB0aHVtYm5haWxTZXJ2aWNlPzogVGh1bWJuYWlsU2VydmljZSkge1xuICAgICAgICBpZiAoIW9iaikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFNoYXJlRGF0YVJvdy5FUlJfT0JKRUNUX05PVF9GT1VORCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmlzRHJvcFRhcmdldCA9IHRoaXMuaXNGb2xkZXJBbmRIYXNQZXJtaXNzaW9uVG9VcGxvYWQob2JqKTtcblxuICAgICAgICBpZiAocGVybWlzc2lvbnNTdHlsZSkge1xuICAgICAgICAgICAgdGhpcy5jc3NDbGFzcyA9IHRoaXMuZ2V0UGVybWlzc2lvbkNsYXNzKG9iaik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRQZXJtaXNzaW9uQ2xhc3Mobm9kZUVudGl0eTogTWluaW1hbE5vZGVFbnRpdHkpOiBzdHJpbmcge1xuICAgICAgICBsZXQgcGVybWlzc2lvbnNDbGFzc2VzID0gJyc7XG5cbiAgICAgICAgdGhpcy5wZXJtaXNzaW9uc1N0eWxlLmZvckVhY2goKGN1cnJlbnRQZXJtaXNzaW9uc1N0eWxlOiBQZXJtaXNzaW9uU3R5bGVNb2RlbCkgPT4ge1xuXG4gICAgICAgICAgICBpZiAodGhpcy5hcHBseVBlcm1pc3Npb25TdHlsZVRvRm9sZGVyKG5vZGVFbnRpdHkuZW50cnksIGN1cnJlbnRQZXJtaXNzaW9uc1N0eWxlKSB8fCB0aGlzLmFwcGx5UGVybWlzc2lvblN0eWxlVG9GaWxlKG5vZGVFbnRpdHkuZW50cnksIGN1cnJlbnRQZXJtaXNzaW9uc1N0eWxlKSkge1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZG9jdW1lbnRMaXN0U2VydmljZS5oYXNQZXJtaXNzaW9uKG5vZGVFbnRpdHkuZW50cnksIGN1cnJlbnRQZXJtaXNzaW9uc1N0eWxlLnBlcm1pc3Npb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb25zQ2xhc3NlcyArPSBgICR7Y3VycmVudFBlcm1pc3Npb25zU3R5bGUuY3NzfWA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBwZXJtaXNzaW9uc0NsYXNzZXM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhcHBseVBlcm1pc3Npb25TdHlsZVRvRmlsZShub2RlOiBNaW5pbWFsTm9kZSwgY3VycmVudFBlcm1pc3Npb25zU3R5bGU6IFBlcm1pc3Npb25TdHlsZU1vZGVsKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAoY3VycmVudFBlcm1pc3Npb25zU3R5bGUuaXNGaWxlICYmIG5vZGUuaXNGaWxlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFwcGx5UGVybWlzc2lvblN0eWxlVG9Gb2xkZXIobm9kZTogTWluaW1hbE5vZGUsIGN1cnJlbnRQZXJtaXNzaW9uc1N0eWxlOiBQZXJtaXNzaW9uU3R5bGVNb2RlbCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gKGN1cnJlbnRQZXJtaXNzaW9uc1N0eWxlLmlzRm9sZGVyICYmIG5vZGUuaXNGb2xkZXIpO1xuICAgIH1cblxuICAgIGlzRm9sZGVyQW5kSGFzUGVybWlzc2lvblRvVXBsb2FkKG9iajogTWluaW1hbE5vZGVFbnRpdHkpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNGb2xkZXIob2JqKSAmJiB0aGlzLmRvY3VtZW50TGlzdFNlcnZpY2UuaGFzUGVybWlzc2lvbihvYmouZW50cnksICdjcmVhdGUnKTtcbiAgICB9XG5cbiAgICBpc0ZvbGRlcihvYmo6IE1pbmltYWxOb2RlRW50aXR5KTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBvYmouZW50cnkgJiYgb2JqLmVudHJ5LmlzRm9sZGVyO1xuICAgIH1cblxuICAgIGNhY2hlVmFsdWUoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpOiBhbnkge1xuICAgICAgICB0aGlzLmNhY2hlW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIGdldFZhbHVlKGtleTogc3RyaW5nKTogYW55IHtcbiAgICAgICAgaWYgKHRoaXMuY2FjaGVba2V5XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYWNoZVtrZXldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPYmplY3RVdGlscy5nZXRWYWx1ZSh0aGlzLm9iai5lbnRyeSwga2V5KTtcbiAgICB9XG5cbiAgICBpbWFnZUVycm9yUmVzb2x2ZXIoZXZlbnQ6IEV2ZW50KTogYW55IHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGh1bWJuYWlsU2VydmljZS5nZXRNaW1lVHlwZUljb24odGhpcy5vYmouZW50cnkuY29udGVudC5taW1lVHlwZSk7XG4gICAgfVxuXG4gICAgaGFzVmFsdWUoa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmFsdWUoa2V5KSAhPT0gdW5kZWZpbmVkO1xuICAgIH1cbn1cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IERhdGFDb2x1bW4sIERhdGFSb3csIERhdGFTb3J0aW5nLCBEYXRhVGFibGVBZGFwdGVyLCBUaHVtYm5haWxTZXJ2aWNlIH0gZnJvbSAnQGFsZnJlc2NvL2FkZi1jb3JlJztcbmltcG9ydCB7IE5vZGVQYWdpbmcgfSBmcm9tICdhbGZyZXNjby1qcy1hcGknO1xuaW1wb3J0IHsgUGVybWlzc2lvblN0eWxlTW9kZWwgfSBmcm9tICcuLy4uL21vZGVscy9wZXJtaXNzaW9ucy1zdHlsZS5tb2RlbCc7XG5pbXBvcnQgeyBEb2N1bWVudExpc3RTZXJ2aWNlIH0gZnJvbSAnLi8uLi9zZXJ2aWNlcy9kb2N1bWVudC1saXN0LnNlcnZpY2UnO1xuaW1wb3J0IHsgU2hhcmVEYXRhUm93IH0gZnJvbSAnLi9zaGFyZS1kYXRhLXJvdy5tb2RlbCc7XG5cbmV4cG9ydCBjbGFzcyBTaGFyZURhdGFUYWJsZUFkYXB0ZXIgaW1wbGVtZW50cyBEYXRhVGFibGVBZGFwdGVyIHtcblxuICAgIEVSUl9ST1dfTk9UX0ZPVU5EOiBzdHJpbmcgPSAnUm93IG5vdCBmb3VuZCc7XG4gICAgRVJSX0NPTF9OT1RfRk9VTkQ6IHN0cmluZyA9ICdDb2x1bW4gbm90IGZvdW5kJztcblxuICAgIHByaXZhdGUgX3NvcnRpbmdNb2RlOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBzb3J0aW5nOiBEYXRhU29ydGluZztcbiAgICBwcml2YXRlIHJvd3M6IERhdGFSb3dbXTtcbiAgICBwcml2YXRlIGNvbHVtbnM6IERhdGFDb2x1bW5bXTtcblxuICAgIHByaXZhdGUgZmlsdGVyOiBhbnk7XG4gICAgcHJpdmF0ZSBpbWFnZVJlc29sdmVyOiBhbnk7XG5cbiAgICB0aHVtYm5haWxzOiBib29sZWFuID0gZmFsc2U7XG4gICAgcGVybWlzc2lvbnNTdHlsZTogUGVybWlzc2lvblN0eWxlTW9kZWxbXTtcbiAgICBzZWxlY3RlZFJvdzogRGF0YVJvdztcblxuICAgIHNldCBzb3J0aW5nTW9kZSh2YWx1ZTogc3RyaW5nKSB7XG4gICAgICAgIGxldCBuZXdWYWx1ZSA9ICh2YWx1ZSB8fCAnY2xpZW50JykudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgaWYgKG5ld1ZhbHVlICE9PSAnY2xpZW50JyAmJiBuZXdWYWx1ZSAhPT0gJ3NlcnZlcicpIHtcbiAgICAgICAgICAgIG5ld1ZhbHVlID0gJ2NsaWVudCc7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc29ydGluZ01vZGUgPSBuZXdWYWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgc29ydGluZ01vZGUoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NvcnRpbmdNb2RlO1xuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZG9jdW1lbnRMaXN0U2VydmljZTogRG9jdW1lbnRMaXN0U2VydmljZSxcbiAgICAgICAgICAgICAgICBwcml2YXRlIHRodW1ibmFpbFNlcnZpY2U6IFRodW1ibmFpbFNlcnZpY2UsXG4gICAgICAgICAgICAgICAgc2NoZW1hOiBEYXRhQ29sdW1uW10gPSBbXSxcbiAgICAgICAgICAgICAgICBzb3J0aW5nPzogRGF0YVNvcnRpbmcsXG4gICAgICAgICAgICAgICAgc29ydGluZ01vZGU6IHN0cmluZyA9ICdjbGllbnQnKSB7XG4gICAgICAgIHRoaXMucm93cyA9IFtdO1xuICAgICAgICB0aGlzLmNvbHVtbnMgPSBzY2hlbWEgfHwgW107XG4gICAgICAgIHRoaXMuc29ydGluZyA9IHNvcnRpbmc7XG4gICAgICAgIHRoaXMuc29ydGluZ01vZGUgPSBzb3J0aW5nTW9kZTtcbiAgICB9XG5cbiAgICBnZXRSb3dzKCk6IEFycmF5PERhdGFSb3c+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm93cztcbiAgICB9XG5cbiAgICAvLyBUT0RPOiBkaXNhYmxlIHRoaXMgYXBpXG4gICAgc2V0Um93cyhyb3dzOiBBcnJheTxEYXRhUm93Pikge1xuICAgICAgICB0aGlzLnJvd3MgPSByb3dzIHx8IFtdO1xuICAgICAgICB0aGlzLnNvcnQoKTtcbiAgICB9XG5cbiAgICBnZXRDb2x1bW5zKCk6IEFycmF5PERhdGFDb2x1bW4+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sdW1ucztcbiAgICB9XG5cbiAgICBzZXRDb2x1bW5zKGNvbHVtbnM6IEFycmF5PERhdGFDb2x1bW4+KSB7XG4gICAgICAgIHRoaXMuY29sdW1ucyA9IGNvbHVtbnMgfHwgW107XG4gICAgfVxuXG4gICAgZ2V0VmFsdWUocm93OiBEYXRhUm93LCBjb2w6IERhdGFDb2x1bW4pOiBhbnkge1xuICAgICAgICBpZiAoIXJvdykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHRoaXMuRVJSX1JPV19OT1RfRk9VTkQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghY29sKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IodGhpcy5FUlJfQ09MX05PVF9GT1VORCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGRhdGFSb3c6IFNoYXJlRGF0YVJvdyA9IDxTaGFyZURhdGFSb3c+IHJvdztcbiAgICAgICAgbGV0IHZhbHVlOiBhbnkgPSByb3cuZ2V0VmFsdWUoY29sLmtleSk7XG4gICAgICAgIGlmIChkYXRhUm93LmNhY2hlW2NvbC5rZXldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBkYXRhUm93LmNhY2hlW2NvbC5rZXldO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbC5rZXkgPT09ICckdGh1bWJuYWlsJykge1xuXG4gICAgICAgICAgICBpZiAodGhpcy5pbWFnZVJlc29sdmVyKSB7XG4gICAgICAgICAgICAgICAgbGV0IHJlc29sdmVkID0gdGhpcy5pbWFnZVJlc29sdmVyKHJvdywgY29sKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzb2x2ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgbm9kZSA9ICg8U2hhcmVEYXRhUm93PiByb3cpLm5vZGU7XG5cbiAgICAgICAgICAgIGlmIChub2RlLmVudHJ5LmlzRm9sZGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNTbWFydEZvbGRlcihub2RlKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudExpc3RTZXJ2aWNlLmdldE1pbWVUeXBlSWNvbignc21hcnRGb2xkZXInKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudExpc3RTZXJ2aWNlLmdldE1pbWVUeXBlSWNvbignZm9sZGVyJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobm9kZS5lbnRyeS5pc0ZpbGUpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50aHVtYm5haWxzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50TGlzdFNlcnZpY2UuZ2V0RG9jdW1lbnRUaHVtYm5haWxVcmwobm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobm9kZS5lbnRyeS5jb250ZW50KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWltZVR5cGUgPSBub2RlLmVudHJ5LmNvbnRlbnQubWltZVR5cGU7XG4gICAgICAgICAgICAgICAgaWYgKG1pbWVUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50TGlzdFNlcnZpY2UuZ2V0TWltZVR5cGVJY29uKG1pbWVUeXBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50TGlzdFNlcnZpY2UuZ2V0RGVmYXVsdE1pbWVUeXBlSWNvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbC50eXBlID09PSAnaW1hZ2UnKSB7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmltYWdlUmVzb2x2ZXIpIHtcbiAgICAgICAgICAgICAgICBsZXQgcmVzb2x2ZWQgPSB0aGlzLmltYWdlUmVzb2x2ZXIocm93LCBjb2wpO1xuICAgICAgICAgICAgICAgIGlmIChyZXNvbHZlZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRhdGFSb3cuY2FjaGVWYWx1ZShjb2wua2V5LCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgZ2V0U29ydGluZygpOiBEYXRhU29ydGluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRpbmc7XG4gICAgfVxuXG4gICAgc2V0U29ydGluZyhzb3J0aW5nOiBEYXRhU29ydGluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLnNvcnRpbmcgPSBzb3J0aW5nO1xuXG4gICAgICAgIHRoaXMuc29ydFJvd3ModGhpcy5yb3dzLCB0aGlzLnNvcnRpbmcpO1xuICAgIH1cblxuICAgIHNvcnQoa2V5Pzogc3RyaW5nLCBkaXJlY3Rpb24/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgbGV0IHNvcnRpbmcgPSB0aGlzLnNvcnRpbmcgfHwgbmV3IERhdGFTb3J0aW5nKCk7XG4gICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICAgIHNvcnRpbmcua2V5ID0ga2V5O1xuICAgICAgICAgICAgc29ydGluZy5kaXJlY3Rpb24gPSBkaXJlY3Rpb24gfHwgJ2FzYyc7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRTb3J0aW5nKHNvcnRpbmcpO1xuICAgIH1cblxuICAgIHNldEZpbHRlcihmaWx0ZXI6IGFueSkge1xuICAgICAgICB0aGlzLmZpbHRlciA9IGZpbHRlcjtcbiAgICB9XG5cbiAgICBzZXRJbWFnZVJlc29sdmVyKHJlc29sdmVyOiBhbnkpIHtcbiAgICAgICAgdGhpcy5pbWFnZVJlc29sdmVyID0gcmVzb2x2ZXI7XG4gICAgfVxuXG4gICAgaXNTbWFydEZvbGRlcihub2RlOiBhbnkpIHtcbiAgICAgICAgbGV0IG5vZGVBc3BlY3RzID0gdGhpcy5nZXROb2RlQXNwZWN0TmFtZXMobm9kZSk7XG4gICAgICAgIHJldHVybiBub2RlQXNwZWN0cy5pbmRleE9mKCdzbWY6Y3VzdG9tQ29uZmlnU21hcnRGb2xkZXInKSA+IC0xIHx8XG4gICAgICAgICAgICAobm9kZUFzcGVjdHMuaW5kZXhPZignc21mOnN5c3RlbUNvbmZpZ1NtYXJ0Rm9sZGVyJykgPiAtMSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXROb2RlQXNwZWN0TmFtZXMobm9kZTogYW55KTogYW55W10ge1xuICAgICAgICByZXR1cm4gbm9kZS5lbnRyeSAmJiBub2RlLmVudHJ5LmFzcGVjdE5hbWVzID8gbm9kZS5lbnRyeS5hc3BlY3ROYW1lcyA6IG5vZGUuYXNwZWN0TmFtZXMgPyBub2RlLmFzcGVjdE5hbWVzIDogW107XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzb3J0Um93cyhyb3dzOiBEYXRhUm93W10sIHNvcnRpbmc6IERhdGFTb3J0aW5nKSB7XG4gICAgICAgIGlmICh0aGlzLnNvcnRpbmdNb2RlID09PSAnc2VydmVyJykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgb3B0aW9uczogSW50bC5Db2xsYXRvck9wdGlvbnMgPSB7fTtcblxuICAgICAgICBpZiAoc29ydGluZyAmJiBzb3J0aW5nLmtleSAmJiByb3dzICYmIHJvd3MubGVuZ3RoID4gMCkge1xuXG4gICAgICAgICAgICBpZiAoc29ydGluZy5rZXkuaW5jbHVkZXMoJ3NpemVJbkJ5dGVzJykgfHwgc29ydGluZy5rZXkgPT09ICduYW1lJykge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMubnVtZXJpYyA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJvd3Muc29ydCgoYTogU2hhcmVEYXRhUm93LCBiOiBTaGFyZURhdGFSb3cpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoYS5ub2RlLmVudHJ5LmlzRm9sZGVyICE9PSBiLm5vZGUuZW50cnkuaXNGb2xkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEubm9kZS5lbnRyeS5pc0ZvbGRlciA/IC0xIDogMTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsZXQgbGVmdCA9IGEuZ2V0VmFsdWUoc29ydGluZy5rZXkpO1xuICAgICAgICAgICAgICAgIGlmIChsZWZ0KSB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQgPSAobGVmdCBpbnN0YW5jZW9mIERhdGUpID8gbGVmdC52YWx1ZU9mKCkudG9TdHJpbmcoKSA6IGxlZnQudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gJyc7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbGV0IHJpZ2h0ID0gYi5nZXRWYWx1ZShzb3J0aW5nLmtleSk7XG4gICAgICAgICAgICAgICAgaWYgKHJpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0gKHJpZ2h0IGluc3RhbmNlb2YgRGF0ZSkgPyByaWdodC52YWx1ZU9mKCkudG9TdHJpbmcoKSA6IHJpZ2h0LnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQgPSAnJztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gc29ydGluZy5kaXJlY3Rpb24gPT09ICdhc2MnXG4gICAgICAgICAgICAgICAgICAgID8gbGVmdC5sb2NhbGVDb21wYXJlKHJpZ2h0LCB1bmRlZmluZWQsIG9wdGlvbnMpXG4gICAgICAgICAgICAgICAgICAgIDogcmlnaHQubG9jYWxlQ29tcGFyZShsZWZ0LCB1bmRlZmluZWQsIG9wdGlvbnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgbG9hZFBhZ2UocGFnZTogTm9kZVBhZ2luZywgbWVyZ2U6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgICAgICBsZXQgcm93cyA9IFtdO1xuXG4gICAgICAgIGlmIChwYWdlICYmIHBhZ2UubGlzdCkge1xuICAgICAgICAgICAgbGV0IGRhdGEgPSBwYWdlLmxpc3QuZW50cmllcztcbiAgICAgICAgICAgIGlmIChkYXRhICYmIGRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHJvd3MgPSBkYXRhLm1hcChpdGVtID0+IG5ldyBTaGFyZURhdGFSb3coaXRlbSwgdGhpcy5kb2N1bWVudExpc3RTZXJ2aWNlLCB0aGlzLnBlcm1pc3Npb25zU3R5bGUsIHRoaXMudGh1bWJuYWlsU2VydmljZSkpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZmlsdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvd3MgPSByb3dzLmZpbHRlcih0aGlzLmZpbHRlcik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc29ydGluZ01vZGUgIT09ICdzZXJ2ZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNvcnQgYnkgZmlyc3Qgc29ydGFibGUgb3IganVzdCBmaXJzdCBjb2x1bW5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29sdW1ucyAmJiB0aGlzLmNvbHVtbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNvcnRpbmcgPSB0aGlzLmdldFNvcnRpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzb3J0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3J0Um93cyhyb3dzLCBzb3J0aW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNvcnRhYmxlID0gdGhpcy5jb2x1bW5zLmZpbHRlcihjID0+IGMuc29ydGFibGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzb3J0YWJsZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc29ydChzb3J0YWJsZVswXS5rZXksICdhc2MnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNvcnQodGhpcy5jb2x1bW5zWzBdLmtleSwgJ2FzYycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtZXJnZSkge1xuICAgICAgICAgICAgbGV0IGxpc3RQcnVuZWREdXBsaWNhdGUgPSByb3dzLmZpbHRlcigoZWxlbW50VG9GaWx0ZXIpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgaXNQcmVzZW50ID0gdGhpcy5yb3dzLmZpbmQoKGN1cnJlblJvdzogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW5Sb3cub2JqLmVudHJ5LmlkID09PSBlbGVtbnRUb0ZpbHRlci5vYmouZW50cnkuaWQ7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gIWlzUHJlc2VudDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLnJvd3MgPSB0aGlzLnJvd3MuY29uY2F0KGxpc3RQcnVuZWREdXBsaWNhdGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yb3dzID0gcm93cztcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmV4cG9ydCBsZXQgcHJlc2V0c0RlZmF1bHRNb2RlbCA9IHtcbiAgICAnLXRyYXNoY2FuLSc6IFtcbiAgICAgICAge1xuICAgICAgICAgICAga2V5OiAnJHRodW1ibmFpbCcsXG4gICAgICAgICAgICB0eXBlOiAnaW1hZ2UnLFxuICAgICAgICAgICAgc3JUaXRsZTogJ0FERi1ET0NVTUVOVC1MSVNULkxBWU9VVC5USFVNQk5BSUwnLFxuICAgICAgICAgICAgc29ydGFibGU6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGtleTogJ25hbWUnLFxuICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgdGl0bGU6ICdBREYtRE9DVU1FTlQtTElTVC5MQVlPVVQuTkFNRScsXG4gICAgICAgICAgICBjc3NDbGFzczogJ2Z1bGwtd2lkdGggZWxsaXBzaXMtY2VsbCcsXG4gICAgICAgICAgICBzb3J0YWJsZTogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBrZXk6ICdwYXRoJyxcbiAgICAgICAgICAgIHR5cGU6ICdsb2NhdGlvbicsXG4gICAgICAgICAgICB0aXRsZTogJ0FERi1ET0NVTUVOVC1MSVNULkxBWU9VVC5MT0NBVElPTicsXG4gICAgICAgICAgICBzb3J0YWJsZTogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBrZXk6ICdjb250ZW50LnNpemVJbkJ5dGVzJyxcbiAgICAgICAgICAgIHR5cGU6ICdmaWxlU2l6ZScsXG4gICAgICAgICAgICB0aXRsZTogJ0FERi1ET0NVTUVOVC1MSVNULkxBWU9VVC5TSVpFJyxcbiAgICAgICAgICAgIHNvcnRhYmxlOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGtleTogJ2FyY2hpdmVkQXQnLFxuICAgICAgICAgICAgdHlwZTogJ2RhdGUnLFxuICAgICAgICAgICAgdGl0bGU6ICdBREYtRE9DVU1FTlQtTElTVC5MQVlPVVQuREVMRVRFRF9PTicsXG4gICAgICAgICAgICBmb3JtYXQ6ICd0aW1lQWdvJyxcbiAgICAgICAgICAgIHNvcnRhYmxlOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGtleTogJ2FyY2hpdmVkQnlVc2VyLmRpc3BsYXlOYW1lJyxcbiAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgIHRpdGxlOiAnQURGLURPQ1VNRU5ULUxJU1QuTEFZT1VULkRFTEVURURfQlknLFxuICAgICAgICAgICAgc29ydGFibGU6IHRydWVcbiAgICAgICAgfVxuICAgIF0sXG4gICAgJy1zaXRlcy0nOiBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIGtleTogJyR0aHVtYm5haWwnLFxuICAgICAgICAgICAgdHlwZTogJ2ltYWdlJyxcbiAgICAgICAgICAgIHNyVGl0bGU6ICdBREYtRE9DVU1FTlQtTElTVC5MQVlPVVQuVEhVTUJOQUlMJyxcbiAgICAgICAgICAgIHNvcnRhYmxlOiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBrZXk6ICd0aXRsZScsXG4gICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICB0aXRsZTogJ0FERi1ET0NVTUVOVC1MSVNULkxBWU9VVC5OQU1FJyxcbiAgICAgICAgICAgIGNzc0NsYXNzOiAnZnVsbC13aWR0aCBlbGxpcHNpcy1jZWxsJyxcbiAgICAgICAgICAgIHNvcnRhYmxlOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGtleTogJ3Zpc2liaWxpdHknLFxuICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgdGl0bGU6ICdBREYtRE9DVU1FTlQtTElTVC5MQVlPVVQuU1RBVFVTJyxcbiAgICAgICAgICAgIHNvcnRhYmxlOiB0cnVlXG4gICAgICAgIH1cbiAgICBdLFxuICAgICctbXlzaXRlcy0nOiBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIGtleTogJyR0aHVtYm5haWwnLFxuICAgICAgICAgICAgdHlwZTogJ2ltYWdlJyxcbiAgICAgICAgICAgIHNyVGl0bGU6ICdBREYtRE9DVU1FTlQtTElTVC5MQVlPVVQuVEhVTUJOQUlMJyxcbiAgICAgICAgICAgIHNvcnRhYmxlOiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBrZXk6ICd0aXRsZScsXG4gICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICB0aXRsZTogJ0FERi1ET0NVTUVOVC1MSVNULkxBWU9VVC5OQU1FJyxcbiAgICAgICAgICAgIGNzc0NsYXNzOiAnZnVsbC13aWR0aCBlbGxpcHNpcy1jZWxsJyxcbiAgICAgICAgICAgIHNvcnRhYmxlOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGtleTogJ3Zpc2liaWxpdHknLFxuICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgdGl0bGU6ICdBREYtRE9DVU1FTlQtTElTVC5MQVlPVVQuU1RBVFVTJyxcbiAgICAgICAgICAgIHNvcnRhYmxlOiB0cnVlXG4gICAgICAgIH1cbiAgICBdLFxuICAgICctZmF2b3JpdGVzLSc6IFtcbiAgICAgICAge1xuICAgICAgICAgICAga2V5OiAnJHRodW1ibmFpbCcsXG4gICAgICAgICAgICB0eXBlOiAnaW1hZ2UnLFxuICAgICAgICAgICAgc3JUaXRsZTogJ0FERi1ET0NVTUVOVC1MSVNULkxBWU9VVC5USFVNQk5BSUwnLFxuICAgICAgICAgICAgc29ydGFibGU6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGtleTogJ25hbWUnLFxuICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgdGl0bGU6ICdBREYtRE9DVU1FTlQtTElTVC5MQVlPVVQuTkFNRScsXG4gICAgICAgICAgICBjc3NDbGFzczogJ2Z1bGwtd2lkdGggZWxsaXBzaXMtY2VsbCcsXG4gICAgICAgICAgICBzb3J0YWJsZTogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBrZXk6ICdwYXRoJyxcbiAgICAgICAgICAgIHR5cGU6ICdsb2NhdGlvbicsXG4gICAgICAgICAgICB0aXRsZTogJ0FERi1ET0NVTUVOVC1MSVNULkxBWU9VVC5MT0NBVElPTicsXG4gICAgICAgICAgICBzb3J0YWJsZTogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBrZXk6ICdjb250ZW50LnNpemVJbkJ5dGVzJyxcbiAgICAgICAgICAgIHR5cGU6ICdmaWxlU2l6ZScsXG4gICAgICAgICAgICB0aXRsZTogJ0FERi1ET0NVTUVOVC1MSVNULkxBWU9VVC5TSVpFJyxcbiAgICAgICAgICAgIHNvcnRhYmxlOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGtleTogJ21vZGlmaWVkQXQnLFxuICAgICAgICAgICAgdHlwZTogJ2RhdGUnLFxuICAgICAgICAgICAgdGl0bGU6ICdBREYtRE9DVU1FTlQtTElTVC5MQVlPVVQuTU9ESUZJRURfT04nLFxuICAgICAgICAgICAgZm9ybWF0OiAndGltZUFnbycsXG4gICAgICAgICAgICBzb3J0YWJsZTogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBrZXk6ICdtb2RpZmllZEJ5VXNlci5kaXNwbGF5TmFtZScsXG4gICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICB0aXRsZTogJ0FERi1ET0NVTUVOVC1MSVNULkxBWU9VVC5NT0RJRklFRF9CWScsXG4gICAgICAgICAgICBzb3J0YWJsZTogdHJ1ZVxuICAgICAgICB9XG4gICAgXSxcbiAgICAnLXJlY2VudC0nOiBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIGtleTogJyR0aHVtYm5haWwnLFxuICAgICAgICAgICAgdHlwZTogJ2ltYWdlJyxcbiAgICAgICAgICAgIHNyVGl0bGU6ICdBREYtRE9DVU1FTlQtTElTVC5MQVlPVVQuVEhVTUJOQUlMJyxcbiAgICAgICAgICAgIHNvcnRhYmxlOiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBrZXk6ICduYW1lJyxcbiAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgIHRpdGxlOiAnQURGLURPQ1VNRU5ULUxJU1QuTEFZT1VULk5BTUUnLFxuICAgICAgICAgICAgY3NzQ2xhc3M6ICdmdWxsLXdpZHRoIGVsbGlwc2lzLWNlbGwnLFxuICAgICAgICAgICAgc29ydGFibGU6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAga2V5OiAncGF0aCcsXG4gICAgICAgICAgICB0eXBlOiAnbG9jYXRpb24nLFxuICAgICAgICAgICAgdGl0bGU6ICdBREYtRE9DVU1FTlQtTElTVC5MQVlPVVQuTE9DQVRJT04nLFxuICAgICAgICAgICAgY3NzQ2xhc3M6ICdlbGxpcHNpcy1jZWxsJyxcbiAgICAgICAgICAgIHNvcnRhYmxlOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGtleTogJ2NvbnRlbnQuc2l6ZUluQnl0ZXMnLFxuICAgICAgICAgICAgdHlwZTogJ2ZpbGVTaXplJyxcbiAgICAgICAgICAgIHRpdGxlOiAnQURGLURPQ1VNRU5ULUxJU1QuTEFZT1VULlNJWkUnLFxuICAgICAgICAgICAgc29ydGFibGU6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAga2V5OiAnbW9kaWZpZWRBdCcsXG4gICAgICAgICAgICB0eXBlOiAnZGF0ZScsXG4gICAgICAgICAgICB0aXRsZTogJ0FERi1ET0NVTUVOVC1MSVNULkxBWU9VVC5NT0RJRklFRF9PTicsXG4gICAgICAgICAgICBmb3JtYXQ6ICd0aW1lQWdvJyxcbiAgICAgICAgICAgIHNvcnRhYmxlOiB0cnVlXG4gICAgICAgIH1cbiAgICBdLFxuICAgICctc2hhcmVkbGlua3MtJzogW1xuICAgICAgICB7XG4gICAgICAgICAgICBrZXk6ICckdGh1bWJuYWlsJyxcbiAgICAgICAgICAgIHR5cGU6ICdpbWFnZScsXG4gICAgICAgICAgICBzclRpdGxlOiAnQURGLURPQ1VNRU5ULUxJU1QuTEFZT1VULlRIVU1CTkFJTCcsXG4gICAgICAgICAgICBzb3J0YWJsZTogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAga2V5OiAnbmFtZScsXG4gICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICB0aXRsZTogJ0FERi1ET0NVTUVOVC1MSVNULkxBWU9VVC5OQU1FJyxcbiAgICAgICAgICAgIGNzc0NsYXNzOiAnZnVsbC13aWR0aCBlbGxpcHNpcy1jZWxsJyxcbiAgICAgICAgICAgIHNvcnRhYmxlOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGtleTogJ3BhdGgnLFxuICAgICAgICAgICAgdHlwZTogJ2xvY2F0aW9uJyxcbiAgICAgICAgICAgIHRpdGxlOiAnQURGLURPQ1VNRU5ULUxJU1QuTEFZT1VULkxPQ0FUSU9OJyxcbiAgICAgICAgICAgIGNzc0NsYXNzOiAnZWxsaXBzaXMtY2VsbCcsXG4gICAgICAgICAgICBzb3J0YWJsZTogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBrZXk6ICdjb250ZW50LnNpemVJbkJ5dGVzJyxcbiAgICAgICAgICAgIHR5cGU6ICdmaWxlU2l6ZScsXG4gICAgICAgICAgICB0aXRsZTogJ0FERi1ET0NVTUVOVC1MSVNULkxBWU9VVC5TSVpFJyxcbiAgICAgICAgICAgIHNvcnRhYmxlOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGtleTogJ21vZGlmaWVkQXQnLFxuICAgICAgICAgICAgdHlwZTogJ2RhdGUnLFxuICAgICAgICAgICAgdGl0bGU6ICdBREYtRE9DVU1FTlQtTElTVC5MQVlPVVQuTU9ESUZJRURfT04nLFxuICAgICAgICAgICAgZm9ybWF0OiAndGltZUFnbycsXG4gICAgICAgICAgICBzb3J0YWJsZTogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBrZXk6ICdtb2RpZmllZEJ5VXNlci5kaXNwbGF5TmFtZScsXG4gICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICB0aXRsZTogJ0FERi1ET0NVTUVOVC1MSVNULkxBWU9VVC5NT0RJRklFRF9CWScsXG4gICAgICAgICAgICBzb3J0YWJsZTogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBrZXk6ICdzaGFyZWRCeVVzZXIuZGlzcGxheU5hbWUnLFxuICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgdGl0bGU6ICdBREYtRE9DVU1FTlQtTElTVC5MQVlPVVQuU0hBUkVEX0JZJyxcbiAgICAgICAgICAgIHNvcnRhYmxlOiB0cnVlXG4gICAgICAgIH1cbiAgICBdLFxuICAgICdkZWZhdWx0JzogW1xuICAgICAgICB7XG4gICAgICAgICAgICBrZXk6ICckdGh1bWJuYWlsJyxcbiAgICAgICAgICAgIHR5cGU6ICdpbWFnZScsXG4gICAgICAgICAgICBzclRpdGxlOiAnQURGLURPQ1VNRU5ULUxJU1QuTEFZT1VULlRIVU1CTkFJTCcsXG4gICAgICAgICAgICBzb3J0YWJsZTogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAga2V5OiAnbmFtZScsXG4gICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICB0aXRsZTogJ0FERi1ET0NVTUVOVC1MSVNULkxBWU9VVC5OQU1FJyxcbiAgICAgICAgICAgIGNzc0NsYXNzOiAnZnVsbC13aWR0aCBlbGxpcHNpcy1jZWxsJyxcbiAgICAgICAgICAgIHNvcnRhYmxlOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGtleTogJ2NvbnRlbnQuc2l6ZUluQnl0ZXMnLFxuICAgICAgICAgICAgdHlwZTogJ2ZpbGVTaXplJyxcbiAgICAgICAgICAgIHRpdGxlOiAnQURGLURPQ1VNRU5ULUxJU1QuTEFZT1VULlNJWkUnLFxuICAgICAgICAgICAgc29ydGFibGU6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAga2V5OiAnbW9kaWZpZWRBdCcsXG4gICAgICAgICAgICB0eXBlOiAnZGF0ZScsXG4gICAgICAgICAgICB0aXRsZTogJ0FERi1ET0NVTUVOVC1MSVNULkxBWU9VVC5NT0RJRklFRF9PTicsXG4gICAgICAgICAgICBmb3JtYXQ6ICd0aW1lQWdvJyxcbiAgICAgICAgICAgIHNvcnRhYmxlOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGtleTogJ21vZGlmaWVkQnlVc2VyLmRpc3BsYXlOYW1lJyxcbiAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgIHRpdGxlOiAnQURGLURPQ1VNRU5ULUxJU1QuTEFZT1VULk1PRElGSUVEX0JZJyxcbiAgICAgICAgICAgIHNvcnRhYmxlOiB0cnVlXG4gICAgICAgIH1cbiAgICBdXG59O1xuIiwiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuZXhwb3J0IGNsYXNzIENvbnRlbnRBY3Rpb25Nb2RlbCB7XG4gICAgaWNvbjogc3RyaW5nO1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgaGFuZGxlcjogQ29udGVudEFjdGlvbkhhbmRsZXI7XG4gICAgZXhlY3V0ZTogRnVuY3Rpb247XG4gICAgdGFyZ2V0OiBzdHJpbmc7XG4gICAgcGVybWlzc2lvbjogc3RyaW5nO1xuICAgIGRpc2FibGVXaXRoTm9QZXJtaXNzaW9uOiBib29sZWFuID0gZmFsc2U7XG4gICAgZGlzYWJsZWQ6IGJvb2xlYW4gfCBGdW5jdGlvbiA9IGZhbHNlO1xuICAgIHZpc2libGU6IGJvb2xlYW4gfCBGdW5jdGlvbiA9IHRydWU7XG5cbiAgICBjb25zdHJ1Y3RvcihvYmo/OiBhbnkpIHtcbiAgICAgICAgaWYgKG9iaikge1xuICAgICAgICAgICAgdGhpcy5pY29uID0gb2JqLmljb247XG4gICAgICAgICAgICB0aGlzLnRpdGxlID0gb2JqLnRpdGxlO1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVyID0gb2JqLmhhbmRsZXI7XG4gICAgICAgICAgICB0aGlzLmV4ZWN1dGUgPSBvYmouZXhlY3V0ZTtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gb2JqLnRhcmdldDtcbiAgICAgICAgICAgIHRoaXMucGVybWlzc2lvbiA9IG9iai5wZXJtaXNzaW9uO1xuICAgICAgICAgICAgdGhpcy5kaXNhYmxlV2l0aE5vUGVybWlzc2lvbiA9IG9iai5kaXNhYmxlV2l0aE5vUGVybWlzc2lvbjtcblxuICAgICAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eSgnZGlzYWJsZWQnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZWQgPSBvYmouZGlzYWJsZWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoJ3Zpc2libGUnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZSA9IG9iai52aXNpYmxlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZW51bSBDb250ZW50QWN0aW9uVGFyZ2V0IHtcbiAgICBEb2N1bWVudCA9ICdkb2N1bWVudCcsXG4gICAgRm9sZGVyID0gJ2ZvbGRlcicsXG4gICAgQWxsID0gJ2FsbCdcbn1cblxuZXhwb3J0IHR5cGUgQ29udGVudEFjdGlvbkhhbmRsZXIgPSAob2JqOiBhbnksIHRhcmdldD86IGFueSwgcGVybWlzc2lvbj86IHN0cmluZykgPT4gYW55O1xuXG5leHBvcnQgY2xhc3MgRG9jdW1lbnRBY3Rpb25Nb2RlbCBleHRlbmRzIENvbnRlbnRBY3Rpb25Nb2RlbCB7XG4gICAgY29uc3RydWN0b3IoanNvbj86IGFueSkgIHtcbiAgICAgICAgc3VwZXIoanNvbik7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gJ2RvY3VtZW50JztcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBGb2xkZXJBY3Rpb25Nb2RlbCBleHRlbmRzICBDb250ZW50QWN0aW9uTW9kZWwge1xuICAgIGNvbnN0cnVjdG9yKGpzb24/OiBhbnkpICB7XG4gICAgICAgIHN1cGVyKGpzb24pO1xuICAgICAgICB0aGlzLnRhcmdldCA9ICdmb2xkZXInO1xuICAgIH1cbn1cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEJhc2VFdmVudCB9IGZyb20gJ0BhbGZyZXNjby9hZGYtY29yZSc7XG5pbXBvcnQgeyBNaW5pbWFsTm9kZUVudGl0eSwgTWluaW1hbE5vZGVFbnRyeUVudGl0eSB9IGZyb20gJ2FsZnJlc2NvLWpzLWFwaSc7XG5cbmV4cG9ydCBjbGFzcyBOb2RlRW50aXR5RXZlbnQgZXh0ZW5kcyBCYXNlRXZlbnQ8TWluaW1hbE5vZGVFbnRpdHk+IHtcblxuICAgIHZhbHVlOiBNaW5pbWFsTm9kZUVudGl0eTtcblxuICAgIGRlZmF1bHRQcmV2ZW50ZWQ6IGJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3RvcihlbnRpdHk6IE1pbmltYWxOb2RlRW50aXR5KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMudmFsdWUgPSBlbnRpdHk7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgTm9kZUVudHJ5RXZlbnQgZXh0ZW5kcyBCYXNlRXZlbnQ8TWluaW1hbE5vZGVFbnRyeUVudGl0eT4ge1xuXG4gICAgdmFsdWU6IE1pbmltYWxOb2RlRW50cnlFbnRpdHk7XG5cbiAgICBkZWZhdWx0UHJldmVudGVkOiBib29sZWFuO1xuXG4gICAgY29uc3RydWN0b3IoZW50aXR5OiBNaW5pbWFsTm9kZUVudHJ5RW50aXR5KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMudmFsdWUgPSBlbnRpdHk7XG4gICAgfVxufVxuIiwiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgICBBbGZyZXNjb0FwaVNlcnZpY2UsXG4gICAgTG9nU2VydmljZSxcbiAgICBQYWdpbmF0aW9uTW9kZWxcbn0gZnJvbSAnQGFsZnJlc2NvL2FkZi1jb3JlJztcblxuaW1wb3J0IHtcbiAgICBOb2RlUGFnaW5nLFxuICAgIFBlcnNvbkVudHJ5LFxuICAgIFNpdGVQYWdpbmcsXG4gICAgRGVsZXRlZE5vZGVzUGFnaW5nLFxuICAgIFNlYXJjaFJlcXVlc3Rcbn0gZnJvbSAnYWxmcmVzY28tanMtYXBpJztcbmltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE9ic2VydmFibGUsIGZyb20sIG9mLCB0aHJvd0Vycm9yIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBjYXRjaEVycm9yLCBtYXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBDdXN0b21SZXNvdXJjZXNTZXJ2aWNlIHtcblxuICAgIHByaXZhdGUgQ1JFQVRFX1BFUk1JU1NJT04gPSAnY3JlYXRlJztcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgYXBpU2VydmljZTogQWxmcmVzY29BcGlTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIHByaXZhdGUgbG9nU2VydmljZTogTG9nU2VydmljZSkge1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgZmlsZXMgcmVjZW50bHkgYWNjZXNzZWQgYnkgYSB1c2VyLlxuICAgICAqIEBwYXJhbSBwZXJzb25JZCBJRCBvZiB0aGUgdXNlclxuICAgICAqIEBwYXJhbSBwYWdpbmF0aW9uIFNwZWNpZmllcyBob3cgdG8gcGFnaW5hdGUgdGhlIHJlc3VsdHNcbiAgICAgKiBAcmV0dXJucyBMaXN0IG9mIG5vZGVzIGZvciB0aGUgcmVjZW50bHkgdXNlZCBmaWxlc1xuICAgICAqL1xuICAgIGdldFJlY2VudEZpbGVzKHBlcnNvbklkOiBzdHJpbmcsIHBhZ2luYXRpb246IFBhZ2luYXRpb25Nb2RlbCk6IE9ic2VydmFibGU8Tm9kZVBhZ2luZz4ge1xuICAgICAgICByZXR1cm4gbmV3IE9ic2VydmFibGUob2JzZXJ2ZXIgPT4ge1xuICAgICAgICAgICAgdGhpcy5hcGlTZXJ2aWNlLnBlb3BsZUFwaS5nZXRQZXJzb24ocGVyc29uSWQpXG4gICAgICAgICAgICAgICAgLnRoZW4oKHBlcnNvbjogUGVyc29uRW50cnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJuYW1lID0gcGVyc29uLmVudHJ5LmlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcXVlcnk6IFNlYXJjaFJlcXVlc3QgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnk6ICcqJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2U6ICdhZnRzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyUXVlcmllczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHF1ZXJ5OiBgY206bW9kaWZpZWQ6W05PVy9EQVktMzBEQVlTIFRPIE5PVy9EQVkrMURBWV1gIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcXVlcnk6IGBjbTptb2RpZmllcjoke3VzZXJuYW1lfSBPUiBjbTpjcmVhdG9yOiR7dXNlcm5hbWV9YCB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHF1ZXJ5OiBgVFlQRTpcImNvbnRlbnRcIiBBTkQgLVRZUEU6XCJhcHA6ZmlsZWxpbmtcIiBBTkQgLVRZUEU6XCJmbTpwb3N0XCJgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1ZGU6IFsncGF0aCcsICdwcm9wZXJ0aWVzJywgJ2FsbG93YWJsZU9wZXJhdGlvbnMnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3J0OiBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnRklFTEQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogJ2NtOm1vZGlmaWVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNjZW5kaW5nOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2luZzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhJdGVtczogcGFnaW5hdGlvbi5tYXhJdGVtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tpcENvdW50OiBwYWdpbmF0aW9uLnNraXBDb3VudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hcGlTZXJ2aWNlLnNlYXJjaEFwaS5zZWFyY2gocXVlcnkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHNlYXJjaFJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dChzZWFyY2hSZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pLnBpcGUoY2F0Y2hFcnJvcihlcnIgPT4gdGhpcy5oYW5kbGVFcnJvcihlcnIpKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBmYXZvcml0ZSBmaWxlcyBmb3IgdGhlIGN1cnJlbnQgdXNlci5cbiAgICAgKiBAcGFyYW0gcGFnaW5hdGlvbiBTcGVjaWZpZXMgaG93IHRvIHBhZ2luYXRlIHRoZSByZXN1bHRzXG4gICAgICogQHBhcmFtIGluY2x1ZGVGaWVsZHMgTGlzdCBvZiBkYXRhIGZpZWxkIG5hbWVzIHRvIGluY2x1ZGUgaW4gdGhlIHJlc3VsdHNcbiAgICAgKiBAcmV0dXJucyBMaXN0IG9mIGZhdm9yaXRlIGZpbGVzXG4gICAgICovXG4gICAgbG9hZEZhdm9yaXRlcyhwYWdpbmF0aW9uOiBQYWdpbmF0aW9uTW9kZWwsIGluY2x1ZGVGaWVsZHM6IHN0cmluZ1tdID0gW10pOiBPYnNlcnZhYmxlPE5vZGVQYWdpbmc+IHtcbiAgICAgICAgbGV0IGluY2x1ZGVGaWVsZHNSZXF1ZXN0ID0gdGhpcy5nZXRJbmNsdWRlc0ZpZWxkcyhpbmNsdWRlRmllbGRzKTtcblxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgICAgbWF4SXRlbXM6IHBhZ2luYXRpb24ubWF4SXRlbXMsXG4gICAgICAgICAgICBza2lwQ291bnQ6IHBhZ2luYXRpb24uc2tpcENvdW50LFxuICAgICAgICAgICAgd2hlcmU6ICcoRVhJU1RTKHRhcmdldC9maWxlKSBPUiBFWElTVFModGFyZ2V0L2ZvbGRlcikpJyxcbiAgICAgICAgICAgIGluY2x1ZGU6IGluY2x1ZGVGaWVsZHNSZXF1ZXN0XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlKG9ic2VydmVyID0+IHtcbiAgICAgICAgICAgIHRoaXMuYXBpU2VydmljZS5mYXZvcml0ZXNBcGkuZ2V0RmF2b3JpdGVzKCctbWUtJywgb3B0aW9ucylcbiAgICAgICAgICAgICAgICAudGhlbigocmVzdWx0OiBOb2RlUGFnaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGFnZTogTm9kZVBhZ2luZyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudHJpZXM6IHJlc3VsdC5saXN0LmVudHJpZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKHsgZW50cnk6IHsgdGFyZ2V0IH0gfTogYW55KSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5OiB0YXJnZXQuZmlsZSB8fCB0YXJnZXQuZm9sZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKHsgZW50cnkgfTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50cnkucHJvcGVydGllcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NtOnRpdGxlJzogZW50cnkudGl0bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjbTpkZXNjcmlwdGlvbic6IGVudHJ5LmRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBlbnRyeSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2luYXRpb246IHJlc3VsdC5saXN0LnBhZ2luYXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5uZXh0KHBhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9KS5waXBlKGNhdGNoRXJyb3IoZXJyID0+IHRoaXMuaGFuZGxlRXJyb3IoZXJyKSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgc2l0ZXMgdGhhdCB0aGUgY3VycmVudCB1c2VyIGlzIGEgbWVtYmVyIG9mLlxuICAgICAqIEBwYXJhbSBwYWdpbmF0aW9uIFNwZWNpZmllcyBob3cgdG8gcGFnaW5hdGUgdGhlIHJlc3VsdHNcbiAgICAgKiBAcmV0dXJucyBMaXN0IG9mIHNpdGVzXG4gICAgICovXG4gICAgbG9hZE1lbWJlclNpdGVzKHBhZ2luYXRpb246IFBhZ2luYXRpb25Nb2RlbCk6IE9ic2VydmFibGU8Tm9kZVBhZ2luZz4ge1xuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgICAgaW5jbHVkZTogWydwcm9wZXJ0aWVzJ10sXG4gICAgICAgICAgICBtYXhJdGVtczogcGFnaW5hdGlvbi5tYXhJdGVtcyxcbiAgICAgICAgICAgIHNraXBDb3VudDogcGFnaW5hdGlvbi5za2lwQ291bnRcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gbmV3IE9ic2VydmFibGUob2JzZXJ2ZXIgPT4ge1xuICAgICAgICAgICAgdGhpcy5hcGlTZXJ2aWNlLnBlb3BsZUFwaS5nZXRTaXRlTWVtYmVyc2hpcCgnLW1lLScsIG9wdGlvbnMpXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlc3VsdDogU2l0ZVBhZ2luZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhZ2U6IE5vZGVQYWdpbmcgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnRyaWVzOiByZXN1bHQubGlzdC5lbnRyaWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKCh7IGVudHJ5OiB7IHNpdGUgfSB9OiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXRlLmFsbG93YWJsZU9wZXJhdGlvbnMgPSBzaXRlLmFsbG93YWJsZU9wZXJhdGlvbnMgPyBzaXRlLmFsbG93YWJsZU9wZXJhdGlvbnMgOiBbdGhpcy5DUkVBVEVfUEVSTUlTU0lPTl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l0ZS5uYW1lID0gc2l0ZS5uYW1lIHx8IHNpdGUudGl0bGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50cnk6IHNpdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2luYXRpb246IHJlc3VsdC5saXN0LnBhZ2luYXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5uZXh0KHBhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9KS5waXBlKGNhdGNoRXJyb3IoZXJyID0+IHRoaXMuaGFuZGxlRXJyb3IoZXJyKSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgYWxsIHNpdGVzIGluIHRoZSByZXNwb3NpdG9yeS5cbiAgICAgKiBAcGFyYW0gcGFnaW5hdGlvbiBTcGVjaWZpZXMgaG93IHRvIHBhZ2luYXRlIHRoZSByZXN1bHRzXG4gICAgICogQHJldHVybnMgTGlzdCBvZiBzaXRlc1xuICAgICAqL1xuICAgIGxvYWRTaXRlcyhwYWdpbmF0aW9uOiBQYWdpbmF0aW9uTW9kZWwpOiBPYnNlcnZhYmxlPE5vZGVQYWdpbmc+IHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGluY2x1ZGU6IFsncHJvcGVydGllcycsICdhc3BlY3ROYW1lcyddLFxuICAgICAgICAgICAgbWF4SXRlbXM6IHBhZ2luYXRpb24ubWF4SXRlbXMsXG4gICAgICAgICAgICBza2lwQ291bnQ6IHBhZ2luYXRpb24uc2tpcENvdW50XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlKG9ic2VydmVyID0+IHtcbiAgICAgICAgICAgIHRoaXMuYXBpU2VydmljZS5zaXRlc0FwaS5nZXRTaXRlcyhvcHRpb25zKVxuICAgICAgICAgICAgICAgIC50aGVuKChwYWdlOiBOb2RlUGFnaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlLmxpc3QuZW50cmllcy5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHsgZW50cnkgfTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5Lm5hbWUgPSBlbnRyeS5uYW1lIHx8IGVudHJ5LnRpdGxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBlbnRyeSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5uZXh0KHBhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9KS5waXBlKGNhdGNoRXJyb3IoZXJyID0+IHRoaXMuaGFuZGxlRXJyb3IoZXJyKSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgYWxsIGl0ZW1zIGN1cnJlbnRseSBpbiB0aGUgdHJhc2guXG4gICAgICogQHBhcmFtIHBhZ2luYXRpb24gU3BlY2lmaWVzIGhvdyB0byBwYWdpbmF0ZSB0aGUgcmVzdWx0c1xuICAgICAqIEBwYXJhbSBpbmNsdWRlRmllbGRzIExpc3Qgb2YgZGF0YSBmaWVsZCBuYW1lcyB0byBpbmNsdWRlIGluIHRoZSByZXN1bHRzXG4gICAgICogQHJldHVybnMgTGlzdCBvZiBkZWxldGVkIGl0ZW1zXG4gICAgICovXG4gICAgbG9hZFRyYXNoY2FuKHBhZ2luYXRpb246IFBhZ2luYXRpb25Nb2RlbCwgaW5jbHVkZUZpZWxkczogc3RyaW5nW10gPSBbXSk6IE9ic2VydmFibGU8RGVsZXRlZE5vZGVzUGFnaW5nPiB7XG4gICAgICAgIGxldCBpbmNsdWRlRmllbGRzUmVxdWVzdCA9IHRoaXMuZ2V0SW5jbHVkZXNGaWVsZHMoaW5jbHVkZUZpZWxkcyk7XG5cbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGluY2x1ZGU6IGluY2x1ZGVGaWVsZHNSZXF1ZXN0LFxuICAgICAgICAgICAgbWF4SXRlbXM6IHBhZ2luYXRpb24ubWF4SXRlbXMsXG4gICAgICAgICAgICBza2lwQ291bnQ6IHBhZ2luYXRpb24uc2tpcENvdW50XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGZyb20odGhpcy5hcGlTZXJ2aWNlLm5vZGVzQXBpLmdldERlbGV0ZWROb2RlcyhvcHRpb25zKSlcbiAgICAgICAgICAgIC5waXBlKGNhdGNoRXJyb3IoZXJyID0+IHRoaXMuaGFuZGxlRXJyb3IoZXJyKSkpO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBzaGFyZWQgbGlua3MgZm9yIHRoZSBjdXJyZW50IHVzZXIuXG4gICAgICogQHBhcmFtIHBhZ2luYXRpb24gU3BlY2lmaWVzIGhvdyB0byBwYWdpbmF0ZSB0aGUgcmVzdWx0c1xuICAgICAqIEBwYXJhbSBpbmNsdWRlRmllbGRzIExpc3Qgb2YgZGF0YSBmaWVsZCBuYW1lcyB0byBpbmNsdWRlIGluIHRoZSByZXN1bHRzXG4gICAgICogQHJldHVybnMgTGlzdCBvZiBzaGFyZWQgbGlua3NcbiAgICAgKi9cbiAgICBsb2FkU2hhcmVkTGlua3MocGFnaW5hdGlvbjogUGFnaW5hdGlvbk1vZGVsLCBpbmNsdWRlRmllbGRzOiBzdHJpbmdbXSA9IFtdKTogT2JzZXJ2YWJsZTxOb2RlUGFnaW5nPiB7XG4gICAgICAgIGxldCBpbmNsdWRlRmllbGRzUmVxdWVzdCA9IHRoaXMuZ2V0SW5jbHVkZXNGaWVsZHMoaW5jbHVkZUZpZWxkcyk7XG5cbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGluY2x1ZGU6IGluY2x1ZGVGaWVsZHNSZXF1ZXN0LFxuICAgICAgICAgICAgbWF4SXRlbXM6IHBhZ2luYXRpb24ubWF4SXRlbXMsXG4gICAgICAgICAgICBza2lwQ291bnQ6IHBhZ2luYXRpb24uc2tpcENvdW50XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGZyb20odGhpcy5hcGlTZXJ2aWNlLnNoYXJlZExpbmtzQXBpLmZpbmRTaGFyZWRMaW5rcyhvcHRpb25zKSlcbiAgICAgICAgICAgIC5waXBlKGNhdGNoRXJyb3IoZXJyID0+IHRoaXMuaGFuZGxlRXJyb3IoZXJyKSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIElzIHRoZSBmb2xkZXIgSUQgb25lIG9mIHRoZSB3ZWxsLWtub3duIGFsaWFzZXM/XG4gICAgICogQHBhcmFtIGZvbGRlcklkIEZvbGRlciBJRCBuYW1lIHRvIGNoZWNrXG4gICAgICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgSUQgaXMgYSB3ZWxsLWtub3duIG5hbWUsIGZhbHNlIG90aGVyd2lzZVxuICAgICAqL1xuICAgIGlzQ3VzdG9tU291cmNlKGZvbGRlcklkOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgbGV0IGlzQ3VzdG9tU291cmNlcyA9IGZhbHNlO1xuICAgICAgICBjb25zdCBzb3VyY2VzID0gWyctdHJhc2hjYW4tJywgJy1zaGFyZWRsaW5rcy0nLCAnLXNpdGVzLScsICctbXlzaXRlcy0nLCAnLWZhdm9yaXRlcy0nLCAnLXJlY2VudC0nXTtcblxuICAgICAgICBpZiAoc291cmNlcy5pbmRleE9mKGZvbGRlcklkKSA+IC0xKSB7XG4gICAgICAgICAgICBpc0N1c3RvbVNvdXJjZXMgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGlzQ3VzdG9tU291cmNlcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJcyB0aGUgZm9sZGVyIElEIGEgXCItbXlcIiwgXCItcm9vdC1cIiwgb3IgXCItc2hhcmVkLVwiIGFsaWFzP1xuICAgICAqIEBwYXJhbSBmb2xkZXJJZCBGb2xkZXIgSUQgbmFtZSB0byBjaGVja1xuICAgICAqIEByZXR1cm5zIFRydWUgaWYgdGhlIElEIGlzIG9uZSBvZiB0aGUgc3VwcG9yZWQgc291cmNlcywgZmFsc2Ugb3RoZXJ3aXNlXG4gICAgICovXG4gICAgaXNTdXBwb3J0ZWRTb3VyY2UoZm9sZGVySWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBsZXQgaXNTdXBwb3J0ZWRTb3VyY2VzID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IHNvdXJjZXMgPSBbJy1teS0nLCAnLXJvb3QtJywgJy1zaGFyZWQtJ107XG5cbiAgICAgICAgaWYgKHNvdXJjZXMuaW5kZXhPZihmb2xkZXJJZCkgPiAtMSkge1xuICAgICAgICAgICAgaXNTdXBwb3J0ZWRTb3VyY2VzID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBpc1N1cHBvcnRlZFNvdXJjZXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBhIGZvbGRlcidzIGNvbnRlbnRzLlxuICAgICAqIEBwYXJhbSBub2RlSWQgSUQgb2YgdGhlIHRhcmdldCBmb2xkZXIgbm9kZVxuICAgICAqIEBwYXJhbSBwYWdpbmF0aW9uIFNwZWNpZmllcyBob3cgdG8gcGFnaW5hdGUgdGhlIHJlc3VsdHNcbiAgICAgKiBAcGFyYW0gaW5jbHVkZUZpZWxkcyBMaXN0IG9mIGRhdGEgZmllbGQgbmFtZXMgdG8gaW5jbHVkZSBpbiB0aGUgcmVzdWx0c1xuICAgICAqIEByZXR1cm5zIExpc3Qgb2YgaXRlbXMgY29udGFpbmVkIGluIHRoZSBmb2xkZXJcbiAgICAgKi9cbiAgICBsb2FkRm9sZGVyQnlOb2RlSWQobm9kZUlkOiBzdHJpbmcsIHBhZ2luYXRpb246IFBhZ2luYXRpb25Nb2RlbCwgaW5jbHVkZUZpZWxkczogc3RyaW5nW10pOiBPYnNlcnZhYmxlPE5vZGVQYWdpbmc+IHtcbiAgICAgICAgaWYgKG5vZGVJZCA9PT0gJy10cmFzaGNhbi0nKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sb2FkVHJhc2hjYW4ocGFnaW5hdGlvbiwgaW5jbHVkZUZpZWxkcyk7XG4gICAgICAgIH0gZWxzZSBpZiAobm9kZUlkID09PSAnLXNoYXJlZGxpbmtzLScpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvYWRTaGFyZWRMaW5rcyhwYWdpbmF0aW9uLCBpbmNsdWRlRmllbGRzKTtcbiAgICAgICAgfSBlbHNlIGlmIChub2RlSWQgPT09ICctc2l0ZXMtJykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9hZFNpdGVzKHBhZ2luYXRpb24pO1xuICAgICAgICB9IGVsc2UgaWYgKG5vZGVJZCA9PT0gJy1teXNpdGVzLScpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvYWRNZW1iZXJTaXRlcyhwYWdpbmF0aW9uKTtcbiAgICAgICAgfSBlbHNlIGlmIChub2RlSWQgPT09ICctZmF2b3JpdGVzLScpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvYWRGYXZvcml0ZXMocGFnaW5hdGlvbiwgaW5jbHVkZUZpZWxkcyk7XG4gICAgICAgIH0gZWxzZSBpZiAobm9kZUlkID09PSAnLXJlY2VudC0nKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRSZWNlbnRGaWxlcygnLW1lLScsIHBhZ2luYXRpb24pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gVE9ETzogcmVtb3ZlIGl0IGZyb20gaGVyZVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgY29udGVudHMgb2Ygb25lIG9mIHRoZSB3ZWxsLWtub3duIGFsaWFzZXMgaW4gdGhlIGZvcm0gb2Ygbm9kZSBJRCBzdHJpbmdzLlxuICAgICAqIEBwYXJhbSBub2RlSWQgSUQgb2YgdGhlIHRhcmdldCBmb2xkZXIgbm9kZVxuICAgICAqIEBwYXJhbSBwYWdpbmF0aW9uIFNwZWNpZmllcyBob3cgdG8gcGFnaW5hdGUgdGhlIHJlc3VsdHNcbiAgICAgKiBAcmV0dXJucyBMaXN0IG9mIG5vZGUgSURzXG4gICAgICovXG4gICAgZ2V0Q29ycmVzcG9uZGluZ05vZGVJZHMobm9kZUlkOiBzdHJpbmcsIHBhZ2luYXRpb246IFBhZ2luYXRpb25Nb2RlbCA9IHt9KTogT2JzZXJ2YWJsZTxzdHJpbmdbXT4ge1xuICAgICAgICBpZiAodGhpcy5pc0N1c3RvbVNvdXJjZShub2RlSWQpKSB7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvYWRGb2xkZXJCeU5vZGVJZChub2RlSWQsIHBhZ2luYXRpb24sIFtdKVxuICAgICAgICAgICAgICAgIC5waXBlKG1hcChyZXN1bHQgPT4gcmVzdWx0Lmxpc3QuZW50cmllcy5tYXAoKG5vZGU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZUlkID09PSAnLXNoYXJlZGxpbmtzLScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBub2RlLmVudHJ5Lm5vZGVJZDtcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vZGVJZCA9PT0gJy1zaXRlcy0nIHx8IG5vZGVJZCA9PT0gJy1teXNpdGVzLScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBub2RlLmVudHJ5Lmd1aWQ7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub2RlSWQgPT09ICctZmF2b3JpdGVzLScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBub2RlLmVudHJ5LnRhcmdldEd1aWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS5lbnRyeS5pZDtcbiAgICAgICAgICAgICAgICB9KSkpO1xuXG4gICAgICAgIH0gZWxzZSBpZiAobm9kZUlkKSB7XG4gICAgICAgICAgICAvLyBjYXNlcyB3aGVuIG5vZGVJZCBpcyAnLW15LScsICctcm9vdC0nIG9yICctc2hhcmVkLSdcbiAgICAgICAgICAgIHJldHVybiBmcm9tKHRoaXMuYXBpU2VydmljZS5ub2Rlc0FwaS5nZXROb2RlKG5vZGVJZClcbiAgICAgICAgICAgICAgICAudGhlbihub2RlID0+IFtub2RlLmVudHJ5LmlkXSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG9mKFtdKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEb2VzIHRoZSB3ZWxsLWtub3duIGFsaWFzIGhhdmUgYSBjb3JyZXNwb25kaW5nIG5vZGUgSUQ/XG4gICAgICogQHBhcmFtIG5vZGVJZCBOb2RlIHRvIGNoZWNrXG4gICAgICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgYWxpYXMgaGFzIGEgY29ycmVzcG9uZGluZyBub2RlIElELCBmYWxzZSBvdGhlcndpc2VcbiAgICAgKi9cbiAgICBoYXNDb3JyZXNwb25kaW5nTm9kZUlkcyhub2RlSWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0N1c3RvbVNvdXJjZShub2RlSWQpIHx8IHRoaXMuaXNTdXBwb3J0ZWRTb3VyY2Uobm9kZUlkKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldEluY2x1ZGVzRmllbGRzKGluY2x1ZGVGaWVsZHM6IHN0cmluZ1tdKTogc3RyaW5nW10ge1xuICAgICAgICByZXR1cm4gWydwYXRoJywgJ3Byb3BlcnRpZXMnLCAnYWxsb3dhYmxlT3BlcmF0aW9ucycsICdwZXJtaXNzaW9ucycsICdhc3BlY3ROYW1lcycsIC4uLmluY2x1ZGVGaWVsZHNdXG4gICAgICAgICAgICAuZmlsdGVyKChlbGVtZW50LCBpbmRleCwgYXJyYXkpID0+IGluZGV4ID09PSBhcnJheS5pbmRleE9mKGVsZW1lbnQpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUVycm9yKGVycm9yOiBSZXNwb25zZSkge1xuICAgICAgICB0aGlzLmxvZ1NlcnZpY2UuZXJyb3IoZXJyb3IpO1xuICAgICAgICByZXR1cm4gdGhyb3dFcnJvcihlcnJvciB8fCAnU2VydmVyIGVycm9yJyk7XG4gICAgfVxufVxuIiwiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgICBBZnRlckNvbnRlbnRJbml0LCBDb21wb25lbnQsIENvbnRlbnRDaGlsZCwgRWxlbWVudFJlZiwgRXZlbnRFbWl0dGVyLCBIb3N0TGlzdGVuZXIsIElucHV0LCBOZ1pvbmUsXG4gICAgT25DaGFuZ2VzLCBPbkRlc3Ryb3ksIE9uSW5pdCwgT3V0cHV0LCBTaW1wbGVDaGFuZ2VzLCBUZW1wbGF0ZVJlZiwgVmlld0NoaWxkLCBWaWV3RW5jYXBzdWxhdGlvblxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHtcbiAgICBDb250ZW50U2VydmljZSwgRGF0YUNlbGxFdmVudCwgRGF0YUNvbHVtbiwgRGF0YVJvd0FjdGlvbkV2ZW50LCBEYXRhU29ydGluZywgRGF0YVRhYmxlQ29tcG9uZW50LFxuICAgIERpc3BsYXlNb2RlLCBPYmplY3REYXRhQ29sdW1uLCBQYWdpbmF0ZWRDb21wb25lbnQsIEFwcENvbmZpZ1NlcnZpY2UsIERhdGFDb2x1bW5MaXN0Q29tcG9uZW50LFxuICAgIFVzZXJQcmVmZXJlbmNlc1NlcnZpY2UsIFBhZ2luYXRpb25Nb2RlbCwgVGh1bWJuYWlsU2VydmljZVxufSBmcm9tICdAYWxmcmVzY28vYWRmLWNvcmUnO1xuXG5pbXBvcnQgeyBNaW5pbWFsTm9kZUVudGl0eSwgTWluaW1hbE5vZGVFbnRyeUVudGl0eSwgTm9kZVBhZ2luZyB9IGZyb20gJ2FsZnJlc2NvLWpzLWFwaSc7XG5pbXBvcnQgeyBTdWJqZWN0LCBCZWhhdmlvclN1YmplY3QsIFN1YnNjcmlwdGlvbiwgb2YgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IFNoYXJlRGF0YVJvdyB9IGZyb20gJy4vLi4vZGF0YS9zaGFyZS1kYXRhLXJvdy5tb2RlbCc7XG5pbXBvcnQgeyBTaGFyZURhdGFUYWJsZUFkYXB0ZXIgfSBmcm9tICcuLy4uL2RhdGEvc2hhcmUtZGF0YXRhYmxlLWFkYXB0ZXInO1xuaW1wb3J0IHsgcHJlc2V0c0RlZmF1bHRNb2RlbCB9IGZyb20gJy4uL21vZGVscy9wcmVzZXQubW9kZWwnO1xuaW1wb3J0IHsgQ29udGVudEFjdGlvbk1vZGVsIH0gZnJvbSAnLi8uLi9tb2RlbHMvY29udGVudC1hY3Rpb24ubW9kZWwnO1xuaW1wb3J0IHsgUGVybWlzc2lvblN0eWxlTW9kZWwgfSBmcm9tICcuLy4uL21vZGVscy9wZXJtaXNzaW9ucy1zdHlsZS5tb2RlbCc7XG5pbXBvcnQgeyBEb2N1bWVudExpc3RTZXJ2aWNlIH0gZnJvbSAnLi8uLi9zZXJ2aWNlcy9kb2N1bWVudC1saXN0LnNlcnZpY2UnO1xuaW1wb3J0IHsgTm9kZUVudGl0eUV2ZW50LCBOb2RlRW50cnlFdmVudCB9IGZyb20gJy4vbm9kZS5ldmVudCc7XG5pbXBvcnQgeyBDdXN0b21SZXNvdXJjZXNTZXJ2aWNlIH0gZnJvbSAnLi8uLi9zZXJ2aWNlcy9jdXN0b20tcmVzb3VyY2VzLnNlcnZpY2UnO1xuaW1wb3J0IHsgTmF2aWdhYmxlQ29tcG9uZW50SW50ZXJmYWNlIH0gZnJvbSAnLi4vLi4vYnJlYWRjcnVtYi9uYXZpZ2FibGUtY29tcG9uZW50LmludGVyZmFjZSc7XG5cbmV4cG9ydCBlbnVtIFBhZ2luYXRpb25TdHJhdGVneSB7XG4gICAgRmluaXRlLFxuICAgIEluZmluaXRlXG59XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnYWRmLWRvY3VtZW50LWxpc3QnLFxuICAgIHN0eWxlVXJsczogWycuL2RvY3VtZW50LWxpc3QuY29tcG9uZW50LnNjc3MnXSxcbiAgICB0ZW1wbGF0ZVVybDogJy4vZG9jdW1lbnQtbGlzdC5jb21wb25lbnQuaHRtbCcsXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZVxufSlcbmV4cG9ydCBjbGFzcyBEb2N1bWVudExpc3RDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcywgT25EZXN0cm95LCBBZnRlckNvbnRlbnRJbml0LCBQYWdpbmF0ZWRDb21wb25lbnQsIE5hdmlnYWJsZUNvbXBvbmVudEludGVyZmFjZSB7XG5cbiAgICBzdGF0aWMgU0lOR0xFX0NMSUNLX05BVklHQVRJT046IHN0cmluZyA9ICdjbGljayc7XG4gICAgc3RhdGljIERPVUJMRV9DTElDS19OQVZJR0FUSU9OOiBzdHJpbmcgPSAnZGJsY2xpY2snO1xuICAgIHN0YXRpYyBERUZBVUxUX1BBR0VfU0laRTogbnVtYmVyID0gMjA7XG5cbiAgICBAQ29udGVudENoaWxkKERhdGFDb2x1bW5MaXN0Q29tcG9uZW50KVxuICAgIGNvbHVtbkxpc3Q6IERhdGFDb2x1bW5MaXN0Q29tcG9uZW50O1xuXG4gICAgLyoqIEluY2x1ZGUgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgbm9kZSBpbiB0aGUgc2VydmVyIHJlcXVlc3QuZm9yIGV4YW1wbGU6IGFzc29jaWF0aW9uLCBpc0xpbmssIGlzTG9ja2VkIGFuZCBvdGhlcnMuICovXG4gICAgQElucHV0KClcbiAgICBpbmNsdWRlRmllbGRzOiBzdHJpbmdbXTtcblxuICAgIC8qKiBDaGFuZ2UgdGhlIGRpc3BsYXkgbW9kZSBvZiB0aGUgdGFibGUuIENhbiBiZSBcImxpc3RcIiBvciBcImdhbGxlcnlcIi4gKi9cbiAgICBASW5wdXQoKVxuICAgIGRpc3BsYXk6IHN0cmluZyA9IERpc3BsYXlNb2RlLkxpc3Q7XG5cbiAgICAvKiogRGVmaW5lIGEgc2V0IG9mIENTUyBzdHlsZXMgc3R5bGVzIHRvIGFwcGx5IGRlcGVuZGluZyBvbiB0aGUgcGVybWlzc2lvblxuICAgICAqIG9mIHRoZSB1c2VyIG9uIHRoYXQgbm9kZS4gU2VlIHRoZSBQZXJtaXNzaW9uIFN0eWxlIG1vZGVsXG4gICAgICogcGFnZSBmb3IgZnVydGhlciBkZXRhaWxzIGFuZCBleGFtcGxlcy5cbiAgICAgKi9cbiAgICBASW5wdXQoKVxuICAgIHBlcm1pc3Npb25zU3R5bGU6IFBlcm1pc3Npb25TdHlsZU1vZGVsW10gPSBbXTtcblxuICAgIC8qKiBUaGUgZGVmYXVsdCByb3V0ZSBmb3IgYWxsIHRoZSBsb2NhdGlvbi1iYXNlZCBjb2x1bW5zIChpZiBkZWNsYXJlZCkuICovXG4gICAgQElucHV0KClcbiAgICBsb2NhdGlvbkZvcm1hdDogc3RyaW5nID0gJy8nO1xuXG4gICAgLyoqIFRvZ2dsZXMgbmF2aWdhdGlvbiB0byBmb2xkZXIgY29udGVudCBvciBmaWxlIHByZXZpZXcgKi9cbiAgICBASW5wdXQoKVxuICAgIG5hdmlnYXRlOiBib29sZWFuID0gdHJ1ZTtcblxuICAgIC8qKiBUb2dnbGVzIHRoZSBoZWFkZXIgKi9cbiAgICBASW5wdXQoKVxuICAgIHNob3dIZWFkZXI6IGJvb2xlYW4gPSB0cnVlO1xuXG4gICAgLyoqIFVzZXIgaW50ZXJhY3Rpb24gZm9yIGZvbGRlciBuYXZpZ2F0aW9uIG9yIGZpbGUgcHJldmlldy5cbiAgICAgKiBWYWxpZCB2YWx1ZXMgYXJlIFwiY2xpY2tcIiBhbmQgXCJkYmxjbGlja1wiLiBEZWZhdWx0IHZhbHVlOiBcImRibGNsaWNrXCJcbiAgICAgKi9cbiAgICBASW5wdXQoKVxuICAgIG5hdmlnYXRpb25Nb2RlOiBzdHJpbmcgPSBEb2N1bWVudExpc3RDb21wb25lbnQuRE9VQkxFX0NMSUNLX05BVklHQVRJT047IC8vIGNsaWNrfGRibGNsaWNrXG5cbiAgICAvKiogU2hvdyBkb2N1bWVudCB0aHVtYm5haWxzIHJhdGhlciB0aGFuIGljb25zICovXG4gICAgQElucHV0KClcbiAgICB0aHVtYm5haWxzOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICAvKiogUm93IHNlbGVjdGlvbiBtb2RlLiBDYW4gYmUgbnVsbCwgYHNpbmdsZWAgb3IgYG11bHRpcGxlYC4gRm9yIGBtdWx0aXBsZWAgbW9kZSxcbiAgICAgKiB5b3UgY2FuIHVzZSBDbWQgKG1hY09TKSBvciBDdHJsIChXaW4pIG1vZGlmaWVyIGtleSB0byB0b2dnbGUgc2VsZWN0aW9uIGZvciBtdWx0aXBsZSByb3dzLlxuICAgICAqL1xuICAgIEBJbnB1dCgpXG4gICAgc2VsZWN0aW9uTW9kZTogc3RyaW5nID0gJ3NpbmdsZSc7IC8vIG51bGx8c2luZ2xlfG11bHRpcGxlXG5cbiAgICAvKiogVG9nZ2xlcyBtdWx0aXNlbGVjdCBtb2RlICovXG4gICAgQElucHV0KClcbiAgICBtdWx0aXNlbGVjdDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgLyoqIFRvZ2dsZXMgY29udGVudCBhY3Rpb25zIGZvciBlYWNoIHJvdyAqL1xuICAgIEBJbnB1dCgpXG4gICAgY29udGVudEFjdGlvbnM6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIC8qKiBQb3NpdGlvbiBvZiB0aGUgY29udGVudCBhY3Rpb25zIGRyb3Bkb3duIG1lbnUuIENhbiBiZSBzZXQgdG8gXCJsZWZ0XCIgb3IgXCJyaWdodFwiLiAqL1xuICAgIEBJbnB1dCgpXG4gICAgY29udGVudEFjdGlvbnNQb3NpdGlvbjogc3RyaW5nID0gJ3JpZ2h0JzsgLy8gbGVmdHxyaWdodFxuXG4gICAgLyoqIFRvZ2dsZXMgY29udGV4dCBtZW51cyBmb3IgZWFjaCByb3cgKi9cbiAgICBASW5wdXQoKVxuICAgIGNvbnRleHRNZW51QWN0aW9uczogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgLyoqIEN1c3RvbSBpbWFnZSBmb3IgZW1wdHkgZm9sZGVyLiBEZWZhdWx0IHZhbHVlOiAnLi9hc3NldHMvaW1hZ2VzL2VtcHR5X2RvY19saWIuc3ZnJyAqL1xuICAgIEBJbnB1dCgpXG4gICAgZW1wdHlGb2xkZXJJbWFnZVVybDogc3RyaW5nID0gJy4vYXNzZXRzL2ltYWdlcy9lbXB0eV9kb2NfbGliLnN2Zyc7XG5cbiAgICAvKiogVG9nZ2xlIGZpbGUgZHJvcCBzdXBwb3J0IGZvciByb3dzIChzZWUgVXBsb2FkIERpcmVjdGl2ZSBmb3IgZnVydGhlciBkZXRhaWxzICovXG4gICAgQElucHV0KClcbiAgICBhbGxvd0Ryb3BGaWxlczogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgLyoqIERlZmluZXMgZGVmYXVsdCBzb3J0aW5nLiBUaGUgZm9ybWF0IGlzIGFuIGFycmF5IG9mIDIgc3RyaW5ncyBgW2tleSwgZGlyZWN0aW9uXWBcbiAgICAgKiBpLmUuIGBbJ25hbWUnLCAnZGVzYyddYCBvciBgWyduYW1lJywgJ2FzYyddYC4gU2V0IHRoaXMgdmFsdWUgb25seSBpZiB5b3Ugd2FudCB0b1xuICAgICAqIG92ZXJyaWRlIHRoZSBkZWZhdWx0IHNvcnRpbmcgZGV0ZWN0ZWQgYnkgdGhlIGNvbXBvbmVudCBiYXNlZCBvbiBjb2x1bW5zLlxuICAgICAqL1xuICAgIEBJbnB1dCgpXG4gICAgc29ydGluZyA9IFsnbmFtZScsICdhc2MnXTtcblxuICAgIC8qKiBEZWZpbmVzIHNvcnRpbmcgbW9kZS4gQ2FuIGJlIGVpdGhlciBgY2xpZW50YCBvciBgc2VydmVyYC4gKi9cbiAgICBASW5wdXQoKVxuICAgIHNvcnRpbmdNb2RlID0gJ2NsaWVudCc7XG5cbiAgICAvKiogVGhlIGlubGluZSBzdHlsZSB0byBhcHBseSB0byBldmVyeSByb3cuIFNlZVxuICAgICAqIHRoZSBBbmd1bGFyIE5nU3R5bGVcbiAgICAgKiBkb2NzIGZvciBtb3JlIGRldGFpbHMgYW5kIHVzYWdlIGV4YW1wbGVzLlxuICAgICAqL1xuICAgIEBJbnB1dCgpXG4gICAgcm93U3R5bGU6IHN0cmluZztcblxuICAgIC8qKiBUaGUgQ1NTIGNsYXNzIHRvIGFwcGx5IHRvIGV2ZXJ5IHJvdyAqL1xuICAgIEBJbnB1dCgpXG4gICAgcm93U3R5bGVDbGFzczogc3RyaW5nO1xuXG4gICAgLyoqIFRvZ2dsZXMgdGhlIGxvYWRpbmcgc3RhdGUgYW5kIGFuaW1hdGVkIHNwaW5uZXJzIGZvciB0aGUgY29tcG9uZW50LiBVc2VkIGluXG4gICAgICogY29tYmluYXRpb24gd2l0aCBgbmF2aWdhdGU9ZmFsc2VgIHRvIHBlcmZvcm0gY3VzdG9tIG5hdmlnYXRpb24gYW5kIGxvYWRpbmdcbiAgICAgKiBzdGF0ZSBpbmRpY2F0aW9uLlxuICAgICAqL1xuICAgIEBJbnB1dCgpXG4gICAgbG9hZGluZzogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgLyoqIEN1c3RvbSByb3cgZmlsdGVyICovXG4gICAgQElucHV0KClcbiAgICByb3dGaWx0ZXI6IGFueSB8IG51bGwgPSBudWxsO1xuXG4gICAgLyoqIEN1c3RvbSBpbWFnZSByZXNvbHZlciAqL1xuICAgIEBJbnB1dCgpXG4gICAgaW1hZ2VSZXNvbHZlcjogYW55IHwgbnVsbCA9IG51bGw7XG5cbiAgICAvKiogVGhlIElEIG9mIHRoZSBmb2xkZXIgbm9kZSB0byBkaXNwbGF5IG9yIGEgcmVzZXJ2ZWQgc3RyaW5nIGFsaWFzIGZvciBzcGVjaWFsIHNvdXJjZXMgKi9cbiAgICBASW5wdXQoKVxuICAgIGN1cnJlbnRGb2xkZXJJZDogc3RyaW5nID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEN1cnJlbnRseSBkaXNwbGF5ZWQgZm9sZGVyIG5vZGVcbiAgICAgKiBAZGVwcmVjYXRlZCAyLjMuMCAtIHVzZSBjdXJyZW50Rm9sZGVySWQgb3Igbm9kZVxuICAgICAqL1xuICAgIEBJbnB1dCgpXG4gICAgZm9sZGVyTm9kZTogTWluaW1hbE5vZGVFbnRyeUVudGl0eSA9IG51bGw7XG5cbiAgICAvKiogVGhlIERvY3VtZW50IGxpc3Qgd2lsbCBzaG93IGFsbCB0aGUgbm9kZXMgY29udGFpbmVkIGluIHRoZSBOb2RlUGFnaW5nIGVudGl0eSAqL1xuICAgIEBJbnB1dCgpXG4gICAgbm9kZTogTm9kZVBhZ2luZyA9IG51bGw7XG5cbiAgICAvKiogRGVmYXVsdCB2YWx1ZSBpcyBzdG9yZWQgaW50byB1c2VyIHByZWZlcmVuY2Ugc2V0dGluZ3MgdXNlIGl0IG9ubHkgaWYgeW91IGFyZSBub3QgdXNpbmcgdGhlIHBhZ2luYXRpb24gKi9cbiAgICBASW5wdXQoKVxuICAgIG1heEl0ZW1zOiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBOdW1iZXIgb2YgZWxlbWVudHMgdG8gc2tpcCBvdmVyIGZvciBwYWdpbmF0aW9uIHB1cnBvc2VzXG4gICAgICogQGRlcHJlY2F0ZWQgMi4zLjAgLSBkZWZpbmUgaXQgaW4gcGFnaW5hdGlvblxuICAgICAqL1xuICAgIEBJbnB1dCgpXG4gICAgc2tpcENvdW50OiBudW1iZXIgPSAwO1xuXG4gICAgLyoqXG4gICAgICogU2V0IGRvY3VtZW50IGxpc3QgdG8gd29yayBpbiBpbmZpbml0ZSBzY3JvbGxpbmcgbW9kZVxuICAgICAqIEBkZXByZWNhdGVkIDIuMy4wXG4gICAgICovXG4gICAgQElucHV0KClcbiAgICBlbmFibGVJbmZpbml0ZVNjcm9sbGluZzogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgLyoqIEVtaXR0ZWQgd2hlbiB0aGUgdXNlciBjbGlja3MgYSBsaXN0IG5vZGUgKi9cbiAgICBAT3V0cHV0KClcbiAgICBub2RlQ2xpY2s6IEV2ZW50RW1pdHRlcjxOb2RlRW50aXR5RXZlbnQ+ID0gbmV3IEV2ZW50RW1pdHRlcjxOb2RlRW50aXR5RXZlbnQ+KCk7XG5cbiAgICAvKiogRW1pdHRlZCB3aGVuIHRoZSB1c2VyIGRvdWJsZS1jbGlja3MgYSBsaXN0IG5vZGUgKi9cbiAgICBAT3V0cHV0KClcbiAgICBub2RlRGJsQ2xpY2s6IEV2ZW50RW1pdHRlcjxOb2RlRW50aXR5RXZlbnQ+ID0gbmV3IEV2ZW50RW1pdHRlcjxOb2RlRW50aXR5RXZlbnQ+KCk7XG5cbiAgICAvKiogRW1pdHRlZCB3aGVuIHRoZSBjdXJyZW50IGRpc3BsYXkgZm9sZGVyIGNoYW5nZXMgKi9cbiAgICBAT3V0cHV0KClcbiAgICBmb2xkZXJDaGFuZ2U6IEV2ZW50RW1pdHRlcjxOb2RlRW50cnlFdmVudD4gPSBuZXcgRXZlbnRFbWl0dGVyPE5vZGVFbnRyeUV2ZW50PigpO1xuXG4gICAgLyoqIEVtaXR0ZWQgd2hlbiB0aGUgdXNlciBhY3RzIHVwb24gZmlsZXMgd2l0aCBlaXRoZXIgc2luZ2xlIG9yIGRvdWJsZSBjbGlja1xuICAgICAqIChkZXBlbmRzIG9uIGBuYXZpZ2F0aW9uLW1vZGVgKS4gVXNlZnVsIGZvciBpbnRlZ3JhdGlvbiB3aXRoIHRoZVxuICAgICAqIFZpZXdlciBjb21wb25lbnQuXG4gICAgICovXG4gICAgQE91dHB1dCgpXG4gICAgcHJldmlldzogRXZlbnRFbWl0dGVyPE5vZGVFbnRpdHlFdmVudD4gPSBuZXcgRXZlbnRFbWl0dGVyPE5vZGVFbnRpdHlFdmVudD4oKTtcblxuICAgIC8qKiBFbWl0dGVkIHdoZW4gdGhlIERvY3VtZW50IExpc3QgaGFzIGxvYWRlZCBhbGwgaXRlbXMgYW5kIGlzIHJlYWR5IGZvciB1c2UgKi9cbiAgICBAT3V0cHV0KClcbiAgICByZWFkeTogRXZlbnRFbWl0dGVyPE5vZGVQYWdpbmc+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gICAgLyoqIEVtaXR0ZWQgd2hlbiB0aGUgQVBJIGZhaWxzIHRvIGdldCB0aGUgRG9jdW1lbnQgTGlzdCBkYXRhICovXG4gICAgQE91dHB1dCgpXG4gICAgZXJyb3I6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gICAgQFZpZXdDaGlsZCgnZGF0YVRhYmxlJylcbiAgICBkYXRhVGFibGU6IERhdGFUYWJsZUNvbXBvbmVudDtcblxuICAgIGFjdGlvbnM6IENvbnRlbnRBY3Rpb25Nb2RlbFtdID0gW107XG4gICAgZW1wdHlGb2xkZXJUZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PjtcbiAgICBub1Blcm1pc3Npb25UZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PjtcbiAgICBjb250ZXh0QWN0aW9uSGFuZGxlcjogU3ViamVjdDxhbnk+ID0gbmV3IFN1YmplY3QoKTtcbiAgICBkYXRhOiBTaGFyZURhdGFUYWJsZUFkYXB0ZXI7XG4gICAgbm9QZXJtaXNzaW9uOiBib29sZWFuID0gZmFsc2U7XG4gICAgc2VsZWN0aW9uID0gbmV3IEFycmF5PE1pbmltYWxOb2RlRW50aXR5PigpO1xuXG4gICAgcHJpdmF0ZSBfcGFnaW5hdGlvbjogQmVoYXZpb3JTdWJqZWN0PFBhZ2luYXRpb25Nb2RlbD47XG4gICAgcHJpdmF0ZSBsYXlvdXRQcmVzZXRzID0ge307XG4gICAgcHJpdmF0ZSBzdWJzY3JpcHRpb25zOiBTdWJzY3JpcHRpb25bXSA9IFtdO1xuICAgIHByaXZhdGUgcm93TWVudUNhY2hlOiB7IFtrZXk6IHN0cmluZ106IENvbnRlbnRBY3Rpb25Nb2RlbFtdIH0gPSB7fTtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZG9jdW1lbnRMaXN0U2VydmljZTogRG9jdW1lbnRMaXN0U2VydmljZSxcbiAgICAgICAgICAgICAgICBwcml2YXRlIG5nWm9uZTogTmdab25lLFxuICAgICAgICAgICAgICAgIHByaXZhdGUgZWxlbWVudFJlZjogRWxlbWVudFJlZixcbiAgICAgICAgICAgICAgICBwcml2YXRlIGFwcENvbmZpZzogQXBwQ29uZmlnU2VydmljZSxcbiAgICAgICAgICAgICAgICBwcml2YXRlIHByZWZlcmVuY2VzOiBVc2VyUHJlZmVyZW5jZXNTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIHByaXZhdGUgY3VzdG9tUmVzb3VyY2VzU2VydmljZTogQ3VzdG9tUmVzb3VyY2VzU2VydmljZSxcbiAgICAgICAgICAgICAgICBwcml2YXRlIGNvbnRlbnRTZXJ2aWNlOiBDb250ZW50U2VydmljZSxcbiAgICAgICAgICAgICAgICBwcml2YXRlIHRodW1ibmFpbFNlcnZpY2U6IFRodW1ibmFpbFNlcnZpY2UpIHtcbiAgICB9XG5cbiAgICBnZXRDb250ZXh0QWN0aW9ucyhub2RlOiBNaW5pbWFsTm9kZUVudGl0eSkge1xuICAgICAgICBpZiAobm9kZSAmJiBub2RlLmVudHJ5KSB7XG4gICAgICAgICAgICBsZXQgYWN0aW9ucyA9IHRoaXMuZ2V0Tm9kZUFjdGlvbnMobm9kZSk7XG4gICAgICAgICAgICBpZiAoYWN0aW9ucyAmJiBhY3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYWN0aW9ucy5tYXAoKGN1cnJlbnRBY3Rpb246IENvbnRlbnRBY3Rpb25Nb2RlbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWw6IGN1cnJlbnRBY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlOiBub2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdDogdGhpcy5jb250ZXh0QWN0aW9uSGFuZGxlclxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8qKiBAZGVwcmVjYXRlZCAyLjMuMCBkZWZpbmUgaXQgaW4gcGFnaW5hdGlvbiAqL1xuICAgIGdldCBzdXBwb3J0ZWRQYWdlU2l6ZXMoKTogbnVtYmVyW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5wcmVmZXJlbmNlcy5nZXREZWZhdWx0UGFnZVNpemVzKCk7XG4gICAgfVxuXG4gICAgZ2V0IGhhc0N1c3RvbUxheW91dCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sdW1uTGlzdCAmJiB0aGlzLmNvbHVtbkxpc3QuY29sdW1ucyAmJiB0aGlzLmNvbHVtbkxpc3QuY29sdW1ucy5sZW5ndGggPiAwO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0RGVmYXVsdFNvcnRpbmcoKTogRGF0YVNvcnRpbmcge1xuICAgICAgICBsZXQgZGVmYXVsdFNvcnRpbmc6IERhdGFTb3J0aW5nO1xuICAgICAgICBpZiAodGhpcy5zb3J0aW5nKSB7XG4gICAgICAgICAgICBjb25zdCBba2V5LCBkaXJlY3Rpb25dID0gdGhpcy5zb3J0aW5nO1xuICAgICAgICAgICAgZGVmYXVsdFNvcnRpbmcgPSBuZXcgRGF0YVNvcnRpbmcoa2V5LCBkaXJlY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWZhdWx0U29ydGluZztcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldExheW91dFByZXNldChuYW1lOiBzdHJpbmcgPSAnZGVmYXVsdCcpOiBEYXRhQ29sdW1uW10ge1xuICAgICAgICByZXR1cm4gKHRoaXMubGF5b3V0UHJlc2V0c1tuYW1lXSB8fCB0aGlzLmxheW91dFByZXNldHNbJ2RlZmF1bHQnXSkubWFwKGNvbCA9PiBuZXcgT2JqZWN0RGF0YUNvbHVtbihjb2wpKTtcbiAgICB9XG5cbiAgICBnZXQgcGFnaW5hdGlvbigpOiBCZWhhdmlvclN1YmplY3Q8UGFnaW5hdGlvbk1vZGVsPiB7XG4gICAgICAgIGxldCBtYXhJdGVtcyA9IHRoaXMucHJlZmVyZW5jZXMucGFnaW5hdGlvblNpemU7XG5cbiAgICAgICAgaWYgKCF0aGlzLl9wYWdpbmF0aW9uKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5tYXhJdGVtcykge1xuICAgICAgICAgICAgICAgIG1heEl0ZW1zID0gdGhpcy5tYXhJdGVtcztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGRlZmF1bHRQYWdpbmF0aW9uID0gPFBhZ2luYXRpb25Nb2RlbD4ge1xuICAgICAgICAgICAgICAgIG1heEl0ZW1zOiBtYXhJdGVtcyxcbiAgICAgICAgICAgICAgICBza2lwQ291bnQ6IDAsXG4gICAgICAgICAgICAgICAgdG90YWxJdGVtczogMCxcbiAgICAgICAgICAgICAgICBoYXNNb3JlSXRlbXM6IGZhbHNlXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLl9wYWdpbmF0aW9uID0gbmV3IEJlaGF2aW9yU3ViamVjdDxQYWdpbmF0aW9uTW9kZWw+KGRlZmF1bHRQYWdpbmF0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLl9wYWdpbmF0aW9uO1xuICAgIH1cblxuICAgIGlzRW1wdHlUZW1wbGF0ZURlZmluZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICh0aGlzLmRhdGFUYWJsZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZW1wdHlGb2xkZXJUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpc05vUGVybWlzc2lvblRlbXBsYXRlRGVmaW5lZCgpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKHRoaXMuZGF0YVRhYmxlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5ub1Blcm1pc3Npb25UZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpc01vYmlsZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICEhL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgIH1cblxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5kYXRhIHx8IHRoaXMuZGF0YS5nZXRSb3dzKCkubGVuZ3RoID09PSAwO1xuICAgIH1cblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICB0aGlzLnJvd01lbnVDYWNoZSA9IHt9O1xuICAgICAgICB0aGlzLmxvYWRMYXlvdXRQcmVzZXRzKCk7XG4gICAgICAgIHRoaXMuZGF0YSA9IG5ldyBTaGFyZURhdGFUYWJsZUFkYXB0ZXIodGhpcy5kb2N1bWVudExpc3RTZXJ2aWNlLCB0aGlzLnRodW1ibmFpbFNlcnZpY2UsIG51bGwsIHRoaXMuZ2V0RGVmYXVsdFNvcnRpbmcoKSwgdGhpcy5zb3J0aW5nTW9kZSk7XG4gICAgICAgIHRoaXMuZGF0YS50aHVtYm5haWxzID0gdGhpcy50aHVtYm5haWxzO1xuICAgICAgICB0aGlzLmRhdGEucGVybWlzc2lvbnNTdHlsZSA9IHRoaXMucGVybWlzc2lvbnNTdHlsZTtcblxuICAgICAgICBpZiAodGhpcy5yb3dGaWx0ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YS5zZXRGaWx0ZXIodGhpcy5yb3dGaWx0ZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuaW1hZ2VSZXNvbHZlcikge1xuICAgICAgICAgICAgdGhpcy5kYXRhLnNldEltYWdlUmVzb2x2ZXIodGhpcy5pbWFnZVJlc29sdmVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKFxuICAgICAgICAgICAgdGhpcy5jb250ZXh0QWN0aW9uSGFuZGxlci5zdWJzY3JpYmUodmFsID0+IHRoaXMuY29udGV4dEFjdGlvbkNhbGxiYWNrKHZhbCkpXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5lbmZvcmNlU2luZ2xlQ2xpY2tOYXZpZ2F0aW9uRm9yTW9iaWxlKCk7XG4gICAgfVxuXG4gICAgbmdBZnRlckNvbnRlbnRJbml0KCkge1xuICAgICAgICBpZiAodGhpcy5jb2x1bW5MaXN0KSB7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbkxpc3QuY29sdW1ucy5jaGFuZ2VzLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VGFibGVTY2hlbWEoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFRhYmxlU2NoZW1hKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXRUYWJsZVNjaGVtYSgpIHtcbiAgICAgICAgbGV0IHNjaGVtYTogRGF0YUNvbHVtbltdID0gW107XG5cbiAgICAgICAgaWYgKHRoaXMuaGFzQ3VzdG9tTGF5b3V0KSB7XG4gICAgICAgICAgICBzY2hlbWEgPSB0aGlzLmNvbHVtbkxpc3QuY29sdW1ucy5tYXAoYyA9PiA8RGF0YUNvbHVtbj4gYyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMuZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5kYXRhID0gbmV3IFNoYXJlRGF0YVRhYmxlQWRhcHRlcih0aGlzLmRvY3VtZW50TGlzdFNlcnZpY2UsIHRoaXMudGh1bWJuYWlsU2VydmljZSwgc2NoZW1hLCB0aGlzLmdldERlZmF1bHRTb3J0aW5nKCksIHRoaXMuc29ydGluZ01vZGUpO1xuICAgICAgICB9IGVsc2UgaWYgKHNjaGVtYSAmJiBzY2hlbWEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5kYXRhLnNldENvbHVtbnMoc2NoZW1hKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBjb2x1bW5zID0gdGhpcy5kYXRhLmdldENvbHVtbnMoKTtcbiAgICAgICAgaWYgKCFjb2x1bW5zIHx8IGNvbHVtbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnNldHVwRGVmYXVsdENvbHVtbnModGhpcy5jdXJyZW50Rm9sZGVySWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xuICAgICAgICB0aGlzLnJlc2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIGlmICh0aGlzLmRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YS50aHVtYm5haWxzID0gdGhpcy50aHVtYm5haWxzO1xuXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoYW5nZXMuc29ydGluZ01vZGUgJiYgIWNoYW5nZXMuc29ydGluZ01vZGUuZmlyc3RDaGFuZ2UgJiYgdGhpcy5kYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGEuc29ydGluZ01vZGUgPSBjaGFuZ2VzLnNvcnRpbmdNb2RlLmN1cnJlbnRWYWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjaGFuZ2VzLnNvcnRpbmcgJiYgIWNoYW5nZXMuc29ydGluZy5maXJzdENoYW5nZSAmJiB0aGlzLmRhdGEpIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gY2hhbmdlcy5zb3J0aW5nLmN1cnJlbnRWYWx1ZTtcbiAgICAgICAgICAgIGlmIChuZXdWYWx1ZSAmJiBuZXdWYWx1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgW2tleSwgZGlyZWN0aW9uXSA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YS5zZXRTb3J0aW5nKG5ldyBEYXRhU29ydGluZyhrZXksIGRpcmVjdGlvbikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNoYW5nZXMuZm9sZGVyTm9kZSAmJiBjaGFuZ2VzLmZvbGRlck5vZGUuY3VycmVudFZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRGb2xkZXJJZCA9IGNoYW5nZXMuZm9sZGVyTm9kZS5jdXJyZW50VmFsdWUuaWQ7XG4gICAgICAgICAgICB0aGlzLnJlc2V0TmV3Rm9sZGVyUGFnaW5hdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5sb2FkRm9sZGVyKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoY2hhbmdlcy5jdXJyZW50Rm9sZGVySWQgJiZcbiAgICAgICAgICAgIGNoYW5nZXMuY3VycmVudEZvbGRlcklkLmN1cnJlbnRWYWx1ZSAmJlxuICAgICAgICAgICAgY2hhbmdlcy5jdXJyZW50Rm9sZGVySWQuY3VycmVudFZhbHVlICE9PSBjaGFuZ2VzLmN1cnJlbnRGb2xkZXJJZC5wcmV2aW91c1ZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2V0TmV3Rm9sZGVyUGFnaW5hdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5sb2FkRm9sZGVyKCk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5kYXRhKSB7XG4gICAgICAgICAgICBpZiAoY2hhbmdlcy5ub2RlICYmIGNoYW5nZXMubm9kZS5jdXJyZW50VmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGEubG9hZFBhZ2UoY2hhbmdlcy5ub2RlLmN1cnJlbnRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkRhdGFSZWFkeShjaGFuZ2VzLm5vZGUuY3VycmVudFZhbHVlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hhbmdlcy5yb3dGaWx0ZXIgJiYgY2hhbmdlcy5yb3dGaWx0ZXIuY3VycmVudFZhbHVlICE9PSBjaGFuZ2VzLnJvd0ZpbHRlci5wcmV2aW91c1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhLnNldEZpbHRlcihjaGFuZ2VzLnJvd0ZpbHRlci5jdXJyZW50VmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRGb2xkZXJJZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRGb2xkZXJOb2Rlc0J5Rm9sZGVyTm9kZUlkKHRoaXMuY3VycmVudEZvbGRlcklkLCB0aGlzLnBhZ2luYXRpb24uZ2V0VmFsdWUoKSkuY2F0Y2goZXJyID0+IHRoaXMuZXJyb3IuZW1pdChlcnIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNoYW5nZXMuaW1hZ2VSZXNvbHZlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YS5zZXRJbWFnZVJlc29sdmVyKGNoYW5nZXMuaW1hZ2VSZXNvbHZlci5jdXJyZW50VmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVsb2FkKCkge1xuICAgICAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXNldFNlbGVjdGlvbigpO1xuICAgICAgICAgICAgaWYgKHRoaXMubm9kZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YS5sb2FkUGFnZSh0aGlzLm5vZGUpO1xuICAgICAgICAgICAgICAgIHRoaXMub25EYXRhUmVhZHkodGhpcy5ub2RlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkRm9sZGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnRleHRBY3Rpb25DYWxsYmFjayhhY3Rpb24pIHtcbiAgICAgICAgaWYgKGFjdGlvbikge1xuICAgICAgICAgICAgdGhpcy5leGVjdXRlQ29udGVudEFjdGlvbihhY3Rpb24ubm9kZSwgYWN0aW9uLm1vZGVsKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldE5vZGVBY3Rpb25zKG5vZGU6IE1pbmltYWxOb2RlRW50aXR5IHwgYW55KTogQ29udGVudEFjdGlvbk1vZGVsW10ge1xuICAgICAgICBpZiAobm9kZSAmJiBub2RlLmVudHJ5KSB7XG4gICAgICAgICAgICBsZXQgdGFyZ2V0ID0gbnVsbDtcblxuICAgICAgICAgICAgaWYgKG5vZGUuZW50cnkuaXNGaWxlKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0gJ2RvY3VtZW50JztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobm9kZS5lbnRyeS5pc0ZvbGRlcikge1xuICAgICAgICAgICAgICAgIHRhcmdldCA9ICdmb2xkZXInO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWN0aW9ucyA9IHRoaXMucm93TWVudUNhY2hlW25vZGUuZW50cnkuaWRdO1xuICAgICAgICAgICAgICAgIGlmIChhY3Rpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbnMuZm9yRWFjaChhY3Rpb24gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoQWN0aW9uKGFjdGlvbiwgbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWN0aW9ucztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsZXQgYWN0aW9uc0J5VGFyZ2V0ID0gdGhpcy5hY3Rpb25zXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoZW50cnkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNWaXNpYmxlID0gKHR5cGVvZiBlbnRyeS52aXNpYmxlID09PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gZW50cnkudmlzaWJsZShub2RlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZW50cnkudmlzaWJsZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzVmlzaWJsZSAmJiBlbnRyeS50YXJnZXQudG9Mb3dlckNhc2UoKSA9PT0gdGFyZ2V0O1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAubWFwKGFjdGlvbiA9PiBuZXcgQ29udGVudEFjdGlvbk1vZGVsKGFjdGlvbikpO1xuXG4gICAgICAgICAgICAgICAgYWN0aW9uc0J5VGFyZ2V0LmZvckVhY2goKGFjdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hBY3Rpb24oYWN0aW9uLCBub2RlKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHRoaXMucm93TWVudUNhY2hlW25vZGUuZW50cnkuaWRdID0gYWN0aW9uc0J5VGFyZ2V0O1xuICAgICAgICAgICAgICAgIHJldHVybiBhY3Rpb25zQnlUYXJnZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWZyZXNoQWN0aW9uKGFjdGlvbjogQ29udGVudEFjdGlvbk1vZGVsLCBub2RlOiBNaW5pbWFsTm9kZUVudGl0eSkge1xuICAgICAgICBhY3Rpb24uZGlzYWJsZWQgPSB0aGlzLmlzQWN0aW9uRGlzYWJsZWQoYWN0aW9uLCBub2RlKTtcbiAgICAgICAgYWN0aW9uLnZpc2libGUgPSB0aGlzLmlzQWN0aW9uVmlzaWJsZShhY3Rpb24sIG5vZGUpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNBY3Rpb25WaXNpYmxlKGFjdGlvbjogQ29udGVudEFjdGlvbk1vZGVsLCBub2RlOiBNaW5pbWFsTm9kZUVudGl0eSk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAodHlwZW9mIGFjdGlvbi52aXNpYmxlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gYWN0aW9uLnZpc2libGUobm9kZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYWN0aW9uLnZpc2libGU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc0FjdGlvbkRpc2FibGVkKGFjdGlvbjogQ29udGVudEFjdGlvbk1vZGVsLCBub2RlOiBNaW5pbWFsTm9kZUVudGl0eSk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAodHlwZW9mIGFjdGlvbi5kaXNhYmxlZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIGFjdGlvbi5kaXNhYmxlZChub2RlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhY3Rpb24ucGVybWlzc2lvbiAmJiBhY3Rpb24uZGlzYWJsZVdpdGhOb1Blcm1pc3Npb24gJiYgIXRoaXMuY29udGVudFNlcnZpY2UuaGFzUGVybWlzc2lvbihub2RlLmVudHJ5LCBhY3Rpb24ucGVybWlzc2lvbikpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGFjdGlvbi5kaXNhYmxlZDtcbiAgICB9XG5cbiAgICBASG9zdExpc3RlbmVyKCdjb250ZXh0bWVudScsIFsnJGV2ZW50J10pXG4gICAgb25TaG93Q29udGV4dE1lbnUoZT86IEV2ZW50KSB7XG4gICAgICAgIGlmIChlICYmIHRoaXMuY29udGV4dE1lbnVBY3Rpb25zKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwZXJmb3JtTmF2aWdhdGlvbihub2RlOiBNaW5pbWFsTm9kZUVudGl0eSk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAodGhpcy5jYW5OYXZpZ2F0ZUZvbGRlcihub2RlKSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVGb2xkZXJEYXRhKG5vZGUpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHBlcmZvcm1DdXN0b21Tb3VyY2VOYXZpZ2F0aW9uKG5vZGU6IE1pbmltYWxOb2RlRW50aXR5KTogYm9vbGVhbiB7XG4gICAgICAgIGlmICh0aGlzLmN1c3RvbVJlc291cmNlc1NlcnZpY2UuaXNDdXN0b21Tb3VyY2UodGhpcy5jdXJyZW50Rm9sZGVySWQpKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUZvbGRlckRhdGEobm9kZSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdXBkYXRlRm9sZGVyRGF0YShub2RlOiBNaW5pbWFsTm9kZUVudGl0eSk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlc2V0TmV3Rm9sZGVyUGFnaW5hdGlvbigpO1xuICAgICAgICB0aGlzLmN1cnJlbnRGb2xkZXJJZCA9IG5vZGUuZW50cnkuaWQ7XG4gICAgICAgIHRoaXMucmVsb2FkKCk7XG4gICAgICAgIHRoaXMuZm9sZGVyQ2hhbmdlLmVtaXQobmV3IE5vZGVFbnRyeUV2ZW50KG5vZGUuZW50cnkpKTtcbiAgICB9XG5cbiAgICB1cGRhdGVDdXN0b21Tb3VyY2VEYXRhKG5vZGVJZDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZm9sZGVyTm9kZSA9IG51bGw7XG4gICAgICAgIHRoaXMuY3VycmVudEZvbGRlcklkID0gbm9kZUlkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEludm9rZWQgd2hlbiBleGVjdXRpbmcgY29udGVudCBhY3Rpb24gZm9yIGEgZG9jdW1lbnQgb3IgZm9sZGVyLlxuICAgICAqIEBwYXJhbSBub2RlIE5vZGUgdG8gYmUgdGhlIGNvbnRleHQgb2YgdGhlIGV4ZWN1dGlvbi5cbiAgICAgKiBAcGFyYW0gYWN0aW9uIEFjdGlvbiB0byBiZSBleGVjdXRlZCBhZ2FpbnN0IHRoZSBjb250ZXh0LlxuICAgICAqL1xuICAgIGV4ZWN1dGVDb250ZW50QWN0aW9uKG5vZGU6IE1pbmltYWxOb2RlRW50aXR5LCBhY3Rpb246IENvbnRlbnRBY3Rpb25Nb2RlbCkge1xuICAgICAgICBpZiAobm9kZSAmJiBub2RlLmVudHJ5ICYmIGFjdGlvbikge1xuICAgICAgICAgICAgbGV0IGhhbmRsZXJTdWI7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgYWN0aW9uLmhhbmRsZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVyU3ViID0gYWN0aW9uLmhhbmRsZXIobm9kZSwgdGhpcywgYWN0aW9uLnBlcm1pc3Npb24pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVyU3ViID0gb2YodHJ1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgYWN0aW9uLmV4ZWN1dGUgPT09ICdmdW5jdGlvbicgJiYgaGFuZGxlclN1Yikge1xuICAgICAgICAgICAgICAgIGhhbmRsZXJTdWIuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uLmV4ZWN1dGUobm9kZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBsb2FkRm9sZGVyKCkge1xuICAgICAgICBpZiAoIXRoaXMucGFnaW5hdGlvbi5nZXRWYWx1ZSgpLm1lcmdlKSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLmhhc0N1c3RvbUxheW91dCkge1xuICAgICAgICAgICAgdGhpcy5zZXR1cERlZmF1bHRDb2x1bW5zKHRoaXMuY3VycmVudEZvbGRlcklkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmZvbGRlck5vZGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvYWRGb2xkZXJOb2Rlc0J5Rm9sZGVyTm9kZUlkKHRoaXMuZm9sZGVyTm9kZS5pZCwgdGhpcy5wYWdpbmF0aW9uLmdldFZhbHVlKCkpXG4gICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB0aGlzLmhhbmRsZUVycm9yKGVycikpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sb2FkRm9sZGVyQnlOb2RlSWQodGhpcy5jdXJyZW50Rm9sZGVySWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbG9hZEZvbGRlckJ5Tm9kZUlkKG5vZGVJZDogc3RyaW5nKSB7XG4gICAgICAgIGlmICh0aGlzLmN1c3RvbVJlc291cmNlc1NlcnZpY2UuaXNDdXN0b21Tb3VyY2Uobm9kZUlkKSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVDdXN0b21Tb3VyY2VEYXRhKG5vZGVJZCk7XG4gICAgICAgICAgICB0aGlzLmN1c3RvbVJlc291cmNlc1NlcnZpY2UubG9hZEZvbGRlckJ5Tm9kZUlkKG5vZGVJZCwgdGhpcy5wYWdpbmF0aW9uLmdldFZhbHVlKCksIHRoaXMuaW5jbHVkZUZpZWxkcylcbiAgICAgICAgICAgICAgICAuc3Vic2NyaWJlKChwYWdlOiBOb2RlUGFnaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25QYWdlTG9hZGVkKHBhZ2UpO1xuICAgICAgICAgICAgICAgIH0sIGVyciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IuZW1pdChlcnIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5kb2N1bWVudExpc3RTZXJ2aWNlXG4gICAgICAgICAgICAgICAgLmdldEZvbGRlck5vZGUobm9kZUlkLCB0aGlzLmluY2x1ZGVGaWVsZHMpXG4gICAgICAgICAgICAgICAgLnN1YnNjcmliZSgobm9kZTogTWluaW1hbE5vZGVFbnRyeUVudGl0eSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvbGRlck5vZGUgPSBub2RlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5sb2FkRm9sZGVyTm9kZXNCeUZvbGRlck5vZGVJZChub2RlLmlkLCB0aGlzLnBhZ2luYXRpb24uZ2V0VmFsdWUoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gdGhpcy5oYW5kbGVFcnJvcihlcnIpKTtcbiAgICAgICAgICAgICAgICB9LCBlcnIgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBsb2FkRm9sZGVyTm9kZXNCeUZvbGRlck5vZGVJZChpZDogc3RyaW5nLCBwYWdpbmF0aW9uOiBQYWdpbmF0aW9uTW9kZWwpOiBQcm9taXNlPGFueT4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXG4gICAgICAgICAgICB0aGlzLmRvY3VtZW50TGlzdFNlcnZpY2VcbiAgICAgICAgICAgICAgICAuZ2V0Rm9sZGVyKG51bGwsIHtcbiAgICAgICAgICAgICAgICAgICAgbWF4SXRlbXM6IHBhZ2luYXRpb24ubWF4SXRlbXMsXG4gICAgICAgICAgICAgICAgICAgIHNraXBDb3VudDogcGFnaW5hdGlvbi5za2lwQ291bnQsXG4gICAgICAgICAgICAgICAgICAgIHJvb3RGb2xkZXJJZDogaWRcbiAgICAgICAgICAgICAgICB9LCB0aGlzLmluY2x1ZGVGaWVsZHMpXG4gICAgICAgICAgICAgICAgLnN1YnNjcmliZShcbiAgICAgICAgICAgICAgICAgICAgbm9kZVBhZ2luZyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGEubG9hZFBhZ2UoPE5vZGVQYWdpbmc+IG5vZGVQYWdpbmcsIHRoaXMucGFnaW5hdGlvbi5nZXRWYWx1ZSgpLm1lcmdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkRhdGFSZWFkeShub2RlUGFnaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0sIGVyciA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZXNldFNlbGVjdGlvbigpIHtcbiAgICAgICAgdGhpcy5kYXRhVGFibGUucmVzZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb24gPSBbXTtcbiAgICAgICAgdGhpcy5ub1Blcm1pc3Npb24gPSBmYWxzZTtcbiAgICB9XG5cbiAgICBvblBhZ2VMb2FkZWQobm9kZVBhZ2luZzogTm9kZVBhZ2luZykge1xuICAgICAgICBpZiAobm9kZVBhZ2luZykge1xuICAgICAgICAgICAgdGhpcy5kYXRhLmxvYWRQYWdlKG5vZGVQYWdpbmcsIHRoaXMucGFnaW5hdGlvbi5nZXRWYWx1ZSgpLm1lcmdlKTtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5vbkRhdGFSZWFkeShub2RlUGFnaW5nKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzZXQgb2YgcHJlZGVmaW5lZCBjb2x1bW5zLlxuICAgICAqL1xuICAgIHNldHVwRGVmYXVsdENvbHVtbnMocHJlc2V0OiBzdHJpbmcgPSAnZGVmYXVsdCcpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuZGF0YSkge1xuICAgICAgICAgICAgY29uc3QgY29sdW1ucyA9IHRoaXMuZ2V0TGF5b3V0UHJlc2V0KHByZXNldCk7XG4gICAgICAgICAgICB0aGlzLmRhdGEuc2V0Q29sdW1ucyhjb2x1bW5zKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uUHJldmlld0ZpbGUobm9kZTogTWluaW1hbE5vZGVFbnRpdHkpIHtcbiAgICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgICAgIHRoaXMucHJldmlldy5lbWl0KG5ldyBOb2RlRW50aXR5RXZlbnQobm9kZSkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25Ob2RlQ2xpY2sobm9kZTogTWluaW1hbE5vZGVFbnRpdHkpIHtcbiAgICAgICAgY29uc3QgZG9tRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ25vZGUtY2xpY2snLCB7XG4gICAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgICAgICBzZW5kZXI6IHRoaXMsXG4gICAgICAgICAgICAgICAgbm9kZTogbm9kZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJ1YmJsZXM6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LmRpc3BhdGNoRXZlbnQoZG9tRXZlbnQpO1xuXG4gICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IE5vZGVFbnRpdHlFdmVudChub2RlKTtcbiAgICAgICAgdGhpcy5ub2RlQ2xpY2suZW1pdChldmVudCk7XG5cbiAgICAgICAgaWYgKCFldmVudC5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5uYXZpZ2F0ZSAmJiB0aGlzLm5hdmlnYXRpb25Nb2RlID09PSBEb2N1bWVudExpc3RDb21wb25lbnQuU0lOR0xFX0NMSUNLX05BVklHQVRJT04pIHtcbiAgICAgICAgICAgICAgICBpZiAobm9kZSAmJiBub2RlLmVudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChub2RlLmVudHJ5LmlzRmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vblByZXZpZXdGaWxlKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUuZW50cnkuaXNGb2xkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGVyZm9ybU5hdmlnYXRpb24obm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbk5vZGVEYmxDbGljayhub2RlOiBNaW5pbWFsTm9kZUVudGl0eSkge1xuICAgICAgICBjb25zdCBkb21FdmVudCA9IG5ldyBDdXN0b21FdmVudCgnbm9kZS1kYmxjbGljaycsIHtcbiAgICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgICAgIHNlbmRlcjogdGhpcyxcbiAgICAgICAgICAgICAgICBub2RlOiBub2RlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYnViYmxlczogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuZGlzcGF0Y2hFdmVudChkb21FdmVudCk7XG5cbiAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgTm9kZUVudGl0eUV2ZW50KG5vZGUpO1xuICAgICAgICB0aGlzLm5vZGVEYmxDbGljay5lbWl0KGV2ZW50KTtcblxuICAgICAgICBpZiAoIWV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm5hdmlnYXRlICYmIHRoaXMubmF2aWdhdGlvbk1vZGUgPT09IERvY3VtZW50TGlzdENvbXBvbmVudC5ET1VCTEVfQ0xJQ0tfTkFWSUdBVElPTikge1xuICAgICAgICAgICAgICAgIGlmIChub2RlICYmIG5vZGUuZW50cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUuZW50cnkuaXNGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uUHJldmlld0ZpbGUobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5lbnRyeS5pc0ZvbGRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wZXJmb3JtTmF2aWdhdGlvbihub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uTm9kZVNlbGVjdChldmVudDogeyByb3c6IFNoYXJlRGF0YVJvdywgc2VsZWN0aW9uOiBBcnJheTxTaGFyZURhdGFSb3c+IH0pIHtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb24gPSBldmVudC5zZWxlY3Rpb24ubWFwKGVudHJ5ID0+IGVudHJ5Lm5vZGUpO1xuICAgICAgICBjb25zdCBkb21FdmVudCA9IG5ldyBDdXN0b21FdmVudCgnbm9kZS1zZWxlY3QnLCB7XG4gICAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgICAgICBub2RlOiBldmVudC5yb3cubm9kZSxcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb246IHRoaXMuc2VsZWN0aW9uXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYnViYmxlczogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuZGlzcGF0Y2hFdmVudChkb21FdmVudCk7XG4gICAgfVxuXG4gICAgb25Ob2RlVW5zZWxlY3QoZXZlbnQ6IHsgcm93OiBTaGFyZURhdGFSb3csIHNlbGVjdGlvbjogQXJyYXk8U2hhcmVEYXRhUm93PiB9KSB7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uID0gZXZlbnQuc2VsZWN0aW9uLm1hcChlbnRyeSA9PiBlbnRyeS5ub2RlKTtcbiAgICAgICAgY29uc3QgZG9tRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ25vZGUtdW5zZWxlY3QnLCB7XG4gICAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgICAgICBub2RlOiBldmVudC5yb3cubm9kZSxcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb246IHRoaXMuc2VsZWN0aW9uXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYnViYmxlczogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuZGlzcGF0Y2hFdmVudChkb21FdmVudCk7XG4gICAgfVxuXG4gICAgb25TaG93Um93Q29udGV4dE1lbnUoZXZlbnQ6IERhdGFDZWxsRXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuY29udGV4dE1lbnVBY3Rpb25zKSB7XG4gICAgICAgICAgICBsZXQgYXJncyA9IGV2ZW50LnZhbHVlO1xuICAgICAgICAgICAgbGV0IG5vZGUgPSAoPFNoYXJlRGF0YVJvdz4gYXJncy5yb3cpLm5vZGU7XG4gICAgICAgICAgICBpZiAobm9kZSkge1xuICAgICAgICAgICAgICAgIGFyZ3MuYWN0aW9ucyA9IHRoaXMuZ2V0Q29udGV4dEFjdGlvbnMobm9kZSkgfHwgW107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvblNob3dSb3dBY3Rpb25zTWVudShldmVudDogRGF0YUNlbGxFdmVudCkge1xuICAgICAgICBpZiAodGhpcy5jb250ZW50QWN0aW9ucykge1xuICAgICAgICAgICAgbGV0IGFyZ3MgPSBldmVudC52YWx1ZTtcbiAgICAgICAgICAgIGxldCBub2RlID0gKDxTaGFyZURhdGFSb3c+IGFyZ3Mucm93KS5ub2RlO1xuICAgICAgICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgICAgICAgICBhcmdzLmFjdGlvbnMgPSB0aGlzLmdldE5vZGVBY3Rpb25zKG5vZGUpIHx8IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25FeGVjdXRlUm93QWN0aW9uKGV2ZW50OiBEYXRhUm93QWN0aW9uRXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuY29udGVudEFjdGlvbnMpIHtcbiAgICAgICAgICAgIGxldCBhcmdzID0gZXZlbnQudmFsdWU7XG4gICAgICAgICAgICBsZXQgbm9kZSA9ICg8U2hhcmVEYXRhUm93PiBhcmdzLnJvdykubm9kZTtcbiAgICAgICAgICAgIGxldCBhY3Rpb24gPSAoPENvbnRlbnRBY3Rpb25Nb2RlbD4gYXJncy5hY3Rpb24pO1xuICAgICAgICAgICAgdGhpcy5leGVjdXRlQ29udGVudEFjdGlvbihub2RlLCBhY3Rpb24pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBlbmZvcmNlU2luZ2xlQ2xpY2tOYXZpZ2F0aW9uRm9yTW9iaWxlKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5pc01vYmlsZSgpKSB7XG4gICAgICAgICAgICB0aGlzLm5hdmlnYXRpb25Nb2RlID0gRG9jdW1lbnRMaXN0Q29tcG9uZW50LlNJTkdMRV9DTElDS19OQVZJR0FUSU9OO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY2FuTmF2aWdhdGVGb2xkZXIobm9kZTogTWluaW1hbE5vZGVFbnRpdHkpOiBib29sZWFuIHtcbiAgICAgICAgbGV0IGNhbk5hdmlnYXRlRm9sZGVyOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKHRoaXMuY3VzdG9tUmVzb3VyY2VzU2VydmljZS5pc0N1c3RvbVNvdXJjZSh0aGlzLmN1cnJlbnRGb2xkZXJJZCkpIHtcbiAgICAgICAgICAgIGNhbk5hdmlnYXRlRm9sZGVyID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAobm9kZSAmJiBub2RlLmVudHJ5ICYmIG5vZGUuZW50cnkuaXNGb2xkZXIpIHtcbiAgICAgICAgICAgIGNhbk5hdmlnYXRlRm9sZGVyID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjYW5OYXZpZ2F0ZUZvbGRlcjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGxvYWRMYXlvdXRQcmVzZXRzKCk6IHZvaWQge1xuICAgICAgICBjb25zdCBleHRlcm5hbFNldHRpbmdzID0gdGhpcy5hcHBDb25maWcuZ2V0KCdkb2N1bWVudC1saXN0LnByZXNldHMnLCBudWxsKTtcblxuICAgICAgICBpZiAoZXh0ZXJuYWxTZXR0aW5ncykge1xuICAgICAgICAgICAgdGhpcy5sYXlvdXRQcmVzZXRzID0gT2JqZWN0LmFzc2lnbih7fSwgcHJlc2V0c0RlZmF1bHRNb2RlbCwgZXh0ZXJuYWxTZXR0aW5ncyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxheW91dFByZXNldHMgPSBwcmVzZXRzRGVmYXVsdE1vZGVsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkRhdGFSZWFkeShub2RlUGFnaW5nOiBOb2RlUGFnaW5nKSB7XG4gICAgICAgIHRoaXMucmVhZHkuZW1pdChub2RlUGFnaW5nKTtcblxuICAgICAgICB0aGlzLnBhZ2luYXRpb24ubmV4dChub2RlUGFnaW5nLmxpc3QucGFnaW5hdGlvbik7XG4gICAgfVxuXG4gICAgdXBkYXRlUGFnaW5hdGlvbihwYWdpbmF0aW9uOiBQYWdpbmF0aW9uTW9kZWwpIHtcbiAgICAgICAgdGhpcy5wYWdpbmF0aW9uLm5leHQocGFnaW5hdGlvbik7XG4gICAgICAgIHRoaXMucmVsb2FkKCk7XG4gICAgfVxuXG4gICAgbmF2aWdhdGVUbyhub2RlSWQ6IHN0cmluZykge1xuICAgICAgICB0aGlzLmN1cnJlbnRGb2xkZXJJZCA9IG5vZGVJZDtcbiAgICAgICAgdGhpcy5yZXNldE5ld0ZvbGRlclBhZ2luYXRpb24oKTtcbiAgICAgICAgdGhpcy5sb2FkRm9sZGVyKCk7XG4gICAgICAgIHRoaXMuZm9sZGVyQ2hhbmdlLmVtaXQobmV3IE5vZGVFbnRyeUV2ZW50KHsgaWQ6IG5vZGVJZCB9KSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZXNldE5ld0ZvbGRlclBhZ2luYXRpb24oKSB7XG4gICAgICAgIHRoaXMuZm9sZGVyTm9kZSA9IG51bGw7XG4gICAgICAgIHRoaXMucGFnaW5hdGlvbi52YWx1ZS5za2lwQ291bnQgPSAwO1xuICAgIH1cblxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuZm9yRWFjaChzID0+IHMudW5zdWJzY3JpYmUoKSk7XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IFtdO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRXJyb3IoZXJyOiBhbnkpIHtcbiAgICAgICAgaWYgKGVyci5tZXNzYWdlKSB7XG4gICAgICAgICAgICBpZiAoSlNPTi5wYXJzZShlcnIubWVzc2FnZSkuZXJyb3Iuc3RhdHVzQ29kZSA9PT0gNDAzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5ub1Blcm1pc3Npb24gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZXJyb3IuZW1pdChlcnIpO1xuXG4gICAgfVxuXG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4gLyogdHNsaW50OmRpc2FibGU6Y29tcG9uZW50LXNlbGVjdG9yICAqL1xuXG5pbXBvcnQgeyBEYXRhQ29sdW1uIH0gZnJvbSAnQGFsZnJlc2NvL2FkZi1jb3JlJztcbmltcG9ydCB7IExvZ1NlcnZpY2UgfSBmcm9tICdAYWxmcmVzY28vYWRmLWNvcmUnO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IERvY3VtZW50TGlzdENvbXBvbmVudCB9IGZyb20gJy4vLi4vZG9jdW1lbnQtbGlzdC5jb21wb25lbnQnO1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ2NvbnRlbnQtY29sdW1ucycsXG4gICAgdGVtcGxhdGU6ICcnXG59KVxuZXhwb3J0IGNsYXNzIENvbnRlbnRDb2x1bW5MaXN0Q29tcG9uZW50IHtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZG9jdW1lbnRMaXN0OiBEb2N1bWVudExpc3RDb21wb25lbnQsIHByaXZhdGUgbG9nU2VydmljZTogTG9nU2VydmljZSApIHtcbiAgICAgICAgdGhpcy5sb2dTZXJ2aWNlLmxvZygnQ29udGVudENvbHVtbkxpc3RDb21wb25lbnQgaXMgZGVwcmVjYXRlZCBzdGFydGluZyB3aXRoIDEuNy4wIGFuZCBtYXkgYmUgcmVtb3ZlZCBpbiBmdXR1cmUgdmVyc2lvbnMuIFVzZSBEYXRhQ29sdW1uTGlzdENvbXBvbmVudCBpbnN0ZWFkLicpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBjb2x1bW4gbW9kZWwgd2l0aGluIHRoZSBwYXJlbnQgZG9jdW1lbnQgbGlzdCBjb21wb25lbnQuXG4gICAgICogQHBhcmFtIGNvbHVtbiBDb2x1bW4gZGVmaW5pdGlvbiBtb2RlbCB0byByZWdpc3Rlci5cbiAgICAgKi9cbiAgICByZWdpc3RlckNvbHVtbihjb2x1bW46IERhdGFDb2x1bW4pOiBib29sZWFuIHtcbiAgICAgICAgaWYgKHRoaXMuZG9jdW1lbnRMaXN0ICYmIGNvbHVtbikge1xuICAgICAgICAgICAgbGV0IGNvbHVtbnMgPSB0aGlzLmRvY3VtZW50TGlzdC5kYXRhLmdldENvbHVtbnMoKTtcbiAgICAgICAgICAgIGNvbHVtbnMucHVzaChjb2x1bW4pO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbiAvKiB0c2xpbnQ6ZGlzYWJsZTpjb21wb25lbnQtc2VsZWN0b3Igbm8taW5wdXQtcmVuYW1lICAqL1xuXG5pbXBvcnQgeyBEYXRhQ29sdW1uIH0gZnJvbSAnQGFsZnJlc2NvL2FkZi1jb3JlJztcbmltcG9ydCB7IExvZ1NlcnZpY2UgfSBmcm9tICdAYWxmcmVzY28vYWRmLWNvcmUnO1xuaW1wb3J0IHsgQWZ0ZXJDb250ZW50SW5pdCwgQ29tcG9uZW50LCBDb250ZW50Q2hpbGQsIElucHV0LCBPbkluaXQsIFRlbXBsYXRlUmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IENvbnRlbnRDb2x1bW5MaXN0Q29tcG9uZW50IH0gZnJvbSAnLi9jb250ZW50LWNvbHVtbi1saXN0LmNvbXBvbmVudCc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnY29udGVudC1jb2x1bW4nLFxuICAgIHRlbXBsYXRlOiAnJ1xufSlcbmV4cG9ydCBjbGFzcyBDb250ZW50Q29sdW1uQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlckNvbnRlbnRJbml0LCBEYXRhQ29sdW1uIHtcblxuICAgIEBJbnB1dCgpXG4gICAga2V5OiBzdHJpbmc7XG5cbiAgICBASW5wdXQoKVxuICAgIHR5cGU6IHN0cmluZyA9ICd0ZXh0JztcblxuICAgIEBJbnB1dCgpXG4gICAgZm9ybWF0OiBzdHJpbmc7XG5cbiAgICBASW5wdXQoKVxuICAgIHNvcnRhYmxlOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBASW5wdXQoKVxuICAgIHRpdGxlOiBzdHJpbmcgPSAnJztcblxuICAgIEBDb250ZW50Q2hpbGQoVGVtcGxhdGVSZWYpXG4gICAgdGVtcGxhdGU6IGFueTtcblxuICAgIC8qKlxuICAgICAqIFRpdGxlIHRvIGJlIHVzZWQgZm9yIHNjcmVlbiByZWFkZXJzLlxuICAgICAqL1xuICAgIEBJbnB1dCgnc3ItdGl0bGUnKVxuICAgIHNyVGl0bGU6IHN0cmluZztcblxuICAgIEBJbnB1dCgnY2xhc3MnKVxuICAgIGNzc0NsYXNzOiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGxpc3Q6IENvbnRlbnRDb2x1bW5MaXN0Q29tcG9uZW50LCBwcml2YXRlIGxvZ1NlcnZpY2U6IExvZ1NlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5sb2dTZXJ2aWNlLmxvZygnQ29udGVudENvbHVtbkNvbXBvbmVudCBpcyBkZXByZWNhdGVkIHN0YXJ0aW5nIHdpdGggMS43LjAgYW5kIG1heSBiZSByZW1vdmVkIGluIGZ1dHVyZSB2ZXJzaW9ucy4gVXNlIERhdGFDb2x1bW5Db21wb25lbnQgaW5zdGVhZC4nKTtcbiAgICB9XG5cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnNyVGl0bGUgJiYgdGhpcy5rZXkgPT09ICckdGh1bWJuYWlsJykge1xuICAgICAgICAgICAgdGhpcy5zclRpdGxlID0gJ1RodW1ibmFpbCc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBuZ0FmdGVyQ29udGVudEluaXQoKSB7XG4gICAgICAgIHRoaXMucmVnaXN0ZXIoKTtcbiAgICB9XG5cbiAgICByZWdpc3RlcigpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKHRoaXMubGlzdCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGlzdC5yZWdpc3RlckNvbHVtbih0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuIiwiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuZXhwb3J0IGNsYXNzIFBlcm1pc3Npb25Nb2RlbCB7XG4gICAgdHlwZTogc3RyaW5nO1xuICAgIGFjdGlvbjogc3RyaW5nO1xuICAgIHBlcm1pc3Npb246IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKG9iaj86IGFueSkge1xuICAgICAgICBpZiAob2JqKSB7XG4gICAgICAgICAgICB0aGlzLnR5cGUgPSBvYmoudHlwZSB8fCBudWxsO1xuICAgICAgICAgICAgdGhpcy5hY3Rpb24gPSBvYmouYWN0aW9uIHx8IG51bGw7XG4gICAgICAgICAgICB0aGlzLnBlcm1pc3Npb24gPSBvYmoucGVybWlzc2lvbiB8fCBudWxsO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgSW5qZWN0YWJsZSwgT3V0cHV0LCBFdmVudEVtaXR0ZXIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE1pbmltYWxOb2RlRW50cnlFbnRpdHksIE1pbmltYWxOb2RlRW50aXR5IH0gZnJvbSAnYWxmcmVzY28tanMtYXBpJztcbmltcG9ydCB7IFN1YmplY3QgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IEFsZnJlc2NvQXBpU2VydmljZSwgQ29udGVudFNlcnZpY2UgfSBmcm9tICdAYWxmcmVzY28vYWRmLWNvcmUnO1xuaW1wb3J0IHsgTWF0RGlhbG9nIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwnO1xuXG5pbXBvcnQgeyBEb2N1bWVudExpc3RTZXJ2aWNlIH0gZnJvbSAnLi9kb2N1bWVudC1saXN0LnNlcnZpY2UnO1xuaW1wb3J0IHsgQ29udGVudE5vZGVEaWFsb2dTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vY29udGVudC1ub2RlLXNlbGVjdG9yL2NvbnRlbnQtbm9kZS1kaWFsb2cuc2VydmljZSc7XG5pbXBvcnQgeyBOb2RlRG93bmxvYWREaXJlY3RpdmUgfSBmcm9tICcuLi8uLi9kaXJlY3RpdmVzL25vZGUtZG93bmxvYWQuZGlyZWN0aXZlJztcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIE5vZGVBY3Rpb25zU2VydmljZSB7XG5cbiAgICBAT3V0cHV0KClcbiAgICBlcnJvcjogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgY29udGVudERpYWxvZ1NlcnZpY2U6IENvbnRlbnROb2RlRGlhbG9nU2VydmljZSxcbiAgICAgICAgICAgICAgICBwdWJsaWMgZGlhbG9nUmVmOiBNYXREaWFsb2csXG4gICAgICAgICAgICAgICAgcHVibGljIGNvbnRlbnQ6IENvbnRlbnRTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIHByaXZhdGUgZG9jdW1lbnRMaXN0U2VydmljZT86IERvY3VtZW50TGlzdFNlcnZpY2UsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSBhcGlTZXJ2aWNlPzogQWxmcmVzY29BcGlTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIHByaXZhdGUgZGlhbG9nPzogTWF0RGlhbG9nKSB7fVxuXG4gICAgZG93bmxvYWROb2RlKG5vZGU6IE1pbmltYWxOb2RlRW50aXR5KSB7XG4gICAgICAgIG5ldyBOb2RlRG93bmxvYWREaXJlY3RpdmUodGhpcy5hcGlTZXJ2aWNlLCB0aGlzLmRpYWxvZylcbiAgICAgICAgICAgIC5kb3dubG9hZE5vZGUobm9kZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29weSBjb250ZW50IG5vZGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb250ZW50RW50cnkgbm9kZSB0byBjb3B5XG4gICAgICogQHBhcmFtIHBlcm1pc3Npb24gcGVybWlzc2lvbiB3aGljaCBpcyBuZWVkZWQgdG8gYXBwbHkgdGhlIGFjdGlvblxuICAgICAqL1xuICAgIHB1YmxpYyBjb3B5Q29udGVudChjb250ZW50RW50cnk6IE1pbmltYWxOb2RlRW50cnlFbnRpdHksIHBlcm1pc3Npb24/OiBzdHJpbmcpOiBTdWJqZWN0PHN0cmluZz4ge1xuICAgICAgICByZXR1cm4gdGhpcy5kb0ZpbGVPcGVyYXRpb24oJ2NvcHknLCAnY29udGVudCcsIGNvbnRlbnRFbnRyeSwgcGVybWlzc2lvbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29weSBmb2xkZXIgbm9kZVxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbnRlbnRFbnRyeSBub2RlIHRvIGNvcHlcbiAgICAgKiBAcGFyYW0gcGVybWlzc2lvbiBwZXJtaXNzaW9uIHdoaWNoIGlzIG5lZWRlZCB0byBhcHBseSB0aGUgYWN0aW9uXG4gICAgICovXG4gICAgcHVibGljIGNvcHlGb2xkZXIoY29udGVudEVudHJ5OiBNaW5pbWFsTm9kZUVudHJ5RW50aXR5LCBwZXJtaXNzaW9uPzogc3RyaW5nKTogU3ViamVjdDxzdHJpbmc+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9GaWxlT3BlcmF0aW9uKCdjb3B5JywgJ2ZvbGRlcicsIGNvbnRlbnRFbnRyeSwgcGVybWlzc2lvbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTW92ZSBjb250ZW50IG5vZGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb250ZW50RW50cnkgbm9kZSB0byBtb3ZlXG4gICAgICogQHBhcmFtIHBlcm1pc3Npb24gcGVybWlzc2lvbiB3aGljaCBpcyBuZWVkZWQgdG8gYXBwbHkgdGhlIGFjdGlvblxuICAgICAqL1xuICAgIHB1YmxpYyBtb3ZlQ29udGVudChjb250ZW50RW50cnk6IE1pbmltYWxOb2RlRW50cnlFbnRpdHksIHBlcm1pc3Npb24/OiBzdHJpbmcpOiBTdWJqZWN0PHN0cmluZz4ge1xuICAgICAgICByZXR1cm4gdGhpcy5kb0ZpbGVPcGVyYXRpb24oJ21vdmUnLCAnY29udGVudCcsIGNvbnRlbnRFbnRyeSwgcGVybWlzc2lvbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTW92ZSBmb2xkZXIgbm9kZVxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbnRlbnRFbnRyeSBub2RlIHRvIG1vdmVcbiAgICAgKiBAcGFyYW0gcGVybWlzc2lvbiBwZXJtaXNzaW9uIHdoaWNoIGlzIG5lZWRlZCB0byBhcHBseSB0aGUgYWN0aW9uXG4gICAgICovXG4gICAgcHVibGljIG1vdmVGb2xkZXIoY29udGVudEVudHJ5OiBNaW5pbWFsTm9kZUVudHJ5RW50aXR5LCBwZXJtaXNzaW9uPzogc3RyaW5nKTogU3ViamVjdDxzdHJpbmc+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9GaWxlT3BlcmF0aW9uKCdtb3ZlJywgJ2ZvbGRlcicsIGNvbnRlbnRFbnRyeSwgcGVybWlzc2lvbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhbCBtZXRob2QgZm9yIHBlcmZvcm1pbmcgdGhlIGdpdmVuIG9wZXJhdGlvbiAoY29weXxtb3ZlKVxuICAgICAqXG4gICAgICogQHBhcmFtIGFjdGlvbiB0aGUgYWN0aW9uIHRvIHBlcmZvcm0gKGNvcHl8bW92ZSlcbiAgICAgKiBAcGFyYW0gdHlwZSB0eXBlIG9mIHRoZSBjb250ZW50IChjb250ZW50fGZvbGRlcilcbiAgICAgKiBAcGFyYW0gY29udGVudEVudHJ5IHRoZSBjb250ZW50RW50cnkgd2hpY2ggaGFzIHRvIGhhdmUgdGhlIGFjdGlvbiBwZXJmb3JtZWQgb25cbiAgICAgKiBAcGFyYW0gcGVybWlzc2lvbiBwZXJtaXNzaW9uIHdoaWNoIGlzIG5lZWRlZCB0byBhcHBseSB0aGUgYWN0aW9uXG4gICAgICovXG4gICAgcHJpdmF0ZSBkb0ZpbGVPcGVyYXRpb24oYWN0aW9uOiBzdHJpbmcsIHR5cGU6IHN0cmluZywgY29udGVudEVudHJ5OiBNaW5pbWFsTm9kZUVudHJ5RW50aXR5LCBwZXJtaXNzaW9uPzogc3RyaW5nKTogU3ViamVjdDxzdHJpbmc+IHtcbiAgICAgICAgY29uc3Qgb2JzZXJ2YWJsZTogU3ViamVjdDxzdHJpbmc+ID0gbmV3IFN1YmplY3Q8c3RyaW5nPigpO1xuXG4gICAgICAgIHRoaXMuY29udGVudERpYWxvZ1NlcnZpY2VcbiAgICAgICAgICAgIC5vcGVuQ29weU1vdmVEaWFsb2coYWN0aW9uLCBjb250ZW50RW50cnksIHBlcm1pc3Npb24pXG4gICAgICAgICAgICAuc3Vic2NyaWJlKChzZWxlY3Rpb25zOiBNaW5pbWFsTm9kZUVudHJ5RW50aXR5W10pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSBzZWxlY3Rpb25zWzBdO1xuICAgICAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRMaXN0U2VydmljZVtgJHthY3Rpb259Tm9kZWBdLmNhbGwodGhpcy5kb2N1bWVudExpc3RTZXJ2aWNlLCBjb250ZW50RW50cnkuaWQsIHNlbGVjdGlvbi5pZClcbiAgICAgICAgICAgICAgICAgICAgLnN1YnNjcmliZShcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2YWJsZS5uZXh0LmJpbmQob2JzZXJ2YWJsZSwgYE9QRVJBVElPTi5TVUNDRVNTLiR7dHlwZS50b1VwcGVyQ2FzZSgpfS4ke2FjdGlvbi50b1VwcGVyQ2FzZSgpfWApLFxuICAgICAgICAgICAgICAgICAgICBvYnNlcnZhYmxlLmVycm9yLmJpbmQob2JzZXJ2YWJsZSlcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICBvYnNlcnZhYmxlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JzZXJ2YWJsZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gb2JzZXJ2YWJsZTtcbiAgICB9XG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDb250ZW50U2VydmljZSwgVHJhbnNsYXRpb25TZXJ2aWNlIH0gZnJvbSAnQGFsZnJlc2NvL2FkZi1jb3JlJztcbmltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE1pbmltYWxOb2RlRW50aXR5IH0gZnJvbSAnYWxmcmVzY28tanMtYXBpJztcbmltcG9ydCB7IE9ic2VydmFibGUsIFN1YmplY3QsIHRocm93RXJyb3IgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IENvbnRlbnRBY3Rpb25IYW5kbGVyIH0gZnJvbSAnLi4vbW9kZWxzL2NvbnRlbnQtYWN0aW9uLm1vZGVsJztcbmltcG9ydCB7IFBlcm1pc3Npb25Nb2RlbCB9IGZyb20gJy4uL21vZGVscy9wZXJtaXNzaW9ucy5tb2RlbCc7XG5pbXBvcnQgeyBEb2N1bWVudExpc3RTZXJ2aWNlIH0gZnJvbSAnLi9kb2N1bWVudC1saXN0LnNlcnZpY2UnO1xuaW1wb3J0IHsgTm9kZUFjdGlvbnNTZXJ2aWNlIH0gZnJvbSAnLi9ub2RlLWFjdGlvbnMuc2VydmljZSc7XG5pbXBvcnQgeyBDb250ZW50Tm9kZURpYWxvZ1NlcnZpY2UgfSBmcm9tICcuLi8uLi9jb250ZW50LW5vZGUtc2VsZWN0b3IvY29udGVudC1ub2RlLWRpYWxvZy5zZXJ2aWNlJztcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIERvY3VtZW50QWN0aW9uc1NlcnZpY2Uge1xuXG4gICAgcGVybWlzc2lvbkV2ZW50OiBTdWJqZWN0PFBlcm1pc3Npb25Nb2RlbD4gPSBuZXcgU3ViamVjdDxQZXJtaXNzaW9uTW9kZWw+KCk7XG4gICAgZXJyb3I6IFN1YmplY3Q8RXJyb3I+ID0gbmV3IFN1YmplY3Q8RXJyb3I+KCk7XG4gICAgc3VjY2VzczogU3ViamVjdDxzdHJpbmc+ID0gbmV3IFN1YmplY3Q8c3RyaW5nPigpO1xuXG4gICAgcHJpdmF0ZSBoYW5kbGVyczogeyBbaWQ6IHN0cmluZ106IENvbnRlbnRBY3Rpb25IYW5kbGVyOyB9ID0ge307XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIG5vZGVBY3Rpb25zU2VydmljZTogTm9kZUFjdGlvbnNTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIHByaXZhdGUgY29udGVudE5vZGVEaWFsb2dTZXJ2aWNlOiBDb250ZW50Tm9kZURpYWxvZ1NlcnZpY2UsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSB0cmFuc2xhdGlvbjogVHJhbnNsYXRpb25TZXJ2aWNlLFxuICAgICAgICAgICAgICAgIHByaXZhdGUgZG9jdW1lbnRMaXN0U2VydmljZT86IERvY3VtZW50TGlzdFNlcnZpY2UsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSBjb250ZW50U2VydmljZT86IENvbnRlbnRTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuc2V0dXBBY3Rpb25IYW5kbGVycygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGhhbmRsZXIgZm9yIGFuIGFjdGlvbi5cbiAgICAgKiBAcGFyYW0ga2V5IElkZW50aWZpZXIgb2YgdGhlIGFjdGlvblxuICAgICAqIEByZXR1cm5zIFRoZSBoYW5kbGVyIGZvciB0aGUgYWN0aW9uXG4gICAgICovXG4gICAgZ2V0SGFuZGxlcihrZXk6IHN0cmluZyk6IENvbnRlbnRBY3Rpb25IYW5kbGVyIHtcbiAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgICAgbGV0IGxrZXkgPSBrZXkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhhbmRsZXJzW2xrZXldIHx8IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyBhIG5ldyBoYW5kbGVyIGZvciBhbiBhY3Rpb24uXG4gICAgICogQHBhcmFtIGtleSBJZGVudGlmaWVyIG9mIHRoZSBhY3Rpb25cbiAgICAgKiBAcGFyYW0gaGFuZGxlciBIYW5kbGVyIGZvciB0aGUgYWN0aW9uXG4gICAgICogQHJldHVybnMgRmFsc2UgaWYgdGhlIGtleSB3YXMgYW4gZW1wdHkvbnVsbCBzdHJpbmcsIHRydWUgb3RoZXJ3aXNlXG4gICAgICovXG4gICAgc2V0SGFuZGxlcihrZXk6IHN0cmluZywgaGFuZGxlcjogQ29udGVudEFjdGlvbkhhbmRsZXIpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgICAgbGV0IGxrZXkgPSBrZXkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlcnNbbGtleV0gPSBoYW5kbGVyO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBhY3Rpb25zIGNhbiBiZSBleGVjdXRlZCBmb3IgYW4gaXRlbS5cbiAgICAgKiBAcGFyYW0gb2JqIEl0ZW0gdG8gcmVjZWl2ZSBhbiBhY3Rpb25cbiAgICAgKiBAcmV0dXJucyBUcnVlIGlmIHRoZSBhY3Rpb24gY2FuIGJlIGV4ZWN1dGVkIG9uIHRoaXMgaXRlbSwgZmFsc2Ugb3RoZXJ3aXNlXG4gICAgICovXG4gICAgY2FuRXhlY3V0ZUFjdGlvbihvYmo6IGFueSk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudExpc3RTZXJ2aWNlICYmIG9iaiAmJiBvYmouZW50cnkuaXNGaWxlID09PSB0cnVlO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0dXBBY3Rpb25IYW5kbGVycygpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVyc1snY29weSddID0gdGhpcy5jb3B5Tm9kZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmhhbmRsZXJzWydtb3ZlJ10gPSB0aGlzLm1vdmVOb2RlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlcnNbJ2RlbGV0ZSddID0gdGhpcy5kZWxldGVOb2RlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlcnNbJ2Rvd25sb2FkJ10gPSB0aGlzLmRvd25sb2FkTm9kZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmhhbmRsZXJzWydsb2NrJ10gPSB0aGlzLmxvY2tOb2RlLmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBsb2NrTm9kZShub2RlOiBNaW5pbWFsTm9kZUVudGl0eSwgdGFyZ2V0PzogYW55LCBwZXJtaXNzaW9uPzogc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnROb2RlRGlhbG9nU2VydmljZS5vcGVuTG9ja05vZGVEaWFsb2cobm9kZS5lbnRyeSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBkb3dubG9hZE5vZGUob2JqOiBNaW5pbWFsTm9kZUVudGl0eSwgdGFyZ2V0PzogYW55LCBwZXJtaXNzaW9uPzogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMubm9kZUFjdGlvbnNTZXJ2aWNlLmRvd25sb2FkTm9kZShvYmopO1xuICAgIH1cblxuICAgIHByaXZhdGUgY29weU5vZGUobm9kZTogTWluaW1hbE5vZGVFbnRpdHksIHRhcmdldD86IGFueSwgcGVybWlzc2lvbj86IHN0cmluZykge1xuICAgICAgICBjb25zdCBhY3Rpb25PYnNlcnZhYmxlID0gdGhpcy5ub2RlQWN0aW9uc1NlcnZpY2UuY29weUNvbnRlbnQobm9kZS5lbnRyeSwgcGVybWlzc2lvbik7XG4gICAgICAgIHRoaXMucHJlcGFyZUhhbmRsZXJzKGFjdGlvbk9ic2VydmFibGUsICdjb250ZW50JywgJ2NvcHknLCB0YXJnZXQsIHBlcm1pc3Npb24pO1xuICAgICAgICByZXR1cm4gYWN0aW9uT2JzZXJ2YWJsZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG1vdmVOb2RlKG5vZGU6IE1pbmltYWxOb2RlRW50aXR5LCB0YXJnZXQ/OiBhbnksIHBlcm1pc3Npb24/OiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgYWN0aW9uT2JzZXJ2YWJsZSA9IHRoaXMubm9kZUFjdGlvbnNTZXJ2aWNlLm1vdmVDb250ZW50KG5vZGUuZW50cnksIHBlcm1pc3Npb24pO1xuICAgICAgICB0aGlzLnByZXBhcmVIYW5kbGVycyhhY3Rpb25PYnNlcnZhYmxlLCAnY29udGVudCcsICdtb3ZlJywgdGFyZ2V0LCBwZXJtaXNzaW9uKTtcbiAgICAgICAgcmV0dXJuIGFjdGlvbk9ic2VydmFibGU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcmVwYXJlSGFuZGxlcnMoYWN0aW9uT2JzZXJ2YWJsZSwgdHlwZTogc3RyaW5nLCBhY3Rpb246IHN0cmluZywgdGFyZ2V0PzogYW55LCBwZXJtaXNzaW9uPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGFjdGlvbk9ic2VydmFibGUuc3Vic2NyaWJlKFxuICAgICAgICAgICAgKGZpbGVPcGVyYXRpb25NZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdWNjZXNzLm5leHQoZmlsZU9wZXJhdGlvbk1lc3NhZ2UpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRoaXMuZXJyb3IubmV4dC5iaW5kKHRoaXMuZXJyb3IpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBkZWxldGVOb2RlKG5vZGU6IE1pbmltYWxOb2RlRW50aXR5LCB0YXJnZXQ/OiBhbnksIHBlcm1pc3Npb24/OiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBsZXQgaGFuZGxlck9ic2VydmFibGU7XG5cbiAgICAgICAgaWYgKHRoaXMuY2FuRXhlY3V0ZUFjdGlvbihub2RlKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY29udGVudFNlcnZpY2UuaGFzUGVybWlzc2lvbihub2RlLmVudHJ5LCBwZXJtaXNzaW9uKSkge1xuICAgICAgICAgICAgICAgIGhhbmRsZXJPYnNlcnZhYmxlID0gdGhpcy5kb2N1bWVudExpc3RTZXJ2aWNlLmRlbGV0ZU5vZGUobm9kZS5lbnRyeS5pZCk7XG4gICAgICAgICAgICAgICAgaGFuZGxlck9ic2VydmFibGUuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1lc3NhZ2UgPSB0aGlzLnRyYW5zbGF0aW9uLmluc3RhbnQoJ0NPUkUuREVMRVRFX05PREUuU0lOR1VMQVInLCB7IG5hbWU6IG5vZGUuZW50cnkubmFtZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWNjZXNzLm5leHQobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbWVzc2FnZSA9IHRoaXMudHJhbnNsYXRpb24uaW5zdGFudCgnQ09SRS5ERUxFVEVfTk9ERS5FUlJPUl9TSU5HVUxBUicsIHsgbmFtZTogbm9kZS5lbnRyeS5uYW1lIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9yLm5leHQobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZXJPYnNlcnZhYmxlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBlcm1pc3Npb25FdmVudC5uZXh0KG5ldyBQZXJtaXNzaW9uTW9kZWwoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY29udGVudCcsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ2RlbGV0ZScsXG4gICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb246IHBlcm1pc3Npb25cbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRocm93RXJyb3IobmV3IEVycm9yKCdObyBwZXJtaXNzaW9uIHRvIGRlbGV0ZScpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENvbnRlbnRTZXJ2aWNlLCBUcmFuc2xhdGlvblNlcnZpY2UgfSBmcm9tICdAYWxmcmVzY28vYWRmLWNvcmUnO1xuaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTWluaW1hbE5vZGVFbnRpdHkgfSBmcm9tICdhbGZyZXNjby1qcy1hcGknO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgU3ViamVjdCwgdGhyb3dFcnJvciB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgQ29udGVudEFjdGlvbkhhbmRsZXIgfSBmcm9tICcuLi9tb2RlbHMvY29udGVudC1hY3Rpb24ubW9kZWwnO1xuaW1wb3J0IHsgUGVybWlzc2lvbk1vZGVsIH0gZnJvbSAnLi4vbW9kZWxzL3Blcm1pc3Npb25zLm1vZGVsJztcbmltcG9ydCB7IERvY3VtZW50TGlzdFNlcnZpY2UgfSBmcm9tICcuL2RvY3VtZW50LWxpc3Quc2VydmljZSc7XG5pbXBvcnQgeyBOb2RlQWN0aW9uc1NlcnZpY2UgfSBmcm9tICcuL25vZGUtYWN0aW9ucy5zZXJ2aWNlJztcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIEZvbGRlckFjdGlvbnNTZXJ2aWNlIHtcblxuICAgIHBlcm1pc3Npb25FdmVudDogU3ViamVjdDxQZXJtaXNzaW9uTW9kZWw+ID0gbmV3IFN1YmplY3Q8UGVybWlzc2lvbk1vZGVsPigpO1xuICAgIGVycm9yOiBTdWJqZWN0PEVycm9yPiA9IG5ldyBTdWJqZWN0PEVycm9yPigpO1xuICAgIHN1Y2Nlc3M6IFN1YmplY3Q8c3RyaW5nPiA9IG5ldyBTdWJqZWN0PHN0cmluZz4oKTtcblxuICAgIHByaXZhdGUgaGFuZGxlcnM6IHsgW2lkOiBzdHJpbmddOiBDb250ZW50QWN0aW9uSGFuZGxlcjsgfSA9IHt9O1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBub2RlQWN0aW9uc1NlcnZpY2U6IE5vZGVBY3Rpb25zU2VydmljZSxcbiAgICAgICAgICAgICAgICBwcml2YXRlIGRvY3VtZW50TGlzdFNlcnZpY2U6IERvY3VtZW50TGlzdFNlcnZpY2UsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSBjb250ZW50U2VydmljZTogQ29udGVudFNlcnZpY2UsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSB0cmFuc2xhdGlvbjogVHJhbnNsYXRpb25TZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuc2V0dXBBY3Rpb25IYW5kbGVycygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGhhbmRsZXIgZnVuY3Rpb24gZm9yIGFuIGFjdGlvbi5cbiAgICAgKiBAcGFyYW0ga2V5IElkZW50aWZpZXIgZm9yIHRoZSBhY3Rpb25cbiAgICAgKiBAcmV0dXJucyBUaGUgaGFuZGxlciBmdW5jdGlvblxuICAgICAqL1xuICAgIGdldEhhbmRsZXIoa2V5OiBzdHJpbmcpOiBDb250ZW50QWN0aW9uSGFuZGxlciB7XG4gICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICAgIGxldCBsa2V5ID0ga2V5LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVyc1tsa2V5XSB8fCBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgYSBuZXcgaGFuZGxlciBmdW5jdGlvbiBmb3IgYW4gYWN0aW9uLlxuICAgICAqIEBwYXJhbSBrZXkgSWRlbnRpZmllciBmb3IgdGhlIGFjdGlvblxuICAgICAqIEBwYXJhbSBoYW5kbGVyIFRoZSBuZXcgaGFuZGxlciBmdW5jdGlvblxuICAgICAqIEByZXR1cm5zIFRydWUgaWYgdGhlIGtleSB3YXMgYSB2YWxpZCBhY3Rpb24gaWRlbnRpZmllciwgZmFsc2Ugb3RoZXJ3aXNlXG4gICAgICovXG4gICAgc2V0SGFuZGxlcihrZXk6IHN0cmluZywgaGFuZGxlcjogQ29udGVudEFjdGlvbkhhbmRsZXIpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgICAgbGV0IGxrZXkgPSBrZXkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlcnNbbGtleV0gPSBoYW5kbGVyO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBhbiBhY3Rpb24gaXMgYXZhaWxhYmxlIGZvciBhIHBhcnRpY3VsYXIgaXRlbS5cbiAgICAgKiBAcGFyYW0gb2JqIEl0ZW0gdG8gY2hlY2tcbiAgICAgKiBAcmV0dXJucyBUcnVlIGlmIHRoZSBhY3Rpb24gaXMgYXZhaWxhYmxlLCBmYWxzZSBvdGhlcndpc2VcbiAgICAgKi9cbiAgICBjYW5FeGVjdXRlQWN0aW9uKG9iajogYW55KTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50TGlzdFNlcnZpY2UgJiYgb2JqICYmIG9iai5lbnRyeS5pc0ZvbGRlciA9PT0gdHJ1ZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldHVwQWN0aW9uSGFuZGxlcnMoKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlcnNbJ2NvcHknXSA9IHRoaXMuY29weU5vZGUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5oYW5kbGVyc1snbW92ZSddID0gdGhpcy5tb3ZlTm9kZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmhhbmRsZXJzWydkZWxldGUnXSA9IHRoaXMuZGVsZXRlTm9kZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmhhbmRsZXJzWydkb3dubG9hZCddID0gdGhpcy5kb3dubG9hZE5vZGUuYmluZCh0aGlzKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGRvd25sb2FkTm9kZShvYmo6IE1pbmltYWxOb2RlRW50aXR5LCB0YXJnZXQ/OiBhbnksIHBlcm1pc3Npb24/OiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5ub2RlQWN0aW9uc1NlcnZpY2UuZG93bmxvYWROb2RlKG9iaik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjb3B5Tm9kZShvYmo6IE1pbmltYWxOb2RlRW50aXR5LCB0YXJnZXQ/OiBhbnksIHBlcm1pc3Npb24/OiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgYWN0aW9uT2JzZXJ2YWJsZSA9IHRoaXMubm9kZUFjdGlvbnNTZXJ2aWNlLmNvcHlGb2xkZXIob2JqLmVudHJ5LCBwZXJtaXNzaW9uKTtcbiAgICAgICAgdGhpcy5wcmVwYXJlSGFuZGxlcnMoYWN0aW9uT2JzZXJ2YWJsZSwgJ2ZvbGRlcicsICdjb3B5JywgdGFyZ2V0LCBwZXJtaXNzaW9uKTtcbiAgICAgICAgcmV0dXJuIGFjdGlvbk9ic2VydmFibGU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtb3ZlTm9kZShvYmo6IE1pbmltYWxOb2RlRW50aXR5LCB0YXJnZXQ/OiBhbnksIHBlcm1pc3Npb24/OiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgYWN0aW9uT2JzZXJ2YWJsZSA9IHRoaXMubm9kZUFjdGlvbnNTZXJ2aWNlLm1vdmVGb2xkZXIob2JqLmVudHJ5LCBwZXJtaXNzaW9uKTtcbiAgICAgICAgdGhpcy5wcmVwYXJlSGFuZGxlcnMoYWN0aW9uT2JzZXJ2YWJsZSwgJ2ZvbGRlcicsICdtb3ZlJywgdGFyZ2V0LCBwZXJtaXNzaW9uKTtcbiAgICAgICAgcmV0dXJuIGFjdGlvbk9ic2VydmFibGU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcmVwYXJlSGFuZGxlcnMoYWN0aW9uT2JzZXJ2YWJsZSwgdHlwZTogc3RyaW5nLCBhY3Rpb246IHN0cmluZywgdGFyZ2V0PzogYW55LCBwZXJtaXNzaW9uPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGFjdGlvbk9ic2VydmFibGUuc3Vic2NyaWJlKFxuICAgICAgICAgICAgKGZpbGVPcGVyYXRpb25NZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldCAmJiB0eXBlb2YgdGFyZ2V0LnJlbG9hZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQucmVsb2FkKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc3VjY2Vzcy5uZXh0KGZpbGVPcGVyYXRpb25NZXNzYWdlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0aGlzLmVycm9yLm5leHQuYmluZCh0aGlzLmVycm9yKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgZGVsZXRlTm9kZShub2RlOiBNaW5pbWFsTm9kZUVudGl0eSwgdGFyZ2V0PzogYW55LCBwZXJtaXNzaW9uPzogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgbGV0IGhhbmRsZXJPYnNlcnZhYmxlOiBPYnNlcnZhYmxlPGFueT47XG5cbiAgICAgICAgaWYgKHRoaXMuY2FuRXhlY3V0ZUFjdGlvbihub2RlKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY29udGVudFNlcnZpY2UuaGFzUGVybWlzc2lvbihub2RlLmVudHJ5LCBwZXJtaXNzaW9uKSkge1xuICAgICAgICAgICAgICAgIGhhbmRsZXJPYnNlcnZhYmxlID0gdGhpcy5kb2N1bWVudExpc3RTZXJ2aWNlLmRlbGV0ZU5vZGUobm9kZS5lbnRyeS5pZCk7XG4gICAgICAgICAgICAgICAgaGFuZGxlck9ic2VydmFibGUuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldCAmJiB0eXBlb2YgdGFyZ2V0LnJlbG9hZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnJlbG9hZCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgbGV0IG1lc3NhZ2UgPSB0aGlzLnRyYW5zbGF0aW9uLmluc3RhbnQoJ0NPUkUuREVMRVRFX05PREUuU0lOR1VMQVInLCB7IG5hbWU6IG5vZGUuZW50cnkubmFtZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWNjZXNzLm5leHQobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbWVzc2FnZSA9IHRoaXMudHJhbnNsYXRpb24uaW5zdGFudCgnQ09SRS5ERUxFVEVfTk9ERS5FUlJPUl9TSU5HVUxBUicsIHsgbmFtZTogbm9kZS5lbnRyeS5uYW1lIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9yLm5leHQobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlck9ic2VydmFibGU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucGVybWlzc2lvbkV2ZW50Lm5leHQobmV3IFBlcm1pc3Npb25Nb2RlbCh7dHlwZTogJ2ZvbGRlcicsIGFjdGlvbjogJ2RlbGV0ZScsIHBlcm1pc3Npb246IHBlcm1pc3Npb259KSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRocm93RXJyb3IobmV3IEVycm9yKCdObyBwZXJtaXNzaW9uIHRvIGRlbGV0ZScpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbiAvKiB0c2xpbnQ6ZGlzYWJsZTpjb21wb25lbnQtc2VsZWN0b3IgICovXG5cbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBDb250ZW50QWN0aW9uTW9kZWwgfSBmcm9tICcuLy4uLy4uL21vZGVscy9jb250ZW50LWFjdGlvbi5tb2RlbCc7XG5pbXBvcnQgeyBEb2N1bWVudExpc3RDb21wb25lbnQgfSBmcm9tICcuLy4uL2RvY3VtZW50LWxpc3QuY29tcG9uZW50JztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdjb250ZW50LWFjdGlvbnMnLFxuICAgIHRlbXBsYXRlOiAnJ1xufSlcbmV4cG9ydCBjbGFzcyBDb250ZW50QWN0aW9uTGlzdENvbXBvbmVudCB7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGRvY3VtZW50TGlzdDogRG9jdW1lbnRMaXN0Q29tcG9uZW50KSB7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGFjdGlvbiBoYW5kbGVyIHdpdGhpbiB0aGUgcGFyZW50IGRvY3VtZW50IGxpc3QgY29tcG9uZW50LlxuICAgICAqIEBwYXJhbSBhY3Rpb24gQWN0aW9uIG1vZGVsIHRvIHJlZ2lzdGVyLlxuICAgICAqL1xuICAgIHJlZ2lzdGVyQWN0aW9uKGFjdGlvbjogQ29udGVudEFjdGlvbk1vZGVsKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICh0aGlzLmRvY3VtZW50TGlzdCAmJiBhY3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRMaXN0LmFjdGlvbnMucHVzaChhY3Rpb24pO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHVucmVnaXN0ZXJBY3Rpb24oYWN0aW9uOiBDb250ZW50QWN0aW9uTW9kZWwpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKHRoaXMuZG9jdW1lbnRMaXN0ICYmIGFjdGlvbikge1xuICAgICAgICAgICAgY29uc3QgaWR4ID0gdGhpcy5kb2N1bWVudExpc3QuYWN0aW9ucy5pbmRleE9mKGFjdGlvbik7XG4gICAgICAgICAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRvY3VtZW50TGlzdC5hY3Rpb25zLnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4gLyogdHNsaW50OmRpc2FibGU6Y29tcG9uZW50LXNlbGVjdG9yICAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE9uSW5pdCwgT3V0cHV0LCBPbkNoYW5nZXMsIFNpbXBsZUNoYW5nZXMsIE9uRGVzdHJveSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBDb250ZW50QWN0aW9uSGFuZGxlciB9IGZyb20gJy4uLy4uL21vZGVscy9jb250ZW50LWFjdGlvbi5tb2RlbCc7XG5pbXBvcnQgeyBEb2N1bWVudEFjdGlvbnNTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvZG9jdW1lbnQtYWN0aW9ucy5zZXJ2aWNlJztcbmltcG9ydCB7IEZvbGRlckFjdGlvbnNTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvZm9sZGVyLWFjdGlvbnMuc2VydmljZSc7XG5pbXBvcnQgeyBDb250ZW50QWN0aW9uTW9kZWwsIENvbnRlbnRBY3Rpb25UYXJnZXQgfSBmcm9tICcuLy4uLy4uL21vZGVscy9jb250ZW50LWFjdGlvbi5tb2RlbCc7XG5pbXBvcnQgeyBDb250ZW50QWN0aW9uTGlzdENvbXBvbmVudCB9IGZyb20gJy4vY29udGVudC1hY3Rpb24tbGlzdC5jb21wb25lbnQnO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnY29udGVudC1hY3Rpb24nLFxuICAgIHRlbXBsYXRlOiAnJyxcbiAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgRG9jdW1lbnRBY3Rpb25zU2VydmljZSxcbiAgICAgICAgRm9sZGVyQWN0aW9uc1NlcnZpY2VcbiAgICBdXG59KVxuZXhwb3J0IGNsYXNzIENvbnRlbnRBY3Rpb25Db21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcywgT25EZXN0cm95IHtcblxuICAgIC8qKiBUaGUgdGl0bGUgb2YgdGhlIGFjdGlvbiBhcyBzaG93biBpbiB0aGUgbWVudS4gKi9cbiAgICBASW5wdXQoKVxuICAgIHRpdGxlOiBzdHJpbmcgPSAnQWN0aW9uJztcblxuICAgIC8qKiBUaGUgbmFtZSBvZiB0aGUgaWNvbiB0byBkaXNwbGF5IG5leHQgdG8gdGhlIG1lbnUgY29tbWFuZCAoY2FuIGJlIGxlZnQgYmxhbmspLiAqL1xuICAgIEBJbnB1dCgpXG4gICAgaWNvbjogc3RyaW5nO1xuXG4gICAgLyoqIFZpc2liaWxpdHkgc3RhdGUgKHNlZSBleGFtcGxlcykuICovXG4gICAgQElucHV0KClcbiAgICB2aXNpYmxlOiBib29sZWFuIHwgRnVuY3Rpb24gPSB0cnVlO1xuXG4gICAgLyoqIFN5c3RlbSBhY3Rpb25zLiBDYW4gYmUgXCJkZWxldGVcIiwgXCJkb3dubG9hZFwiLCBcImNvcHlcIiBvciBcIm1vdmVcIi4gKi9cbiAgICBASW5wdXQoKVxuICAgIGhhbmRsZXI6IHN0cmluZztcblxuICAgIC8qKiBUeXBlIG9mIGl0ZW0gdGhhdCB0aGUgYWN0aW9uIGFwcGxpZXMgdG8uIENhbiBiZSBcImRvY3VtZW50XCIgb3IgXCJmb2xkZXJcIiAqL1xuICAgIEBJbnB1dCgpXG4gICAgdGFyZ2V0OiBzdHJpbmcgPSBDb250ZW50QWN0aW9uVGFyZ2V0LkFsbDtcblxuICAgIC8qKiBUaGUgcGVybWlzc2lvbiB0eXBlLiAqL1xuICAgIEBJbnB1dCgpXG4gICAgcGVybWlzc2lvbjogc3RyaW5nO1xuXG4gICAgLyoqIFNob3VsZCB0aGlzIGFjdGlvbiBiZSBkaXNhYmxlZCBpbiB0aGUgbWVudSBpZiB0aGUgdXNlciBkb2Vzbid0IGhhdmUgcGVybWlzc2lvbiBmb3IgaXQ/ICovXG4gICAgQElucHV0KClcbiAgICBkaXNhYmxlV2l0aE5vUGVybWlzc2lvbjogYm9vbGVhbjtcblxuICAgIC8qKiBJcyB0aGUgbWVudSBpdGVtIGRpc2FibGVkPyAqL1xuICAgIEBJbnB1dCgpXG4gICAgZGlzYWJsZWQ6IGJvb2xlYW4gfCBGdW5jdGlvbiA9IGZhbHNlO1xuXG4gICAgLyoqIEVtaXR0ZWQgd2hlbiB0aGUgdXNlciBzZWxlY3RzIHRoZSBhY3Rpb24gZnJvbSB0aGUgbWVudS4gKi9cbiAgICBAT3V0cHV0KClcbiAgICBleGVjdXRlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gICAgLyoqIEVtaXR0ZWQgd2hlbiBhIHBlcm1pc3Npb24gZXJyb3Igb2NjdXJzICovXG4gICAgQE91dHB1dCgpXG4gICAgcGVybWlzc2lvbkV2ZW50ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gICAgLyoqIEVtaXR0ZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMgZHVyaW5nIHRoZSBhY3Rpb24uXG4gICAgICogQXBwbGllcyB0byBjb3B5IGFuZCBtb3ZlIGFjdGlvbnMuXG4gICAgICovXG4gICAgQE91dHB1dCgpXG4gICAgZXJyb3IgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgICAvKiogRW1pdHRlZCB3aGVuIHRoZSBhY3Rpb24gc3VjY2VlZHMgd2l0aCB0aGUgc3VjY2VzcyBzdHJpbmcgbWVzc2FnZS5cbiAgICAgKiBBcHBsaWVzIHRvIGNvcHksIG1vdmUgYW5kIGRlbGV0ZSBhY3Rpb25zLlxuICAgICAqL1xuICAgIEBPdXRwdXQoKVxuICAgIHN1Y2Nlc3MgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgICBkb2N1bWVudEFjdGlvbk1vZGVsOiBDb250ZW50QWN0aW9uTW9kZWw7XG4gICAgZm9sZGVyQWN0aW9uTW9kZWw6IENvbnRlbnRBY3Rpb25Nb2RlbDtcblxuICAgIHByaXZhdGUgc3Vic2NyaXB0aW9uczogU3Vic2NyaXB0aW9uW10gPSBbXTtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGxpc3Q6IENvbnRlbnRBY3Rpb25MaXN0Q29tcG9uZW50LFxuICAgICAgICBwcml2YXRlIGRvY3VtZW50QWN0aW9uczogRG9jdW1lbnRBY3Rpb25zU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBmb2xkZXJBY3Rpb25zOiBGb2xkZXJBY3Rpb25zU2VydmljZSkge1xuICAgIH1cblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICBpZiAodGhpcy50YXJnZXQgPT09IENvbnRlbnRBY3Rpb25UYXJnZXQuQWxsKSB7XG4gICAgICAgICAgICB0aGlzLmZvbGRlckFjdGlvbk1vZGVsID0gdGhpcy5nZW5lcmF0ZUFjdGlvbihDb250ZW50QWN0aW9uVGFyZ2V0LkZvbGRlcik7XG4gICAgICAgICAgICB0aGlzLmRvY3VtZW50QWN0aW9uTW9kZWwgPSB0aGlzLmdlbmVyYXRlQWN0aW9uKENvbnRlbnRBY3Rpb25UYXJnZXQuRG9jdW1lbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5kb2N1bWVudEFjdGlvbk1vZGVsID0gdGhpcy5nZW5lcmF0ZUFjdGlvbih0aGlzLnRhcmdldCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XG4gICAgICAgIGlmIChjaGFuZ2VzLnZpc2libGUgJiYgIWNoYW5nZXMudmlzaWJsZS5maXJzdENoYW5nZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZG9jdW1lbnRBY3Rpb25Nb2RlbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRBY3Rpb25Nb2RlbC52aXNpYmxlID0gY2hhbmdlcy52aXNpYmxlLmN1cnJlbnRWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmZvbGRlckFjdGlvbk1vZGVsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb2xkZXJBY3Rpb25Nb2RlbC52aXNpYmxlID0gY2hhbmdlcy52aXNpYmxlLmN1cnJlbnRWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjaGFuZ2VzLmRpc2FibGVkICYmICFjaGFuZ2VzLmRpc2FibGVkLmZpcnN0Q2hhbmdlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kb2N1bWVudEFjdGlvbk1vZGVsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kb2N1bWVudEFjdGlvbk1vZGVsLmRpc2FibGVkID0gY2hhbmdlcy5kaXNhYmxlZC5jdXJyZW50VmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5mb2xkZXJBY3Rpb25Nb2RlbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZm9sZGVyQWN0aW9uTW9kZWwuZGlzYWJsZWQgPSBjaGFuZ2VzLmRpc2FibGVkLmN1cnJlbnRWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuZm9yRWFjaChzdWJzY3JpcHRpb24gPT4gc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCkpO1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBbXTtcblxuICAgICAgICBpZiAodGhpcy5kb2N1bWVudEFjdGlvbk1vZGVsKSB7XG4gICAgICAgICAgICB0aGlzLnVucmVnaXN0ZXIodGhpcy5kb2N1bWVudEFjdGlvbk1vZGVsKTtcbiAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRBY3Rpb25Nb2RlbCA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5mb2xkZXJBY3Rpb25Nb2RlbCkge1xuICAgICAgICAgICAgdGhpcy51bnJlZ2lzdGVyKHRoaXMuZm9sZGVyQWN0aW9uTW9kZWwpO1xuICAgICAgICAgICAgdGhpcy5mb2xkZXJBY3Rpb25Nb2RlbCA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZWdpc3Rlcihtb2RlbDogQ29udGVudEFjdGlvbk1vZGVsKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICh0aGlzLmxpc3QpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxpc3QucmVnaXN0ZXJBY3Rpb24obW9kZWwpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB1bnJlZ2lzdGVyKG1vZGVsOiBDb250ZW50QWN0aW9uTW9kZWwpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKHRoaXMubGlzdCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGlzdC51bnJlZ2lzdGVyQWN0aW9uKG1vZGVsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZUFjdGlvbih0YXJnZXQ6IHN0cmluZyk6IENvbnRlbnRBY3Rpb25Nb2RlbCB7XG4gICAgICAgIGNvbnN0IG1vZGVsID0gbmV3IENvbnRlbnRBY3Rpb25Nb2RlbCh7XG4gICAgICAgICAgICB0aXRsZTogdGhpcy50aXRsZSxcbiAgICAgICAgICAgIGljb246IHRoaXMuaWNvbixcbiAgICAgICAgICAgIHBlcm1pc3Npb246IHRoaXMucGVybWlzc2lvbixcbiAgICAgICAgICAgIGRpc2FibGVXaXRoTm9QZXJtaXNzaW9uOiB0aGlzLmRpc2FibGVXaXRoTm9QZXJtaXNzaW9uLFxuICAgICAgICAgICAgdGFyZ2V0OiB0YXJnZXQsXG4gICAgICAgICAgICBkaXNhYmxlZDogdGhpcy5kaXNhYmxlZCxcbiAgICAgICAgICAgIHZpc2libGU6IHRoaXMudmlzaWJsZVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHRoaXMuaGFuZGxlcikge1xuICAgICAgICAgICAgbW9kZWwuaGFuZGxlciA9IHRoaXMuZ2V0U3lzdGVtSGFuZGxlcih0YXJnZXQsIHRoaXMuaGFuZGxlcik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5leGVjdXRlKSB7XG4gICAgICAgICAgICBtb2RlbC5leGVjdXRlID0gKHZhbHVlOiBhbnkpOiB2b2lkID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGUuZW1pdCh7IHZhbHVlIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVnaXN0ZXIobW9kZWwpO1xuICAgICAgICByZXR1cm4gbW9kZWw7XG4gICAgfVxuXG4gICAgZ2V0U3lzdGVtSGFuZGxlcih0YXJnZXQ6IHN0cmluZywgbmFtZTogc3RyaW5nKTogQ29udGVudEFjdGlvbkhhbmRsZXIge1xuICAgICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgICB0YXJnZXQgPSB0YXJnZXQudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICAgICAgaWYgKHRhcmdldCA9PT0gQ29udGVudEFjdGlvblRhcmdldC5Eb2N1bWVudCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRvY3VtZW50QWN0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRBY3Rpb25zLnBlcm1pc3Npb25FdmVudC5zdWJzY3JpYmUocGVybWlzc2lvbiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wZXJtaXNzaW9uRXZlbnQuZW1pdChwZXJtaXNzaW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kb2N1bWVudEFjdGlvbnMuZXJyb3Iuc3Vic2NyaWJlKGVycm9ycyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvci5lbWl0KGVycm9ycyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRBY3Rpb25zLnN1Y2Nlc3Muc3Vic2NyaWJlKG1lc3NhZ2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3VjY2Vzcy5lbWl0KG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudEFjdGlvbnMuZ2V0SGFuZGxlcihuYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0YXJnZXQgPT09IENvbnRlbnRBY3Rpb25UYXJnZXQuRm9sZGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZm9sZGVyQWN0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9sZGVyQWN0aW9ucy5wZXJtaXNzaW9uRXZlbnQuc3Vic2NyaWJlKHBlcm1pc3Npb24gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGVybWlzc2lvbkV2ZW50LmVtaXQocGVybWlzc2lvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9sZGVyQWN0aW9ucy5lcnJvci5zdWJzY3JpYmUoZXJyb3JzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9yLmVtaXQoZXJyb3JzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2xkZXJBY3Rpb25zLnN1Y2Nlc3Muc3Vic2NyaWJlKG1lc3NhZ2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3VjY2Vzcy5lbWl0KG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mb2xkZXJBY3Rpb25zLmdldEhhbmRsZXIobmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEFmdGVyQ29udGVudEluaXQsIENvbnRlbnRDaGlsZCwgRGlyZWN0aXZlLCBUZW1wbGF0ZVJlZiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRG9jdW1lbnRMaXN0Q29tcG9uZW50IH0gZnJvbSAnLi8uLi9kb2N1bWVudC1saXN0LmNvbXBvbmVudCc7XG5cbkBEaXJlY3RpdmUoe1xuICAgIHNlbGVjdG9yOiAnZW1wdHktZm9sZGVyLWNvbnRlbnQnXG59KVxuZXhwb3J0IGNsYXNzIEVtcHR5Rm9sZGVyQ29udGVudERpcmVjdGl2ZSBpbXBsZW1lbnRzIEFmdGVyQ29udGVudEluaXQge1xuXG4gICAgQENvbnRlbnRDaGlsZChUZW1wbGF0ZVJlZilcbiAgICB0ZW1wbGF0ZTogYW55O1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBkb2N1bWVudExpc3Q6IERvY3VtZW50TGlzdENvbXBvbmVudCkge1xuICAgIH1cblxuICAgIG5nQWZ0ZXJDb250ZW50SW5pdCgpIHtcbiAgICAgICAgdGhpcy5kb2N1bWVudExpc3QuZW1wdHlGb2xkZXJUZW1wbGF0ZSA9IHRoaXMudGVtcGxhdGU7XG4gICAgICAgIHRoaXMuZG9jdW1lbnRMaXN0LmRhdGFUYWJsZS5ub0NvbnRlbnRUZW1wbGF0ZSA9IHRoaXMudGVtcGxhdGU7XG4gICAgfVxufVxuIiwiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQWZ0ZXJDb250ZW50SW5pdCwgQ29udGVudENoaWxkLCBEaXJlY3RpdmUsIFRlbXBsYXRlUmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBEb2N1bWVudExpc3RDb21wb25lbnQgfSBmcm9tICcuLy4uL2RvY3VtZW50LWxpc3QuY29tcG9uZW50JztcblxuQERpcmVjdGl2ZSh7XG4gICAgc2VsZWN0b3I6ICduby1wZXJtaXNzaW9uLWNvbnRlbnQnXG59KVxuZXhwb3J0IGNsYXNzIE5vUGVybWlzc2lvbkNvbnRlbnREaXJlY3RpdmUgaW1wbGVtZW50cyBBZnRlckNvbnRlbnRJbml0IHtcblxuICAgIEBDb250ZW50Q2hpbGQoVGVtcGxhdGVSZWYpXG4gICAgdGVtcGxhdGU6IGFueTtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZG9jdW1lbnRMaXN0OiBEb2N1bWVudExpc3RDb21wb25lbnQpIHtcbiAgICB9XG5cbiAgICBuZ0FmdGVyQ29udGVudEluaXQoKSB7XG4gICAgICAgIHRoaXMuZG9jdW1lbnRMaXN0Lm5vUGVybWlzc2lvblRlbXBsYXRlID0gdGhpcy50ZW1wbGF0ZTtcbiAgICAgICAgdGhpcy5kb2N1bWVudExpc3QuZGF0YVRhYmxlLm5vUGVybWlzc2lvblRlbXBsYXRlID0gdGhpcy50ZW1wbGF0ZTtcbiAgICB9XG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vLyBub3RlOiBjb250YWlucyBvbmx5IGxpbWl0ZWQgc3Vic2V0IG9mIGF2YWlsYWJsZSBmaWVsZHNcblxuaW1wb3J0IHsgTWluaW1hbE5vZGVFbnRpdHksIE1pbmltYWxOb2RlRW50cnlFbnRpdHkgfSBmcm9tICdhbGZyZXNjby1qcy1hcGknO1xuXG5leHBvcnQgY2xhc3MgTm9kZVBhZ2luZyB7XG4gICAgbGlzdDogTm9kZVBhZ2luZ0xpc3Q7XG59XG5cbmV4cG9ydCBjbGFzcyBOb2RlUGFnaW5nTGlzdCB7XG4gICAgcGFnaW5hdGlvbjogUGFnaW5hdGlvbjtcbiAgICBlbnRyaWVzOiBOb2RlTWluaW1hbEVudHJ5W107XG59XG5cbmV4cG9ydCBjbGFzcyBOb2RlTWluaW1hbEVudHJ5IGltcGxlbWVudHMgTWluaW1hbE5vZGVFbnRpdHkge1xuICAgIGVudHJ5OiBOb2RlTWluaW1hbDtcbn1cblxuZXhwb3J0IGNsYXNzIFBhZ2luYXRpb24ge1xuICAgIGNvdW50OiBudW1iZXI7XG4gICAgaGFzTW9yZUl0ZW1zOiBib29sZWFuO1xuICAgIHRvdGFsSXRlbXM6IG51bWJlcjtcbiAgICBza2lwQ291bnQ6IG51bWJlcjtcbiAgICBtYXhJdGVtczogbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgTm9kZU1pbmltYWwgaW1wbGVtZW50cyBNaW5pbWFsTm9kZUVudHJ5RW50aXR5IHtcbiAgICBpZDogc3RyaW5nO1xuICAgIHBhcmVudElkOiBzdHJpbmc7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIG5vZGVUeXBlOiBzdHJpbmc7XG4gICAgaXNGb2xkZXI6IGJvb2xlYW47XG4gICAgaXNGaWxlOiBib29sZWFuO1xuICAgIG1vZGlmaWVkQXQ6IERhdGU7XG4gICAgbW9kaWZpZWRCeVVzZXI6IFVzZXJJbmZvO1xuICAgIGNyZWF0ZWRBdDogRGF0ZTtcbiAgICBjcmVhdGVkQnlVc2VyOiBVc2VySW5mbztcbiAgICBjb250ZW50OiBDb250ZW50SW5mbztcbiAgICBwYXRoOiBQYXRoSW5mb0VudGl0eTtcbiAgICBwcm9wZXJ0aWVzOiBOb2RlUHJvcGVydGllcyA9IHt9O1xuICAgIGFzcGVjdE5hbWVzOiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGNsYXNzIFVzZXJJbmZvIHtcbiAgICBkaXNwbGF5TmFtZTogc3RyaW5nO1xuICAgIGlkOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBDb250ZW50SW5mbyB7XG4gICAgbWltZVR5cGU6IHN0cmluZztcbiAgICBtaW1lVHlwZU5hbWU6IHN0cmluZztcbiAgICBzaXplSW5CeXRlczogbnVtYmVyO1xuICAgIGVuY29kaW5nOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBQYXRoSW5mb0VudGl0eSB7XG4gICAgZWxlbWVudHM6IFBhdGhFbGVtZW50RW50aXR5W107XG4gICAgaXNDb21wbGV0ZTogYm9vbGVhbjtcbiAgICBuYW1lOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBQYXRoRWxlbWVudEVudGl0eSB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTm9kZVByb3BlcnRpZXMge1xuICAgIFtrZXk6IHN0cmluZ106IGFueTtcbn1cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IFBlcm1pc3Npb25zRW51bSB9IGZyb20gJ0BhbGZyZXNjby9hZGYtY29yZSc7XG5cbmV4cG9ydCBjbGFzcyBQZXJtaXNzaW9uU3R5bGVNb2RlbCB7XG4gICAgY3NzOiBzdHJpbmc7XG4gICAgcGVybWlzc2lvbjogUGVybWlzc2lvbnNFbnVtO1xuICAgIGlzRm9sZGVyOiBib29sZWFuID0gdHJ1ZTtcbiAgICBpc0ZpbGU6IGJvb2xlYW4gPSB0cnVlO1xuXG4gICAgY29uc3RydWN0b3IoY3NzOiBzdHJpbmcsIHBlcm1pc3Npb246IFBlcm1pc3Npb25zRW51bSwgaXNGaWxlOiBib29sZWFuID0gdHJ1ZSwgaXNGb2xkZXI6IGJvb2xlYW4gPSB0cnVlKSB7XG4gICAgICAgIHRoaXMuY3NzID0gY3NzO1xuICAgICAgICB0aGlzLnBlcm1pc3Npb24gPSBwZXJtaXNzaW9uO1xuICAgICAgICB0aGlzLmlzRmlsZSA9IGlzRmlsZTtcbiAgICAgICAgdGhpcy5pc0ZvbGRlciA9IGlzRm9sZGVyO1xuICAgIH1cbn1cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gICAgRmlsZU1vZGVsLCBGaWxlVXBsb2FkQ29tcGxldGVFdmVudCwgRmlsZVVwbG9hZERlbGV0ZUV2ZW50LFxuICAgIEZpbGVVcGxvYWRFcnJvckV2ZW50LCBGaWxlVXBsb2FkU3RhdHVzLCBVcGxvYWRTZXJ2aWNlXG59IGZyb20gJ0BhbGZyZXNjby9hZGYtY29yZSc7XG5pbXBvcnQgeyBDaGFuZ2VEZXRlY3RvclJlZiwgQ29tcG9uZW50LCBJbnB1dCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIE9uRGVzdHJveSwgT25Jbml0LCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiwgbWVyZ2UgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IEZpbGVVcGxvYWRpbmdMaXN0Q29tcG9uZW50IH0gZnJvbSAnLi9maWxlLXVwbG9hZGluZy1saXN0LmNvbXBvbmVudCc7XG5cbi8vIEBkZXByZWNhdGVkIGZpbGUtdXBsb2FkaW5nLWRpYWxvZyBUT0RPIHJlbW92ZSBpbiAzLjAuMFxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdhZGYtZmlsZS11cGxvYWRpbmctZGlhbG9nLCBmaWxlLXVwbG9hZGluZy1kaWFsb2cnLFxuICAgIHRlbXBsYXRlVXJsOiAnLi9maWxlLXVwbG9hZGluZy1kaWFsb2cuY29tcG9uZW50Lmh0bWwnLFxuICAgIHN0eWxlVXJsczogWycuL2ZpbGUtdXBsb2FkaW5nLWRpYWxvZy5jb21wb25lbnQuc2NzcyddXG59KVxuZXhwb3J0IGNsYXNzIEZpbGVVcGxvYWRpbmdEaWFsb2dDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSB7XG4gICAgQFZpZXdDaGlsZCgndXBsb2FkTGlzdCcpXG4gICAgdXBsb2FkTGlzdDogRmlsZVVwbG9hZGluZ0xpc3RDb21wb25lbnQ7XG5cbiAgICAvKiogRGlhbG9nIHBvc2l0aW9uLiBDYW4gYmUgJ2xlZnQnIG9yICdyaWdodCcuICovXG4gICAgQElucHV0KClcbiAgICBwb3NpdGlvbjogc3RyaW5nID0gJ3JpZ2h0JztcblxuICAgIC8qKiBFbWl0dGVkIHdoZW4gYSBmaWxlIGluIHRoZSBsaXN0IGhhcyBhbiBlcnJvci4gKi9cbiAgICBAT3V0cHV0KClcbiAgICBlcnJvcjogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgICBmaWxlc1VwbG9hZGluZ0xpc3Q6IEZpbGVNb2RlbFtdID0gW107XG4gICAgaXNEaWFsb2dBY3RpdmU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICB0b3RhbENvbXBsZXRlZDogbnVtYmVyID0gMDtcbiAgICB0b3RhbEVycm9yczogbnVtYmVyID0gMDtcbiAgICBpc0RpYWxvZ01pbmltaXplZDogYm9vbGVhbiA9IGZhbHNlO1xuICAgIGlzQ29uZmlybWF0aW9uOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBwcml2YXRlIGxpc3RTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcbiAgICBwcml2YXRlIGNvdW50ZXJTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcbiAgICBwcml2YXRlIGZpbGVVcGxvYWRTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcbiAgICBwcml2YXRlIGVycm9yU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHVwbG9hZFNlcnZpY2U6IFVwbG9hZFNlcnZpY2UsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSBjaGFuZ2VEZXRlY29yOiBDaGFuZ2VEZXRlY3RvclJlZikge1xuICAgIH1cblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICB0aGlzLmxpc3RTdWJzY3JpcHRpb24gPSB0aGlzLnVwbG9hZFNlcnZpY2VcbiAgICAgICAgICAgIC5xdWV1ZUNoYW5nZWQuc3Vic2NyaWJlKChmaWxlTGlzdDogRmlsZU1vZGVsW10pID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbGVzVXBsb2FkaW5nTGlzdCA9IGZpbGVMaXN0O1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZmlsZXNVcGxvYWRpbmdMaXN0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRGlhbG9nQWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmNvdW50ZXJTdWJzY3JpcHRpb24gPSBtZXJnZShcbiAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZFNlcnZpY2UuZmlsZVVwbG9hZENvbXBsZXRlLFxuICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkU2VydmljZS5maWxlVXBsb2FkRGVsZXRlZFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgoZXZlbnQ6IChGaWxlVXBsb2FkRGVsZXRlRXZlbnQgfCBGaWxlVXBsb2FkQ29tcGxldGVFdmVudCkpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvdGFsQ29tcGxldGVkID0gZXZlbnQudG90YWxDb21wbGV0ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZURldGVjb3IuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5lcnJvclN1YnNjcmlwdGlvbiA9IHRoaXMudXBsb2FkU2VydmljZS5maWxlVXBsb2FkRXJyb3JcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKGV2ZW50OiBGaWxlVXBsb2FkRXJyb3JFdmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudG90YWxFcnJvcnMgPSBldmVudC50b3RhbEVycm9yO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlRGV0ZWNvci5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmZpbGVVcGxvYWRTdWJzY3JpcHRpb24gPSB0aGlzLnVwbG9hZFNlcnZpY2VcbiAgICAgICAgICAgIC5maWxlVXBsb2FkLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY29yLmRldGVjdENoYW5nZXMoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMudXBsb2FkU2VydmljZS5maWxlRGVsZXRlZC5zdWJzY3JpYmUoKG9iaklkKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5maWxlc1VwbG9hZGluZ0xpc3QpIHtcbiAgICAgICAgICAgICAgICBsZXQgZmlsZSA9IHRoaXMuZmlsZXNVcGxvYWRpbmdMaXN0LmZpbmQoKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uZGF0YS5lbnRyeS5pZCA9PT0gb2JqSWQ7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsZS5zdGF0dXMgPSBGaWxlVXBsb2FkU3RhdHVzLkNhbmNlbGxlZDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY29yLmRldGVjdENoYW5nZXMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRvZ2dsZSBjb25maXJtYXRpb24gbWVzc2FnZS5cbiAgICAgKi9cbiAgICB0b2dnbGVDb25maXJtYXRpb24oKSB7XG4gICAgICAgIHRoaXMuaXNDb25maXJtYXRpb24gPSAhdGhpcy5pc0NvbmZpcm1hdGlvbjtcblxuICAgICAgICBpZiAodGhpcy5pc0RpYWxvZ01pbmltaXplZCkge1xuICAgICAgICAgICAgdGhpcy5pc0RpYWxvZ01pbmltaXplZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FuY2VsIHVwbG9hZHMgYW5kIGhpZGUgY29uZmlyYW10aW9uXG4gICAgICovXG4gICAgY2FuY2VsQWxsVXBsb2FkcygpIHtcbiAgICAgICAgdGhpcy50b2dnbGVDb25maXJtYXRpb24oKTtcblxuICAgICAgICB0aGlzLnVwbG9hZExpc3QuY2FuY2VsQWxsRmlsZXMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUb2dnbGUgZGlhbG9nIG1pbmltaXplZCBzdGF0ZS5cbiAgICAgKi9cbiAgICB0b2dnbGVNaW5pbWl6ZWQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaXNEaWFsb2dNaW5pbWl6ZWQgPSAhdGhpcy5pc0RpYWxvZ01pbmltaXplZDtcbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY29yLmRldGVjdENoYW5nZXMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEaXNtaXNzIGRpYWxvZ1xuICAgICAqL1xuICAgIGNsb3NlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmlzQ29uZmlybWF0aW9uID0gZmFsc2U7XG4gICAgICAgIHRoaXMudG90YWxDb21wbGV0ZWQgPSAwO1xuICAgICAgICB0aGlzLnRvdGFsRXJyb3JzID0gMDtcbiAgICAgICAgdGhpcy5maWxlc1VwbG9hZGluZ0xpc3QgPSBbXTtcbiAgICAgICAgdGhpcy5pc0RpYWxvZ0FjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzRGlhbG9nTWluaW1pemVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMudXBsb2FkU2VydmljZS5jbGVhclF1ZXVlKCk7XG4gICAgICAgIHRoaXMuY2hhbmdlRGV0ZWNvci5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgfVxuXG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMudXBsb2FkU2VydmljZS5jbGVhclF1ZXVlKCk7XG4gICAgICAgIHRoaXMubGlzdFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB0aGlzLmNvdW50ZXJTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgdGhpcy5maWxlVXBsb2FkU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIHRoaXMuZXJyb3JTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICB9XG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBGaWxlTW9kZWwsIEZpbGVVcGxvYWRTdGF0dXMgfSBmcm9tICdAYWxmcmVzY28vYWRmLWNvcmUnO1xuaW1wb3J0IHsgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIElucHV0LCBPdXRwdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdhZGYtZmlsZS11cGxvYWRpbmctbGlzdC1yb3cnLFxuICAgIHRlbXBsYXRlVXJsOiAnLi9maWxlLXVwbG9hZGluZy1saXN0LXJvdy5jb21wb25lbnQuaHRtbCcsXG4gICAgc3R5bGVVcmxzOiBbICcuL2ZpbGUtdXBsb2FkaW5nLWxpc3Qtcm93LmNvbXBvbmVudC5zY3NzJyBdXG59KVxuZXhwb3J0IGNsYXNzIEZpbGVVcGxvYWRpbmdMaXN0Um93Q29tcG9uZW50IHtcbiAgICBASW5wdXQoKVxuICAgIGZpbGU6IEZpbGVNb2RlbDtcblxuICAgIEBPdXRwdXQoKVxuICAgIGNhbmNlbDogRXZlbnRFbWl0dGVyPEZpbGVNb2RlbD4gPSBuZXcgRXZlbnRFbWl0dGVyPEZpbGVNb2RlbD4oKTtcblxuICAgIEBPdXRwdXQoKVxuICAgIHJlbW92ZTogRXZlbnRFbWl0dGVyPEZpbGVNb2RlbD4gPSBuZXcgRXZlbnRFbWl0dGVyPEZpbGVNb2RlbD4oKTtcblxuICAgIEZpbGVVcGxvYWRTdGF0dXMgPSBGaWxlVXBsb2FkU3RhdHVzO1xuXG4gICAgb25DYW5jZWwoZmlsZTogRmlsZU1vZGVsKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY2FuY2VsLmVtaXQoZmlsZSk7XG4gICAgfVxuXG4gICAgb25SZW1vdmUoZmlsZTogRmlsZU1vZGVsKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVtb3ZlLmVtaXQoZmlsZSk7XG4gICAgfVxufVxuIiwiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgRmlsZU1vZGVsLCBGaWxlVXBsb2FkU3RhdHVzLCBOb2Rlc0FwaVNlcnZpY2UsIFRyYW5zbGF0aW9uU2VydmljZSwgVXBsb2FkU2VydmljZSB9IGZyb20gJ0BhbGZyZXNjby9hZGYtY29yZSc7XG5pbXBvcnQgeyBDb21wb25lbnQsIENvbnRlbnRDaGlsZCwgSW5wdXQsIE91dHB1dCwgVGVtcGxhdGVSZWYsIEV2ZW50RW1pdHRlciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgZm9ya0pvaW4sIG9mIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBtYXAsIGNhdGNoRXJyb3IgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnYWRmLWZpbGUtdXBsb2FkaW5nLWxpc3QnLFxuICAgIHRlbXBsYXRlVXJsOiAnLi9maWxlLXVwbG9hZGluZy1saXN0LmNvbXBvbmVudC5odG1sJyxcbiAgICBzdHlsZVVybHM6IFsnLi9maWxlLXVwbG9hZGluZy1saXN0LmNvbXBvbmVudC5zY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgRmlsZVVwbG9hZGluZ0xpc3RDb21wb25lbnQge1xuXG4gICAgRmlsZVVwbG9hZFN0YXR1cyA9IEZpbGVVcGxvYWRTdGF0dXM7XG5cbiAgICBAQ29udGVudENoaWxkKFRlbXBsYXRlUmVmKVxuICAgIHRlbXBsYXRlOiBhbnk7XG5cbiAgICBASW5wdXQoKVxuICAgIGZpbGVzOiBGaWxlTW9kZWxbXSA9IFtdO1xuXG4gICAgLyoqIEVtaXR0ZWQgd2hlbiBhIGZpbGUgaW4gdGhlIGxpc3QgaGFzIGFuIGVycm9yLiAqL1xuICAgIEBPdXRwdXQoKVxuICAgIGVycm9yOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHVwbG9hZFNlcnZpY2U6IFVwbG9hZFNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgbm9kZXNBcGk6IE5vZGVzQXBpU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSB0cmFuc2xhdGVTZXJ2aWNlOiBUcmFuc2xhdGlvblNlcnZpY2UpIHtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYW5jZWwgZmlsZSB1cGxvYWRcbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWxlIEZpbGUgbW9kZWwgdG8gY2FuY2VsIHVwbG9hZCBmb3IuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyT2YgRmlsZVVwbG9hZGluZ0xpc3RDb21wb25lbnRcbiAgICAgKi9cbiAgICBjYW5jZWxGaWxlKGZpbGU6IEZpbGVNb2RlbCk6IHZvaWQge1xuICAgICAgICB0aGlzLnVwbG9hZFNlcnZpY2UuY2FuY2VsVXBsb2FkKGZpbGUpO1xuICAgIH1cblxuICAgIHJlbW92ZUZpbGUoZmlsZTogRmlsZU1vZGVsKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZGVsZXRlTm9kZShmaWxlKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCBmaWxlLnN0YXR1cyA9PT0gRmlsZVVwbG9hZFN0YXR1cy5FcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeUVycm9yKGZpbGUpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkU2VydmljZS5jYW5jZWxVcGxvYWQoZmlsZSk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxsIHRoZSBhcHByb3ByaWF0ZSBtZXRob2QgZm9yIGVhY2ggZmlsZSwgZGVwZW5kaW5nIG9uIHN0YXRlXG4gICAgICovXG4gICAgY2FuY2VsQWxsRmlsZXMoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZ2V0VXBsb2FkaW5nRmlsZXMoKVxuICAgICAgICAgICAgLmZvckVhY2goKGZpbGUpID0+IHRoaXMudXBsb2FkU2VydmljZS5jYW5jZWxVcGxvYWQoZmlsZSkpO1xuXG4gICAgICAgIGNvbnN0IGRlbGV0ZWRGaWxlcyA9IHRoaXMuZmlsZXNcbiAgICAgICAgICAgIC5maWx0ZXIoKGZpbGUpID0+IGZpbGUuc3RhdHVzID09PSBGaWxlVXBsb2FkU3RhdHVzLkNvbXBsZXRlKVxuICAgICAgICAgICAgLm1hcCgoZmlsZSkgPT4gdGhpcy5kZWxldGVOb2RlKGZpbGUpKTtcblxuICAgICAgICBmb3JrSm9pbiguLi5kZWxldGVkRmlsZXMpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKChmaWxlczogRmlsZU1vZGVsW10pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvcnMgPSBmaWxlc1xuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKChmaWxlKSA9PiBmaWxlLnN0YXR1cyA9PT0gRmlsZVVwbG9hZFN0YXR1cy5FcnJvcik7XG5cbiAgICAgICAgICAgICAgICBpZiAoZXJyb3JzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeUVycm9yKC4uLmVycm9ycyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy51cGxvYWRTZXJ2aWNlLmNhbmNlbFVwbG9hZCguLi5maWxlcyk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYWxsIHRoZSBmaWxlcyBhcmUgdXBsb2FkZWQgZmFsc2UgaWYgdGhlcmUgaXMgYXQgbGVhc3Qgb25lIGZpbGUgaW4gUHJvZ3Jlc3MgfCBTdGFydGluZyB8IFBlbmRpbmdcbiAgICAgKi9cbiAgICBpc1VwbG9hZENvbXBsZXRlZCgpOiBib29sZWFuIHtcbiAgICAgICAgIHJldHVybiAhdGhpcy5pc1VwbG9hZENhbmNlbGxlZCgpICYmXG4gICAgICAgICAgICBCb29sZWFuKHRoaXMuZmlsZXMubGVuZ3RoKSAmJlxuICAgICAgICAgICAgIXRoaXMuZmlsZXNcbiAgICAgICAgICAgICAgICAuc29tZSgoe3N0YXR1c30pID0+XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9PT0gRmlsZVVwbG9hZFN0YXR1cy5TdGFydGluZyB8fFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPT09IEZpbGVVcGxvYWRTdGF0dXMuUHJvZ3Jlc3MgfHxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzID09PSBGaWxlVXBsb2FkU3RhdHVzLlBlbmRpbmdcbiAgICAgICAgICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIGFsbCB0aGUgZmlsZXMgYXJlIENhbmNlbGxlZCB8IEFib3J0ZWQgfCBFcnJvci4gZmFsc2UgaWYgdGhlcmUgaXMgYXQgbGVhc3Qgb25lIGZpbGUgaW4gdXBsb2FkaW5nIHN0YXRlc1xuICAgICAqL1xuICAgIGlzVXBsb2FkQ2FuY2VsbGVkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gISF0aGlzLmZpbGVzLmxlbmd0aCAmJlxuICAgICAgICAgICAgdGhpcy5maWxlc1xuICAgICAgICAgICAgICAgIC5ldmVyeSgoe3N0YXR1c30pID0+XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9PT0gRmlsZVVwbG9hZFN0YXR1cy5BYm9ydGVkIHx8XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9PT0gRmlsZVVwbG9hZFN0YXR1cy5DYW5jZWxsZWQgfHxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzID09PSBGaWxlVXBsb2FkU3RhdHVzLkRlbGV0ZWRcbiAgICAgICAgICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgZGVsZXRlTm9kZShmaWxlOiBGaWxlTW9kZWwpOiBPYnNlcnZhYmxlPEZpbGVNb2RlbD4ge1xuICAgICAgICBjb25zdCB7IGlkIH0gPSBmaWxlLmRhdGEuZW50cnk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZXNBcGlcbiAgICAgICAgICAgIC5kZWxldGVOb2RlKGlkLCB7IHBlcm1hbmVudDogdHJ1ZSB9KVxuICAgICAgICAgICAgLnBpcGUoXG4gICAgICAgICAgICAgICAgbWFwKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZmlsZS5zdGF0dXMgPSBGaWxlVXBsb2FkU3RhdHVzLkRlbGV0ZWQ7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmaWxlO1xuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGNhdGNoRXJyb3IoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBmaWxlLnN0YXR1cyA9IEZpbGVVcGxvYWRTdGF0dXMuRXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvZihmaWxlKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG5vdGlmeUVycm9yKC4uLmZpbGVzOiBGaWxlTW9kZWxbXSkge1xuICAgICAgICBsZXQgbWVzc2FnZUVycm9yOiBzdHJpbmcgPSBudWxsO1xuXG4gICAgICAgIGlmIChmaWxlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIG1lc3NhZ2VFcnJvciA9IHRoaXMudHJhbnNsYXRlU2VydmljZVxuICAgICAgICAgICAgICAgIC5pbnN0YW50KFxuICAgICAgICAgICAgICAgICAgICAnRklMRV9VUExPQUQuTUVTU0FHRVMuUkVNT1ZFX0ZJTEVfRVJST1InLFxuICAgICAgICAgICAgICAgICAgICB7IGZpbGVOYW1lOiBmaWxlc1swXS5uYW1lfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtZXNzYWdlRXJyb3IgPSB0aGlzLnRyYW5zbGF0ZVNlcnZpY2VcbiAgICAgICAgICAgICAgICAuaW5zdGFudChcbiAgICAgICAgICAgICAgICAgICAgJ0ZJTEVfVVBMT0FELk1FU1NBR0VTLlJFTU9WRV9GSUxFU19FUlJPUicsXG4gICAgICAgICAgICAgICAgICAgIHsgdG90YWw6IGZpbGVzLmxlbmd0aCB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZXJyb3IuZW1pdChtZXNzYWdlRXJyb3IpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0VXBsb2FkaW5nRmlsZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbGVzLmZpbHRlcigoaXRlbSkgPT4ge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGl0ZW0uc3RhdHVzID09PSBGaWxlVXBsb2FkU3RhdHVzLlBlbmRpbmcgfHxcbiAgICAgICAgICAgICAgICBpdGVtLnN0YXR1cyA9PT0gRmlsZVVwbG9hZFN0YXR1cy5Qcm9ncmVzcyB8fFxuICAgICAgICAgICAgICAgIGl0ZW0uc3RhdHVzID09PSBGaWxlVXBsb2FkU3RhdHVzLlN0YXJ0aW5nXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgRmlsZU1vZGVsLCBVcGxvYWRTZXJ2aWNlIH0gZnJvbSAnQGFsZnJlc2NvL2FkZi1jb3JlJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5leHBvcnQgY2xhc3MgVXBsb2FkRmlsZXNFdmVudCB7XG4gICAgcHJpdmF0ZSBpc0RlZmF1bHRQcmV2ZW50ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIGdldCBkZWZhdWx0UHJldmVudGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ7XG4gICAgfVxuXG4gICAgcHJldmVudERlZmF1bHQoKSB7XG4gICAgICAgIHRoaXMuaXNEZWZhdWx0UHJldmVudGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGZpbGVzOiBBcnJheTxGaWxlTW9kZWw+LFxuICAgICAgICBwcml2YXRlIHVwbG9hZFNlcnZpY2U6IFVwbG9hZFNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgY2FsbGJhY2s6IEV2ZW50RW1pdHRlcjxhbnk+XG4gICAgKSB7fVxuXG4gICAgcGF1c2VVcGxvYWQoKSB7XG4gICAgICAgIHRoaXMucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG5cbiAgICByZXN1bWVVcGxvYWQoKSB7XG4gICAgICAgIGlmICh0aGlzLmZpbGVzICYmIHRoaXMuZmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy51cGxvYWRTZXJ2aWNlLmFkZFRvUXVldWUoLi4udGhpcy5maWxlcyk7XG4gICAgICAgICAgICB0aGlzLnVwbG9hZFNlcnZpY2UudXBsb2FkRmlsZXNJblRoZVF1ZXVlKHRoaXMuY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgRmlsZU1vZGVsLCBGaWxlSW5mbyB9IGZyb20gJ0BhbGZyZXNjby9hZGYtY29yZSc7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIsIElucHV0LCBPdXRwdXQsIE9uSW5pdCwgT25EZXN0cm95LCBOZ1pvbmUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFVwbG9hZFNlcnZpY2UsIFRyYW5zbGF0aW9uU2VydmljZSB9IGZyb20gJ0BhbGZyZXNjby9hZGYtY29yZSc7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IFVwbG9hZEZpbGVzRXZlbnQgfSBmcm9tICcuLi91cGxvYWQtZmlsZXMuZXZlbnQnO1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgVXBsb2FkQmFzZSBpbXBsZW1lbnRzIE9uSW5pdCwgT25EZXN0cm95IHtcblxuICAgIC8qKiBTZXRzIGEgbGltaXQgb24gdGhlIG1heGltdW0gc2l6ZSAoaW4gYnl0ZXMpIG9mIGEgZmlsZSB0byBiZSB1cGxvYWRlZC5cbiAgICAgKiBIYXMgbm8gZWZmZWN0IGlmIHVuZGVmaW5lZC5cbiAgICAgKi9cbiAgICBASW5wdXQoKVxuICAgIG1heEZpbGVzU2l6ZTogbnVtYmVyO1xuXG4gICAgLyoqIFRoZSBJRCBvZiB0aGUgcm9vdC4gVXNlIHRoZSBub2RlSWQgZm9yXG4gICAgICogQ29udGVudCBTZXJ2aWNlcyBvciB0aGUgdGFza0lkL3Byb2Nlc3NJZCBmb3IgUHJvY2VzcyBTZXJ2aWNlcy5cbiAgICAgKi9cbiAgICBASW5wdXQoKVxuICAgIHJvb3RGb2xkZXJJZDogc3RyaW5nID0gJy1yb290LSc7XG5cbiAgICAvKiogVG9nZ2xlcyBjb21wb25lbnQgZGlzYWJsZWQgc3RhdGUgKGlmIHRoZXJlIGlzIG5vIG5vZGUgcGVybWlzc2lvbiBjaGVja2luZykuICovXG4gICAgQElucHV0KClcbiAgICBkaXNhYmxlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgLyoqIEZpbHRlciBmb3IgYWNjZXB0ZWQgZmlsZSB0eXBlcy4gKi9cbiAgICBASW5wdXQoKVxuICAgIGFjY2VwdGVkRmlsZXNUeXBlOiBzdHJpbmcgPSAnKic7XG5cbiAgICAvKiogVG9nZ2xlcyB2ZXJzaW9uaW5nLiAqL1xuICAgIEBJbnB1dCgpXG4gICAgdmVyc2lvbmluZzogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgLyoqIG1ham9yVmVyc2lvbiBib29sZWFuIGZpZWxkIHRvIHRydWUgdG8gaW5kaWNhdGUgYSBtYWpvciB2ZXJzaW9uIHNob3VsZCBiZSBjcmVhdGVkLiAqL1xuICAgIEBJbnB1dCgpXG4gICAgbWFqb3JWZXJzaW9uOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICAvKiogV2hlbiB5b3Ugb3ZlcndyaXRlIGV4aXN0aW5nIGNvbnRlbnQsIHlvdSBjYW4gdXNlIHRoZSBjb21tZW50IGZpZWxkIHRvIGFkZCBhIHZlcnNpb24gY29tbWVudCB0aGF0IGFwcGVhcnMgaW4gdGhlIHZlcnNpb24gaGlzdG9yeSAqL1xuICAgIEBJbnB1dCgpXG4gICAgY29tbWVudDogc3RyaW5nO1xuXG4gICAgLyoqIEN1c3RvbSBub2RlIHR5cGUgZm9yIHVwbG9hZGVkIGZpbGUgKi9cbiAgICBASW5wdXQoKVxuICAgIG5vZGVUeXBlOiBzdHJpbmcgPSAnY206Y29udGVudCc7XG5cbiAgICAvKiogRW1pdHRlZCB3aGVuIHRoZSBmaWxlIGlzIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseS4gKi9cbiAgICBAT3V0cHV0KClcbiAgICBzdWNjZXNzID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gICAgLyoqXG4gICAgICogRW1pdHRlZCB3aGVuIGEgZm9sZGVyIGlzIGNyZWF0ZWQuXG4gICAgICogQGRlcHJlY2F0ZWQgMi40LjAgTm8gbG9uZ2VyIHVzZWQgYnkgdGhlIGZyYW1ld29ya1xuICAgICAqL1xuICAgIEBPdXRwdXQoKVxuICAgIGNyZWF0ZUZvbGRlciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICAgIC8qKiBFbWl0dGVkIHdoZW4gYW4gZXJyb3Igb2NjdXJzLiAqL1xuICAgIEBPdXRwdXQoKVxuICAgIGVycm9yID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gICAgLyoqIEVtaXR0ZWQgd2hlbiB0aGUgdXBsb2FkIGJlZ2lucy4gKi9cbiAgICBAT3V0cHV0KClcbiAgICBiZWdpblVwbG9hZCA9IG5ldyBFdmVudEVtaXR0ZXI8VXBsb2FkRmlsZXNFdmVudD4oKTtcblxuICAgIHByb3RlY3RlZCBzdWJzY3JpcHRpb25zOiBTdWJzY3JpcHRpb25bXSA9IFtdO1xuXG4gICAgY29uc3RydWN0b3IocHJvdGVjdGVkIHVwbG9hZFNlcnZpY2U6IFVwbG9hZFNlcnZpY2UsXG4gICAgICAgICAgICAgICAgcHJvdGVjdGVkIHRyYW5zbGF0aW9uU2VydmljZTogVHJhbnNsYXRpb25TZXJ2aWNlLFxuICAgICAgICAgICAgICAgIHByb3RlY3RlZCBuZ1pvbmU6IE5nWm9uZSkge1xuICAgIH1cblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChcbiAgICAgICAgICAgIHRoaXMudXBsb2FkU2VydmljZS5maWxlVXBsb2FkRXJyb3Iuc3Vic2NyaWJlKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IuZW1pdChlcnJvcik7XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgfVxuXG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5mb3JFYWNoKHN1YnNjcmlwdGlvbiA9PiBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKSk7XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IFtdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwbG9hZCBhIGxpc3Qgb2YgZmlsZSBpbiB0aGUgc3BlY2lmaWVkIHBhdGhcbiAgICAgKiBAcGFyYW0gZmlsZXNcbiAgICAgKiBAcGFyYW0gcGF0aFxuICAgICAqL1xuICAgIHVwbG9hZEZpbGVzKGZpbGVzOiBGaWxlW10pOiB2b2lkIHtcbiAgICAgICAgY29uc3QgZmlsdGVyZWRGaWxlczogRmlsZU1vZGVsW10gPSBmaWxlc1xuICAgICAgICAgICAgLm1hcDxGaWxlTW9kZWw+KChmaWxlOiBGaWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlRmlsZU1vZGVsKGZpbGUsIHRoaXMucm9vdEZvbGRlcklkLCAoZmlsZS53ZWJraXRSZWxhdGl2ZVBhdGggfHwgJycpLnJlcGxhY2UoL1xcL1teXFwvXSokLywgJycpKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMudXBsb2FkUXVldWUoZmlsdGVyZWRGaWxlcyk7XG4gICAgfVxuXG4gICAgdXBsb2FkRmlsZXNJbmZvKGZpbGVzOiBGaWxlSW5mb1tdKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGZpbHRlcmVkRmlsZXM6IEZpbGVNb2RlbFtdID0gZmlsZXNcbiAgICAgICAgICAgIC5tYXA8RmlsZU1vZGVsPigoZmlsZUluZm86IEZpbGVJbmZvKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlRmlsZU1vZGVsKGZpbGVJbmZvLmZpbGUsIHRoaXMucm9vdEZvbGRlcklkLCBmaWxlSW5mby5yZWxhdGl2ZUZvbGRlcik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnVwbG9hZFF1ZXVlKGZpbHRlcmVkRmlsZXMpO1xuICAgIH1cblxuICAgIHByaXZhdGUgdXBsb2FkUXVldWUoZmlsZXM6IEZpbGVNb2RlbFtdKSB7XG4gICAgICAgIGxldCBmaWx0ZXJlZEZpbGVzID0gZmlsZXNcbiAgICAgICAgICAgIC5maWx0ZXIodGhpcy5pc0ZpbGVBY2NlcHRhYmxlLmJpbmQodGhpcykpXG4gICAgICAgICAgICAuZmlsdGVyKHRoaXMuaXNGaWxlU2l6ZUFjY2VwdGFibGUuYmluZCh0aGlzKSk7XG5cbiAgICAgICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IFVwbG9hZEZpbGVzRXZlbnQoXG4gICAgICAgICAgICAgICAgWy4uLmZpbHRlcmVkRmlsZXNdLFxuICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkU2VydmljZSxcbiAgICAgICAgICAgICAgICB0aGlzLnN1Y2Nlc3NcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLmJlZ2luVXBsb2FkLmVtaXQoZXZlbnQpO1xuXG4gICAgICAgICAgICBpZiAoIWV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyZWRGaWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkU2VydmljZS5hZGRUb1F1ZXVlKC4uLmZpbHRlcmVkRmlsZXMpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZFNlcnZpY2UudXBsb2FkRmlsZXNJblRoZVF1ZXVlKHRoaXMuc3VjY2Vzcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhlIGdpdmVuIGZpbGUgaXMgYWxsb3dlZCBieSB0aGUgZXh0ZW5zaW9uIGZpbHRlcnNcbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWxlIEZpbGVNb2RlbFxuICAgICAqL1xuICAgIHByb3RlY3RlZCBpc0ZpbGVBY2NlcHRhYmxlKGZpbGU6IEZpbGVNb2RlbCk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAodGhpcy5hY2NlcHRlZEZpbGVzVHlwZSA9PT0gJyonKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGFsbG93ZWRFeHRlbnNpb25zID0gdGhpcy5hY2NlcHRlZEZpbGVzVHlwZVxuICAgICAgICAgICAgLnNwbGl0KCcsJylcbiAgICAgICAgICAgIC5tYXAoZXh0ID0+IGV4dC5yZXBsYWNlKC9eXFwuLywgJycpKTtcblxuICAgICAgICBpZiAoYWxsb3dlZEV4dGVuc2lvbnMuaW5kZXhPZihmaWxlLmV4dGVuc2lvbikgIT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIEZpbGVNb2RlbCBmcm9tIEZpbGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWxlXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGNyZWF0ZUZpbGVNb2RlbChmaWxlOiBGaWxlLCBwYXJlbnRJZDogc3RyaW5nLCBwYXRoOiBzdHJpbmcsIGlkPzogc3RyaW5nKTogRmlsZU1vZGVsIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGaWxlTW9kZWwoZmlsZSwge1xuICAgICAgICAgICAgY29tbWVudDogdGhpcy5jb21tZW50LFxuICAgICAgICAgICAgbWFqb3JWZXJzaW9uOiB0aGlzLm1ham9yVmVyc2lvbixcbiAgICAgICAgICAgIG5ld1ZlcnNpb246IHRoaXMudmVyc2lvbmluZyxcbiAgICAgICAgICAgIHBhcmVudElkOiBwYXJlbnRJZCxcbiAgICAgICAgICAgIHBhdGg6IHBhdGgsXG4gICAgICAgICAgICBub2RlVHlwZTogdGhpcy5ub2RlVHlwZVxuICAgICAgICB9LCBpZCk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGlzRmlsZVNpemVBbGxvd2VkKGZpbGU6IEZpbGVNb2RlbCkge1xuICAgICAgICBsZXQgaXNGaWxlU2l6ZUFsbG93ZWQgPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5pc01heEZpbGVTaXplRGVmaW5lZCgpKSB7XG4gICAgICAgICAgICBpc0ZpbGVTaXplQWxsb3dlZCA9IHRoaXMuaXNGaWxlU2l6ZUNvcnJlY3QoZmlsZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaXNGaWxlU2l6ZUFsbG93ZWQ7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGlzTWF4RmlsZVNpemVEZWZpbmVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXhGaWxlc1NpemUgIT09IHVuZGVmaW5lZCAmJiB0aGlzLm1heEZpbGVzU2l6ZSAhPT0gbnVsbDtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgaXNGaWxlU2l6ZUNvcnJlY3QoZmlsZTogRmlsZU1vZGVsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1heEZpbGVzU2l6ZSA+PSAwICYmIGZpbGUuc2l6ZSA8PSB0aGlzLm1heEZpbGVzU2l6ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhlIGdpdmVuIGZpbGUgaXMgYW4gYWNjZXB0YWJsZSBzaXplXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmlsZSBGaWxlTW9kZWxcbiAgICAgKi9cbiAgICBwcml2YXRlIGlzRmlsZVNpemVBY2NlcHRhYmxlKGZpbGU6IEZpbGVNb2RlbCk6IGJvb2xlYW4ge1xuICAgICAgICBsZXQgYWNjZXB0YWJsZVNpemUgPSB0cnVlO1xuXG4gICAgICAgIGlmICghdGhpcy5pc0ZpbGVTaXplQWxsb3dlZChmaWxlKSkge1xuICAgICAgICAgICAgYWNjZXB0YWJsZVNpemUgPSBmYWxzZTtcblxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IHRoaXMudHJhbnNsYXRpb25TZXJ2aWNlLmluc3RhbnQoXG4gICAgICAgICAgICAgICAgJ0ZJTEVfVVBMT0FELk1FU1NBR0VTLkVYQ0VFRF9NQVhfRklMRV9TSVpFJyxcbiAgICAgICAgICAgICAgICB7IGZpbGVOYW1lOiBmaWxlLm5hbWUgfVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgdGhpcy5lcnJvci5lbWl0KG1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGFjY2VwdGFibGVTaXplO1xuICAgIH1cblxufVxuIiwiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgICBDb250ZW50U2VydmljZSwgRVhURU5ESUJMRV9DT01QT05FTlQsIEZpbGVVdGlscyxcbiAgICBMb2dTZXJ2aWNlLCBOb2RlUGVybWlzc2lvblN1YmplY3QsIFRyYW5zbGF0aW9uU2VydmljZSwgVXBsb2FkU2VydmljZSwgUGVybWlzc2lvbnNFbnVtXG59IGZyb20gJ0BhbGZyZXNjby9hZGYtY29yZSc7XG5pbXBvcnQge1xuICAgIENvbXBvbmVudCwgRXZlbnRFbWl0dGVyLCBmb3J3YXJkUmVmLCBJbnB1dCxcbiAgICBPbkNoYW5nZXMsIE9uSW5pdCwgT3V0cHV0LCBTaW1wbGVDaGFuZ2VzLCBWaWV3RW5jYXBzdWxhdGlvbiwgTmdab25lXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTWluaW1hbE5vZGVFbnRyeUVudGl0eSB9IGZyb20gJ2FsZnJlc2NvLWpzLWFwaSc7XG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBQZXJtaXNzaW9uTW9kZWwgfSBmcm9tICcuLi8uLi9kb2N1bWVudC1saXN0L21vZGVscy9wZXJtaXNzaW9ucy5tb2RlbCc7XG5pbXBvcnQgeyBVcGxvYWRCYXNlIH0gZnJvbSAnLi9iYXNlLXVwbG9hZC91cGxvYWQtYmFzZSc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnYWRmLXVwbG9hZC1idXR0b24nLFxuICAgIHRlbXBsYXRlVXJsOiAnLi91cGxvYWQtYnV0dG9uLmNvbXBvbmVudC5odG1sJyxcbiAgICBzdHlsZVVybHM6IFsnLi91cGxvYWQtYnV0dG9uLmNvbXBvbmVudC5zY3NzJ10sXG4gICAgdmlld1Byb3ZpZGVyczogW1xuICAgICAgICB7IHByb3ZpZGU6IEVYVEVORElCTEVfQ09NUE9ORU5ULCB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBVcGxvYWRCdXR0b25Db21wb25lbnQpIH1cbiAgICBdLFxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmVcbn0pXG5leHBvcnQgY2xhc3MgVXBsb2FkQnV0dG9uQ29tcG9uZW50IGV4dGVuZHMgVXBsb2FkQmFzZSBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzLCBOb2RlUGVybWlzc2lvblN1YmplY3Qge1xuXG4gICAgLyoqIEFsbG93cy9kaXNhbGxvd3MgdXBsb2FkIGZvbGRlcnMgKG9ubHkgZm9yIENocm9tZSkuICovXG4gICAgQElucHV0KClcbiAgICB1cGxvYWRGb2xkZXJzOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICAvKiogQWxsb3dzL2Rpc2FsbG93cyBtdWx0aXBsZSBmaWxlcyAqL1xuICAgIEBJbnB1dCgpXG4gICAgbXVsdGlwbGVGaWxlczogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgLyoqIERlZmluZXMgdGhlIHRleHQgb2YgdGhlIHVwbG9hZCBidXR0b24uICovXG4gICAgQElucHV0KClcbiAgICBzdGF0aWNUaXRsZTogc3RyaW5nO1xuXG4gICAgLyoqIEN1c3RvbSB0b29sdGlwIHRleHQuICovXG4gICAgQElucHV0KClcbiAgICB0b29sdGlwOiBzdHJpbmcgPSBudWxsO1xuXG4gICAgLyoqIEVtaXR0ZWQgd2hlbiBjcmVhdGUgcGVybWlzc2lvbiBpcyBtaXNzaW5nLiAqL1xuICAgIEBPdXRwdXQoKVxuICAgIHBlcm1pc3Npb25FdmVudDogRXZlbnRFbWl0dGVyPFBlcm1pc3Npb25Nb2RlbD4gPSBuZXcgRXZlbnRFbWl0dGVyPFBlcm1pc3Npb25Nb2RlbD4oKTtcblxuICAgIHByaXZhdGUgaGFzUGVybWlzc2lvbjogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgcHJvdGVjdGVkIHBlcm1pc3Npb25WYWx1ZTogU3ViamVjdDxib29sZWFuPiA9IG5ldyBTdWJqZWN0PGJvb2xlYW4+KCk7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgdXBsb2FkU2VydmljZTogVXBsb2FkU2VydmljZSxcbiAgICAgICAgICAgICAgICBwcml2YXRlIGNvbnRlbnRTZXJ2aWNlOiBDb250ZW50U2VydmljZSxcbiAgICAgICAgICAgICAgICBwcm90ZWN0ZWQgdHJhbnNsYXRpb25TZXJ2aWNlOiBUcmFuc2xhdGlvblNlcnZpY2UsXG4gICAgICAgICAgICAgICAgcHJvdGVjdGVkIGxvZ1NlcnZpY2U6IExvZ1NlcnZpY2UsXG4gICAgICAgICAgICAgICAgcHJvdGVjdGVkIG5nWm9uZTogTmdab25lKSB7XG4gICAgICAgIHN1cGVyKHVwbG9hZFNlcnZpY2UsIHRyYW5zbGF0aW9uU2VydmljZSwgbmdab25lKTtcbiAgICB9XG5cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgdGhpcy5wZXJtaXNzaW9uVmFsdWUuc3Vic2NyaWJlKChwZXJtaXNzaW9uOiBib29sZWFuKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmhhc1Blcm1pc3Npb24gPSBwZXJtaXNzaW9uO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XG4gICAgICAgIGxldCByb290Rm9sZGVySWQgPSBjaGFuZ2VzWydyb290Rm9sZGVySWQnXTtcbiAgICAgICAgaWYgKHJvb3RGb2xkZXJJZCAmJiByb290Rm9sZGVySWQuY3VycmVudFZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmNoZWNrUGVybWlzc2lvbigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaXNCdXR0b25EaXNhYmxlZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzYWJsZWQgPyB0cnVlIDogdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIG9uRmlsZXNBZGRlZCgkZXZlbnQ6IGFueSk6IHZvaWQge1xuICAgICAgICBsZXQgZmlsZXM6IEZpbGVbXSA9IEZpbGVVdGlscy50b0ZpbGVBcnJheSgkZXZlbnQuY3VycmVudFRhcmdldC5maWxlcyk7XG5cbiAgICAgICAgaWYgKHRoaXMuaGFzUGVybWlzc2lvbikge1xuICAgICAgICAgICAgdGhpcy51cGxvYWRGaWxlcyhmaWxlcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBlcm1pc3Npb25FdmVudC5lbWl0KG5ldyBQZXJtaXNzaW9uTW9kZWwoeyB0eXBlOiAnY29udGVudCcsIGFjdGlvbjogJ3VwbG9hZCcsIHBlcm1pc3Npb246ICdjcmVhdGUnIH0pKTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZXNldCB0aGUgdmFsdWUgb2YgdGhlIGlucHV0IGZpbGVcbiAgICAgICAgJGV2ZW50LnRhcmdldC52YWx1ZSA9ICcnO1xuICAgIH1cblxuICAgIG9uRGlyZWN0b3J5QWRkZWQoJGV2ZW50OiBhbnkpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzUGVybWlzc2lvbikge1xuICAgICAgICAgICAgbGV0IGZpbGVzOiBGaWxlW10gPSBGaWxlVXRpbHMudG9GaWxlQXJyYXkoJGV2ZW50LmN1cnJlbnRUYXJnZXQuZmlsZXMpO1xuICAgICAgICAgICAgdGhpcy51cGxvYWRGaWxlcyhmaWxlcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBlcm1pc3Npb25FdmVudC5lbWl0KG5ldyBQZXJtaXNzaW9uTW9kZWwoeyB0eXBlOiAnY29udGVudCcsIGFjdGlvbjogJ3VwbG9hZCcsIHBlcm1pc3Npb246ICdjcmVhdGUnIH0pKTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZXNldCB0aGUgdmFsdWUgb2YgdGhlIGlucHV0IGZpbGVcbiAgICAgICAgJGV2ZW50LnRhcmdldC52YWx1ZSA9ICcnO1xuICAgIH1cblxuICAgIGNoZWNrUGVybWlzc2lvbigpIHtcbiAgICAgICAgaWYgKHRoaXMucm9vdEZvbGRlcklkKSB7XG4gICAgICAgICAgICBsZXQgb3B0czogYW55ID0ge1xuICAgICAgICAgICAgICAgIGluY2x1ZGVTb3VyY2U6IHRydWUsXG4gICAgICAgICAgICAgICAgaW5jbHVkZTogWydhbGxvd2FibGVPcGVyYXRpb25zJ11cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMuY29udGVudFNlcnZpY2UuZ2V0Tm9kZSh0aGlzLnJvb3RGb2xkZXJJZCwgb3B0cykuc3Vic2NyaWJlKFxuICAgICAgICAgICAgICAgIHJlcyA9PiB0aGlzLnBlcm1pc3Npb25WYWx1ZS5uZXh0KHRoaXMubm9kZUhhc1Blcm1pc3Npb24ocmVzLmVudHJ5LCBQZXJtaXNzaW9uc0VudW0uQ1JFQVRFKSksXG4gICAgICAgICAgICAgICAgZXJyb3IgPT4gdGhpcy5lcnJvci5lbWl0KGVycm9yKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG5vZGVIYXNQZXJtaXNzaW9uKG5vZGU6IE1pbmltYWxOb2RlRW50cnlFbnRpdHksIHBlcm1pc3Npb246IFBlcm1pc3Npb25zRW51bSB8IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50U2VydmljZS5oYXNQZXJtaXNzaW9uKG5vZGUsIHBlcm1pc3Npb24pO1xuICAgIH1cbn1cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IFBlcm1pc3Npb25zRW51bSAgfSBmcm9tICdAYWxmcmVzY28vYWRmLWNvcmUnO1xuaW1wb3J0IHsgQ29tcG9uZW50LCBmb3J3YXJkUmVmLCBJbnB1dCwgT25DaGFuZ2VzLCBWaWV3RW5jYXBzdWxhdGlvbiwgT25Jbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBNaW5pbWFsTm9kZUVudHJ5RW50aXR5IH0gZnJvbSAnYWxmcmVzY28tanMtYXBpJztcbmltcG9ydCB7IFVwbG9hZEJ1dHRvbkNvbXBvbmVudCB9IGZyb20gJy4vdXBsb2FkLWJ1dHRvbi5jb21wb25lbnQnO1xuaW1wb3J0IHsgRmlsZU1vZGVsLCBFWFRFTkRJQkxFX0NPTVBPTkVOVCB9IGZyb20gJ0BhbGZyZXNjby9hZGYtY29yZSc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnYWRmLXVwbG9hZC12ZXJzaW9uLWJ1dHRvbicsXG4gICAgdGVtcGxhdGVVcmw6ICcuL3VwbG9hZC1idXR0b24uY29tcG9uZW50Lmh0bWwnLFxuICAgIHN0eWxlVXJsczogWycuL3VwbG9hZC1idXR0b24uY29tcG9uZW50LnNjc3MnXSxcbiAgICB2aWV3UHJvdmlkZXJzOiBbXG4gICAgICAgIHsgcHJvdmlkZTogRVhURU5ESUJMRV9DT01QT05FTlQsIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IFVwbG9hZFZlcnNpb25CdXR0b25Db21wb25lbnQpIH1cbiAgICBdLFxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmVcbn0pXG5leHBvcnQgY2xhc3MgVXBsb2FkVmVyc2lvbkJ1dHRvbkNvbXBvbmVudCBleHRlbmRzIFVwbG9hZEJ1dHRvbkNvbXBvbmVudCBpbXBsZW1lbnRzIE9uQ2hhbmdlcywgT25Jbml0IHtcblxuICAgIC8qKiAoKipSZXF1aXJlZCoqKSBUaGUgbm9kZSB0byBiZSB2ZXJzaW9uZWQuICovXG4gICAgQElucHV0KClcbiAgICBub2RlOiBNaW5pbWFsTm9kZUVudHJ5RW50aXR5O1xuXG4gICAgcHJvdGVjdGVkIGNyZWF0ZUZpbGVNb2RlbChmaWxlOiBGaWxlKTogRmlsZU1vZGVsIHtcbiAgICAgICAgY29uc3QgZmlsZU1vZGVsID0gc3VwZXIuY3JlYXRlRmlsZU1vZGVsKGZpbGUsIHRoaXMucm9vdEZvbGRlcklkLCAoZmlsZS53ZWJraXRSZWxhdGl2ZVBhdGggfHwgJycpLnJlcGxhY2UoL1xcL1teXFwvXSokLywgJycpLCB0aGlzLm5vZGUuaWQpO1xuXG4gICAgICAgIGlmICghdGhpcy5pc0ZpbGVBY2NlcHRhYmxlKGZpbGVNb2RlbCkpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLnRyYW5zbGF0aW9uU2VydmljZS5pbnN0YW50KCdGSUxFX1VQTE9BRC5WRVJTSU9OLk1FU1NBR0VTLklOQ09NUEFUSUJMRV9WRVJTSU9OJyk7XG4gICAgICAgICAgICB0aGlzLmVycm9yLmVtaXQobWVzc2FnZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmlsZU1vZGVsO1xuICAgIH1cblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICBzdXBlci5uZ09uSW5pdCgpO1xuICAgICAgICB0aGlzLmNoZWNrUGVybWlzc2lvbigpO1xuICAgIH1cblxuICAgIGNoZWNrUGVybWlzc2lvbigpIHtcbiAgICAgICAgdGhpcy5wZXJtaXNzaW9uVmFsdWUubmV4dCh0aGlzLm5vZGVIYXNQZXJtaXNzaW9uKHRoaXMubm9kZSwgUGVybWlzc2lvbnNFbnVtLlVQREFURSkpO1xuICAgIH1cbn1cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gICAgRVhURU5ESUJMRV9DT01QT05FTlQsIEZpbGVJbmZvLCBGaWxlTW9kZWwsIEZpbGVVdGlscywgTm9kZVBlcm1pc3Npb25TdWJqZWN0LFxuICAgIE5vdGlmaWNhdGlvblNlcnZpY2UsIFRyYW5zbGF0aW9uU2VydmljZSwgVXBsb2FkU2VydmljZSwgQ29udGVudFNlcnZpY2UsIFBlcm1pc3Npb25zRW51bVxufSBmcm9tICdAYWxmcmVzY28vYWRmLWNvcmUnO1xuaW1wb3J0IHsgQ29tcG9uZW50LCBmb3J3YXJkUmVmLCBJbnB1dCwgVmlld0VuY2Fwc3VsYXRpb24sIE5nWm9uZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgVXBsb2FkQmFzZSB9IGZyb20gJy4vYmFzZS11cGxvYWQvdXBsb2FkLWJhc2UnO1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ2FkZi11cGxvYWQtZHJhZy1hcmVhJyxcbiAgICB0ZW1wbGF0ZVVybDogJy4vdXBsb2FkLWRyYWctYXJlYS5jb21wb25lbnQuaHRtbCcsXG4gICAgc3R5bGVVcmxzOiBbJy4vdXBsb2FkLWRyYWctYXJlYS5jb21wb25lbnQuY3NzJ10sXG4gICAgaG9zdDogeyAnY2xhc3MnOiAnYWRmLXVwbG9hZC1kcmFnLWFyZWEnIH0sXG4gICAgdmlld1Byb3ZpZGVyczogW1xuICAgICAgICB7IHByb3ZpZGU6IEVYVEVORElCTEVfQ09NUE9ORU5ULCB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBVcGxvYWREcmFnQXJlYUNvbXBvbmVudCkgfVxuICAgIF0sXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZVxufSlcbmV4cG9ydCBjbGFzcyBVcGxvYWREcmFnQXJlYUNvbXBvbmVudCBleHRlbmRzIFVwbG9hZEJhc2UgaW1wbGVtZW50cyBOb2RlUGVybWlzc2lvblN1YmplY3Qge1xuXG4gICAgLyoqXG4gICAgICogSUQgb2YgcGFyZW50IGZvbGRlciBub2RlXG4gICAgICogQGRlcHJlY2F0ZWQgMi40LjAgLSB1c2Ugcm9vdEZvbGRlcklkIElEIG9mIHBhcmVudCBmb2xkZXIgbm9kZVxuICAgICAqL1xuICAgIEBJbnB1dCgpXG4gICAgc2V0IHBhcmVudElkKG5vZGVJZDogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMucm9vdEZvbGRlcklkID0gbm9kZUlkO1xuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCB1cGxvYWRTZXJ2aWNlOiBVcGxvYWRTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIHByb3RlY3RlZCB0cmFuc2xhdGlvblNlcnZpY2U6IFRyYW5zbGF0aW9uU2VydmljZSxcbiAgICAgICAgICAgICAgICBwcml2YXRlIG5vdGlmaWNhdGlvblNlcnZpY2U6IE5vdGlmaWNhdGlvblNlcnZpY2UsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSBjb250ZW50U2VydmljZTogQ29udGVudFNlcnZpY2UsXG4gICAgICAgICAgICAgICAgcHJvdGVjdGVkIG5nWm9uZTogTmdab25lKSB7XG4gICAgICAgIHN1cGVyKHVwbG9hZFNlcnZpY2UsIHRyYW5zbGF0aW9uU2VydmljZSwgbmdab25lKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNZXRob2QgY2FsbGVkIHdoZW4gZmlsZXMgYXJlIGRyb3BwZWQgaW4gdGhlIGRyYWcgYXJlYS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWxlcyAtIGZpbGVzIGRyb3BwZWQgaW4gdGhlIGRyYWcgYXJlYS5cbiAgICAgKi9cbiAgICBvbkZpbGVzRHJvcHBlZChmaWxlczogRmlsZVtdKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5kaXNhYmxlZCAmJiBmaWxlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMudXBsb2FkRmlsZXMoZmlsZXMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdoZW4gdGhlIGZpbGUgYXJlIGRyb3BwZWQgaW4gdGhlIGRyYWcgYXJlYS5cbiAgICAgKiBAZGVwcmVjYXRlZCBpbiAyLjQuMDogdXNlIGBvbkZpbGVzRHJvcHBlZGAgaW5zdGVhZFxuICAgICAqIEBwYXJhbSBpdGVtIC0gRmlsZUVudGl0eVxuICAgICAqL1xuICAgIG9uRmlsZXNFbnRpdHlEcm9wcGVkKGl0ZW06IGFueSk6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIGl0ZW0uZmlsZSgoZmlsZTogRmlsZSkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIGNvbnN0IGZpbGVNb2RlbCA9IHRoaXMuY3JlYXRlRmlsZU1vZGVsKGZpbGUsIHRoaXMucm9vdEZvbGRlcklkLCBpdGVtLmZ1bGxQYXRoLnJlcGxhY2UoaXRlbS5uYW1lLCAnJykpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy51cGxvYWRGaWxlcyhbZmlsZV0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgd2hlbiBhIGZvbGRlciBhcmUgZHJvcHBlZCBpbiB0aGUgZHJhZyBhcmVhXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZm9sZGVyIC0gbmFtZSBvZiB0aGUgZHJvcHBlZCBmb2xkZXJcbiAgICAgKi9cbiAgICBvbkZvbGRlckVudGl0eURyb3BwZWQoZm9sZGVyOiBhbnkpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLmRpc2FibGVkICYmIGZvbGRlci5pc0RpcmVjdG9yeSkge1xuICAgICAgICAgICAgRmlsZVV0aWxzLmZsYXR0ZXJuKGZvbGRlcikudGhlbihmaWxlc0luZm8gPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkRmlsZXNJbmZvKGZpbGVzSW5mbyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNob3cgdW5kbyBub3RpZmljYXRpb24gYmFyLlxuICAgICAqXG4gICAgICogQHBhcmFtIGxhdGVzdEZpbGVzQWRkZWQgLSBmaWxlcyBpbiB0aGUgdXBsb2FkIHF1ZXVlIGVucmljaGVkIHdpdGggc3RhdHVzIGZsYWcgYW5kIHhociBvYmplY3QuXG4gICAgICovXG4gICAgc2hvd1VuZG9Ob3RpZmljYXRpb25CYXIobGF0ZXN0RmlsZXNBZGRlZDogRmlsZU1vZGVsW10pIHtcbiAgICAgICAgbGV0IG1lc3NhZ2VUcmFuc2xhdGU6IGFueSwgYWN0aW9uVHJhbnNsYXRlOiBhbnk7XG4gICAgICAgIG1lc3NhZ2VUcmFuc2xhdGUgPSB0aGlzLnRyYW5zbGF0aW9uU2VydmljZS5nZXQoJ0ZJTEVfVVBMT0FELk1FU1NBR0VTLlBST0dSRVNTJyk7XG4gICAgICAgIGFjdGlvblRyYW5zbGF0ZSA9IHRoaXMudHJhbnNsYXRpb25TZXJ2aWNlLmdldCgnRklMRV9VUExPQUQuQUNUSU9OLlVORE8nKTtcblxuICAgICAgICB0aGlzLm5vdGlmaWNhdGlvblNlcnZpY2Uub3BlblNuYWNrTWVzc2FnZUFjdGlvbihtZXNzYWdlVHJhbnNsYXRlLnZhbHVlLCBhY3Rpb25UcmFuc2xhdGUudmFsdWUsIDMwMDApLm9uQWN0aW9uKCkuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudXBsb2FkU2VydmljZS5jYW5jZWxVcGxvYWQoLi4ubGF0ZXN0RmlsZXNBZGRlZCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKiBSZXR1cm5zIHRydWUgb3IgZmFsc2UgY29uc2lkZXJpbmcgdGhlIGNvbXBvbmVudCBvcHRpb25zIGFuZCBub2RlIHBlcm1pc3Npb25zICovXG4gICAgaXNEcm9wcGFibGUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhdGhpcy5kaXNhYmxlZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzICd1cGxvYWQtZmlsZXMnIGV2ZW50cyByYWlzZWQgYnkgY2hpbGQgY29tcG9uZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBldmVudCBET00gZXZlbnRcbiAgICAgKi9cbiAgICBvblVwbG9hZEZpbGVzKGV2ZW50OiBDdXN0b21FdmVudCkge1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgbGV0IGlzQWxsb3dlZDogYm9vbGVhbiA9IHRoaXMuY29udGVudFNlcnZpY2UuaGFzUGVybWlzc2lvbihldmVudC5kZXRhaWwuZGF0YS5vYmouZW50cnksIFBlcm1pc3Npb25zRW51bS5DUkVBVEUpO1xuICAgICAgICBpZiAoaXNBbGxvd2VkKSB7XG4gICAgICAgICAgICBsZXQgZmlsZUluZm86IEZpbGVJbmZvW10gPSBldmVudC5kZXRhaWwuZmlsZXM7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1RhcmdldE5vZGVGb2xkZXIoZXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVzdGluYXRpb25Gb2xkZXJOYW1lID0gZXZlbnQuZGV0YWlsLmRhdGEub2JqLmVudHJ5Lm5hbWU7XG4gICAgICAgICAgICAgICAgZmlsZUluZm8ubWFwKChmaWxlKSA9PiBmaWxlLnJlbGF0aXZlRm9sZGVyID0gZGVzdGluYXRpb25Gb2xkZXJOYW1lID8gZGVzdGluYXRpb25Gb2xkZXJOYW1lLmNvbmNhdChmaWxlLnJlbGF0aXZlRm9sZGVyKSA6IGZpbGUucmVsYXRpdmVGb2xkZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGZpbGVJbmZvICYmIGZpbGVJbmZvLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZEZpbGVzSW5mbyhmaWxlSW5mbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGlzVGFyZ2V0Tm9kZUZvbGRlcihldmVudDogQ3VzdG9tRXZlbnQpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGV2ZW50LmRldGFpbC5kYXRhLm9iaiAmJiBldmVudC5kZXRhaWwuZGF0YS5vYmouZW50cnkuaXNGb2xkZXI7XG4gICAgfVxuXG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKiB0c2xpbnQ6ZGlzYWJsZTpuby1pbnB1dC1yZW5hbWUgICovXG5cbmltcG9ydCB7IEZpbGVVdGlscyB9IGZyb20gJ0BhbGZyZXNjby9hZGYtY29yZSc7XG5pbXBvcnQgeyBEaXJlY3RpdmUsIEVsZW1lbnRSZWYsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE5nWm9uZSwgT25EZXN0cm95LCBPbkluaXQsIE91dHB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5ARGlyZWN0aXZlKHtcbiAgICBzZWxlY3RvcjogJ1tmaWxlLWRyYWdnYWJsZV0nXG59KVxuZXhwb3J0IGNsYXNzIEZpbGVEcmFnZ2FibGVEaXJlY3RpdmUgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSB7XG5cbiAgICBmaWxlczogRmlsZSBbXTtcblxuICAgIC8qKiBFbmFibGVzL2Rpc2FibGVzIGRyYWctYW5kLWRyb3AgZnVuY3Rpb25hbGl0eS4gKi9cbiAgICBASW5wdXQoJ2ZpbGUtZHJhZ2dhYmxlJylcbiAgICBlbmFibGVkOiBib29sZWFuID0gdHJ1ZTtcblxuICAgIC8qKiBFbWl0dGVkIHdoZW4gb25lIG9yIG1vcmUgZmlsZXMgYXJlIGRyYWdnZWQgYW5kIGRyb3BwZWQgb250byB0aGUgZHJhZ2dhYmxlIGVsZW1lbnQuICovXG4gICAgQE91dHB1dCgpXG4gICAgZmlsZXNEcm9wcGVkOiBFdmVudEVtaXR0ZXI8RmlsZVtdPiA9IG5ldyBFdmVudEVtaXR0ZXI8RmlsZVtdPigpO1xuXG4gICAgLyoqXG4gICAgICogRW1pdHRlZCB3aGVuIG9uZSBvciBtb3JlIGZpbGVzIGFyZSBkcmFnZ2VkIGFuZCBkcm9wcGVkIG9udG8gdGhlIGRyYWdnYWJsZSBlbGVtZW50LlxuICAgICAqIEBkZXByZWNhdGVkIGluIDIuNC4wOiB1c2UgYGZpbGVzRHJvcHBlZGAgaW5zdGVhZFxuICAgICAqL1xuICAgIEBPdXRwdXQoKVxuICAgIGZpbGVzRW50aXR5RHJvcHBlZDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgICAvKiogRW1pdHRlZCB3aGVuIGEgZGlyZWN0b3J5IGlzIGRyYWdnZWQgYW5kIGRyb3BwZWQgb250byB0aGUgZHJhZ2dhYmxlIGVsZW1lbnQuICovXG4gICAgQE91dHB1dCgpXG4gICAgZm9sZGVyRW50aXR5RHJvcHBlZDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgICBwcml2YXRlIGNzc0NsYXNzTmFtZTogc3RyaW5nID0gJ2ZpbGUtZHJhZ2dhYmxlX19pbnB1dC1mb2N1cyc7XG4gICAgcHJpdmF0ZSBlbGVtZW50OiBIVE1MRWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKGVsOiBFbGVtZW50UmVmLCBwcml2YXRlIG5nWm9uZTogTmdab25lKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsLm5hdGl2ZUVsZW1lbnQ7XG4gICAgfVxuXG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW50ZXInLCB0aGlzLm9uRHJhZ0VudGVyLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgdGhpcy5vbkRyYWdPdmVyLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIHRoaXMub25EcmFnTGVhdmUuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIHRoaXMub25Ecm9wRmlsZXMuYmluZCh0aGlzKSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJhZ2VudGVyJywgdGhpcy5vbkRyYWdFbnRlcik7XG4gICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIHRoaXMub25EcmFnT3Zlcik7XG4gICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCB0aGlzLm9uRHJhZ0xlYXZlKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCB0aGlzLm9uRHJvcEZpbGVzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNZXRob2QgY2FsbGVkIHdoZW4gZmlsZXMgaXMgZHJvcHBlZCBpbiB0aGUgZHJhZyBhbmQgZHJvcCBhcmVhLlxuICAgICAqIEBwYXJhbSBldmVudCBET00gZXZlbnQuXG4gICAgICovXG4gICAgb25Ecm9wRmlsZXMoZXZlbnQ6IGFueSk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5lbmFibGVkICYmICFldmVudC5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgICAgICB0aGlzLnByZXZlbnREZWZhdWx0KGV2ZW50KTtcblxuICAgICAgICAgICAgLy8gQ2hyb21lLCBFZGdlLCBGaXJlZm94LCBPcGVyYSAoRmlsZXMgKyBGb2xkZXJzKVxuICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBldmVudC5kYXRhVHJhbnNmZXIuaXRlbXM7XG4gICAgICAgICAgICBpZiAoaXRlbXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlczogRmlsZVtdID0gW107XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtc1tpXS53ZWJraXRHZXRBc0VudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gaXRlbXNbaV0ud2Via2l0R2V0QXNFbnRyeSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmlzRmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gaXRlbXNbaV0uZ2V0QXNGaWxlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVzLnB1c2goZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0uaXNEaXJlY3RvcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2xkZXJFbnRpdHlEcm9wcGVkLmVtaXQoaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmaWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsZXNEcm9wcGVkLmVtaXQoZmlsZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gSUUsIFNhZmFyaSwgQ2hyb21lLCBFZGdlLCBGaXJlZm94LCBPcGVyYSAoRmlsZXMgb25seSlcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlcyA9IEZpbGVVdGlscy50b0ZpbGVBcnJheShldmVudC5kYXRhVHJhbnNmZXIuZmlsZXMpO1xuICAgICAgICAgICAgICAgIHRoaXMuZmlsZXNEcm9wcGVkLmVtaXQoZmlsZXMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmNzc0NsYXNzTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGFuZ2UgdGhlIHN0eWxlIG9mIHRoZSBkcmFnIGFyZWEgd2hlbiBhIGZpbGUgZHJhZyBpbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBldmVudCAtIERPTSBldmVudC5cbiAgICAgKi9cbiAgICBvbkRyYWdFbnRlcihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlZCAmJiAhZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICAgICAgdGhpcy5wcmV2ZW50RGVmYXVsdChldmVudCk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLmNzc0NsYXNzTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGFuZ2UgdGhlIHN0eWxlIG9mIHRoZSBkcmFnIGFyZWEgd2hlbiBhIGZpbGUgZHJhZyBvdXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZXZlbnQgLSBET00gZXZlbnQuXG4gICAgICovXG4gICAgb25EcmFnTGVhdmUoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmVuYWJsZWQgJiYgIWV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgICAgICAgIHRoaXMucHJldmVudERlZmF1bHQoZXZlbnQpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5jc3NDbGFzc05hbWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hhbmdlIHRoZSBzdHlsZSBvZiB0aGUgZHJhZyBhcmVhIHdoZW4gYSBmaWxlIGlzIG92ZXIgdGhlIGRyYWcgYXJlYS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBldmVudFxuICAgICAqL1xuICAgIG9uRHJhZ092ZXIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmVuYWJsZWQgJiYgIWV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgICAgICAgIHRoaXMucHJldmVudERlZmF1bHQoZXZlbnQpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5jc3NDbGFzc05hbWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHJldmVudCBkZWZhdWx0IGFuZCBzdG9wIHByb3BhZ2F0aW9uIG9mIHRoZSBET00gZXZlbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gJGV2ZW50IC0gRE9NIGV2ZW50LlxuICAgICAqL1xuICAgIHByZXZlbnREZWZhdWx0KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgTWF0ZXJpYWxNb2R1bGUgfSBmcm9tICcuLi9tYXRlcmlhbC5tb2R1bGUnO1xuaW1wb3J0IHsgRmlsZVVwbG9hZGluZ0RpYWxvZ0NvbXBvbmVudCB9IGZyb20gJy4vY29tcG9uZW50cy9maWxlLXVwbG9hZGluZy1kaWFsb2cuY29tcG9uZW50JztcbmltcG9ydCB7IEZpbGVVcGxvYWRpbmdMaXN0Um93Q29tcG9uZW50IH0gZnJvbSAnLi9jb21wb25lbnRzL2ZpbGUtdXBsb2FkaW5nLWxpc3Qtcm93LmNvbXBvbmVudCc7XG5pbXBvcnQgeyBGaWxlVXBsb2FkaW5nTGlzdENvbXBvbmVudCB9IGZyb20gJy4vY29tcG9uZW50cy9maWxlLXVwbG9hZGluZy1saXN0LmNvbXBvbmVudCc7XG5pbXBvcnQgeyBVcGxvYWRCdXR0b25Db21wb25lbnQgfSBmcm9tICcuL2NvbXBvbmVudHMvdXBsb2FkLWJ1dHRvbi5jb21wb25lbnQnO1xuaW1wb3J0IHsgVXBsb2FkVmVyc2lvbkJ1dHRvbkNvbXBvbmVudCB9IGZyb20gJy4vY29tcG9uZW50cy91cGxvYWQtdmVyc2lvbi1idXR0b24uY29tcG9uZW50JztcbmltcG9ydCB7IFVwbG9hZERyYWdBcmVhQ29tcG9uZW50IH0gZnJvbSAnLi9jb21wb25lbnRzL3VwbG9hZC1kcmFnLWFyZWEuY29tcG9uZW50JztcblxuaW1wb3J0IHsgQ29yZU1vZHVsZSB9IGZyb20gJ0BhbGZyZXNjby9hZGYtY29yZSc7XG5pbXBvcnQgeyBGaWxlRHJhZ2dhYmxlRGlyZWN0aXZlIH0gZnJvbSAnLi9kaXJlY3RpdmVzL2ZpbGUtZHJhZ2dhYmxlLmRpcmVjdGl2ZSc7XG5cbkBOZ01vZHVsZSh7XG4gICAgaW1wb3J0czogW1xuICAgICAgICBDb3JlTW9kdWxlLmZvckNoaWxkKCksXG4gICAgICAgIENvbW1vbk1vZHVsZSxcbiAgICAgICAgTWF0ZXJpYWxNb2R1bGVcbiAgICBdLFxuICAgIGRlY2xhcmF0aW9uczogW1xuICAgICAgICBGaWxlRHJhZ2dhYmxlRGlyZWN0aXZlLFxuICAgICAgICBVcGxvYWREcmFnQXJlYUNvbXBvbmVudCxcbiAgICAgICAgVXBsb2FkQnV0dG9uQ29tcG9uZW50LFxuICAgICAgICBVcGxvYWRWZXJzaW9uQnV0dG9uQ29tcG9uZW50LFxuICAgICAgICBGaWxlVXBsb2FkaW5nRGlhbG9nQ29tcG9uZW50LFxuICAgICAgICBGaWxlVXBsb2FkaW5nTGlzdENvbXBvbmVudCxcbiAgICAgICAgRmlsZVVwbG9hZGluZ0xpc3RSb3dDb21wb25lbnRcbiAgICBdLFxuICAgIGV4cG9ydHM6IFtcbiAgICAgICAgRmlsZURyYWdnYWJsZURpcmVjdGl2ZSxcbiAgICAgICAgVXBsb2FkRHJhZ0FyZWFDb21wb25lbnQsXG4gICAgICAgIFVwbG9hZEJ1dHRvbkNvbXBvbmVudCxcbiAgICAgICAgVXBsb2FkVmVyc2lvbkJ1dHRvbkNvbXBvbmVudCxcbiAgICAgICAgRmlsZVVwbG9hZGluZ0RpYWxvZ0NvbXBvbmVudCxcbiAgICAgICAgRmlsZVVwbG9hZGluZ0xpc3RDb21wb25lbnQsXG4gICAgICAgIEZpbGVVcGxvYWRpbmdMaXN0Um93Q29tcG9uZW50XG4gICAgXVxufSlcbmV4cG9ydCBjbGFzcyBVcGxvYWRNb2R1bGUge31cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRmxleExheW91dE1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2ZsZXgtbGF5b3V0JztcbmltcG9ydCB7IENvcmVNb2R1bGUgfSBmcm9tICdAYWxmcmVzY28vYWRmLWNvcmUnO1xuXG5pbXBvcnQgeyBNYXRlcmlhbE1vZHVsZSB9IGZyb20gJy4uL21hdGVyaWFsLm1vZHVsZSc7XG5pbXBvcnQgeyBVcGxvYWRNb2R1bGUgfSBmcm9tICcuLi91cGxvYWQvdXBsb2FkLm1vZHVsZSc7XG5cbmltcG9ydCB7IENvbnRlbnRBY3Rpb25MaXN0Q29tcG9uZW50IH0gZnJvbSAnLi9jb21wb25lbnRzL2NvbnRlbnQtYWN0aW9uL2NvbnRlbnQtYWN0aW9uLWxpc3QuY29tcG9uZW50JztcbmltcG9ydCB7IENvbnRlbnRBY3Rpb25Db21wb25lbnQgfSBmcm9tICcuL2NvbXBvbmVudHMvY29udGVudC1hY3Rpb24vY29udGVudC1hY3Rpb24uY29tcG9uZW50JztcbmltcG9ydCB7IENvbnRlbnRDb2x1bW5MaXN0Q29tcG9uZW50IH0gZnJvbSAnLi9jb21wb25lbnRzL2NvbnRlbnQtY29sdW1uL2NvbnRlbnQtY29sdW1uLWxpc3QuY29tcG9uZW50JztcbmltcG9ydCB7IENvbnRlbnRDb2x1bW5Db21wb25lbnQgfSBmcm9tICcuL2NvbXBvbmVudHMvY29udGVudC1jb2x1bW4vY29udGVudC1jb2x1bW4uY29tcG9uZW50JztcbmltcG9ydCB7IERvY3VtZW50TGlzdENvbXBvbmVudCB9IGZyb20gJy4vY29tcG9uZW50cy9kb2N1bWVudC1saXN0LmNvbXBvbmVudCc7XG5cbmltcG9ydCB7IEVtcHR5Rm9sZGVyQ29udGVudERpcmVjdGl2ZSB9IGZyb20gJy4vY29tcG9uZW50cy9lbXB0eS1mb2xkZXIvZW1wdHktZm9sZGVyLWNvbnRlbnQuZGlyZWN0aXZlJztcbmltcG9ydCB7IE5vUGVybWlzc2lvbkNvbnRlbnREaXJlY3RpdmUgfSBmcm9tICcuL2NvbXBvbmVudHMvbm8tcGVybWlzc2lvbi9uby1wZXJtaXNzaW9uLWNvbnRlbnQuZGlyZWN0aXZlJztcblxuQE5nTW9kdWxlKHtcbiAgICBpbXBvcnRzOiBbXG4gICAgICAgIENvcmVNb2R1bGUuZm9yQ2hpbGQoKSxcbiAgICAgICAgQ29tbW9uTW9kdWxlLFxuICAgICAgICBGbGV4TGF5b3V0TW9kdWxlLFxuICAgICAgICBNYXRlcmlhbE1vZHVsZSxcbiAgICAgICAgVXBsb2FkTW9kdWxlXG4gICAgXSxcbiAgICBkZWNsYXJhdGlvbnM6IFtcbiAgICAgICAgRG9jdW1lbnRMaXN0Q29tcG9uZW50LFxuICAgICAgICBDb250ZW50Q29sdW1uQ29tcG9uZW50LFxuICAgICAgICBDb250ZW50Q29sdW1uTGlzdENvbXBvbmVudCxcbiAgICAgICAgQ29udGVudEFjdGlvbkNvbXBvbmVudCxcbiAgICAgICAgQ29udGVudEFjdGlvbkxpc3RDb21wb25lbnQsXG4gICAgICAgIEVtcHR5Rm9sZGVyQ29udGVudERpcmVjdGl2ZSxcbiAgICAgICAgTm9QZXJtaXNzaW9uQ29udGVudERpcmVjdGl2ZVxuICAgIF0sXG4gICAgZXhwb3J0czogW1xuICAgICAgICBEb2N1bWVudExpc3RDb21wb25lbnQsXG4gICAgICAgIENvbnRlbnRDb2x1bW5Db21wb25lbnQsXG4gICAgICAgIENvbnRlbnRDb2x1bW5MaXN0Q29tcG9uZW50LFxuICAgICAgICBDb250ZW50QWN0aW9uQ29tcG9uZW50LFxuICAgICAgICBDb250ZW50QWN0aW9uTGlzdENvbXBvbmVudCxcbiAgICAgICAgRW1wdHlGb2xkZXJDb250ZW50RGlyZWN0aXZlLFxuICAgICAgICBOb1Blcm1pc3Npb25Db250ZW50RGlyZWN0aXZlXG4gICAgXVxufSlcbmV4cG9ydCBjbGFzcyBEb2N1bWVudExpc3RNb2R1bGUge31cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFN1YmplY3QgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IEFsZnJlc2NvQXBpU2VydmljZSwgQXBwQ29uZmlnU2VydmljZSB9IGZyb20gJ0BhbGZyZXNjby9hZGYtY29yZSc7XG5pbXBvcnQgeyBRdWVyeUJvZHksIFJlcXVlc3RGYWNldEZpZWxkcywgUmVxdWVzdEZhY2V0RmllbGQsIFJlcXVlc3RTb3J0RGVmaW5pdGlvbklubmVyIH0gZnJvbSAnYWxmcmVzY28tanMtYXBpJztcbmltcG9ydCB7IFNlYXJjaENhdGVnb3J5IH0gZnJvbSAnLi9zZWFyY2gtY2F0ZWdvcnkuaW50ZXJmYWNlJztcbmltcG9ydCB7IEZpbHRlclF1ZXJ5IH0gZnJvbSAnLi9maWx0ZXItcXVlcnkuaW50ZXJmYWNlJztcbmltcG9ydCB7IFNlYXJjaFJhbmdlIH0gZnJvbSAnLi9zZWFyY2gtcmFuZ2UuaW50ZXJmYWNlJztcbmltcG9ydCB7IFNlYXJjaENvbmZpZ3VyYXRpb24gfSBmcm9tICcuL3NlYXJjaC1jb25maWd1cmF0aW9uLmludGVyZmFjZSc7XG5pbXBvcnQgeyBGYWNldFF1ZXJ5IH0gZnJvbSAnLi9mYWNldC1xdWVyeS5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgU2VhcmNoU29ydGluZ0RlZmluaXRpb24gfSBmcm9tICcuL3NlYXJjaC1zb3J0aW5nLWRlZmluaXRpb24uaW50ZXJmYWNlJztcbmltcG9ydCB7IEZhY2V0RmllbGQgfSBmcm9tICcuL2ZhY2V0LWZpZWxkLmludGVyZmFjZSc7XG5pbXBvcnQgeyBGYWNldEZpZWxkQnVja2V0IH0gZnJvbSAnLi9mYWNldC1maWVsZC1idWNrZXQuaW50ZXJmYWNlJztcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIFNlYXJjaFF1ZXJ5QnVpbGRlclNlcnZpY2Uge1xuXG4gICAgcHJpdmF0ZSBfdXNlclF1ZXJ5ID0gJyc7XG5cbiAgICB1cGRhdGVkOiBTdWJqZWN0PFF1ZXJ5Qm9keT4gPSBuZXcgU3ViamVjdCgpO1xuICAgIGV4ZWN1dGVkOiBTdWJqZWN0PGFueT4gPSBuZXcgU3ViamVjdCgpO1xuXG4gICAgY2F0ZWdvcmllczogQXJyYXk8U2VhcmNoQ2F0ZWdvcnk+ID0gW107XG4gICAgcXVlcnlGcmFnbWVudHM6IHsgW2lkOiBzdHJpbmddOiBzdHJpbmcgfSA9IHt9O1xuICAgIGZpbHRlclF1ZXJpZXM6IEZpbHRlclF1ZXJ5W10gPSBbXTtcbiAgICBwYWdpbmc6IHsgbWF4SXRlbXM/OiBudW1iZXI7IHNraXBDb3VudD86IG51bWJlciB9ID0gbnVsbDtcbiAgICBzb3J0aW5nOiBBcnJheTxTZWFyY2hTb3J0aW5nRGVmaW5pdGlvbj4gPSBbXTtcblxuICAgIHByb3RlY3RlZCB1c2VyRmFjZXRRdWVyaWVzOiBGYWNldFF1ZXJ5W10gPSBbXTtcbiAgICBwcm90ZWN0ZWQgdXNlckZhY2V0QnVja2V0czogeyBba2V5OiBzdHJpbmddOiBBcnJheTxGYWNldEZpZWxkQnVja2V0PiB9ID0ge307XG5cbiAgICBnZXQgdXNlclF1ZXJ5KCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLl91c2VyUXVlcnk7XG4gICAgfVxuXG4gICAgc2V0IHVzZXJRdWVyeSh2YWx1ZTogc3RyaW5nKSB7XG4gICAgICAgIHZhbHVlID0gKHZhbHVlIHx8ICcnKS50cmltKCk7XG4gICAgICAgIHRoaXMuX3VzZXJRdWVyeSA9IHZhbHVlID8gYCgke3ZhbHVlfSlgIDogJyc7XG4gICAgfVxuXG4gICAgY29uZmlnOiBTZWFyY2hDb25maWd1cmF0aW9uO1xuXG4gICAgLy8gVE9ETzogdG8gYmUgc3VwcG9ydGVkIGluIGZ1dHVyZSBpdGVyYXRpb25zXG4gICAgcmFuZ2VzOiB7IFtpZDogc3RyaW5nXTogU2VhcmNoUmFuZ2UgfSA9IHt9O1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBhcHBDb25maWc6IEFwcENvbmZpZ1NlcnZpY2UsIHByaXZhdGUgYWxmcmVzY29BcGlTZXJ2aWNlOiBBbGZyZXNjb0FwaVNlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5yZXNldFRvRGVmYXVsdHMoKTtcbiAgICB9XG5cbiAgICByZXNldFRvRGVmYXVsdHMoKSB7XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlID0gdGhpcy5hcHBDb25maWcuZ2V0PFNlYXJjaENvbmZpZ3VyYXRpb24+KCdzZWFyY2gnKTtcbiAgICAgICAgaWYgKHRlbXBsYXRlKSB7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGVtcGxhdGUpKTtcbiAgICAgICAgICAgIHRoaXMuY2F0ZWdvcmllcyA9ICh0aGlzLmNvbmZpZy5jYXRlZ29yaWVzIHx8IFtdKS5maWx0ZXIoY2F0ZWdvcnkgPT4gY2F0ZWdvcnkuZW5hYmxlZCk7XG4gICAgICAgICAgICB0aGlzLmZpbHRlclF1ZXJpZXMgPSB0aGlzLmNvbmZpZy5maWx0ZXJRdWVyaWVzIHx8IFtdO1xuICAgICAgICAgICAgdGhpcy51c2VyRmFjZXRCdWNrZXRzID0ge307XG4gICAgICAgICAgICB0aGlzLnVzZXJGYWNldFF1ZXJpZXMgPSBbXTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5zb3J0aW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zb3J0aW5nID0gdGhpcy5jb25maWcuc29ydGluZy5kZWZhdWx0cyB8fCBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFkZFVzZXJGYWNldFF1ZXJ5KHF1ZXJ5OiBGYWNldFF1ZXJ5KSB7XG4gICAgICAgIGlmIChxdWVyeSkge1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmcgPSB0aGlzLnVzZXJGYWNldFF1ZXJpZXMuZmluZChmYWNldFF1ZXJ5ID0+IGZhY2V0UXVlcnkubGFiZWwgPT09IHF1ZXJ5LmxhYmVsKTtcbiAgICAgICAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICAgICAgICAgIGV4aXN0aW5nLnF1ZXJ5ID0gcXVlcnkucXVlcnk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudXNlckZhY2V0UXVlcmllcy5wdXNoKHsgLi4ucXVlcnkgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW1vdmVVc2VyRmFjZXRRdWVyeShxdWVyeTogRmFjZXRRdWVyeSkge1xuICAgICAgICBpZiAocXVlcnkpIHtcbiAgICAgICAgICAgIHRoaXMudXNlckZhY2V0UXVlcmllcyA9IHRoaXMudXNlckZhY2V0UXVlcmllc1xuICAgICAgICAgICAgICAgIC5maWx0ZXIoZmFjZXRRdWVyeSA9PiBmYWNldFF1ZXJ5LmxhYmVsICE9PSBxdWVyeS5sYWJlbCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhZGRVc2VyRmFjZXRCdWNrZXQoZmllbGQ6IEZhY2V0RmllbGQsIGJ1Y2tldDogRmFjZXRGaWVsZEJ1Y2tldCkge1xuICAgICAgICBpZiAoZmllbGQgJiYgZmllbGQuZmllbGQgJiYgYnVja2V0KSB7XG4gICAgICAgICAgICBjb25zdCBidWNrZXRzID0gdGhpcy51c2VyRmFjZXRCdWNrZXRzW2ZpZWxkLmZpZWxkXSB8fCBbXTtcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gYnVja2V0cy5maW5kKGZhY2V0QnVja2V0ID0+IGZhY2V0QnVja2V0LmxhYmVsID09PSBidWNrZXQubGFiZWwpO1xuICAgICAgICAgICAgaWYgKCFleGlzdGluZykge1xuICAgICAgICAgICAgICAgIGJ1Y2tldHMucHVzaChidWNrZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51c2VyRmFjZXRCdWNrZXRzW2ZpZWxkLmZpZWxkXSA9IGJ1Y2tldHM7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRVc2VyRmFjZXRCdWNrZXRzKGZpZWxkOiBzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXNlckZhY2V0QnVja2V0c1tmaWVsZF0gfHwgW107XG4gICAgfVxuXG4gICAgcmVtb3ZlVXNlckZhY2V0QnVja2V0KGZpZWxkOiBGYWNldEZpZWxkLCBidWNrZXQ6IEZhY2V0RmllbGRCdWNrZXQpIHtcbiAgICAgICAgaWYgKGZpZWxkICYmIGZpZWxkLmZpZWxkICYmIGJ1Y2tldCkge1xuICAgICAgICAgICAgY29uc3QgYnVja2V0cyA9IHRoaXMudXNlckZhY2V0QnVja2V0c1tmaWVsZC5maWVsZF0gfHwgW107XG4gICAgICAgICAgICB0aGlzLnVzZXJGYWNldEJ1Y2tldHNbZmllbGQuZmllbGRdID0gYnVja2V0c1xuICAgICAgICAgICAgICAgIC5maWx0ZXIoZmFjZXRCdWNrZXQgPT4gZmFjZXRCdWNrZXQubGFiZWwgIT09IGJ1Y2tldC5sYWJlbCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhZGRGaWx0ZXJRdWVyeShxdWVyeTogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGlmIChxdWVyeSkge1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmcgPSB0aGlzLmZpbHRlclF1ZXJpZXMuZmluZChmaWx0ZXJRdWVyeSA9PiBmaWx0ZXJRdWVyeS5xdWVyeSA9PT0gcXVlcnkpO1xuICAgICAgICAgICAgaWYgKCFleGlzdGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyUXVlcmllcy5wdXNoKHsgcXVlcnk6IHF1ZXJ5IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVtb3ZlRmlsdGVyUXVlcnkocXVlcnk6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBpZiAocXVlcnkpIHtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyUXVlcmllcyA9IHRoaXMuZmlsdGVyUXVlcmllc1xuICAgICAgICAgICAgICAgIC5maWx0ZXIoZmlsdGVyUXVlcnkgPT4gZmlsdGVyUXVlcnkucXVlcnkgIT09IHF1ZXJ5KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldEZhY2V0UXVlcnkobGFiZWw6IHN0cmluZyk6IEZhY2V0UXVlcnkge1xuICAgICAgICBpZiAobGFiZWwgJiYgdGhpcy5oYXNGYWNldFF1ZXJpZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuY29uZmlnLmZhY2V0UXVlcmllcy5xdWVyaWVzLmZpbmQocXVlcnkgPT4gcXVlcnkubGFiZWwgPT09IGxhYmVsKTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5yZXN1bHQgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBnZXRGYWNldEZpZWxkKGxhYmVsOiBzdHJpbmcpOiBGYWNldEZpZWxkIHtcbiAgICAgICAgaWYgKGxhYmVsKSB7XG4gICAgICAgICAgICBjb25zdCBmaWVsZHMgPSB0aGlzLmNvbmZpZy5mYWNldEZpZWxkcy5maWVsZHMgfHwgW107XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBmaWVsZHMuZmluZChmaWVsZCA9PiBmaWVsZC5sYWJlbCA9PT0gbGFiZWwpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLnJlc3VsdCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHVwZGF0ZSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgcXVlcnkgPSB0aGlzLmJ1aWxkUXVlcnkoKTtcbiAgICAgICAgdGhpcy51cGRhdGVkLm5leHQocXVlcnkpO1xuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUoKSB7XG4gICAgICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy5idWlsZFF1ZXJ5KCk7XG4gICAgICAgIGlmIChxdWVyeSkge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuYWxmcmVzY29BcGlTZXJ2aWNlLnNlYXJjaEFwaS5zZWFyY2gocXVlcnkpO1xuICAgICAgICAgICAgdGhpcy5leGVjdXRlZC5uZXh0KGRhdGEpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYnVpbGRRdWVyeSgpOiBRdWVyeUJvZHkge1xuICAgICAgICBsZXQgcXVlcnkgPSB0aGlzLmdldEZpbmFsUXVlcnkoKTtcblxuICAgICAgICBjb25zdCBpbmNsdWRlID0gdGhpcy5jb25maWcuaW5jbHVkZSB8fCBbXTtcbiAgICAgICAgaWYgKGluY2x1ZGUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBpbmNsdWRlLnB1c2goJ3BhdGgnLCAnYWxsb3dhYmxlT3BlcmF0aW9ucycpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHF1ZXJ5KSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQ6IFF1ZXJ5Qm9keSA9IHtcbiAgICAgICAgICAgICAgICBxdWVyeToge1xuICAgICAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnksXG4gICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlOiAnYWZ0cydcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGluY2x1ZGU6IGluY2x1ZGUsXG4gICAgICAgICAgICAgICAgcGFnaW5nOiB0aGlzLnBhZ2luZyxcbiAgICAgICAgICAgICAgICBmaWVsZHM6IHRoaXMuY29uZmlnLmZpZWxkcyxcbiAgICAgICAgICAgICAgICBmaWx0ZXJRdWVyaWVzOiB0aGlzLmZpbHRlclF1ZXJpZXMsXG4gICAgICAgICAgICAgICAgZmFjZXRRdWVyaWVzOiB0aGlzLmZhY2V0UXVlcmllcyxcbiAgICAgICAgICAgICAgICBmYWNldEZpZWxkczogdGhpcy5mYWNldEZpZWxkcyxcbiAgICAgICAgICAgICAgICBzb3J0OiB0aGlzLnNvcnRcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHByaW1hcnkgc29ydGluZyBkZWZpbml0aW9uLlxuICAgICAqL1xuICAgIGdldFByaW1hcnlTb3J0aW5nKCk6IFNlYXJjaFNvcnRpbmdEZWZpbml0aW9uIHtcbiAgICAgICAgaWYgKHRoaXMuc29ydGluZyAmJiB0aGlzLnNvcnRpbmcubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc29ydGluZ1swXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFsbCBwcmUtY29uZmlndXJlZCBzb3J0aW5nIG9wdGlvbnMgdGhhdCB1c2VycyBjYW4gY2hvb3NlIGZyb20uXG4gICAgICovXG4gICAgZ2V0U29ydGluZ09wdGlvbnMoKTogU2VhcmNoU29ydGluZ0RlZmluaXRpb25bXSB7XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZyAmJiB0aGlzLmNvbmZpZy5zb3J0aW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25maWcuc29ydGluZy5vcHRpb25zIHx8IFtdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBGYWNldFF1ZXJpZXMgaGFzIGJlZW4gZGVmaW5lZFxuICAgICAqL1xuICAgIGdldCBoYXNGYWNldFF1ZXJpZXMoKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZ1xuICAgICAgICAgICAgJiYgdGhpcy5jb25maWcuZmFjZXRRdWVyaWVzXG4gICAgICAgICAgICAmJiB0aGlzLmNvbmZpZy5mYWNldFF1ZXJpZXMucXVlcmllc1xuICAgICAgICAgICAgJiYgdGhpcy5jb25maWcuZmFjZXRRdWVyaWVzLnF1ZXJpZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXQgc29ydCgpOiBSZXF1ZXN0U29ydERlZmluaXRpb25Jbm5lcltdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydGluZy5tYXAoZGVmID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdHlwZTogZGVmLnR5cGUsXG4gICAgICAgICAgICAgICAgZmllbGQ6IGRlZi5maWVsZCxcbiAgICAgICAgICAgICAgICBhc2NlbmRpbmc6IGRlZi5hc2NlbmRpbmdcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXQgZmFjZXRRdWVyaWVzKCk6IEZhY2V0UXVlcnlbXSB7XG4gICAgICAgIGlmICh0aGlzLmhhc0ZhY2V0UXVlcmllcykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnLmZhY2V0UXVlcmllcy5xdWVyaWVzLm1hcChxdWVyeSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDxGYWNldFF1ZXJ5PiB7IC4uLnF1ZXJ5IH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXRGaW5hbFF1ZXJ5KCk6IHN0cmluZyB7XG4gICAgICAgIGxldCBxdWVyeSA9ICcnO1xuXG4gICAgICAgIHRoaXMuY2F0ZWdvcmllcy5mb3JFYWNoKGZhY2V0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGN1c3RvbVF1ZXJ5ID0gdGhpcy5xdWVyeUZyYWdtZW50c1tmYWNldC5pZF07XG4gICAgICAgICAgICBpZiAoY3VzdG9tUXVlcnkpIHtcbiAgICAgICAgICAgICAgICBpZiAocXVlcnkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBxdWVyeSArPSAnIEFORCAnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBxdWVyeSArPSBgKCR7Y3VzdG9tUXVlcnl9KWA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCByZXN1bHQgPSBbdGhpcy51c2VyUXVlcnksIHF1ZXJ5XVxuICAgICAgICAgICAgLmZpbHRlcihlbnRyeSA9PiBlbnRyeSlcbiAgICAgICAgICAgIC5qb2luKCcgQU5EICcpO1xuXG4gICAgICAgIGlmICh0aGlzLnVzZXJGYWNldFF1ZXJpZXMgJiYgdGhpcy51c2VyRmFjZXRRdWVyaWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbWJpbmVkID0gdGhpcy51c2VyRmFjZXRRdWVyaWVzXG4gICAgICAgICAgICAgICAgLm1hcCh1c2VyUXVlcnkgPT4gdXNlclF1ZXJ5LnF1ZXJ5KVxuICAgICAgICAgICAgICAgIC5qb2luKCcgT1IgJyk7XG4gICAgICAgICAgICByZXN1bHQgKz0gYCBBTkQgKCR7Y29tYmluZWR9KWA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy51c2VyRmFjZXRCdWNrZXRzKSB7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLnVzZXJGYWNldEJ1Y2tldHMpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdWJRdWVyeSA9ICh0aGlzLnVzZXJGYWNldEJ1Y2tldHNba2V5XSB8fCBbXSlcbiAgICAgICAgICAgICAgICAgICAgLm1hcChidWNrZXQgPT4gYnVja2V0LmZpbHRlclF1ZXJ5KVxuICAgICAgICAgICAgICAgICAgICAuam9pbignIE9SICcpO1xuICAgICAgICAgICAgICAgIGlmIChzdWJRdWVyeSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnIEFORCAnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBgKCR7c3ViUXVlcnl9KWA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXQgZmFjZXRGaWVsZHMoKTogUmVxdWVzdEZhY2V0RmllbGRzIHtcbiAgICAgICAgY29uc3QgZmFjZXRGaWVsZHMgPSB0aGlzLmNvbmZpZy5mYWNldEZpZWxkcyAmJiB0aGlzLmNvbmZpZy5mYWNldEZpZWxkcy5maWVsZHM7XG5cbiAgICAgICAgaWYgKGZhY2V0RmllbGRzICYmIGZhY2V0RmllbGRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZmFjZXRzOiBmYWNldEZpZWxkcy5tYXAoZmFjZXQgPT4gPFJlcXVlc3RGYWNldEZpZWxkPiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkOiBmYWNldC5maWVsZCxcbiAgICAgICAgICAgICAgICAgICAgbWluY291bnQ6IGZhY2V0Lm1pbmNvdW50LFxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogZmFjZXQubGFiZWwsXG4gICAgICAgICAgICAgICAgICAgIGxpbWl0OiBmYWNldC5saW1pdCxcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0OiBmYWNldC5vZmZzZXQsXG4gICAgICAgICAgICAgICAgICAgIHByZWZpeDogZmFjZXQucHJlZml4XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBTZWFyY2hTZXJ2aWNlIH0gZnJvbSAnQGFsZnJlc2NvL2FkZi1jb3JlJztcbmltcG9ydCB7XG4gICAgQWZ0ZXJDb250ZW50SW5pdCxcbiAgICBDb21wb25lbnQsXG4gICAgQ29udGVudENoaWxkLFxuICAgIEVsZW1lbnRSZWYsXG4gICAgRXZlbnRFbWl0dGVyLFxuICAgIElucHV0LFxuICAgIE9uQ2hhbmdlcyxcbiAgICBPdXRwdXQsXG4gICAgVGVtcGxhdGVSZWYsXG4gICAgVmlld0NoaWxkLFxuICAgIFZpZXdFbmNhcHN1bGF0aW9uXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTm9kZVBhZ2luZywgUXVlcnlCb2R5IH0gZnJvbSAnYWxmcmVzY28tanMtYXBpJztcbmltcG9ydCB7IFN1YmplY3QgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IGRlYm91bmNlVGltZSB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdhZGYtc2VhcmNoJyxcbiAgICB0ZW1wbGF0ZVVybDogJy4vc2VhcmNoLmNvbXBvbmVudC5odG1sJyxcbiAgICBzdHlsZVVybHM6IFsnLi9zZWFyY2guY29tcG9uZW50LnNjc3MnXSxcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxuICAgIHByZXNlcnZlV2hpdGVzcGFjZXM6IGZhbHNlLFxuICAgIGV4cG9ydEFzOiAnc2VhcmNoQXV0b2NvbXBsZXRlJyxcbiAgICBob3N0OiB7XG4gICAgICAgICdjbGFzcyc6ICdhZGYtc2VhcmNoJ1xuICAgIH1cbn0pXG5leHBvcnQgY2xhc3MgU2VhcmNoQ29tcG9uZW50IGltcGxlbWVudHMgQWZ0ZXJDb250ZW50SW5pdCwgT25DaGFuZ2VzIHtcblxuICAgIEBWaWV3Q2hpbGQoJ3BhbmVsJylcbiAgICBwYW5lbDogRWxlbWVudFJlZjtcblxuICAgIEBDb250ZW50Q2hpbGQoVGVtcGxhdGVSZWYpXG4gICAgdGVtcGxhdGU6IFRlbXBsYXRlUmVmPGFueT47XG5cbiAgICAvKiogRnVuY3Rpb24gdGhhdCBtYXBzIGFuIG9wdGlvbidzIHZhbHVlIHRvIGl0cyBkaXNwbGF5IHZhbHVlIGluIHRoZSB0cmlnZ2VyLiAqL1xuICAgIEBJbnB1dCgpXG4gICAgZGlzcGxheVdpdGg6ICgodmFsdWU6IGFueSkgPT4gc3RyaW5nKSB8IG51bGwgPSBudWxsO1xuXG4gICAgLyoqIE1heGltdW0gbnVtYmVyIG9mIHJlc3VsdHMgdG8gc2hvdyBpbiB0aGUgc2VhcmNoLiAqL1xuICAgIEBJbnB1dCgpXG4gICAgbWF4UmVzdWx0czogbnVtYmVyID0gMjA7XG5cbiAgICAvKiogTnVtYmVyIG9mIHJlc3VsdHMgdG8gc2tpcCBmcm9tIHRoZSByZXN1bHRzIHBhZ2luYXRpb24uICovXG4gICAgQElucHV0KClcbiAgICBza2lwUmVzdWx0czogbnVtYmVyID0gMDtcblxuICAgIC8qKiBAZGVwcmVjYXRlZCBpbiAyLjEuMCAqL1xuICAgIEBJbnB1dCgpXG4gICAgcXVlcnlCb2R5OiBRdWVyeUJvZHk7XG5cbiAgICAvKiogU2VhcmNoIHRlcm0gdG8gdXNlIHdoZW4gZXhlY3V0aW5nIHRoZSBzZWFyY2guIFVwZGF0aW5nIHRoaXMgdmFsdWUgd2lsbFxuICAgICAqIHJ1biBhIG5ldyBzZWFyY2ggYW5kIHVwZGF0ZSB0aGUgcmVzdWx0cy5cbiAgICAgKi9cbiAgICBASW5wdXQoKVxuICAgIHNlYXJjaFRlcm06IHN0cmluZyA9ICcnO1xuXG4gICAgLyoqIENTUyBjbGFzcyBmb3IgZGlzcGxheS4gKi9cbiAgICBASW5wdXQoJ2NsYXNzJylcbiAgICBzZXQgY2xhc3NMaXN0KGNsYXNzTGlzdDogc3RyaW5nKSB7XG4gICAgICAgIGlmIChjbGFzc0xpc3QgJiYgY2xhc3NMaXN0Lmxlbmd0aCkge1xuICAgICAgICAgICAgY2xhc3NMaXN0LnNwbGl0KCcgJykuZm9yRWFjaChjbGFzc05hbWUgPT4gdGhpcy5fY2xhc3NMaXN0W2NsYXNzTmFtZS50cmltKCldID0gdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuY2xhc3NOYW1lID0gJyc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiogRW1pdHRlZCB3aGVuIHNlYXJjaCByZXN1bHRzIGhhdmUgZnVsbHkgbG9hZGVkLiAqL1xuICAgIEBPdXRwdXQoKVxuICAgIHJlc3VsdExvYWRlZDogRXZlbnRFbWl0dGVyPE5vZGVQYWdpbmc+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gICAgLyoqIEVtaXR0ZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMuICovXG4gICAgQE91dHB1dCgpXG4gICAgZXJyb3I6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gICAgc2hvd1BhbmVsOiBib29sZWFuID0gZmFsc2U7XG4gICAgcmVzdWx0czogTm9kZVBhZ2luZztcblxuICAgIGdldCBpc09wZW4oKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc09wZW4gJiYgdGhpcy5zaG93UGFuZWw7XG4gICAgfVxuXG4gICAgc2V0IGlzT3Blbih2YWx1ZTogYm9vbGVhbikge1xuICAgICAgICB0aGlzLl9pc09wZW4gPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBfaXNPcGVuOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBrZXlQcmVzc2VkU3RyZWFtOiBTdWJqZWN0PHN0cmluZz4gPSBuZXcgU3ViamVjdCgpO1xuXG4gICAgX2NsYXNzTGlzdDogeyBba2V5OiBzdHJpbmddOiBib29sZWFuIH0gPSB7fTtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgc2VhcmNoU2VydmljZTogU2VhcmNoU2VydmljZSxcbiAgICAgICAgICAgICAgICBwcml2YXRlIF9lbGVtZW50UmVmOiBFbGVtZW50UmVmKSB7XG4gICAgICAgIHRoaXMua2V5UHJlc3NlZFN0cmVhbS5hc09ic2VydmFibGUoKVxuICAgICAgICAgICAgLnBpcGUoXG4gICAgICAgICAgICAgICAgZGVib3VuY2VUaW1lKDIwMClcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKHNlYXJjaGVkV29yZDogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkU2VhcmNoUmVzdWx0cyhzZWFyY2hlZFdvcmQpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgc2VhcmNoU2VydmljZS5kYXRhTG9hZGVkLnN1YnNjcmliZShcbiAgICAgICAgICAgIGRhdGEgPT4gdGhpcy5vblNlYXJjaERhdGFMb2FkZWQoZGF0YSksXG4gICAgICAgICAgICBlcnJvciA9PiB0aGlzLm9uU2VhcmNoRGF0YUVycm9yKGVycm9yKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIG5nQWZ0ZXJDb250ZW50SW5pdCgpIHtcbiAgICAgICAgdGhpcy5zZXRWaXNpYmlsaXR5KCk7XG4gICAgfVxuXG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlcykge1xuICAgICAgICBpZiAoY2hhbmdlcy5xdWVyeUJvZHkgJiZcbiAgICAgICAgICAgIHRoaXMuaGFzRGlmZmVyZW50UXVlcnlCb2R5KGNoYW5nZXMucXVlcnlCb2R5LnByZXZpb3VzVmFsdWUsIGNoYW5nZXMucXVlcnlCb2R5LmN1cnJlbnRWYWx1ZSkpIHtcbiAgICAgICAgICAgIHRoaXMubG9hZFNlYXJjaFJlc3VsdHMoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hhbmdlcy5zZWFyY2hUZXJtICYmIGNoYW5nZXMuc2VhcmNoVGVybS5jdXJyZW50VmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMubG9hZFNlYXJjaFJlc3VsdHMoY2hhbmdlcy5zZWFyY2hUZXJtLmN1cnJlbnRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXNldFJlc3VsdHMoKSB7XG4gICAgICAgIHRoaXMuY2xlYW5SZXN1bHRzKCk7XG4gICAgICAgIHRoaXMuc2V0VmlzaWJpbGl0eSgpO1xuICAgIH1cblxuICAgIHJlbG9hZCgpIHtcbiAgICAgICAgdGhpcy5sb2FkU2VhcmNoUmVzdWx0cyh0aGlzLnNlYXJjaFRlcm0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFzRGlmZmVyZW50UXVlcnlCb2R5KHByZXZpb3VzUXVlcnlCb2R5OiBRdWVyeUJvZHksIGN1cnJlbnRRdWVyeUJvZHk6IFF1ZXJ5Qm9keSkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkocHJldmlvdXNRdWVyeUJvZHkpICE9PSBKU09OLnN0cmluZ2lmeShjdXJyZW50UXVlcnlCb2R5KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNsZWFuUmVzdWx0cygpIHtcbiAgICAgICAgaWYgKHRoaXMucmVzdWx0cykge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRzID0ge307XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGxvYWRTZWFyY2hSZXN1bHRzKHNlYXJjaFRlcm0/OiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5yZXNldFJlc3VsdHMoKTtcbiAgICAgICAgaWYgKHNlYXJjaFRlcm0pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnF1ZXJ5Qm9keSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoU2VydmljZS5zZWFyY2hCeVF1ZXJ5Qm9keSh0aGlzLnF1ZXJ5Qm9keSkuc3Vic2NyaWJlKFxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPT4gdGhpcy5vblNlYXJjaERhdGFMb2FkZWQocmVzdWx0KSxcbiAgICAgICAgICAgICAgICAgICAgZXJyID0+IHRoaXMub25TZWFyY2hEYXRhRXJyb3IoZXJyKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoU2VydmljZS5zZWFyY2goc2VhcmNoVGVybSwgdGhpcy5tYXhSZXN1bHRzLCB0aGlzLnNraXBSZXN1bHRzKS5zdWJzY3JpYmUoXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9PiB0aGlzLm9uU2VhcmNoRGF0YUxvYWRlZChyZXN1bHQpLFxuICAgICAgICAgICAgICAgICAgICBlcnIgPT4gdGhpcy5vblNlYXJjaERhdGFFcnJvcihlcnIpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYW5SZXN1bHRzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvblNlYXJjaERhdGFMb2FkZWQoZGF0YTogTm9kZVBhZ2luZykge1xuICAgICAgICBpZiAoZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRzID0gZGF0YTtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0TG9hZGVkLmVtaXQodGhpcy5yZXN1bHRzKTtcbiAgICAgICAgICAgIHRoaXMuaXNPcGVuID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuc2V0VmlzaWJpbGl0eSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25TZWFyY2hEYXRhRXJyb3IoZXJyb3IpIHtcbiAgICAgICAgaWYgKGVycm9yICYmIGVycm9yLnN0YXR1cyAhPT0gNDAwKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdHMgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5lcnJvci5lbWl0KGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhpZGVQYW5lbCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgICB0aGlzLl9jbGFzc0xpc3RbJ2FkZi1zZWFyY2gtc2hvdyddID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLl9jbGFzc0xpc3RbJ2FkZi1zZWFyY2gtaGlkZSddID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRWaXNpYmlsaXR5KCkge1xuICAgICAgICB0aGlzLnNob3dQYW5lbCA9ICEhdGhpcy5yZXN1bHRzICYmICEhdGhpcy5yZXN1bHRzLmxpc3Q7XG4gICAgICAgIHRoaXMuX2NsYXNzTGlzdFsnYWRmLXNlYXJjaC1zaG93J10gPSB0aGlzLnNob3dQYW5lbDtcbiAgICAgICAgdGhpcy5fY2xhc3NMaXN0WydhZGYtc2VhcmNoLWhpZGUnXSA9ICF0aGlzLnNob3dQYW5lbDtcbiAgICB9XG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQsIFZpZXdFbmNhcHN1bGF0aW9uIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnYWRmLWVtcHR5LXNlYXJjaC1yZXN1bHQnLFxuICAgIHRlbXBsYXRlVXJsOiAnLi9lbXB0eS1zZWFyY2gtcmVzdWx0LmNvbXBvbmVudC5odG1sJyxcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lXG59KVxuZXhwb3J0IGNsYXNzIEVtcHR5U2VhcmNoUmVzdWx0Q29tcG9uZW50IHt9XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBBdXRoZW50aWNhdGlvblNlcnZpY2UsIFRodW1ibmFpbFNlcnZpY2UgfSBmcm9tICdAYWxmcmVzY28vYWRmLWNvcmUnO1xuaW1wb3J0IHsgYW5pbWF0ZSwgc3RhdGUsIHN0eWxlLCB0cmFuc2l0aW9uLCB0cmlnZ2VyIH0gZnJvbSAnQGFuZ3VsYXIvYW5pbWF0aW9ucyc7XG5pbXBvcnQgeyBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE9uRGVzdHJveSwgT25Jbml0LCBPdXRwdXQsXG4gICAgICAgICBRdWVyeUxpc3QsIFZpZXdFbmNhcHN1bGF0aW9uLCBWaWV3Q2hpbGQsIFZpZXdDaGlsZHJlbiwgRWxlbWVudFJlZiwgVGVtcGxhdGVSZWYsIENvbnRlbnRDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTWluaW1hbE5vZGVFbnRpdHksIFF1ZXJ5Qm9keSB9IGZyb20gJ2FsZnJlc2NvLWpzLWFwaSc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBTZWFyY2hDb21wb25lbnQgfSBmcm9tICcuL3NlYXJjaC5jb21wb25lbnQnO1xuaW1wb3J0IHsgTWF0TGlzdEl0ZW0gfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbCc7XG5pbXBvcnQgeyBFbXB0eVNlYXJjaFJlc3VsdENvbXBvbmVudCB9IGZyb20gJy4vZW1wdHktc2VhcmNoLXJlc3VsdC5jb21wb25lbnQnO1xuaW1wb3J0IHsgZGVib3VuY2VUaW1lLCBmaWx0ZXIgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnYWRmLXNlYXJjaC1jb250cm9sJyxcbiAgICB0ZW1wbGF0ZVVybDogJy4vc2VhcmNoLWNvbnRyb2wuY29tcG9uZW50Lmh0bWwnLFxuICAgIHN0eWxlVXJsczogWycuL3NlYXJjaC1jb250cm9sLmNvbXBvbmVudC5zY3NzJ10sXG4gICAgYW5pbWF0aW9uczogW1xuICAgICAgICB0cmlnZ2VyKCd0cmFuc2l0aW9uTWVzc2FnZXMnLCBbXG4gICAgICAgICAgICBzdGF0ZSgnYWN0aXZlJywgc3R5bGUoeyB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKDAlKScsICdtYXJnaW4tbGVmdCc6ICcxM3B4JyB9KSksXG4gICAgICAgICAgICBzdGF0ZSgnaW5hY3RpdmUnLCBzdHlsZSh7IHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoODElKSd9KSksXG4gICAgICAgICAgICBzdGF0ZSgnbm8tYW5pbWF0aW9uJywgc3R5bGUoeyB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKDAlKScsIHdpZHRoOiAnMTAwJScgfSkpLFxuICAgICAgICAgICAgdHJhbnNpdGlvbignaW5hY3RpdmUgPT4gYWN0aXZlJyxcbiAgICAgICAgICAgICAgICBhbmltYXRlKCczMDBtcyBjdWJpYy1iZXppZXIoMC41NSwgMCwgMC41NSwgMC4yKScpKSxcbiAgICAgICAgICAgIHRyYW5zaXRpb24oJ2FjdGl2ZSA9PiBpbmFjdGl2ZScsXG4gICAgICAgICAgICAgICAgYW5pbWF0ZSgnMzAwbXMgY3ViaWMtYmV6aWVyKDAuNTUsIDAsIDAuNTUsIDAuMiknKSlcbiAgICAgICAgXSlcbiAgICBdLFxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXG4gICAgaG9zdDogeyBjbGFzczogJ2FkZi1zZWFyY2gtY29udHJvbCcgfVxufSlcbmV4cG9ydCBjbGFzcyBTZWFyY2hDb250cm9sQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3kge1xuXG4gICAgLyoqIFRvZ2dsZXMgd2hldGhlciB0byB1c2UgYW4gZXhwYW5kaW5nIHNlYXJjaCBjb250cm9sLiBJZiBmYWxzZVxuICAgICAqIHRoZW4gYSByZWd1bGFyIGlucHV0IGlzIHVzZWQuXG4gICAgICovXG4gICAgQElucHV0KClcbiAgICBleHBhbmRhYmxlOiBib29sZWFuID0gdHJ1ZTtcblxuICAgIC8qKiBUb2dnbGVzIGhpZ2hsaWdodGluZyBvZiB0aGUgc2VhcmNoIHRlcm0gaW4gdGhlIHJlc3VsdHMuICovXG4gICAgQElucHV0KClcbiAgICBoaWdobGlnaHQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIC8qKiBUeXBlIG9mIHRoZSBpbnB1dCBmaWVsZCB0byByZW5kZXIsIGUuZy4gXCJzZWFyY2hcIiBvciBcInRleHRcIiAoZGVmYXVsdCkuICovXG4gICAgQElucHV0KClcbiAgICBpbnB1dFR5cGU6IHN0cmluZyA9ICd0ZXh0JztcblxuICAgIC8qKiBUb2dnbGVzIGF1dG8tY29tcGxldGlvbiBvZiB0aGUgc2VhcmNoIGlucHV0IGZpZWxkLiAqL1xuICAgIEBJbnB1dCgpXG4gICAgYXV0b2NvbXBsZXRlOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICAvKiogVG9nZ2xlcyBcImZpbmQtYXMteW91LXR5cGVcIiBzdWdnZXN0aW9ucyBmb3IgcG9zc2libGUgbWF0Y2hlcy4gKi9cbiAgICBASW5wdXQoKVxuICAgIGxpdmVTZWFyY2hFbmFibGVkOiBib29sZWFuID0gdHJ1ZTtcblxuICAgIC8qKiBNYXhpbXVtIG51bWJlciBvZiByZXN1bHRzIHRvIHNob3cgaW4gdGhlIGxpdmUgc2VhcmNoLiAqL1xuICAgIEBJbnB1dCgpXG4gICAgbGl2ZVNlYXJjaE1heFJlc3VsdHM6IG51bWJlciA9IDU7XG5cbiAgICAvKiogQGRlcHJlY2F0ZWQgaW4gMi4xLjAgKi9cbiAgICBASW5wdXQoKVxuICAgIGN1c3RvbVF1ZXJ5Qm9keTogUXVlcnlCb2R5O1xuXG4gICAgLyoqIEVtaXR0ZWQgd2hlbiB0aGUgc2VhcmNoIGlzIHN1Ym1pdHRlZCBwcmVzc2luZyBFTlRFUiBidXR0b24uXG4gICAgICogVGhlIHNlYXJjaCB0ZXJtIGlzIHByb3ZpZGVkIGFzIHZhbHVlIG9mIHRoZSBldmVudC5cbiAgICAgKi9cbiAgICBAT3V0cHV0KClcbiAgICBzdWJtaXQ6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gICAgLyoqIEVtaXR0ZWQgd2hlbiB0aGUgc2VhcmNoIHRlcm0gaXMgY2hhbmdlZC4gVGhlIHNlYXJjaCB0ZXJtIGlzIHByb3ZpZGVkXG4gICAgICogaW4gdGhlICd2YWx1ZScgcHJvcGVydHkgb2YgdGhlIHJldHVybmVkIG9iamVjdC4gIElmIHRoZSB0ZXJtIGlzIGxlc3NcbiAgICAgKiB0aGFuIHRocmVlIGNoYXJhY3RlcnMgaW4gbGVuZ3RoIHRoZW4gdGhlIHRlcm0gaXMgdHJ1bmNhdGVkIHRvIGFuIGVtcHR5XG4gICAgICogc3RyaW5nLlxuICAgICAqL1xuICAgIEBPdXRwdXQoKVxuICAgIHNlYXJjaENoYW5nZTogRXZlbnRFbWl0dGVyPHN0cmluZz4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgICAvKiogRW1pdHRlZCB3aGVuIGEgZmlsZSBpdGVtIGZyb20gdGhlIGxpc3Qgb2YgXCJmaW5kLWFzLXlvdS10eXBlXCIgcmVzdWx0cyBpcyBzZWxlY3RlZC4gKi9cbiAgICBAT3V0cHV0KClcbiAgICBvcHRpb25DbGlja2VkOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICAgIEBWaWV3Q2hpbGQoJ3NlYXJjaCcpXG4gICAgc2VhcmNoQXV0b2NvbXBsZXRlOiBTZWFyY2hDb21wb25lbnQ7XG5cbiAgICBAVmlld0NoaWxkKCdzZWFyY2hJbnB1dCcpXG4gICAgc2VhcmNoSW5wdXQ6IEVsZW1lbnRSZWY7XG5cbiAgICBAVmlld0NoaWxkcmVuKE1hdExpc3RJdGVtKVxuICAgIHByaXZhdGUgbGlzdFJlc3VsdEVsZW1lbnQ6IFF1ZXJ5TGlzdDxNYXRMaXN0SXRlbT47XG5cbiAgICBAQ29udGVudENoaWxkKEVtcHR5U2VhcmNoUmVzdWx0Q29tcG9uZW50KVxuICAgIGVtcHR5U2VhcmNoVGVtcGxhdGU6IEVtcHR5U2VhcmNoUmVzdWx0Q29tcG9uZW50O1xuXG4gICAgc2VhcmNoVGVybTogc3RyaW5nID0gJyc7XG4gICAgc3Vic2NyaXB0QW5pbWF0aW9uU3RhdGU6IHN0cmluZztcbiAgICBub1NlYXJjaFJlc3VsdFRlbXBsYXRlOiBUZW1wbGF0ZVJlZiA8YW55PiA9IG51bGw7XG5cbiAgICBwcml2YXRlIHRvZ2dsZVNlYXJjaCA9IG5ldyBTdWJqZWN0PGFueT4oKTtcbiAgICBwcml2YXRlIGZvY3VzU3ViamVjdCA9IG5ldyBTdWJqZWN0PEZvY3VzRXZlbnQ+KCk7XG5cbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgYXV0aFNlcnZpY2U6IEF1dGhlbnRpY2F0aW9uU2VydmljZSxcbiAgICAgICAgICAgICAgICBwcml2YXRlIHRodW1ibmFpbFNlcnZpY2U6IFRodW1ibmFpbFNlcnZpY2UpIHtcblxuICAgICAgICB0aGlzLnRvZ2dsZVNlYXJjaC5hc09ic2VydmFibGUoKS5waXBlKGRlYm91bmNlVGltZSgyMDApKS5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuZXhwYW5kYWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0QW5pbWF0aW9uU3RhdGUgPSB0aGlzLnN1YnNjcmlwdEFuaW1hdGlvblN0YXRlID09PSAnaW5hY3RpdmUnID8gJ2FjdGl2ZScgOiAnaW5hY3RpdmUnO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3Vic2NyaXB0QW5pbWF0aW9uU3RhdGUgPT09ICdpbmFjdGl2ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hUZXJtID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoQXV0b2NvbXBsZXRlLnJlc2V0UmVzdWx0cygpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuaWQgPT09IHRoaXMuc2VhcmNoSW5wdXQubmF0aXZlRWxlbWVudC5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hJbnB1dC5uYXRpdmVFbGVtZW50LmJsdXIoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYXBwbHlTZWFyY2hGb2N1cyhhbmltYXRpb25Eb25lRXZlbnQpIHtcbiAgICAgICAgaWYgKGFuaW1hdGlvbkRvbmVFdmVudC50b1N0YXRlID09PSAnYWN0aXZlJykge1xuICAgICAgICAgICAgdGhpcy5zZWFyY2hJbnB1dC5uYXRpdmVFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRBbmltYXRpb25TdGF0ZSA9IHRoaXMuZXhwYW5kYWJsZSA/ICdpbmFjdGl2ZScgOiAnbm8tYW5pbWF0aW9uJztcbiAgICAgICAgdGhpcy5zZXR1cEZvY3VzRXZlbnRIYW5kbGVycygpO1xuICAgIH1cblxuICAgIGlzTm9TZWFyY2hUZW1wbGF0ZVByZXNlbnQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmVtcHR5U2VhcmNoVGVtcGxhdGUgPyB0cnVlIDogZmFsc2U7XG4gICAgfVxuXG4gICAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmZvY3VzU3ViamVjdCkge1xuICAgICAgICAgICAgdGhpcy5mb2N1c1N1YmplY3QudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNTdWJqZWN0ID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnRvZ2dsZVNlYXJjaCkge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVTZWFyY2gudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlU2VhcmNoID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlzTG9nZ2VkSW4oKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmF1dGhTZXJ2aWNlLmlzRWNtTG9nZ2VkSW4oKTtcbiAgICB9XG5cbiAgICBzZWFyY2hTdWJtaXQoZXZlbnQ6IGFueSkge1xuICAgICAgICB0aGlzLnN1Ym1pdC5lbWl0KGV2ZW50KTtcbiAgICAgICAgdGhpcy50b2dnbGVTZWFyY2hCYXIoKTtcbiAgICB9XG5cbiAgICBpbnB1dENoYW5nZShldmVudDogYW55KSB7XG4gICAgICAgIHRoaXMuc2VhcmNoQ2hhbmdlLmVtaXQoZXZlbnQpO1xuICAgIH1cblxuICAgIGdldEF1dG9Db21wbGV0ZSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5hdXRvY29tcGxldGUgPyAnb24nIDogJ29mZic7XG4gICAgfVxuXG4gICAgZ2V0TWltZVR5cGVJY29uKG5vZGU6IE1pbmltYWxOb2RlRW50aXR5KTogc3RyaW5nIHtcbiAgICAgICAgbGV0IG1pbWVUeXBlO1xuXG4gICAgICAgIGlmIChub2RlLmVudHJ5LmNvbnRlbnQgJiYgbm9kZS5lbnRyeS5jb250ZW50Lm1pbWVUeXBlKSB7XG4gICAgICAgICAgICBtaW1lVHlwZSA9IG5vZGUuZW50cnkuY29udGVudC5taW1lVHlwZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobm9kZS5lbnRyeS5pc0ZvbGRlcikge1xuICAgICAgICAgICAgbWltZVR5cGUgPSAnZm9sZGVyJztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLnRodW1ibmFpbFNlcnZpY2UuZ2V0TWltZVR5cGVJY29uKG1pbWVUeXBlKTtcbiAgICB9XG5cbiAgICBpc1NlYXJjaEJhckFjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3Vic2NyaXB0QW5pbWF0aW9uU3RhdGUgPT09ICdhY3RpdmUnICYmIHRoaXMubGl2ZVNlYXJjaEVuYWJsZWQ7XG4gICAgfVxuXG4gICAgdG9nZ2xlU2VhcmNoQmFyKCkge1xuICAgICAgICBpZiAodGhpcy50b2dnbGVTZWFyY2gpIHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlU2VhcmNoLm5leHQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGVsZW1lbnRDbGlja2VkKGl0ZW06IGFueSkge1xuICAgICAgICBpZiAoaXRlbS5lbnRyeSkge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25DbGlja2VkLm5leHQoaXRlbSk7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVNlYXJjaEJhcigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25Gb2N1cygkZXZlbnQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5mb2N1c1N1YmplY3QubmV4dCgkZXZlbnQpO1xuICAgIH1cblxuICAgIG9uQmx1cigkZXZlbnQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5mb2N1c1N1YmplY3QubmV4dCgkZXZlbnQpO1xuICAgIH1cblxuICAgIGFjdGl2YXRlVG9vbGJhcigpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU2VhcmNoQmFyQWN0aXZlKCkpIHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlU2VhcmNoQmFyKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZWxlY3RGaXJzdFJlc3VsdCgpIHtcbiAgICAgICAgaWYgKCB0aGlzLmxpc3RSZXN1bHRFbGVtZW50ICYmIHRoaXMubGlzdFJlc3VsdEVsZW1lbnQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgbGV0IGZpcnN0RWxlbWVudDogTWF0TGlzdEl0ZW0gPSA8TWF0TGlzdEl0ZW0+IHRoaXMubGlzdFJlc3VsdEVsZW1lbnQuZmlyc3Q7XG4gICAgICAgICAgICBmaXJzdEVsZW1lbnQuX2dldEhvc3RFbGVtZW50KCkuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uUm93QXJyb3dEb3duKCRldmVudDogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgICAgICBsZXQgbmV4dEVsZW1lbnQ6IGFueSA9IHRoaXMuZ2V0TmV4dEVsZW1lbnRTaWJsaW5nKDxFbGVtZW50PiAkZXZlbnQudGFyZ2V0KTtcbiAgICAgICAgaWYgKG5leHRFbGVtZW50KSB7XG4gICAgICAgICAgICBuZXh0RWxlbWVudC5mb2N1cygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25Sb3dBcnJvd1VwKCRldmVudDogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgICAgICBsZXQgcHJldmlvdXNFbGVtZW50OiBhbnkgPSB0aGlzLmdldFByZXZpb3VzRWxlbWVudFNpYmxpbmcoPEVsZW1lbnQ+ICRldmVudC50YXJnZXQpO1xuICAgICAgICBpZiAocHJldmlvdXNFbGVtZW50KSB7XG4gICAgICAgICAgICBwcmV2aW91c0VsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoSW5wdXQubmF0aXZlRWxlbWVudC5mb2N1cygpO1xuICAgICAgICAgICAgdGhpcy5mb2N1c1N1YmplY3QubmV4dChuZXcgRm9jdXNFdmVudCgnZm9jdXMnKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHNldHVwRm9jdXNFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICBjb25zdCBmb2N1c0V2ZW50czogT2JzZXJ2YWJsZTxGb2N1c0V2ZW50PiA9IHRoaXMuZm9jdXNTdWJqZWN0XG4gICAgICAgICAgICAuYXNPYnNlcnZhYmxlKClcbiAgICAgICAgICAgIC5waXBlKFxuICAgICAgICAgICAgICAgIGRlYm91bmNlVGltZSg1MCksXG4gICAgICAgICAgICAgICAgZmlsdGVyKCgkZXZlbnQ6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pc1NlYXJjaEJhckFjdGl2ZSgpICYmICgkZXZlbnQudHlwZSA9PT0gJ2JsdXInIHx8ICRldmVudC50eXBlID09PSAnZm9jdXNvdXQnKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcblxuICAgICAgICBmb2N1c0V2ZW50cy5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVTZWFyY2hCYXIoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXROZXh0RWxlbWVudFNpYmxpbmcobm9kZTogRWxlbWVudCk6IEVsZW1lbnQge1xuICAgICAgICByZXR1cm4gbm9kZS5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRQcmV2aW91c0VsZW1lbnRTaWJsaW5nKG5vZGU6IEVsZW1lbnQpOiBFbGVtZW50IHtcbiAgICAgICAgcmV0dXJuIG5vZGUucHJldmlvdXNFbGVtZW50U2libGluZztcbiAgICB9XG5cbn1cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qIHRzbGludDpkaXNhYmxlOiBuby1pbnB1dC1yZW5hbWUgbm8tdXNlLWJlZm9yZS1kZWNsYXJlIG5vLWlucHV0LXJlbmFtZSAgKi9cblxuaW1wb3J0IHsgRU5URVIsIEVTQ0FQRSB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9rZXljb2Rlcyc7XG5pbXBvcnQge1xuICAgIENoYW5nZURldGVjdG9yUmVmLFxuICAgIERpcmVjdGl2ZSxcbiAgICBFbGVtZW50UmVmLFxuICAgIGZvcndhcmRSZWYsXG4gICAgSW5qZWN0LFxuICAgIElucHV0LFxuICAgIE5nWm9uZSxcbiAgICBPbkRlc3Ryb3ksXG4gICAgT3B0aW9uYWxcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb250cm9sVmFsdWVBY2Nlc3NvciwgTkdfVkFMVUVfQUNDRVNTT1IgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBET0NVTUVOVCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBTdWJqZWN0LCBTdWJzY3JpcHRpb24sIG1lcmdlLCBvZiwgZnJvbUV2ZW50IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBTZWFyY2hDb21wb25lbnQgfSBmcm9tICcuL3NlYXJjaC5jb21wb25lbnQnO1xuaW1wb3J0IHsgZmlsdGVyLCBzd2l0Y2hNYXAsIHRha2VVbnRpbCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuZXhwb3J0IGNvbnN0IFNFQVJDSF9BVVRPQ09NUExFVEVfVkFMVUVfQUNDRVNTT1I6IGFueSA9IHtcbiAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcbiAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBTZWFyY2hUcmlnZ2VyRGlyZWN0aXZlKSxcbiAgICBtdWx0aTogdHJ1ZVxufTtcblxuQERpcmVjdGl2ZSh7XG4gICAgc2VsZWN0b3I6IGBpbnB1dFtzZWFyY2hBdXRvY29tcGxldGVdLCB0ZXh0YXJlYVtzZWFyY2hBdXRvY29tcGxldGVdYCxcbiAgICBob3N0OiB7XG4gICAgICAgICdyb2xlJzogJ2NvbWJvYm94JyxcbiAgICAgICAgJ1thdHRyLmF1dG9jb21wbGV0ZV0nOiAnYXV0b2NvbXBsZXRlJyxcbiAgICAgICAgJ2FyaWEtYXV0b2NvbXBsZXRlJzogJ2xpc3QnLFxuICAgICAgICAnW2F0dHIuYXJpYS1leHBhbmRlZF0nOiAncGFuZWxPcGVuLnRvU3RyaW5nKCknLFxuICAgICAgICAnKGJsdXIpJzogJ29uVG91Y2hlZCgpJyxcbiAgICAgICAgJyhpbnB1dCknOiAnaGFuZGxlSW5wdXQoJGV2ZW50KScsXG4gICAgICAgICcoa2V5ZG93biknOiAnaGFuZGxlS2V5ZG93bigkZXZlbnQpJ1xuICAgIH0sXG4gICAgcHJvdmlkZXJzOiBbU0VBUkNIX0FVVE9DT01QTEVURV9WQUxVRV9BQ0NFU1NPUl1cbn0pXG5leHBvcnQgY2xhc3MgU2VhcmNoVHJpZ2dlckRpcmVjdGl2ZSBpbXBsZW1lbnRzIENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBPbkRlc3Ryb3kge1xuICAgIHByaXZhdGUgb25EZXN0cm95JDogU3ViamVjdDxib29sZWFuPiA9IG5ldyBTdWJqZWN0PGJvb2xlYW4+KCk7XG5cbiAgICBASW5wdXQoJ3NlYXJjaEF1dG9jb21wbGV0ZScpXG4gICAgc2VhcmNoUGFuZWw6IFNlYXJjaENvbXBvbmVudDtcblxuICAgIEBJbnB1dCgpXG4gICAgYXV0b2NvbXBsZXRlOiBzdHJpbmcgPSAnb2ZmJztcblxuICAgIHByaXZhdGUgX3BhbmVsT3BlbjogYm9vbGVhbiA9IGZhbHNlO1xuICAgIHByaXZhdGUgY2xvc2luZ0FjdGlvbnNTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcbiAgICBwcml2YXRlIGVzY2FwZUV2ZW50U3RyZWFtID0gbmV3IFN1YmplY3Q8dm9pZD4oKTtcblxuICAgIG9uQ2hhbmdlOiAodmFsdWU6IGFueSkgPT4gdm9pZCA9ICgpID0+IHsgfTtcblxuICAgIG9uVG91Y2hlZCA9ICgpID0+IHsgfTtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZWxlbWVudDogRWxlbWVudFJlZixcbiAgICAgICAgICAgICAgICBwcml2YXRlIG5nWm9uZTogTmdab25lLFxuICAgICAgICAgICAgICAgIHByaXZhdGUgY2hhbmdlRGV0ZWN0b3JSZWY6IENoYW5nZURldGVjdG9yUmVmLFxuICAgICAgICAgICAgICAgIEBPcHRpb25hbCgpIEBJbmplY3QoRE9DVU1FTlQpIHByaXZhdGUgZG9jdW1lbnQ6IGFueSkgeyB9XG5cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5vbkRlc3Ryb3kkLm5leHQodHJ1ZSk7XG4gICAgICAgIHRoaXMub25EZXN0cm95JC5jb21wbGV0ZSgpO1xuXG4gICAgICAgIGlmICh0aGlzLmVzY2FwZUV2ZW50U3RyZWFtKSB7XG4gICAgICAgICAgICB0aGlzLmVzY2FwZUV2ZW50U3RyZWFtLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB0aGlzLmVzY2FwZUV2ZW50U3RyZWFtID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIHRoaXMuY2xvc2luZ0FjdGlvbnNTdWJzY3JpcHRpb24gKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NpbmdBY3Rpb25zU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgcGFuZWxPcGVuKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGFuZWxPcGVuICYmIHRoaXMuc2VhcmNoUGFuZWwuc2hvd1BhbmVsO1xuICAgIH1cblxuICAgIG9wZW5QYW5lbCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zZWFyY2hQYW5lbC5pc09wZW4gPSB0aGlzLl9wYW5lbE9wZW4gPSB0cnVlO1xuICAgICAgICB0aGlzLmNsb3NpbmdBY3Rpb25zU3Vic2NyaXB0aW9uID0gdGhpcy5zdWJzY3JpYmVUb0Nsb3NpbmdBY3Rpb25zKCk7XG4gICAgfVxuXG4gICAgY2xvc2VQYW5lbCgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuX3BhbmVsT3Blbikge1xuICAgICAgICAgICAgdGhpcy5jbG9zaW5nQWN0aW9uc1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgdGhpcy5fcGFuZWxPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnNlYXJjaFBhbmVsLnJlc2V0UmVzdWx0cygpO1xuICAgICAgICAgICAgdGhpcy5zZWFyY2hQYW5lbC5oaWRlUGFuZWwoKTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3JSZWYuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IHBhbmVsQ2xvc2luZ0FjdGlvbnMoKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgcmV0dXJuIG1lcmdlKFxuICAgICAgICAgICAgdGhpcy5lc2NhcGVFdmVudFN0cmVhbSxcbiAgICAgICAgICAgIHRoaXMub3V0c2lkZUNsaWNrU3RyZWFtXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXQgb3V0c2lkZUNsaWNrU3RyZWFtKCk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICghdGhpcy5kb2N1bWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIG9mKG51bGwpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG1lcmdlKFxuICAgICAgICAgICAgZnJvbUV2ZW50KHRoaXMuZG9jdW1lbnQsICdjbGljaycpLFxuICAgICAgICAgICAgZnJvbUV2ZW50KHRoaXMuZG9jdW1lbnQsICd0b3VjaGVuZCcpXG4gICAgICAgICkucGlwZShcbiAgICAgICAgICAgIGZpbHRlcigoZXZlbnQ6IE1vdXNlRXZlbnQgfCBUb3VjaEV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2xpY2tUYXJnZXQgPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3BhbmVsT3BlbiAmJiBjbGlja1RhcmdldCAhPT0gdGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHdyaXRlVmFsdWUodmFsdWU6IGFueSk6IHZvaWQge1xuICAgICAgICBQcm9taXNlLnJlc29sdmUobnVsbCkudGhlbigoKSA9PiB0aGlzLnNldFRyaWdnZXJWYWx1ZSh2YWx1ZSkpO1xuICAgIH1cblxuICAgIHJlZ2lzdGVyT25DaGFuZ2UoZm46ICh2YWx1ZTogYW55KSA9PiB7fSk6IHZvaWQge1xuICAgICAgICB0aGlzLm9uQ2hhbmdlID0gZm47XG4gICAgfVxuXG4gICAgcmVnaXN0ZXJPblRvdWNoZWQoZm46ICgpID0+IHt9KSB7XG4gICAgICAgIHRoaXMub25Ub3VjaGVkID0gZm47XG4gICAgfVxuXG4gICAgaGFuZGxlS2V5ZG93bihldmVudDogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgICAgICBjb25zdCBrZXlDb2RlID0gZXZlbnQua2V5Q29kZTtcblxuICAgICAgICBpZiAoa2V5Q29kZSA9PT0gRVNDQVBFICYmIHRoaXMucGFuZWxPcGVuKSB7XG4gICAgICAgICAgICB0aGlzLmVzY2FwZUV2ZW50U3RyZWFtLm5leHQoKTtcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB9IGVsc2UgaWYgKGtleUNvZGUgPT09IEVOVEVSKSB7XG4gICAgICAgICAgICB0aGlzLmVzY2FwZUV2ZW50U3RyZWFtLm5leHQoKTtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIGhhbmRsZUlucHV0KGV2ZW50OiBLZXlib2FyZEV2ZW50KTogdm9pZCB7XG4gICAgICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBldmVudC50YXJnZXQpIHtcbiAgICAgICAgICAgIGxldCBpbnB1dFZhbHVlOiBzdHJpbmcgPSAoZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xuICAgICAgICAgICAgdGhpcy5vbkNoYW5nZShpbnB1dFZhbHVlKTtcbiAgICAgICAgICAgIGlmIChpbnB1dFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hQYW5lbC5rZXlQcmVzc2VkU3RyZWFtLm5leHQoaW5wdXRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuUGFuZWwoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hQYW5lbC5yZXNldFJlc3VsdHMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlUGFuZWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgaXNQYW5lbE9wdGlvbkNsaWNrZWQoZXZlbnQ6IE1vdXNlRXZlbnQpIHtcbiAgICAgICAgbGV0IGlzUGFuZWxPcHRpb246IGJvb2xlYW4gPSBmYWxzZTtcbiAgICAgICAgaWYgKCBldmVudCApIHtcbiAgICAgICAgICAgIGxldCBjbGlja1RhcmdldCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICAgIGlzUGFuZWxPcHRpb24gPSAhdGhpcy5pc05vUmVzdWx0T3B0aW9uKGV2ZW50KSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICEhdGhpcy5zZWFyY2hQYW5lbC5wYW5lbCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICEhdGhpcy5zZWFyY2hQYW5lbC5wYW5lbC5uYXRpdmVFbGVtZW50LmNvbnRhaW5zKGNsaWNrVGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXNQYW5lbE9wdGlvbjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzTm9SZXN1bHRPcHRpb24oZXZlbnQ6IE1vdXNlRXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VhcmNoUGFuZWwucmVzdWx0cy5saXN0ID8gdGhpcy5zZWFyY2hQYW5lbC5yZXN1bHRzLmxpc3QuZW50cmllcy5sZW5ndGggPT09IDAgOiB0cnVlO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3Vic2NyaWJlVG9DbG9zaW5nQWN0aW9ucygpOiBTdWJzY3JpcHRpb24ge1xuICAgICAgICBjb25zdCBmaXJzdFN0YWJsZSA9IHRoaXMubmdab25lLm9uU3RhYmxlLmFzT2JzZXJ2YWJsZSgpO1xuICAgICAgICBjb25zdCBvcHRpb25DaGFuZ2VzID0gdGhpcy5zZWFyY2hQYW5lbC5rZXlQcmVzc2VkU3RyZWFtLmFzT2JzZXJ2YWJsZSgpO1xuXG4gICAgICAgIHJldHVybiBtZXJnZShmaXJzdFN0YWJsZSwgb3B0aW9uQ2hhbmdlcylcbiAgICAgICAgICAgIC5waXBlKFxuICAgICAgICAgICAgICAgIHRha2VVbnRpbCh0aGlzLm9uRGVzdHJveSQpLFxuICAgICAgICAgICAgICAgIHN3aXRjaE1hcCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoUGFuZWwuc2V0VmlzaWJpbGl0eSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYW5lbENsb3NpbmdBY3Rpb25zO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAuc3Vic2NyaWJlKGV2ZW50ID0+IHRoaXMuc2V0VmFsdWVBbmRDbG9zZShldmVudCkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0VHJpZ2dlclZhbHVlKHZhbHVlOiBhbnkpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgdG9EaXNwbGF5ID0gdGhpcy5zZWFyY2hQYW5lbCAmJiB0aGlzLnNlYXJjaFBhbmVsLmRpc3BsYXlXaXRoID9cbiAgICAgICAgICAgIHRoaXMuc2VhcmNoUGFuZWwuZGlzcGxheVdpdGgodmFsdWUpIDogdmFsdWU7XG4gICAgICAgIGNvbnN0IGlucHV0VmFsdWUgPSB0b0Rpc3BsYXkgIT0gbnVsbCA/IHRvRGlzcGxheSA6ICcnO1xuICAgICAgICB0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudC52YWx1ZSA9IGlucHV0VmFsdWU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXRWYWx1ZUFuZENsb3NlKGV2ZW50OiBhbnkgfCBudWxsKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmlzUGFuZWxPcHRpb25DbGlja2VkKGV2ZW50KSAmJiAhZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICAgICAgdGhpcy5zZXRUcmlnZ2VyVmFsdWUoZXZlbnQudGFyZ2V0LnRleHRDb250ZW50LnRyaW0oKSk7XG4gICAgICAgICAgICB0aGlzLm9uQ2hhbmdlKGV2ZW50LnRhcmdldC50ZXh0Q29udGVudC50cmltKCkpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsb3NlUGFuZWwoKTtcbiAgICB9XG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5jb25zdCBERUZBVUxUX1BBR0VfU0laRSA9IDU7XG5cbmV4cG9ydCBjbGFzcyBTZWFyY2hGaWx0ZXJMaXN0PFQ+IGltcGxlbWVudHMgSXRlcmFibGU8VD4ge1xuXG4gICAgcHJpdmF0ZSBmaWx0ZXJlZEl0ZW1zOiBUW10gPSBbXTtcbiAgICBwcml2YXRlIF9maWx0ZXJUZXh0OiBzdHJpbmcgPSAnJztcblxuICAgIGl0ZW1zOiBUW10gPSBbXTtcbiAgICBwYWdlU2l6ZTogbnVtYmVyID0gREVGQVVMVF9QQUdFX1NJWkU7XG4gICAgY3VycmVudFBhZ2VTaXplOiBudW1iZXIgPSBERUZBVUxUX1BBR0VfU0laRTtcblxuICAgIGdldCBmaWx0ZXJUZXh0KCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLl9maWx0ZXJUZXh0O1xuICAgIH1cblxuICAgIHNldCBmaWx0ZXJUZXh0KHZhbHVlOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5fZmlsdGVyVGV4dCA9IHZhbHVlO1xuICAgICAgICB0aGlzLmFwcGx5RmlsdGVyKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfZmlsdGVyOiAoaXRlbTogVCkgPT4gYm9vbGVhbiA9ICgpID0+IHRydWU7XG5cbiAgICBnZXQgZmlsdGVyKCk6IChpdGVtOiBUKSA9PiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpbHRlcjtcbiAgICB9XG5cbiAgICBzZXQgZmlsdGVyKHZhbHVlOiAoaXRlbTogVCkgPT4gYm9vbGVhbiApIHtcbiAgICAgICAgdGhpcy5fZmlsdGVyID0gdmFsdWU7XG4gICAgICAgIHRoaXMuYXBwbHlGaWx0ZXIoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFwcGx5RmlsdGVyKCkge1xuICAgICAgICBpZiAodGhpcy5maWx0ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyZWRJdGVtcyA9IHRoaXMuaXRlbXMuZmlsdGVyKHRoaXMuZmlsdGVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyZWRJdGVtcyA9IHRoaXMuaXRlbXM7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jdXJyZW50UGFnZVNpemUgPSB0aGlzLnBhZ2VTaXplO1xuICAgIH1cblxuICAgIC8qKiBSZXR1cm5zIHZpc2libGUgcG9ydGlvbiBvZiB0aGUgaXRlbXMuICAqL1xuICAgIGdldCB2aXNpYmxlSXRlbXMoKTogVFtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyZWRJdGVtcy5zbGljZSgwLCB0aGlzLmN1cnJlbnRQYWdlU2l6ZSk7XG4gICAgfVxuXG4gICAgLyoqIFJldHVybnMgZW50aXJlIGNvbGxlY3Rpb24gbGVuZ3RoIGluY2x1ZGluZyBpdGVtcyBub3QgZGlzcGxheWVkIG9uIHRoZSBwYWdlLiAqL1xuICAgIGdldCBsZW5ndGgoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXMubGVuZ3RoO1xuICAgIH1cblxuICAgIC8qKiBEZXRlY3RzIHdoZXRoZXIgbW9yZSBpdGVtcyBjYW4gYmUgZGlzcGxheWVkLiAqL1xuICAgIGdldCBjYW5TaG93TW9yZUl0ZW1zKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXJlZEl0ZW1zLmxlbmd0aCA+IHRoaXMuY3VycmVudFBhZ2VTaXplO1xuICAgIH1cblxuICAgIC8qKiBEZXRlY3RzIHdoZXRoZXIgbGVzcyBpdGVtcyBjYW4gYmUgZGlzcGxheWVkLiAqL1xuICAgIGdldCBjYW5TaG93TGVzc0l0ZW1zKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50UGFnZVNpemUgPiB0aGlzLnBhZ2VTaXplO1xuICAgIH1cblxuICAgIC8qKiBEZXRlY3RzIHdoZXRoZXIgY29udGVudCBmaXRzIHNpbmdsZSBwYWdlLiAqL1xuICAgIGdldCBmaXRzUGFnZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFnZVNpemUgPj0gdGhpcy5maWx0ZXJlZEl0ZW1zLmxlbmd0aDtcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvcihpdGVtczogVFtdID0gW10sIHBhZ2VTaXplPzogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuaXRlbXMgPSBpdGVtcztcbiAgICAgICAgdGhpcy5maWx0ZXJlZEl0ZW1zID0gaXRlbXM7XG4gICAgICAgIHRoaXMucGFnZVNpemUgPSBwYWdlU2l6ZSB8fCBERUZBVUxUX1BBR0VfU0laRTtcbiAgICAgICAgdGhpcy5jdXJyZW50UGFnZVNpemUgPSBwYWdlU2l6ZSB8fCBERUZBVUxUX1BBR0VfU0laRTtcbiAgICB9XG5cbiAgICAvKiogRGlzcGxheSBtb3JlIGl0ZW1zLiAqL1xuICAgIHNob3dNb3JlSXRlbXMoKSB7XG4gICAgICAgIGlmICh0aGlzLmNhblNob3dNb3JlSXRlbXMpIHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2VTaXplICs9IHRoaXMucGFnZVNpemU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiogRGlzcGxheSBsZXNzIGl0ZW1zLiAqL1xuICAgIHNob3dMZXNzSXRlbXMoKSB7XG4gICAgICAgIGlmICh0aGlzLmNhblNob3dMZXNzSXRlbXMpIHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2VTaXplIC09IHRoaXMucGFnZVNpemU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiogUmVzZXQgZW50aXJlIGNvbGxlY3Rpb24gYW5kIHBhZ2Ugc2V0dGluZ3MuICovXG4gICAgY2xlYXIoKSB7XG4gICAgICAgIHRoaXMuY3VycmVudFBhZ2VTaXplID0gdGhpcy5wYWdlU2l6ZTtcbiAgICAgICAgdGhpcy5pdGVtcyA9IFtdO1xuICAgICAgICB0aGlzLmZpbHRlcmVkSXRlbXMgPSBbXTtcbiAgICAgICAgdGhpcy5maWx0ZXJUZXh0ID0gJyc7XG4gICAgfVxuXG4gICAgW1N5bWJvbC5pdGVyYXRvcl0oKTogSXRlcmF0b3I8VD4ge1xuICAgICAgICBsZXQgcG9pbnRlciA9IDA7XG4gICAgICAgIGxldCBpdGVtcyA9IHRoaXMudmlzaWJsZUl0ZW1zO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuZXh0KCk6IEl0ZXJhdG9yUmVzdWx0PFQ+IHtcbiAgICAgICAgICAgICAgICBpZiAocG9pbnRlciA8IGl0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZG9uZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogaXRlbXNbcG9pbnRlcisrXVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb25lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxufVxuIiwiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgRmFjZXRRdWVyeSB9IGZyb20gJy4uLy4uLy4uL2ZhY2V0LXF1ZXJ5LmludGVyZmFjZSc7XG5pbXBvcnQgeyBTZWFyY2hGaWx0ZXJMaXN0IH0gZnJvbSAnLi9zZWFyY2gtZmlsdGVyLWxpc3QubW9kZWwnO1xuXG5leHBvcnQgY2xhc3MgUmVzcG9uc2VGYWNldFF1ZXJ5TGlzdCBleHRlbmRzIFNlYXJjaEZpbHRlckxpc3Q8RmFjZXRRdWVyeT4ge1xuICAgIGNvbnN0cnVjdG9yKGl0ZW1zOiBGYWNldFF1ZXJ5W10gPSBbXSwgcGFnZVNpemU6IG51bWJlciA9IDUpIHtcbiAgICAgICAgc3VwZXIoXG4gICAgICAgICAgICBpdGVtc1xuICAgICAgICAgICAgICAgIC5maWx0ZXIoaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmNvdW50ID4gMDtcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHBhZ2VTaXplXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5maWx0ZXIgPSAocXVlcnk6IEZhY2V0UXVlcnkpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmZpbHRlclRleHQgJiYgcXVlcnkubGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXR0ZXJuID0gKHRoaXMuZmlsdGVyVGV4dCB8fCAnJykudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBsYWJlbCA9IHF1ZXJ5LmxhYmVsLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxhYmVsLnN0YXJ0c1dpdGgocGF0dGVybik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICB9XG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQsIFZpZXdFbmNhcHN1bGF0aW9uLCBPbkluaXQsIE9uRGVzdHJveSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTWF0Q2hlY2tib3hDaGFuZ2UgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbCc7XG5pbXBvcnQgeyBTZWFyY2hTZXJ2aWNlLCBUcmFuc2xhdGlvblNlcnZpY2UgfSBmcm9tICdAYWxmcmVzY28vYWRmLWNvcmUnO1xuaW1wb3J0IHsgU2VhcmNoUXVlcnlCdWlsZGVyU2VydmljZSB9IGZyb20gJy4uLy4uL3NlYXJjaC1xdWVyeS1idWlsZGVyLnNlcnZpY2UnO1xuaW1wb3J0IHsgRmFjZXRGaWVsZEJ1Y2tldCB9IGZyb20gJy4uLy4uL2ZhY2V0LWZpZWxkLWJ1Y2tldC5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgUmVzcG9uc2VGYWNldFF1ZXJ5TGlzdCB9IGZyb20gJy4vbW9kZWxzL3Jlc3BvbnNlLWZhY2V0LXF1ZXJ5LWxpc3QubW9kZWwnO1xuaW1wb3J0IHsgRmFjZXRRdWVyeSB9IGZyb20gJy4uLy4uL2ZhY2V0LXF1ZXJ5LmludGVyZmFjZSc7XG5pbXBvcnQgeyBGYWNldEZpZWxkIH0gZnJvbSAnLi4vLi4vZmFjZXQtZmllbGQuaW50ZXJmYWNlJztcbmltcG9ydCB7IFNlYXJjaEZpbHRlckxpc3QgfSBmcm9tICcuL21vZGVscy9zZWFyY2gtZmlsdGVyLWxpc3QubW9kZWwnO1xuaW1wb3J0IHsgdGFrZVdoaWxlIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ2FkZi1zZWFyY2gtZmlsdGVyJyxcbiAgICB0ZW1wbGF0ZVVybDogJy4vc2VhcmNoLWZpbHRlci5jb21wb25lbnQuaHRtbCcsXG4gICAgc3R5bGVVcmxzOiBbJy4vc2VhcmNoLWZpbHRlci5jb21wb25lbnQuc2NzcyddLFxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXG4gICAgaG9zdDogeyBjbGFzczogJ2FkZi1zZWFyY2gtZmlsdGVyJyB9XG59KVxuZXhwb3J0IGNsYXNzIFNlYXJjaEZpbHRlckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25EZXN0cm95IHtcblxuICAgIHByaXZhdGUgREVGQVVMVF9QQUdFX1NJWkUgPSA1O1xuXG4gICAgaXNBbGl2ZSA9IHRydWU7XG4gICAgcmVzcG9uc2VGYWNldFF1ZXJpZXM6IFJlc3BvbnNlRmFjZXRRdWVyeUxpc3QgPSBudWxsO1xuICAgIHJlc3BvbnNlRmFjZXRGaWVsZHM6IEZhY2V0RmllbGRbXSA9IG51bGw7XG5cbiAgICBwcml2YXRlIGZhY2V0UXVlcmllc1BhZ2VTaXplID0gdGhpcy5ERUZBVUxUX1BBR0VfU0laRTtcbiAgICBmYWNldFF1ZXJpZXNMYWJlbDogc3RyaW5nID0gJ0ZhY2V0IFF1ZXJpZXMnO1xuICAgIGZhY2V0UXVlcmllc0V4cGFuZGVkID0gZmFsc2U7XG4gICAgZmFjZXRGaWVsZHNFeHBhbmRlZCA9IGZhbHNlO1xuICAgIGNhblJlc2V0U2VsZWN0ZWRRdWVyaWVzID0gZmFsc2U7XG5cbiAgICBzZWxlY3RlZEZhY2V0UXVlcmllczogQXJyYXk8RmFjZXRRdWVyeT4gPSBbXTtcbiAgICBzZWxlY3RlZEJ1Y2tldHM6IEFycmF5PHsgZmllbGQ6IEZhY2V0RmllbGQsIGJ1Y2tldDogRmFjZXRGaWVsZEJ1Y2tldCB9PiA9IFtdO1xuXG4gICAgY29uc3RydWN0b3IocHVibGljIHF1ZXJ5QnVpbGRlcjogU2VhcmNoUXVlcnlCdWlsZGVyU2VydmljZSxcbiAgICAgICAgICAgICAgICBwcml2YXRlIHNlYXJjaFNlcnZpY2U6IFNlYXJjaFNlcnZpY2UsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSB0cmFuc2xhdGlvblNlcnZpY2U6IFRyYW5zbGF0aW9uU2VydmljZSkge1xuICAgICAgICBpZiAocXVlcnlCdWlsZGVyLmNvbmZpZyAmJiBxdWVyeUJ1aWxkZXIuY29uZmlnLmZhY2V0UXVlcmllcykge1xuICAgICAgICAgICAgdGhpcy5mYWNldFF1ZXJpZXNMYWJlbCA9IHF1ZXJ5QnVpbGRlci5jb25maWcuZmFjZXRRdWVyaWVzLmxhYmVsIHx8ICdGYWNldCBRdWVyaWVzJztcbiAgICAgICAgICAgIHRoaXMuZmFjZXRRdWVyaWVzUGFnZVNpemUgPSBxdWVyeUJ1aWxkZXIuY29uZmlnLmZhY2V0UXVlcmllcy5wYWdlU2l6ZSB8fCB0aGlzLkRFRkFVTFRfUEFHRV9TSVpFO1xuICAgICAgICAgICAgdGhpcy5mYWNldFF1ZXJpZXNFeHBhbmRlZCA9IHF1ZXJ5QnVpbGRlci5jb25maWcuZmFjZXRRdWVyaWVzLmV4cGFuZGVkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChxdWVyeUJ1aWxkZXIuY29uZmlnICYmIHF1ZXJ5QnVpbGRlci5jb25maWcuZmFjZXRGaWVsZHMpIHtcbiAgICAgICAgICAgIHRoaXMuZmFjZXRGaWVsZHNFeHBhbmRlZCA9IHF1ZXJ5QnVpbGRlci5jb25maWcuZmFjZXRGaWVsZHMuZXhwYW5kZWQ7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnF1ZXJ5QnVpbGRlci51cGRhdGVkLnBpcGUoXG4gICAgICAgICAgICB0YWtlV2hpbGUoKCkgPT4gdGhpcy5pc0FsaXZlKVxuICAgICAgICApLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnF1ZXJ5QnVpbGRlci5leGVjdXRlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICBpZiAodGhpcy5xdWVyeUJ1aWxkZXIpIHtcbiAgICAgICAgICAgIHRoaXMucXVlcnlCdWlsZGVyLmV4ZWN1dGVkLnBpcGUoXG4gICAgICAgICAgICAgICAgdGFrZVdoaWxlKCgpID0+IHRoaXMuaXNBbGl2ZSlcbiAgICAgICAgICAgICkuc3Vic2NyaWJlKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkRhdGFMb2FkZWQoZGF0YSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hTZXJ2aWNlLmRhdGFMb2FkZWQubmV4dChkYXRhKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuaXNBbGl2ZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIG9uVG9nZ2xlRmFjZXRRdWVyeShldmVudDogTWF0Q2hlY2tib3hDaGFuZ2UsIGZhY2V0UXVlcnk6IEZhY2V0UXVlcnkpIHtcbiAgICAgICAgaWYgKGV2ZW50ICYmIGZhY2V0UXVlcnkpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RGYWNldFF1ZXJ5KGZhY2V0UXVlcnkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVuc2VsZWN0RmFjZXRRdWVyeShmYWNldFF1ZXJ5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNlbGVjdEZhY2V0UXVlcnkocXVlcnk6IEZhY2V0UXVlcnkpIHtcbiAgICAgICAgaWYgKHF1ZXJ5KSB7XG4gICAgICAgICAgICBxdWVyeS5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucXVlcnlCdWlsZGVyLmFkZFVzZXJGYWNldFF1ZXJ5KHF1ZXJ5KTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2VsZWN0ZWRGaWVsZHMoKTtcbiAgICAgICAgICAgIHRoaXMucXVlcnlCdWlsZGVyLnVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdW5zZWxlY3RGYWNldFF1ZXJ5KHF1ZXJ5OiBGYWNldFF1ZXJ5KSB7XG4gICAgICAgIGlmIChxdWVyeSkge1xuICAgICAgICAgICAgcXVlcnkuY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5xdWVyeUJ1aWxkZXIucmVtb3ZlVXNlckZhY2V0UXVlcnkocXVlcnkpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTZWxlY3RlZEZpZWxkcygpO1xuICAgICAgICAgICAgdGhpcy5xdWVyeUJ1aWxkZXIudXBkYXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZVNlbGVjdGVkQnVja2V0cygpIHtcbiAgICAgICAgaWYgKHRoaXMucmVzcG9uc2VGYWNldEZpZWxkcykge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEJ1Y2tldHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGZpZWxkIG9mIHRoaXMucmVzcG9uc2VGYWNldEZpZWxkcykge1xuICAgICAgICAgICAgICAgIGlmIChmaWVsZC5idWNrZXRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRCdWNrZXRzLnB1c2goXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi50aGlzLnF1ZXJ5QnVpbGRlci5nZXRVc2VyRmFjZXRCdWNrZXRzKGZpZWxkLmZpZWxkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoYnVja2V0ID0+IGJ1Y2tldC5jaGVja2VkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoYnVja2V0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgZmllbGQsIGJ1Y2tldCB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEJ1Y2tldHMgPSBbXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlU2VsZWN0ZWRGaWVsZHMoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlc3BvbnNlRmFjZXRRdWVyaWVzKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkRmFjZXRRdWVyaWVzID0gdGhpcy5yZXNwb25zZUZhY2V0UXVlcmllcy5pdGVtcy5maWx0ZXIoaXRlbSA9PiBpdGVtLmNoZWNrZWQpO1xuICAgICAgICAgICAgdGhpcy5jYW5SZXNldFNlbGVjdGVkUXVlcmllcyA9IHRoaXMuc2VsZWN0ZWRGYWNldFF1ZXJpZXMubGVuZ3RoID4gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRGYWNldFF1ZXJpZXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuY2FuUmVzZXRTZWxlY3RlZFF1ZXJpZXMgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uVG9nZ2xlQnVja2V0KGV2ZW50OiBNYXRDaGVja2JveENoYW5nZSwgZmllbGQ6IEZhY2V0RmllbGQsIGJ1Y2tldDogRmFjZXRGaWVsZEJ1Y2tldCkge1xuICAgICAgICBpZiAoZXZlbnQgJiYgYnVja2V0KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0RmFjZXRCdWNrZXQoZmllbGQsIGJ1Y2tldCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudW5zZWxlY3RGYWNldEJ1Y2tldChmaWVsZCwgYnVja2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNlbGVjdEZhY2V0QnVja2V0KGZpZWxkOiBGYWNldEZpZWxkLCBidWNrZXQ6IEZhY2V0RmllbGRCdWNrZXQpIHtcbiAgICAgICAgaWYgKGJ1Y2tldCkge1xuICAgICAgICAgICAgYnVja2V0LmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5xdWVyeUJ1aWxkZXIuYWRkVXNlckZhY2V0QnVja2V0KGZpZWxkLCBidWNrZXQpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTZWxlY3RlZEJ1Y2tldHMoKTtcbiAgICAgICAgICAgIHRoaXMucXVlcnlCdWlsZGVyLnVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdW5zZWxlY3RGYWNldEJ1Y2tldChmaWVsZDogRmFjZXRGaWVsZCwgYnVja2V0OiBGYWNldEZpZWxkQnVja2V0KSB7XG4gICAgICAgIGlmIChidWNrZXQpIHtcbiAgICAgICAgICAgIGJ1Y2tldC5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnF1ZXJ5QnVpbGRlci5yZW1vdmVVc2VyRmFjZXRCdWNrZXQoZmllbGQsIGJ1Y2tldCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkQnVja2V0cygpO1xuICAgICAgICAgICAgdGhpcy5xdWVyeUJ1aWxkZXIudXBkYXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXNldFNlbGVjdGVkUXVlcmllcygpIHtcbiAgICAgICAgaWYgKHRoaXMuY2FuUmVzZXRTZWxlY3RlZFF1ZXJpZXMpIHtcbiAgICAgICAgICAgIGZvciAobGV0IHF1ZXJ5IG9mIHRoaXMucmVzcG9uc2VGYWNldFF1ZXJpZXMuaXRlbXMpIHtcbiAgICAgICAgICAgICAgICBxdWVyeS5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5xdWVyeUJ1aWxkZXIucmVtb3ZlVXNlckZhY2V0UXVlcnkocXVlcnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEZhY2V0UXVlcmllcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5jYW5SZXNldFNlbGVjdGVkUXVlcmllcyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5xdWVyeUJ1aWxkZXIudXBkYXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjYW5SZXNldFNlbGVjdGVkQnVja2V0cyhmaWVsZDogRmFjZXRGaWVsZCk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoZmllbGQgJiYgZmllbGQuYnVja2V0cykge1xuICAgICAgICAgICAgcmV0dXJuIGZpZWxkLmJ1Y2tldHMuaXRlbXMuc29tZShidWNrZXQgPT4gYnVja2V0LmNoZWNrZWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXNldFNlbGVjdGVkQnVja2V0cyhmaWVsZDogRmFjZXRGaWVsZCkge1xuICAgICAgICBpZiAoZmllbGQgJiYgZmllbGQuYnVja2V0cykge1xuICAgICAgICAgICAgZm9yIChsZXQgYnVja2V0IG9mIGZpZWxkLmJ1Y2tldHMuaXRlbXMpIHtcbiAgICAgICAgICAgICAgICBidWNrZXQuY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMucXVlcnlCdWlsZGVyLnJlbW92ZVVzZXJGYWNldEJ1Y2tldChmaWVsZCwgYnVja2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2VsZWN0ZWRCdWNrZXRzKCk7XG4gICAgICAgICAgICB0aGlzLnF1ZXJ5QnVpbGRlci51cGRhdGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uRGF0YUxvYWRlZChkYXRhOiBhbnkpIHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGRhdGEubGlzdC5jb250ZXh0O1xuXG4gICAgICAgIGlmIChjb250ZXh0KSB7XG4gICAgICAgICAgICB0aGlzLnBhcnNlRmFjZXRGaWVsZHMoY29udGV4dCk7XG4gICAgICAgICAgICB0aGlzLnBhcnNlRmFjZXRRdWVyaWVzKGNvbnRleHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZXNwb25zZUZhY2V0UXVlcmllcyA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnJlc3BvbnNlRmFjZXRGaWVsZHMgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwYXJzZUZhY2V0RmllbGRzKGNvbnRleHQ6IGFueSkge1xuICAgICAgICBpZiAoIXRoaXMucmVzcG9uc2VGYWNldEZpZWxkcykge1xuICAgICAgICAgICAgY29uc3QgY29uZmlnRmFjZXRGaWVsZHMgPSB0aGlzLnF1ZXJ5QnVpbGRlci5jb25maWcuZmFjZXRGaWVsZHMgJiYgdGhpcy5xdWVyeUJ1aWxkZXIuY29uZmlnLmZhY2V0RmllbGRzLmZpZWxkcyB8fCBbXTtcblxuICAgICAgICAgICAgdGhpcy5yZXNwb25zZUZhY2V0RmllbGRzID0gY29uZmlnRmFjZXRGaWVsZHMubWFwKGZpZWxkID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZUZpZWxkID0gKGNvbnRleHQuZmFjZXRzRmllbGRzIHx8IFtdKS5maW5kKHJlc3BvbnNlID0+IHJlc3BvbnNlLmxhYmVsID09PSBmaWVsZC5sYWJlbCk7XG4gICAgICAgICAgICAgICAgY29uc3QgYnVja2V0czogRmFjZXRGaWVsZEJ1Y2tldFtdID0gKChyZXNwb25zZUZpZWxkICYmIHJlc3BvbnNlRmllbGQuYnVja2V0cykgfHwgW10pLm1hcChidWNrZXQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZEJ1Y2tldCA9IHRoaXMuc2VsZWN0ZWRCdWNrZXRzLmZpbmQoZmFjZXRCdWNrZXQgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZhY2V0QnVja2V0LmJ1Y2tldC5sYWJlbCA9PT0gYnVja2V0LmxhYmVsICYmIGZhY2V0QnVja2V0LmZpZWxkLmZpZWxkID09PSBmaWVsZC5maWVsZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDxGYWNldEZpZWxkQnVja2V0PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5idWNrZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiAhIXNlbGVjdGVkQnVja2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogdGhpcy50cmFuc2xhdGlvblNlcnZpY2UuaW5zdGFudChidWNrZXQuZGlzcGxheSksXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy50cmFuc2xhdGlvblNlcnZpY2UuaW5zdGFudChidWNrZXQubGFiZWwpXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYnVja2V0TGlzdCA9IG5ldyBTZWFyY2hGaWx0ZXJMaXN0PEZhY2V0RmllbGRCdWNrZXQ+KGJ1Y2tldHMsIGZpZWxkLnBhZ2VTaXplKTtcbiAgICAgICAgICAgICAgICBidWNrZXRMaXN0LmZpbHRlciA9IChidWNrZXQ6IEZhY2V0RmllbGRCdWNrZXQpOiBib29sZWFuID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJ1Y2tldCAmJiBidWNrZXRMaXN0LmZpbHRlclRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhdHRlcm4gPSAoYnVja2V0TGlzdC5maWx0ZXJUZXh0IHx8ICcnKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFiZWwgPSAoYnVja2V0LmRpc3BsYXkgfHwgYnVja2V0LmxhYmVsIHx8ICcnKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxhYmVsLnN0YXJ0c1dpdGgocGF0dGVybik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAuLi5maWVsZCxcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMudHJhbnNsYXRpb25TZXJ2aWNlLmluc3RhbnQoZmllbGQubGFiZWwpLFxuICAgICAgICAgICAgICAgICAgICBwYWdlU2l6ZTogZmllbGQucGFnZVNpemUgfCB0aGlzLkRFRkFVTFRfUEFHRV9TSVpFLFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50UGFnZVNpemU6IGZpZWxkLnBhZ2VTaXplIHwgdGhpcy5ERUZBVUxUX1BBR0VfU0laRSxcbiAgICAgICAgICAgICAgICAgICAgYnVja2V0czogYnVja2V0TGlzdFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICB0aGlzLnJlc3BvbnNlRmFjZXRGaWVsZHMgPSB0aGlzLnJlc3BvbnNlRmFjZXRGaWVsZHNcbiAgICAgICAgICAgICAgICAubWFwKGZpZWxkID0+IHtcblxuICAgICAgICAgICAgICAgICAgICBsZXQgcmVzcG9uc2VGaWVsZCA9IChjb250ZXh0LmZhY2V0c0ZpZWxkcyB8fCBbXSkuZmluZChyZXNwb25zZSA9PiByZXNwb25zZS5sYWJlbCA9PT0gZmllbGQubGFiZWwpO1xuXG4gICAgICAgICAgICAgICAgICAgIChmaWVsZCAmJiBmaWVsZC5idWNrZXRzICYmIGZpZWxkLmJ1Y2tldHMuaXRlbXMgfHwgW10pXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKGJ1Y2tldCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VCdWNrZXQgPSAoKHJlc3BvbnNlRmllbGQgJiYgcmVzcG9uc2VGaWVsZC5idWNrZXRzKSB8fCBbXSkuZmluZChyZXNwQnVja2V0ID0+IHJlc3BCdWNrZXQubGFiZWwgPT09IGJ1Y2tldC5sYWJlbCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWNrZXQuY291bnQgPSByZXNwb25zZUJ1Y2tldCA/IHJlc3BvbnNlQnVja2V0LmNvdW50IDogMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYnVja2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpZWxkO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwYXJzZUZhY2V0UXVlcmllcyhjb250ZXh0OiBhbnkpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2VRdWVyaWVzID0gdGhpcy5nZXRGYWNldFF1ZXJ5TWFwKGNvbnRleHQpO1xuICAgICAgICBpZiAodGhpcy5xdWVyeUJ1aWxkZXIuY29uZmlnLmZhY2V0UXVlcmllcykge1xuICAgICAgICAgICAgY29uc3QgYmtwUmVzcG9uc2VGYWNldFF1ZXJpZXMgPSAgT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5yZXNwb25zZUZhY2V0UXVlcmllcyk7XG4gICAgICAgICAgICBjb25zdCBmYWNldFF1ZXJpZXMgPSAodGhpcy5xdWVyeUJ1aWxkZXIuY29uZmlnLmZhY2V0UXVlcmllcy5xdWVyaWVzIHx8IFtdKVxuICAgICAgICAgICAgICAgIC5tYXAocXVlcnkgPT4ge1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UmVzdWx0ID0gcmVzcG9uc2VRdWVyaWVzW3F1ZXJ5LmxhYmVsXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmtwUXVlcnkgPSAoYmtwUmVzcG9uc2VGYWNldFF1ZXJpZXMuaXRlbXMgfHwgW10pLmZpbmQoaXRlbSA9PiBpdGVtLmxhYmVsID09PSBxdWVyeS5sYWJlbCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGJrcFF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBia3BRdWVyeS5jb3VudCA9IHF1ZXJ5UmVzdWx0LmNvdW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJrcFF1ZXJ5O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA8RmFjZXRRdWVyeT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4ucXVlcnksXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy50cmFuc2xhdGlvblNlcnZpY2UuaW5zdGFudChxdWVyeS5sYWJlbCksXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudDogcXVlcnlSZXN1bHQuY291bnRcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKGZhY2V0UXVlcmllcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzcG9uc2VGYWNldFF1ZXJpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNwb25zZUZhY2V0UXVlcmllcy5pdGVtcyA9IGZhY2V0UXVlcmllcztcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzcG9uc2VGYWNldFF1ZXJpZXMgPSBuZXcgUmVzcG9uc2VGYWNldFF1ZXJ5TGlzdChmYWNldFF1ZXJpZXMsIHRoaXMuZmFjZXRRdWVyaWVzUGFnZVNpemUpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3BvbnNlRmFjZXRRdWVyaWVzID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0RmFjZXRRdWVyeU1hcChjb250ZXh0OiBhbnkpOiB7IFtrZXk6IHN0cmluZ106IGFueSB9IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge307XG5cbiAgICAgICAgKGNvbnRleHQuZmFjZXRRdWVyaWVzIHx8IFtdKS5mb3JFYWNoKHF1ZXJ5ID0+IHtcbiAgICAgICAgICAgIHJlc3VsdFtxdWVyeS5sYWJlbF0gPSBxdWVyeTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQsIFZpZXdFbmNhcHN1bGF0aW9uLCBPbkluaXQsIElucHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBTZWFyY2hXaWRnZXQgfSBmcm9tICcuLi8uLi9zZWFyY2gtd2lkZ2V0LmludGVyZmFjZSc7XG5pbXBvcnQgeyBTZWFyY2hXaWRnZXRTZXR0aW5ncyB9IGZyb20gJy4uLy4uL3NlYXJjaC13aWRnZXQtc2V0dGluZ3MuaW50ZXJmYWNlJztcbmltcG9ydCB7IFNlYXJjaFF1ZXJ5QnVpbGRlclNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZWFyY2gtcXVlcnktYnVpbGRlci5zZXJ2aWNlJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdhZGYtc2VhcmNoLXRleHQnLFxuICAgIHRlbXBsYXRlVXJsOiAnLi9zZWFyY2gtdGV4dC5jb21wb25lbnQuaHRtbCcsXG4gICAgc3R5bGVVcmxzOiBbJy4vc2VhcmNoLXRleHQuY29tcG9uZW50LnNjc3MnXSxcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxuICAgIGhvc3Q6IHsgY2xhc3M6ICdhZGYtc2VhcmNoLXRleHQnIH1cbn0pXG5leHBvcnQgY2xhc3MgU2VhcmNoVGV4dENvbXBvbmVudCBpbXBsZW1lbnRzIFNlYXJjaFdpZGdldCwgT25Jbml0IHtcblxuICAgIC8qKiBUaGUgY29udGVudCBvZiB0aGUgdGV4dCBib3guICovXG4gICAgQElucHV0KClcbiAgICB2YWx1ZSA9ICcnO1xuXG4gICAgaWQ6IHN0cmluZztcbiAgICBzZXR0aW5nczogU2VhcmNoV2lkZ2V0U2V0dGluZ3M7XG4gICAgY29udGV4dDogU2VhcmNoUXVlcnlCdWlsZGVyU2VydmljZTtcblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICBpZiAodGhpcy5jb250ZXh0ICYmIHRoaXMuc2V0dGluZ3MgJiYgdGhpcy5zZXR0aW5ncy5wYXR0ZXJuKSB7XG4gICAgICAgICAgICBjb25zdCBwYXR0ZXJuID0gbmV3IFJlZ0V4cCh0aGlzLnNldHRpbmdzLnBhdHRlcm4sICdnJyk7XG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IHBhdHRlcm4uZXhlYyh0aGlzLmNvbnRleHQucXVlcnlGcmFnbWVudHNbdGhpcy5pZF0gfHwgJycpO1xuXG4gICAgICAgICAgICBpZiAobWF0Y2ggJiYgbWF0Y2gubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSBtYXRjaFsxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLnZhbHVlID0gJyc7XG4gICAgICAgIHRoaXMudXBkYXRlUXVlcnkobnVsbCk7XG4gICAgfVxuXG4gICAgb25DaGFuZ2VkSGFuZGxlcihldmVudCkge1xuICAgICAgICB0aGlzLnZhbHVlID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuICAgICAgICB0aGlzLnVwZGF0ZVF1ZXJ5KHRoaXMudmFsdWUpO1xuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlUXVlcnkodmFsdWU6IHN0cmluZykge1xuICAgICAgICBpZiAodGhpcy5jb250ZXh0ICYmIHRoaXMuc2V0dGluZ3MgJiYgdGhpcy5zZXR0aW5ncy5maWVsZCkge1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0LnF1ZXJ5RnJhZ21lbnRzW3RoaXMuaWRdID0gdmFsdWUgPyBgJHt0aGlzLnNldHRpbmdzLmZpZWxkfTonJHt2YWx1ZX0nYCA6ICcnO1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0LnVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQsIFZpZXdFbmNhcHN1bGF0aW9uLCBPbkluaXQsIElucHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBNYXRSYWRpb0NoYW5nZSB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsJztcblxuaW1wb3J0IHsgU2VhcmNoV2lkZ2V0IH0gZnJvbSAnLi4vLi4vc2VhcmNoLXdpZGdldC5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgU2VhcmNoV2lkZ2V0U2V0dGluZ3MgfSBmcm9tICcuLi8uLi9zZWFyY2gtd2lkZ2V0LXNldHRpbmdzLmludGVyZmFjZSc7XG5pbXBvcnQgeyBTZWFyY2hRdWVyeUJ1aWxkZXJTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VhcmNoLXF1ZXJ5LWJ1aWxkZXIuc2VydmljZSc7XG5pbXBvcnQgeyBTZWFyY2hGaWx0ZXJMaXN0IH0gZnJvbSAnLi4vc2VhcmNoLWZpbHRlci9tb2RlbHMvc2VhcmNoLWZpbHRlci1saXN0Lm1vZGVsJztcblxuZXhwb3J0IGludGVyZmFjZSBTZWFyY2hSYWRpb09wdGlvbiB7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHZhbHVlOiBzdHJpbmc7XG59XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnYWRmLXNlYXJjaC1yYWRpbycsXG4gICAgdGVtcGxhdGVVcmw6ICcuL3NlYXJjaC1yYWRpby5jb21wb25lbnQuaHRtbCcsXG4gICAgc3R5bGVVcmxzOiBbJy4vc2VhcmNoLXJhZGlvLmNvbXBvbmVudC5zY3NzJ10sXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZSxcbiAgICBob3N0OiB7IGNsYXNzOiAnYWRmLXNlYXJjaC1yYWRpbycgfVxufSlcbmV4cG9ydCBjbGFzcyBTZWFyY2hSYWRpb0NvbXBvbmVudCBpbXBsZW1lbnRzIFNlYXJjaFdpZGdldCwgT25Jbml0IHtcblxuICAgIC8qKiBUaGUgdmFsdWUgb2YgdGhlIHNlbGVjdGVkIHJhZGlvIGJ1dHRvbi4gKi9cbiAgICBASW5wdXQoKVxuICAgIHZhbHVlOiBzdHJpbmc7XG5cbiAgICBpZDogc3RyaW5nO1xuICAgIHNldHRpbmdzOiBTZWFyY2hXaWRnZXRTZXR0aW5ncztcbiAgICBjb250ZXh0OiBTZWFyY2hRdWVyeUJ1aWxkZXJTZXJ2aWNlO1xuICAgIG9wdGlvbnM6IFNlYXJjaEZpbHRlckxpc3Q8U2VhcmNoUmFkaW9PcHRpb24+O1xuICAgIHBhZ2VTaXplID0gNTtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBuZXcgU2VhcmNoRmlsdGVyTGlzdDxTZWFyY2hSYWRpb09wdGlvbj4oKTtcbiAgICB9XG5cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MpIHtcbiAgICAgICAgICAgIHRoaXMucGFnZVNpemUgPSB0aGlzLnNldHRpbmdzLnBhZ2VTaXplIHx8IDU7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLm9wdGlvbnMgJiYgdGhpcy5zZXR0aW5ncy5vcHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBuZXcgU2VhcmNoRmlsdGVyTGlzdDxTZWFyY2hSYWRpb09wdGlvbj4oXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3Mub3B0aW9ucywgdGhpcy5wYWdlU2l6ZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldFZhbHVlKFxuICAgICAgICAgICAgdGhpcy5nZXRTZWxlY3RlZFZhbHVlKClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFNlbGVjdGVkVmFsdWUoKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3Qgb3B0aW9uczogYW55W10gPSB0aGlzLnNldHRpbmdzWydvcHRpb25zJ10gfHwgW107XG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgbGV0IHNlbGVjdGVkID0gb3B0aW9ucy5maW5kKG9wdCA9PiBvcHQuZGVmYXVsdCk7XG4gICAgICAgICAgICBpZiAoIXNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQgPSBvcHRpb25zWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGVkLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0VmFsdWUobmV3VmFsdWU6IHN0cmluZykge1xuICAgICAgICB0aGlzLnZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgIHRoaXMuY29udGV4dC5xdWVyeUZyYWdtZW50c1t0aGlzLmlkXSA9IG5ld1ZhbHVlO1xuICAgICAgICB0aGlzLmNvbnRleHQudXBkYXRlKCk7XG4gICAgfVxuXG4gICAgY2hhbmdlSGFuZGxlcihldmVudDogTWF0UmFkaW9DaGFuZ2UpIHtcbiAgICAgICAgdGhpcy5zZXRWYWx1ZShldmVudC52YWx1ZSk7XG4gICAgfVxufVxuIiwiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQ29tcG9uZW50LCBWaWV3RW5jYXBzdWxhdGlvbiwgT25Jbml0LCBJbnB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgU2VhcmNoV2lkZ2V0IH0gZnJvbSAnLi4vLi4vc2VhcmNoLXdpZGdldC5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgU2VhcmNoV2lkZ2V0U2V0dGluZ3MgfSBmcm9tICcuLi8uLi9zZWFyY2gtd2lkZ2V0LXNldHRpbmdzLmludGVyZmFjZSc7XG5pbXBvcnQgeyBTZWFyY2hRdWVyeUJ1aWxkZXJTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VhcmNoLXF1ZXJ5LWJ1aWxkZXIuc2VydmljZSc7XG5pbXBvcnQgeyBNYXRTbGlkZXJDaGFuZ2UgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbCc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnYWRmLXNlYXJjaC1zbGlkZXInLFxuICAgIHRlbXBsYXRlVXJsOiAnLi9zZWFyY2gtc2xpZGVyLmNvbXBvbmVudC5odG1sJyxcbiAgICBzdHlsZVVybHM6IFsnLi9zZWFyY2gtc2xpZGVyLmNvbXBvbmVudC5zY3NzJ10sXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZSxcbiAgICBob3N0OiB7IGNsYXNzOiAnYWRmLXNlYXJjaC1zbGlkZXInIH1cbn0pXG5leHBvcnQgY2xhc3MgU2VhcmNoU2xpZGVyQ29tcG9uZW50IGltcGxlbWVudHMgU2VhcmNoV2lkZ2V0LCBPbkluaXQge1xuXG4gICAgaWQ6IHN0cmluZztcbiAgICBzZXR0aW5nczogU2VhcmNoV2lkZ2V0U2V0dGluZ3M7XG4gICAgY29udGV4dDogU2VhcmNoUXVlcnlCdWlsZGVyU2VydmljZTtcbiAgICBzdGVwOiBudW1iZXI7XG4gICAgbWluOiBudW1iZXI7XG4gICAgbWF4OiBudW1iZXI7XG4gICAgdGh1bWJMYWJlbCA9IGZhbHNlO1xuXG4gICAgLyoqIFRoZSBudW1lcmljIHZhbHVlIHJlcHJlc2VudGVkIGJ5IHRoZSBzbGlkZXIuICovXG4gICAgQElucHV0KClcbiAgICB2YWx1ZTogbnVtYmVyIHwgbnVsbDtcblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncykge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuaGFzT3duUHJvcGVydHkoJ21pbicpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5taW4gPSB0aGlzLnNldHRpbmdzWydtaW4nXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuaGFzT3duUHJvcGVydHkoJ21heCcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXggPSB0aGlzLnNldHRpbmdzWydtYXgnXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuaGFzT3duUHJvcGVydHkoJ3N0ZXAnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RlcCA9IHRoaXMuc2V0dGluZ3NbJ3N0ZXAnXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy50aHVtYkxhYmVsID0gdGhpcy5zZXR0aW5nc1sndGh1bWJMYWJlbCddID8gdHJ1ZSA6IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLm1pbiB8fCAwO1xuICAgICAgICB0aGlzLnVwZGF0ZVF1ZXJ5KG51bGwpO1xuICAgIH1cblxuICAgIG9uQ2hhbmdlZEhhbmRsZXIoZXZlbnQ6IE1hdFNsaWRlckNoYW5nZSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gZXZlbnQudmFsdWU7XG4gICAgICAgIHRoaXMudXBkYXRlUXVlcnkodGhpcy52YWx1ZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVRdWVyeSh2YWx1ZTogbnVtYmVyIHwgbnVsbCkge1xuICAgICAgICBpZiAodGhpcy5pZCAmJiB0aGlzLmNvbnRleHQgJiYgdGhpcy5zZXR0aW5ncyAmJiB0aGlzLnNldHRpbmdzLmZpZWxkKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQucXVlcnlGcmFnbWVudHNbdGhpcy5pZF0gPSAnJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LnF1ZXJ5RnJhZ21lbnRzW3RoaXMuaWRdID0gYCR7dGhpcy5zZXR0aW5ncy5maWVsZH06WzAgVE8gJHt2YWx1ZX1dYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY29udGV4dC51cGRhdGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxufVxuIiwiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgRXJyb3JTdGF0ZU1hdGNoZXIgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbCc7XG5pbXBvcnQgeyBGb3JtQ29udHJvbCwgRm9ybUdyb3VwRGlyZWN0aXZlLCBOZ0Zvcm0gfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5cbmV4cG9ydCBjbGFzcyBMaXZlRXJyb3JTdGF0ZU1hdGNoZXIgaW1wbGVtZW50cyBFcnJvclN0YXRlTWF0Y2hlciB7XG5cbiAgICBpc0Vycm9yU3RhdGUoY29udHJvbDogRm9ybUNvbnRyb2wgfCBudWxsLCBmb3JtOiBGb3JtR3JvdXBEaXJlY3RpdmUgfCBOZ0Zvcm0gfCBudWxsKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGlzU3VibWl0dGVkID0gZm9ybSAmJiBmb3JtLnN1Ym1pdHRlZDtcbiAgICAgICAgcmV0dXJuICEhKGNvbnRyb2wgJiYgY29udHJvbC5pbnZhbGlkICYmIChjb250cm9sLmRpcnR5IHx8IGNvbnRyb2wudG91Y2hlZCB8fCAoIWNvbnRyb2wucHJpc3RpbmUgJiYgaXNTdWJtaXR0ZWQpKSk7XG4gICAgfVxuXG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBPbkluaXQsIENvbXBvbmVudCwgVmlld0VuY2Fwc3VsYXRpb24gfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEZvcm1Db250cm9sLCBWYWxpZGF0b3JzLCBGb3JtR3JvdXAgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBTZWFyY2hXaWRnZXQgfSBmcm9tICcuLi8uLi9zZWFyY2gtd2lkZ2V0LmludGVyZmFjZSc7XG5pbXBvcnQgeyBTZWFyY2hXaWRnZXRTZXR0aW5ncyB9IGZyb20gJy4uLy4uL3NlYXJjaC13aWRnZXQtc2V0dGluZ3MuaW50ZXJmYWNlJztcbmltcG9ydCB7IFNlYXJjaFF1ZXJ5QnVpbGRlclNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZWFyY2gtcXVlcnktYnVpbGRlci5zZXJ2aWNlJztcbmltcG9ydCB7IExpdmVFcnJvclN0YXRlTWF0Y2hlciB9IGZyb20gJy4uLy4uL2Zvcm1zL2xpdmUtZXJyb3Itc3RhdGUtbWF0Y2hlcic7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnYWRmLXNlYXJjaC1udW1iZXItcmFuZ2UnLFxuICAgIHRlbXBsYXRlVXJsOiAnLi9zZWFyY2gtbnVtYmVyLXJhbmdlLmNvbXBvbmVudC5odG1sJyxcbiAgICBzdHlsZVVybHM6IFsnLi9zZWFyY2gtbnVtYmVyLXJhbmdlLmNvbXBvbmVudC5zY3NzJ10sXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZSxcbiAgICBob3N0OiB7IGNsYXNzOiAnYWRmLXNlYXJjaC1udW1iZXItcmFuZ2UnIH1cbn0pXG5leHBvcnQgY2xhc3MgU2VhcmNoTnVtYmVyUmFuZ2VDb21wb25lbnQgaW1wbGVtZW50cyBTZWFyY2hXaWRnZXQsIE9uSW5pdCB7XG5cbiAgICBmcm9tOiBGb3JtQ29udHJvbDtcbiAgICB0bzogRm9ybUNvbnRyb2w7XG5cbiAgICBmb3JtOiBGb3JtR3JvdXA7XG4gICAgbWF0Y2hlciA9IG5ldyBMaXZlRXJyb3JTdGF0ZU1hdGNoZXIoKTtcblxuICAgIGlkOiBzdHJpbmc7XG4gICAgc2V0dGluZ3M/OiBTZWFyY2hXaWRnZXRTZXR0aW5ncztcbiAgICBjb250ZXh0PzogU2VhcmNoUXVlcnlCdWlsZGVyU2VydmljZTtcblxuICAgIGZpZWxkOiBzdHJpbmc7XG4gICAgZm9ybWF0ID0gJ1t7RlJPTX0gVE8ge1RPfV0nO1xuXG4gICAgdmFsaWRhdG9yczogVmFsaWRhdG9ycztcblxuICAgIG5nT25Jbml0KCk6IHZvaWQge1xuXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzKSB7XG4gICAgICAgICAgICB0aGlzLmZpZWxkID0gdGhpcy5zZXR0aW5ncy5maWVsZDtcbiAgICAgICAgICAgIHRoaXMuZm9ybWF0ID0gdGhpcy5zZXR0aW5ncy5mb3JtYXQgfHwgJ1t7RlJPTX0gVE8ge1RPfV0nO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy52YWxpZGF0b3JzID0gVmFsaWRhdG9ycy5jb21wb3NlKFtcbiAgICAgICAgICAgIFZhbGlkYXRvcnMucmVxdWlyZWQsXG4gICAgICAgICAgICBWYWxpZGF0b3JzLnBhdHRlcm4oL14tPygwfFsxLTldXFxkKik/JC8pLFxuICAgICAgICAgICAgVmFsaWRhdG9ycy5taW4oMClcbiAgICAgICAgXSk7XG5cbiAgICAgICAgdGhpcy5mcm9tID0gbmV3IEZvcm1Db250cm9sKCcnLCB0aGlzLnZhbGlkYXRvcnMpO1xuICAgICAgICB0aGlzLnRvID0gbmV3IEZvcm1Db250cm9sKCcnLCB0aGlzLnZhbGlkYXRvcnMpO1xuXG4gICAgICAgIHRoaXMuZm9ybSA9IG5ldyBGb3JtR3JvdXAoe1xuICAgICAgICAgICAgZnJvbTogdGhpcy5mcm9tLFxuICAgICAgICAgICAgdG86IHRoaXMudG9cbiAgICAgICAgfSwgdGhpcy5mb3JtVmFsaWRhdG9yKTtcbiAgICB9XG5cbiAgICBmb3JtVmFsaWRhdG9yKGZvcm1Hcm91cDogRm9ybUdyb3VwKSB7XG4gICAgICAgIHJldHVybiBwYXJzZUludChmb3JtR3JvdXAuZ2V0KCdmcm9tJykudmFsdWUsIDEwKSA8IHBhcnNlSW50KGZvcm1Hcm91cC5nZXQoJ3RvJykudmFsdWUsIDEwKSA/IG51bGwgOiB7J21pc21hdGNoJzogdHJ1ZX07XG4gICAgfVxuXG4gICAgYXBwbHkobW9kZWw6IHsgZnJvbTogc3RyaW5nLCB0bzogc3RyaW5nIH0sIGlzVmFsaWQ6IGJvb2xlYW4pIHtcbiAgICAgICAgaWYgKGlzVmFsaWQgJiYgdGhpcy5pZCAmJiB0aGlzLmNvbnRleHQgJiYgdGhpcy5maWVsZCkge1xuICAgICAgICAgICAgY29uc3QgbWFwID0gbmV3IE1hcDxzdHJpbmcsIHN0cmluZz4oKTtcbiAgICAgICAgICAgIG1hcC5zZXQoJ0ZST00nLCBtb2RlbC5mcm9tKTtcbiAgICAgICAgICAgIG1hcC5zZXQoJ1RPJywgbW9kZWwudG8pO1xuXG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZm9ybWF0U3RyaW5nKHRoaXMuZm9ybWF0LCBtYXApO1xuXG4gICAgICAgICAgICB0aGlzLmNvbnRleHQucXVlcnlGcmFnbWVudHNbdGhpcy5pZF0gPSBgJHt0aGlzLmZpZWxkfToke3ZhbHVlfWA7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQudXBkYXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGZvcm1hdFN0cmluZyhzdHI6IHN0cmluZywgbWFwOiBNYXA8c3RyaW5nLCBzdHJpbmc+KTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IHN0cjtcblxuICAgICAgICBtYXAuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZXhwciA9IG5ldyBSZWdFeHAoJ3snICsga2V5ICsgJ30nLCAnZ20nKTtcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKGV4cHIsIHZhbHVlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy5mb3JtLnJlc2V0KHtcbiAgICAgICAgICAgIGZyb206ICcnLFxuICAgICAgICAgICAgdG86ICcnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh0aGlzLmlkICYmIHRoaXMuY29udGV4dCkge1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0LnF1ZXJ5RnJhZ21lbnRzW3RoaXMuaWRdID0gJyc7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQudXBkYXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQsIFZpZXdFbmNhcHN1bGF0aW9uLCBPbkluaXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE1hdENoZWNrYm94Q2hhbmdlIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwnO1xuaW1wb3J0IHsgU2VhcmNoV2lkZ2V0IH0gZnJvbSAnLi4vLi4vc2VhcmNoLXdpZGdldC5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgU2VhcmNoV2lkZ2V0U2V0dGluZ3MgfSBmcm9tICcuLi8uLi9zZWFyY2gtd2lkZ2V0LXNldHRpbmdzLmludGVyZmFjZSc7XG5pbXBvcnQgeyBTZWFyY2hRdWVyeUJ1aWxkZXJTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VhcmNoLXF1ZXJ5LWJ1aWxkZXIuc2VydmljZSc7XG5pbXBvcnQgeyBTZWFyY2hGaWx0ZXJMaXN0IH0gZnJvbSAnLi4vc2VhcmNoLWZpbHRlci9tb2RlbHMvc2VhcmNoLWZpbHRlci1saXN0Lm1vZGVsJztcblxuZXhwb3J0IGludGVyZmFjZSBTZWFyY2hMaXN0T3B0aW9uIHtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgdmFsdWU6IHN0cmluZztcbiAgICBjaGVja2VkOiBib29sZWFuO1xufVxuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ2FkZi1zZWFyY2gtY2hlY2stbGlzdCcsXG4gICAgdGVtcGxhdGVVcmw6ICcuL3NlYXJjaC1jaGVjay1saXN0LmNvbXBvbmVudC5odG1sJyxcbiAgICBzdHlsZVVybHM6IFsnLi9zZWFyY2gtY2hlY2stbGlzdC5jb21wb25lbnQuc2NzcyddLFxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXG4gICAgaG9zdDogeyBjbGFzczogJ2FkZi1zZWFyY2gtY2hlY2stbGlzdCcgfVxufSlcbmV4cG9ydCBjbGFzcyBTZWFyY2hDaGVja0xpc3RDb21wb25lbnQgaW1wbGVtZW50cyBTZWFyY2hXaWRnZXQsIE9uSW5pdCB7XG5cbiAgICBpZDogc3RyaW5nO1xuICAgIHNldHRpbmdzPzogU2VhcmNoV2lkZ2V0U2V0dGluZ3M7XG4gICAgY29udGV4dD86IFNlYXJjaFF1ZXJ5QnVpbGRlclNlcnZpY2U7XG4gICAgb3B0aW9uczogU2VhcmNoRmlsdGVyTGlzdDxTZWFyY2hMaXN0T3B0aW9uPjtcbiAgICBvcGVyYXRvcjogc3RyaW5nID0gJ09SJztcbiAgICBwYWdlU2l6ZSA9IDU7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gbmV3IFNlYXJjaEZpbHRlckxpc3Q8U2VhcmNoTGlzdE9wdGlvbj4oKTtcbiAgICB9XG5cbiAgICBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MpIHtcbiAgICAgICAgICAgIHRoaXMub3BlcmF0b3IgPSB0aGlzLnNldHRpbmdzLm9wZXJhdG9yIHx8ICdPUic7XG4gICAgICAgICAgICB0aGlzLnBhZ2VTaXplID0gdGhpcy5zZXR0aW5ncy5wYWdlU2l6ZSB8fCA1O1xuXG4gICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5vcHRpb25zICYmIHRoaXMuc2V0dGluZ3Mub3B0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gbmV3IFNlYXJjaEZpbHRlckxpc3QodGhpcy5zZXR0aW5ncy5vcHRpb25zLCB0aGlzLnBhZ2VTaXplKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLm9wdGlvbnMuaXRlbXMuZm9yRWFjaChvcHQgPT4ge1xuICAgICAgICAgICAgb3B0LmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRoaXMuaWQgJiYgdGhpcy5jb250ZXh0KSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQucXVlcnlGcmFnbWVudHNbdGhpcy5pZF0gPSAnJztcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC51cGRhdGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNoYW5nZUhhbmRsZXIoZXZlbnQ6IE1hdENoZWNrYm94Q2hhbmdlLCBvcHRpb246IGFueSkge1xuICAgICAgICBvcHRpb24uY2hlY2tlZCA9IGV2ZW50LmNoZWNrZWQ7XG4gICAgICAgIHRoaXMuZmx1c2goKTtcbiAgICB9XG5cbiAgICBmbHVzaCgpIHtcbiAgICAgICAgY29uc3QgY2hlY2tlZFZhbHVlcyA9IHRoaXMub3B0aW9ucy5pdGVtc1xuICAgICAgICAgICAgLmZpbHRlcihvcHRpb24gPT4gb3B0aW9uLmNoZWNrZWQpXG4gICAgICAgICAgICAubWFwKG9wdGlvbiA9PiBvcHRpb24udmFsdWUpO1xuXG4gICAgICAgIGNvbnN0IHF1ZXJ5ID0gY2hlY2tlZFZhbHVlcy5qb2luKGAgJHt0aGlzLm9wZXJhdG9yfSBgKTtcblxuICAgICAgICBpZiAodGhpcy5pZCAmJiB0aGlzLmNvbnRleHQpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5xdWVyeUZyYWdtZW50c1t0aGlzLmlkXSA9IHF1ZXJ5O1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0LnVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgT25Jbml0LCBDb21wb25lbnQsIFZpZXdFbmNhcHN1bGF0aW9uIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBGb3JtQ29udHJvbCwgVmFsaWRhdG9ycywgRm9ybUdyb3VwIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgRGF0ZUFkYXB0ZXIsIE1BVF9EQVRFX0ZPUk1BVFMsIE1BVF9EQVRFX0xPQ0FMRSB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2NvcmUnO1xuaW1wb3J0IHsgTW9tZW50RGF0ZUFkYXB0ZXIsIE1PTUVOVF9EQVRFX0ZPUk1BVFMgfSBmcm9tICdAYWxmcmVzY28vYWRmLWNvcmUnO1xuXG5pbXBvcnQgeyBTZWFyY2hXaWRnZXQgfSBmcm9tICcuLi8uLi9zZWFyY2gtd2lkZ2V0LmludGVyZmFjZSc7XG5pbXBvcnQgeyBTZWFyY2hXaWRnZXRTZXR0aW5ncyB9IGZyb20gJy4uLy4uL3NlYXJjaC13aWRnZXQtc2V0dGluZ3MuaW50ZXJmYWNlJztcbmltcG9ydCB7IFNlYXJjaFF1ZXJ5QnVpbGRlclNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZWFyY2gtcXVlcnktYnVpbGRlci5zZXJ2aWNlJztcbmltcG9ydCB7IExpdmVFcnJvclN0YXRlTWF0Y2hlciB9IGZyb20gJy4uLy4uL2Zvcm1zL2xpdmUtZXJyb3Itc3RhdGUtbWF0Y2hlcic7XG5pbXBvcnQgeyBNb21lbnQgfSBmcm9tICdtb21lbnQnO1xuaW1wb3J0IHsgVXNlclByZWZlcmVuY2VzU2VydmljZSwgVXNlclByZWZlcmVuY2VWYWx1ZXMgfSBmcm9tICdAYWxmcmVzY28vYWRmLWNvcmUnO1xuXG5kZWNsYXJlIGxldCBtb21lbnQ6IGFueTtcblxuY29uc3QgREVGQVVMVF9GT1JNQVRfREFURTogc3RyaW5nID0gJ0REL01NL1lZWVknO1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ2FkZi1zZWFyY2gtZGF0ZS1yYW5nZScsXG4gICAgdGVtcGxhdGVVcmw6ICcuL3NlYXJjaC1kYXRlLXJhbmdlLmNvbXBvbmVudC5odG1sJyxcbiAgICBzdHlsZVVybHM6IFsnLi9zZWFyY2gtZGF0ZS1yYW5nZS5jb21wb25lbnQuc2NzcyddLFxuICAgIHByb3ZpZGVyczogW1xuICAgICAgICB7cHJvdmlkZTogRGF0ZUFkYXB0ZXIsIHVzZUNsYXNzOiBNb21lbnREYXRlQWRhcHRlciwgZGVwczogW01BVF9EQVRFX0xPQ0FMRV19LFxuICAgICAgICB7cHJvdmlkZTogTUFUX0RBVEVfRk9STUFUUywgdXNlVmFsdWU6IE1PTUVOVF9EQVRFX0ZPUk1BVFN9XG4gICAgXSxcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxuICAgIGhvc3Q6IHsgY2xhc3M6ICdhZGYtc2VhcmNoLWRhdGUtcmFuZ2UnIH1cbn0pXG5leHBvcnQgY2xhc3MgU2VhcmNoRGF0ZVJhbmdlQ29tcG9uZW50IGltcGxlbWVudHMgU2VhcmNoV2lkZ2V0LCBPbkluaXQge1xuXG4gICAgZnJvbTogRm9ybUNvbnRyb2w7XG4gICAgdG86IEZvcm1Db250cm9sO1xuXG4gICAgZm9ybTogRm9ybUdyb3VwO1xuICAgIG1hdGNoZXIgPSBuZXcgTGl2ZUVycm9yU3RhdGVNYXRjaGVyKCk7XG5cbiAgICBpZDogc3RyaW5nO1xuICAgIHNldHRpbmdzPzogU2VhcmNoV2lkZ2V0U2V0dGluZ3M7XG4gICAgY29udGV4dD86IFNlYXJjaFF1ZXJ5QnVpbGRlclNlcnZpY2U7XG4gICAgbWF4RGF0ZTogYW55O1xuICAgIGRhdGVQaWNrZXJEYXRlRm9ybWF0ID0gREVGQVVMVF9GT1JNQVRfREFURTtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZGF0ZUFkYXB0ZXI6IERhdGVBZGFwdGVyPE1vbWVudD4sXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSB1c2VyUHJlZmVyZW5jZXNTZXJ2aWNlOiBVc2VyUHJlZmVyZW5jZXNTZXJ2aWNlKSB7XG4gICAgfVxuXG4gICAgZ2V0RnJvbVZhbGlkYXRpb25NZXNzYWdlKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLmZyb20uaGFzRXJyb3IoJ2ludmFsaWRPbkNoYW5nZScpIHx8IHRoaXMuaGFzUGFyc2VFcnJvcih0aGlzLmZyb20pID8gJ1NFQVJDSC5GSUxURVIuVkFMSURBVElPTi5JTlZBTElELURBVEUnIDpcbiAgICAgICAgICAgIHRoaXMuZnJvbS5oYXNFcnJvcignbWF0RGF0ZXBpY2tlck1heCcpID8gJ1NFQVJDSC5GSUxURVIuVkFMSURBVElPTi5CRVlPTkQtTUFYLURBVEUnIDpcbiAgICAgICAgICAgIHRoaXMuZnJvbS5oYXNFcnJvcigncmVxdWlyZWQnKSA/ICdTRUFSQ0guRklMVEVSLlZBTElEQVRJT04uUkVRVUlSRUQtVkFMVUUnIDpcbiAgICAgICAgICAgICcnO1xuICAgIH1cblxuICAgIGdldFRvVmFsaWRhdGlvbk1lc3NhZ2UoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG8uaGFzRXJyb3IoJ2ludmFsaWRPbkNoYW5nZScpIHx8IHRoaXMuaGFzUGFyc2VFcnJvcih0aGlzLnRvKSA/ICdTRUFSQ0guRklMVEVSLlZBTElEQVRJT04uSU5WQUxJRC1EQVRFJyA6XG4gICAgICAgICAgICB0aGlzLnRvLmhhc0Vycm9yKCdtYXREYXRlcGlja2VyTWluJykgPyAnU0VBUkNILkZJTFRFUi5WQUxJREFUSU9OLk5PLURBWVMnIDpcbiAgICAgICAgICAgIHRoaXMudG8uaGFzRXJyb3IoJ21hdERhdGVwaWNrZXJNYXgnKSA/ICdTRUFSQ0guRklMVEVSLlZBTElEQVRJT04uQkVZT05ELU1BWC1EQVRFJyA6XG4gICAgICAgICAgICB0aGlzLnRvLmhhc0Vycm9yKCdyZXF1aXJlZCcpID8gJ1NFQVJDSC5GSUxURVIuVkFMSURBVElPTi5SRVFVSVJFRC1WQUxVRScgOlxuICAgICAgICAgICAgJyc7XG4gICAgfVxuXG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGVQaWNrZXJEYXRlRm9ybWF0ID0gdGhpcy5zZXR0aW5ncy5kYXRlRm9ybWF0IHx8IERFRkFVTFRfRk9STUFUX0RBVEU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdGhlQ3VzdG9tRGF0ZUFkYXB0ZXIgPSA8TW9tZW50RGF0ZUFkYXB0ZXI+IDxhbnk+IHRoaXMuZGF0ZUFkYXB0ZXI7XG4gICAgICAgIHRoZUN1c3RvbURhdGVBZGFwdGVyLm92ZXJyaWRlRGlzcGx5YUZvcm1hdCA9IHRoaXMuZGF0ZVBpY2tlckRhdGVGb3JtYXQ7XG5cbiAgICAgICAgdGhpcy51c2VyUHJlZmVyZW5jZXNTZXJ2aWNlLnNlbGVjdChVc2VyUHJlZmVyZW5jZVZhbHVlcy5Mb2NhbGUpLnN1YnNjcmliZSgobG9jYWxlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNldExvY2FsZShsb2NhbGUpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCB2YWxpZGF0b3JzID0gVmFsaWRhdG9ycy5jb21wb3NlKFtcbiAgICAgICAgICAgIFZhbGlkYXRvcnMucmVxdWlyZWRcbiAgICAgICAgXSk7XG5cbiAgICAgICAgdGhpcy5mcm9tID0gbmV3IEZvcm1Db250cm9sKCcnLCB2YWxpZGF0b3JzKTtcbiAgICAgICAgdGhpcy50byA9IG5ldyBGb3JtQ29udHJvbCgnJywgdmFsaWRhdG9ycyk7XG5cbiAgICAgICAgdGhpcy5mb3JtID0gbmV3IEZvcm1Hcm91cCh7XG4gICAgICAgICAgICBmcm9tOiB0aGlzLmZyb20sXG4gICAgICAgICAgICB0bzogdGhpcy50b1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLm1heERhdGUgPSB0aGlzLmRhdGVBZGFwdGVyLnRvZGF5KCkuc3RhcnRPZignZGF5Jyk7XG4gICAgfVxuXG4gICAgYXBwbHkobW9kZWw6IHsgZnJvbTogc3RyaW5nLCB0bzogc3RyaW5nIH0sIGlzVmFsaWQ6IGJvb2xlYW4pIHtcbiAgICAgICAgaWYgKGlzVmFsaWQgJiYgdGhpcy5pZCAmJiB0aGlzLmNvbnRleHQgJiYgdGhpcy5zZXR0aW5ncyAmJiB0aGlzLnNldHRpbmdzLmZpZWxkKSB7XG4gICAgICAgICAgICBjb25zdCBzdGFydCA9IG1vbWVudChtb2RlbC5mcm9tKS5zdGFydE9mKCdkYXknKS5mb3JtYXQoKTtcbiAgICAgICAgICAgIGNvbnN0IGVuZCA9IG1vbWVudChtb2RlbC50bykuZW5kT2YoJ2RheScpLmZvcm1hdCgpO1xuXG4gICAgICAgICAgICB0aGlzLmNvbnRleHQucXVlcnlGcmFnbWVudHNbdGhpcy5pZF0gPSBgJHt0aGlzLnNldHRpbmdzLmZpZWxkfTpbJyR7c3RhcnR9JyBUTyAnJHtlbmR9J11gO1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0LnVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuZm9ybS5yZXNldCh7XG4gICAgICAgICAgICBmcm9tOiAnJyxcbiAgICAgICAgICAgIHRvOiAnJ1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHRoaXMuaWQgJiYgdGhpcy5jb250ZXh0KSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQucXVlcnlGcmFnbWVudHNbdGhpcy5pZF0gPSAnJztcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC51cGRhdGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uQ2hhbmdlZEhhbmRsZXIoZXZlbnQ6IGFueSwgZm9ybUNvbnRyb2w6IEZvcm1Db250cm9sKSB7XG4gICAgICAgIGNvbnN0IGlucHV0VmFsdWUgPSBldmVudC5zcmNFbGVtZW50LnZhbHVlO1xuXG4gICAgICAgIGNvbnN0IGZvcm1hdERhdGUgPSB0aGlzLmRhdGVBZGFwdGVyLnBhcnNlKGlucHV0VmFsdWUsIHRoaXMuZGF0ZVBpY2tlckRhdGVGb3JtYXQpO1xuICAgICAgICBpZiAoZm9ybWF0RGF0ZSAmJiBmb3JtYXREYXRlLmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgZm9ybUNvbnRyb2wuc2V0VmFsdWUoZm9ybWF0RGF0ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZm9ybWF0RGF0ZSkge1xuICAgICAgICAgICAgZm9ybUNvbnRyb2wuc2V0RXJyb3JzKHtcbiAgICAgICAgICAgICAgICAnaW52YWxpZE9uQ2hhbmdlJzogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3JtQ29udHJvbC5zZXRFcnJvcnMoe1xuICAgICAgICAgICAgICAgICdyZXF1aXJlZCc6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0TG9jYWxlKGxvY2FsZSkge1xuICAgICAgICB0aGlzLmRhdGVBZGFwdGVyLnNldExvY2FsZShsb2NhbGUpO1xuICAgICAgICBtb21lbnQubG9jYWxlKGxvY2FsZSk7XG4gICAgfVxuXG4gICAgaGFzUGFyc2VFcnJvcihmb3JtQ29udHJvbCkge1xuICAgICAgICByZXR1cm4gZm9ybUNvbnRyb2wuaGFzRXJyb3IoJ21hdERhdGVwaWNrZXJQYXJzZScpICYmIGZvcm1Db250cm9sLmdldEVycm9yKCdtYXREYXRlcGlja2VyUGFyc2UnKS50ZXh0O1xuICAgIH1cblxuICAgIGZvcmNlUGxhY2Vob2xkZXIoZXZlbnQ6IGFueSkge1xuICAgICAgICBldmVudC5zcmNFbGVtZW50LmNsaWNrKCk7XG4gICAgfVxuXG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBJbmplY3RhYmxlLCBUeXBlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBTZWFyY2hUZXh0Q29tcG9uZW50IH0gZnJvbSAnLi4vc2VhcmNoLXRleHQvc2VhcmNoLXRleHQuY29tcG9uZW50JztcbmltcG9ydCB7IFNlYXJjaFJhZGlvQ29tcG9uZW50IH0gZnJvbSAnLi4vc2VhcmNoLXJhZGlvL3NlYXJjaC1yYWRpby5jb21wb25lbnQnO1xuaW1wb3J0IHsgU2VhcmNoU2xpZGVyQ29tcG9uZW50IH0gZnJvbSAnLi4vc2VhcmNoLXNsaWRlci9zZWFyY2gtc2xpZGVyLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBTZWFyY2hOdW1iZXJSYW5nZUNvbXBvbmVudCB9IGZyb20gJy4uL3NlYXJjaC1udW1iZXItcmFuZ2Uvc2VhcmNoLW51bWJlci1yYW5nZS5jb21wb25lbnQnO1xuaW1wb3J0IHsgU2VhcmNoQ2hlY2tMaXN0Q29tcG9uZW50IH0gZnJvbSAnLi4vc2VhcmNoLWNoZWNrLWxpc3Qvc2VhcmNoLWNoZWNrLWxpc3QuY29tcG9uZW50JztcbmltcG9ydCB7IFNlYXJjaERhdGVSYW5nZUNvbXBvbmVudCB9IGZyb20gJy4uL3NlYXJjaC1kYXRlLXJhbmdlL3NlYXJjaC1kYXRlLXJhbmdlLmNvbXBvbmVudCc7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBTZWFyY2hGaWx0ZXJTZXJ2aWNlIHtcblxuICAgIC8qKlxuICAgICAqIENvbnRhaW5zIHN0cmluZy10by10eXBlIG1hcHBpbmdzIGZvciByZWdpc3RlcmVkIHdpZGdldHMuXG4gICAgICovXG4gICAgd2lkZ2V0czogeyBbaWQ6IHN0cmluZ106IFR5cGU8e30+IH0gPSB7XG4gICAgICAgICd0ZXh0JzogU2VhcmNoVGV4dENvbXBvbmVudCxcbiAgICAgICAgJ3JhZGlvJzogU2VhcmNoUmFkaW9Db21wb25lbnQsXG4gICAgICAgICdzbGlkZXInOiBTZWFyY2hTbGlkZXJDb21wb25lbnQsXG4gICAgICAgICdudW1iZXItcmFuZ2UnOiBTZWFyY2hOdW1iZXJSYW5nZUNvbXBvbmVudCxcbiAgICAgICAgJ2NoZWNrLWxpc3QnOiBTZWFyY2hDaGVja0xpc3RDb21wb25lbnQsXG4gICAgICAgICdkYXRlLXJhbmdlJzogU2VhcmNoRGF0ZVJhbmdlQ29tcG9uZW50XG4gICAgfTtcblxufVxuIiwiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQ29tcG9uZW50LCBWaWV3RW5jYXBzdWxhdGlvbiwgSW5wdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFNlYXJjaEZpbHRlckNvbXBvbmVudCB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvc2VhcmNoLWZpbHRlci9zZWFyY2gtZmlsdGVyLmNvbXBvbmVudCc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnYWRmLXNlYXJjaC1jaGlwLWxpc3QnLFxuICAgIHRlbXBsYXRlVXJsOiAnLi9zZWFyY2gtY2hpcC1saXN0LmNvbXBvbmVudC5odG1sJyxcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxuICAgIGhvc3Q6IHsgY2xhc3M6ICdhZGYtc2VhcmNoLWNoaXAtbGlzdCcgfVxufSlcbmV4cG9ydCBjbGFzcyBTZWFyY2hDaGlwTGlzdENvbXBvbmVudCB7XG5cbiAgICAvKiogU2VhcmNoIGZpbHRlciB0byBzdXBwbHkgdGhlIGRhdGEgZm9yIHRoZSBjaGlwcy4gKi9cbiAgICBASW5wdXQoKVxuICAgIHNlYXJjaEZpbHRlcjogU2VhcmNoRmlsdGVyQ29tcG9uZW50O1xufVxuIiwiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIFZpZXdFbmNhcHN1bGF0aW9uIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBTZWFyY2hRdWVyeUJ1aWxkZXJTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VhcmNoLXF1ZXJ5LWJ1aWxkZXIuc2VydmljZSc7XG5pbXBvcnQgeyBTZWFyY2hTb3J0aW5nRGVmaW5pdGlvbiB9IGZyb20gJy4uLy4uL3NlYXJjaC1zb3J0aW5nLWRlZmluaXRpb24uaW50ZXJmYWNlJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdhZGYtc2VhcmNoLXNvcnRpbmctcGlja2VyJyxcbiAgICB0ZW1wbGF0ZVVybDogJy4vc2VhcmNoLXNvcnRpbmctcGlja2VyLmNvbXBvbmVudC5odG1sJyxcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxuICAgIGhvc3Q6IHsgY2xhc3M6ICdhZGYtc2VhcmNoLXNvcnRpbmctcGlja2VyJyB9XG59KVxuZXhwb3J0IGNsYXNzIFNlYXJjaFNvcnRpbmdQaWNrZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuXG4gICAgb3B0aW9uczogU2VhcmNoU29ydGluZ0RlZmluaXRpb25bXSA9IFtdO1xuICAgIHZhbHVlOiBzdHJpbmc7XG4gICAgYXNjZW5kaW5nOiBib29sZWFuO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBxdWVyeUJ1aWxkZXI6IFNlYXJjaFF1ZXJ5QnVpbGRlclNlcnZpY2UpIHt9XG5cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gdGhpcy5xdWVyeUJ1aWxkZXIuZ2V0U29ydGluZ09wdGlvbnMoKTtcblxuICAgICAgICBjb25zdCBwcmltYXJ5ID0gdGhpcy5xdWVyeUJ1aWxkZXIuZ2V0UHJpbWFyeVNvcnRpbmcoKTtcbiAgICAgICAgaWYgKHByaW1hcnkpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBwcmltYXJ5LmtleTtcbiAgICAgICAgICAgIHRoaXMuYXNjZW5kaW5nID0gcHJpbWFyeS5hc2NlbmRpbmc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbkNoYW5nZWQoc29ydGluZzogeyBrZXk6IHN0cmluZywgYXNjZW5kaW5nOiBib29sZWFuIH0pIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHNvcnRpbmcua2V5O1xuICAgICAgICB0aGlzLmFzY2VuZGluZyA9IHNvcnRpbmcuYXNjZW5kaW5nO1xuICAgICAgICB0aGlzLmFwcGx5U29ydGluZygpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZmluZE9wdGlvbkJ5S2V5KGtleTogc3RyaW5nKTogU2VhcmNoU29ydGluZ0RlZmluaXRpb24ge1xuICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmZpbmQob3B0ID0+IG9wdC5rZXkgPT09IGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhcHBseVNvcnRpbmcoKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbiA9IHRoaXMuZmluZE9wdGlvbkJ5S2V5KHRoaXMudmFsdWUpO1xuICAgICAgICBpZiAob3B0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnF1ZXJ5QnVpbGRlci5zb3J0aW5nID0gW3tcbiAgICAgICAgICAgICAgICAuLi5vcHRpb24sXG4gICAgICAgICAgICAgICAgYXNjZW5kaW5nOiB0aGlzLmFzY2VuZGluZ1xuICAgICAgICAgICAgfV07XG4gICAgICAgICAgICB0aGlzLnF1ZXJ5QnVpbGRlci51cGRhdGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxufVxuIiwiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgVmlld0NoaWxkLCBWaWV3Q29udGFpbmVyUmVmLCBPbkluaXQsIE9uRGVzdHJveSwgQ29tcG9uZW50UmVmLCBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFNlYXJjaFF1ZXJ5QnVpbGRlclNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZWFyY2gtcXVlcnktYnVpbGRlci5zZXJ2aWNlJztcbmltcG9ydCB7IFNlYXJjaEZpbHRlclNlcnZpY2UgfSBmcm9tICcuLi9zZWFyY2gtZmlsdGVyL3NlYXJjaC1maWx0ZXIuc2VydmljZSc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnYWRmLXNlYXJjaC13aWRnZXQtY29udGFpbmVyJyxcbiAgICB0ZW1wbGF0ZTogJzxkaXYgI2NvbnRlbnQ+PC9kaXY+J1xufSlcbmV4cG9ydCBjbGFzcyBTZWFyY2hXaWRnZXRDb250YWluZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSB7XG5cbiAgICBAVmlld0NoaWxkKCdjb250ZW50JywgeyByZWFkOiBWaWV3Q29udGFpbmVyUmVmIH0pXG4gICAgY29udGVudDogVmlld0NvbnRhaW5lclJlZjtcblxuICAgIEBJbnB1dCgpXG4gICAgaWQ6IHN0cmluZztcblxuICAgIEBJbnB1dCgpXG4gICAgc2VsZWN0b3I6IHN0cmluZztcblxuICAgIEBJbnB1dCgpXG4gICAgc2V0dGluZ3M6IGFueTtcblxuICAgIEBJbnB1dCgpXG4gICAgY29uZmlnOiBhbnk7XG5cbiAgICBwcml2YXRlIGNvbXBvbmVudFJlZjogQ29tcG9uZW50UmVmPGFueT47XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBzZWFyY2hGaWx0ZXJTZXJ2aWNlOiBTZWFyY2hGaWx0ZXJTZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHF1ZXJ5QnVpbGRlcjogU2VhcmNoUXVlcnlCdWlsZGVyU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBjb21wb25lbnRGYWN0b3J5UmVzb2x2ZXI6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcikge1xuICAgIH1cblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICBjb25zdCBjb21wb25lbnRUeXBlID0gdGhpcy5zZWFyY2hGaWx0ZXJTZXJ2aWNlLndpZGdldHNbdGhpcy5zZWxlY3Rvcl07XG4gICAgICAgIGlmIChjb21wb25lbnRUeXBlKSB7XG4gICAgICAgICAgICBjb25zdCBmYWN0b3J5ID0gdGhpcy5jb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIucmVzb2x2ZUNvbXBvbmVudEZhY3RvcnkoY29tcG9uZW50VHlwZSk7XG4gICAgICAgICAgICBpZiAoZmFjdG9yeSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudC5jbGVhcigpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50UmVmID0gdGhpcy5jb250ZW50LmNyZWF0ZUNvbXBvbmVudChmYWN0b3J5LCAwKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldHVwV2lkZ2V0KHRoaXMuY29tcG9uZW50UmVmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc2V0dXBXaWRnZXQocmVmOiBDb21wb25lbnRSZWY8YW55Pikge1xuICAgICAgICBpZiAocmVmICYmIHJlZi5pbnN0YW5jZSkge1xuICAgICAgICAgICAgcmVmLmluc3RhbmNlLmlkID0gdGhpcy5pZDtcbiAgICAgICAgICAgIHJlZi5pbnN0YW5jZS5zZXR0aW5ncyA9IHsgLi4udGhpcy5zZXR0aW5ncyB9O1xuICAgICAgICAgICAgcmVmLmluc3RhbmNlLmNvbnRleHQgPSB0aGlzLnF1ZXJ5QnVpbGRlcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICBpZiAodGhpcy5jb21wb25lbnRSZWYpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50UmVmLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50UmVmID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxufVxuIiwiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBGb3Jtc01vZHVsZSwgUmVhY3RpdmVGb3Jtc01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IE1hdGVyaWFsTW9kdWxlIH0gZnJvbSAnLi4vbWF0ZXJpYWwubW9kdWxlJztcblxuaW1wb3J0IHsgQ29yZU1vZHVsZSB9IGZyb20gJ0BhbGZyZXNjby9hZGYtY29yZSc7XG5cbmltcG9ydCB7IFNlYXJjaFRyaWdnZXJEaXJlY3RpdmUgfSBmcm9tICcuL2NvbXBvbmVudHMvc2VhcmNoLXRyaWdnZXIuZGlyZWN0aXZlJztcblxuaW1wb3J0IHsgU2VhcmNoQ29udHJvbENvbXBvbmVudCB9IGZyb20gJy4vY29tcG9uZW50cy9zZWFyY2gtY29udHJvbC5jb21wb25lbnQnO1xuaW1wb3J0IHsgU2VhcmNoQ29tcG9uZW50IH0gZnJvbSAnLi9jb21wb25lbnRzL3NlYXJjaC5jb21wb25lbnQnO1xuaW1wb3J0IHsgRW1wdHlTZWFyY2hSZXN1bHRDb21wb25lbnQgfSBmcm9tICcuL2NvbXBvbmVudHMvZW1wdHktc2VhcmNoLXJlc3VsdC5jb21wb25lbnQnO1xuaW1wb3J0IHsgU2VhcmNoV2lkZ2V0Q29udGFpbmVyQ29tcG9uZW50IH0gZnJvbSAnLi9jb21wb25lbnRzL3NlYXJjaC13aWRnZXQtY29udGFpbmVyL3NlYXJjaC13aWRnZXQtY29udGFpbmVyLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBTZWFyY2hGaWx0ZXJDb21wb25lbnQgfSBmcm9tICcuL2NvbXBvbmVudHMvc2VhcmNoLWZpbHRlci9zZWFyY2gtZmlsdGVyLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBTZWFyY2hDaGlwTGlzdENvbXBvbmVudCB9IGZyb20gJy4vY29tcG9uZW50cy9zZWFyY2gtY2hpcC1saXN0L3NlYXJjaC1jaGlwLWxpc3QuY29tcG9uZW50JztcbmltcG9ydCB7IFNlYXJjaFRleHRDb21wb25lbnQgfSBmcm9tICcuL2NvbXBvbmVudHMvc2VhcmNoLXRleHQvc2VhcmNoLXRleHQuY29tcG9uZW50JztcbmltcG9ydCB7IFNlYXJjaFJhZGlvQ29tcG9uZW50IH0gZnJvbSAnLi9jb21wb25lbnRzL3NlYXJjaC1yYWRpby9zZWFyY2gtcmFkaW8uY29tcG9uZW50JztcbmltcG9ydCB7IFNlYXJjaFNsaWRlckNvbXBvbmVudCB9IGZyb20gJy4vY29tcG9uZW50cy9zZWFyY2gtc2xpZGVyL3NlYXJjaC1zbGlkZXIuY29tcG9uZW50JztcbmltcG9ydCB7IFNlYXJjaE51bWJlclJhbmdlQ29tcG9uZW50IH0gZnJvbSAnLi9jb21wb25lbnRzL3NlYXJjaC1udW1iZXItcmFuZ2Uvc2VhcmNoLW51bWJlci1yYW5nZS5jb21wb25lbnQnO1xuaW1wb3J0IHsgU2VhcmNoQ2hlY2tMaXN0Q29tcG9uZW50IH0gZnJvbSAnLi9jb21wb25lbnRzL3NlYXJjaC1jaGVjay1saXN0L3NlYXJjaC1jaGVjay1saXN0LmNvbXBvbmVudCc7XG5pbXBvcnQgeyBTZWFyY2hEYXRlUmFuZ2VDb21wb25lbnQgfSBmcm9tICcuL2NvbXBvbmVudHMvc2VhcmNoLWRhdGUtcmFuZ2Uvc2VhcmNoLWRhdGUtcmFuZ2UuY29tcG9uZW50JztcbmltcG9ydCB7IFNlYXJjaFNvcnRpbmdQaWNrZXJDb21wb25lbnQgfSBmcm9tICcuL2NvbXBvbmVudHMvc2VhcmNoLXNvcnRpbmctcGlja2VyL3NlYXJjaC1zb3J0aW5nLXBpY2tlci5jb21wb25lbnQnO1xuXG5leHBvcnQgY29uc3QgQUxGUkVTQ09fU0VBUkNIX0RJUkVDVElWRVM6IGFueVtdID0gW1xuICAgIFNlYXJjaENvbXBvbmVudCxcbiAgICBTZWFyY2hDb250cm9sQ29tcG9uZW50LFxuICAgIFNlYXJjaFRyaWdnZXJEaXJlY3RpdmUsXG4gICAgRW1wdHlTZWFyY2hSZXN1bHRDb21wb25lbnQsXG4gICAgU2VhcmNoRmlsdGVyQ29tcG9uZW50LFxuICAgIFNlYXJjaENoaXBMaXN0Q29tcG9uZW50XG5dO1xuXG5ATmdNb2R1bGUoe1xuICAgIGltcG9ydHM6IFtcbiAgICAgICAgQ29tbW9uTW9kdWxlLFxuICAgICAgICBGb3Jtc01vZHVsZSxcbiAgICAgICAgUmVhY3RpdmVGb3Jtc01vZHVsZSxcbiAgICAgICAgTWF0ZXJpYWxNb2R1bGUsXG4gICAgICAgIENvcmVNb2R1bGUuZm9yQ2hpbGQoKVxuICAgIF0sXG4gICAgZGVjbGFyYXRpb25zOiBbXG4gICAgICAgIC4uLkFMRlJFU0NPX1NFQVJDSF9ESVJFQ1RJVkVTLFxuICAgICAgICBTZWFyY2hXaWRnZXRDb250YWluZXJDb21wb25lbnQsXG4gICAgICAgIFNlYXJjaFRleHRDb21wb25lbnQsXG4gICAgICAgIFNlYXJjaFJhZGlvQ29tcG9uZW50LFxuICAgICAgICBTZWFyY2hTbGlkZXJDb21wb25lbnQsXG4gICAgICAgIFNlYXJjaE51bWJlclJhbmdlQ29tcG9uZW50LFxuICAgICAgICBTZWFyY2hDaGVja0xpc3RDb21wb25lbnQsXG4gICAgICAgIFNlYXJjaERhdGVSYW5nZUNvbXBvbmVudCxcbiAgICAgICAgU2VhcmNoU29ydGluZ1BpY2tlckNvbXBvbmVudFxuICAgIF0sXG4gICAgZXhwb3J0czogW1xuICAgICAgICAuLi5BTEZSRVNDT19TRUFSQ0hfRElSRUNUSVZFUyxcbiAgICAgICAgU2VhcmNoV2lkZ2V0Q29udGFpbmVyQ29tcG9uZW50LFxuICAgICAgICBTZWFyY2hUZXh0Q29tcG9uZW50LFxuICAgICAgICBTZWFyY2hSYWRpb0NvbXBvbmVudCxcbiAgICAgICAgU2VhcmNoU2xpZGVyQ29tcG9uZW50LFxuICAgICAgICBTZWFyY2hOdW1iZXJSYW5nZUNvbXBvbmVudCxcbiAgICAgICAgU2VhcmNoQ2hlY2tMaXN0Q29tcG9uZW50LFxuICAgICAgICBTZWFyY2hEYXRlUmFuZ2VDb21wb25lbnQsXG4gICAgICAgIFNlYXJjaFNvcnRpbmdQaWNrZXJDb21wb25lbnRcbiAgICBdLFxuICAgIGVudHJ5Q29tcG9uZW50czogW1xuICAgICAgICBTZWFyY2hXaWRnZXRDb250YWluZXJDb21wb25lbnQsXG4gICAgICAgIFNlYXJjaFRleHRDb21wb25lbnQsXG4gICAgICAgIFNlYXJjaFJhZGlvQ29tcG9uZW50LFxuICAgICAgICBTZWFyY2hTbGlkZXJDb21wb25lbnQsXG4gICAgICAgIFNlYXJjaE51bWJlclJhbmdlQ29tcG9uZW50LFxuICAgICAgICBTZWFyY2hDaGVja0xpc3RDb21wb25lbnQsXG4gICAgICAgIFNlYXJjaERhdGVSYW5nZUNvbXBvbmVudFxuICAgIF1cbn0pXG5leHBvcnQgY2xhc3MgU2VhcmNoTW9kdWxlIHt9XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE9uSW5pdCwgT3V0cHV0LCBWaWV3RW5jYXBzdWxhdGlvbiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgU2l0ZXNTZXJ2aWNlLCBMb2dTZXJ2aWNlIH0gZnJvbSAnQGFsZnJlc2NvL2FkZi1jb3JlJztcbmltcG9ydCB7IFNpdGVQYWdpbmcsIFNpdGVFbnRyeSB9IGZyb20gJ2FsZnJlc2NvLWpzLWFwaSc7XG5cbmV4cG9ydCBlbnVtIFJlbGF0aW9ucyB7XG4gICAgTWVtYmVycyA9ICdtZW1iZXJzJyxcbiAgICBDb250YWluZXJzID0gJ2NvbnRhaW5lcnMnXG59XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnYWRmLXNpdGVzLWRyb3Bkb3duJyxcbiAgICBzdHlsZVVybHM6IFsnLi9zaXRlcy1kcm9wZG93bi5jb21wb25lbnQuc2NzcyddLFxuICAgIHRlbXBsYXRlVXJsOiAnLi9zaXRlcy1kcm9wZG93bi5jb21wb25lbnQuaHRtbCcsXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZSxcbiAgICBob3N0OiB7ICdjbGFzcyc6ICdhZGYtc2l0ZXMtZHJvcGRvd24nIH1cbn0pXG5leHBvcnQgY2xhc3MgRHJvcGRvd25TaXRlc0NvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG5cbiAgICAvKiogSGlkZSB0aGUgXCJNeSBGaWxlc1wiIG9wdGlvbi4gKi9cbiAgICBASW5wdXQoKVxuICAgIGhpZGVNeUZpbGVzOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICAvKiogQSBjdXN0b20gbGlzdCBvZiBzaXRlcyB0byBiZSBkaXNwbGF5ZWQgYnkgdGhlIGRyb3Bkb3duLiBJZiBubyB2YWx1ZVxuICAgICAqIGlzIGdpdmVuLCB0aGUgc2l0ZXMgb2YgdGhlIGN1cnJlbnQgdXNlciBhcmUgZGlzcGxheWVkIGJ5IGRlZmF1bHQuIEFcbiAgICAgKiBsaXN0IG9mIG9iamVjdHMgb25seSB3aXRoIHByb3BlcnRpZXMgJ3RpdGxlJyBhbmQgJ2d1aWQnIGlzIGVub3VnaCB0b1xuICAgICAqIGJlIGFibGUgdG8gZGlzcGxheSB0aGUgZHJvcGRvd24uXG4gICAgICovXG4gICAgQElucHV0KClcbiAgICBzaXRlTGlzdDogU2l0ZVBhZ2luZyA9IG51bGw7XG5cbiAgICAvKiogSWQgb2YgdGhlIHNlbGVjdGVkIHNpdGUgKi9cbiAgICBASW5wdXQoKVxuICAgIHZhbHVlOiBzdHJpbmcgPSBudWxsO1xuXG4gICAgLyoqIFRleHQgb3IgYSB0cmFuc2xhdGlvbiBrZXkgdG8gYWN0IGFzIGEgcGxhY2Vob2xkZXIuIERlZmF1bHQgdmFsdWUgaXMgdGhlXG4gICAgICoga2V5IFwiRFJPUERPV04uUExBQ0VIT0xERVJfTEFCRUxcIi5cbiAgICAgKi9cbiAgICBASW5wdXQoKVxuICAgIHBsYWNlaG9sZGVyOiBzdHJpbmcgPSAnRFJPUERPV04uUExBQ0VIT0xERVJfTEFCRUwnO1xuXG4gICAgLyoqIEZpbHRlciBmb3IgdGhlIHJlc3VsdHMgb2YgdGhlIHNpdGVzIHF1ZXJ5LiBQb3NzaWJsZSB2YWx1ZXMgYXJlXG4gICAgICogXCJtZW1iZXJzXCIgYW5kIFwiY29udGFpbmVyc1wiLiBXaGVuIFwibWVtYmVyc1wiIGlzIHVzZWQsIHRoZSBzaXRlIGxpc3RcbiAgICAgKiB3aWxsIGJlIHJlc3RyaWN0ZWQgdG8gdGhlIHNpdGVzIHRoYXQgdGhlIHVzZXIgaXMgYSBtZW1iZXIgb2YuXG4gICAgICovXG4gICAgQElucHV0KClcbiAgICByZWxhdGlvbnM6IHN0cmluZztcblxuICAgIC8qKiBFbWl0dGVkIHdoZW4gdGhlIHVzZXIgc2VsZWN0cyBhIHNpdGUuIFdoZW4gdGhlIGRlZmF1bHQgb3B0aW9uIGlzIHNlbGVjdGVkLFxuICAgICAqIGFuIGVtcHR5IG1vZGVsIGlzIGVtaXR0ZWQuXG4gICAgICovXG4gICAgQE91dHB1dCgpXG4gICAgY2hhbmdlOiBFdmVudEVtaXR0ZXI8U2l0ZUVudHJ5PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICAgIHNlbGVjdGVkOiBTaXRlRW50cnkgPSBudWxsO1xuXG4gICAgcHVibGljIE1ZX0ZJTEVTX1ZBTFVFID0gJy1teS0nO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBzaXRlc1NlcnZpY2U6IFNpdGVzU2VydmljZSxcbiAgICAgICAgICAgICAgICBwcml2YXRlIGxvZ1NlcnZpY2U6IExvZ1NlcnZpY2UpIHtcbiAgICB9XG5cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnNpdGVMaXN0KSB7XG4gICAgICAgICAgICB0aGlzLnNldERlZmF1bHRTaXRlTGlzdCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2VsZWN0ZWRTaXRlKGV2ZW50OiBhbnkpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2UuZW1pdChldmVudC52YWx1ZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXREZWZhdWx0U2l0ZUxpc3QoKSB7XG4gICAgICAgIGxldCBleHRlbmRlZE9wdGlvbnMgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5yZWxhdGlvbnMpIHtcbiAgICAgICAgICAgIGV4dGVuZGVkT3B0aW9ucyA9IHsgcmVsYXRpb25zOiBbdGhpcy5yZWxhdGlvbnNdIH07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zaXRlc1NlcnZpY2UuZ2V0U2l0ZXMoZXh0ZW5kZWRPcHRpb25zKS5zdWJzY3JpYmUoKHJlc3VsdCkgPT4ge1xuXG4gICAgICAgICAgICB0aGlzLnNpdGVMaXN0ID0gdGhpcy5yZWxhdGlvbnMgPT09IFJlbGF0aW9ucy5NZW1iZXJzID8gdGhpcy5maWx0ZXJlZFJlc3VsdHNCeU1lbWJlcihyZXN1bHQpIDogcmVzdWx0O1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMuaGlkZU15RmlsZXMpIHtcbiAgICAgICAgICAgICAgICBsZXQgbXlJdGVtID0geyBlbnRyeTogeyBpZDogJy1teS0nLCBndWlkOiAnLW15LScsIHRpdGxlOiAnRFJPUERPV04uTVlfRklMRVNfT1BUSU9OJyB9IH07XG5cbiAgICAgICAgICAgICAgICB0aGlzLnNpdGVMaXN0Lmxpc3QuZW50cmllcy51bnNoaWZ0KG15SXRlbSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9ICctbXktJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWQgPSB0aGlzLnNpdGVMaXN0Lmxpc3QuZW50cmllcy5maW5kKHNpdGUgPT4gc2l0ZS5lbnRyeS5pZCA9PT0gdGhpcy52YWx1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5sb2dTZXJ2aWNlLmVycm9yKGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmaWx0ZXJlZFJlc3VsdHNCeU1lbWJlcihzaXRlczogU2l0ZVBhZ2luZyk6IFNpdGVQYWdpbmcge1xuICAgICAgICBjb25zdCBsb2dnZWRVc2VyTmFtZSA9IHRoaXMuc2l0ZXNTZXJ2aWNlLmdldEVjbUN1cnJlbnRMb2dnZWRVc2VyTmFtZSgpO1xuICAgICAgICBzaXRlcy5saXN0LmVudHJpZXMgPSBzaXRlcy5saXN0LmVudHJpZXMuZmlsdGVyKCAoc2l0ZSkgPT4gdGhpcy5pc0N1cnJlbnRVc2VyTWVtYmVyKHNpdGUsIGxvZ2dlZFVzZXJOYW1lKSk7XG4gICAgICAgIHJldHVybiBzaXRlcztcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzQ3VycmVudFVzZXJNZW1iZXIoc2l0ZSwgbG9nZ2VkVXNlck5hbWUpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHNpdGUuZW50cnkudmlzaWJpbGl0eSA9PT0gJ1BVQkxJQycgfHxcbiAgICAgICAgICAgICEhc2l0ZS5yZWxhdGlvbnMubWVtYmVycy5saXN0LmVudHJpZXMuZmluZCgobWVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lbWJlci5lbnRyeS5pZC50b0xvd2VyQ2FzZSgpID09PSBsb2dnZWRVc2VyTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE1hdGVyaWFsTW9kdWxlIH0gZnJvbSAnLi4vbWF0ZXJpYWwubW9kdWxlJztcbmltcG9ydCB7IEZvcm1zTW9kdWxlLCBSZWFjdGl2ZUZvcm1zTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuXG5pbXBvcnQgeyBEcm9wZG93blNpdGVzQ29tcG9uZW50IH0gZnJvbSAnLi9zaXRlcy1kcm9wZG93bi5jb21wb25lbnQnO1xuaW1wb3J0IHsgQ29yZU1vZHVsZSB9IGZyb20gJ0BhbGZyZXNjby9hZGYtY29yZSc7XG5cbkBOZ01vZHVsZSh7XG4gICAgaW1wb3J0czogW1xuICAgICAgICBDb21tb25Nb2R1bGUsXG4gICAgICAgIE1hdGVyaWFsTW9kdWxlLFxuICAgICAgICBGb3Jtc01vZHVsZSxcbiAgICAgICAgUmVhY3RpdmVGb3Jtc01vZHVsZSxcbiAgICAgICAgQ29yZU1vZHVsZS5mb3JDaGlsZCgpXG4gICAgXSxcbiAgICBleHBvcnRzOiBbXG4gICAgICAgIERyb3Bkb3duU2l0ZXNDb21wb25lbnRcbiAgICBdLFxuICAgIGRlY2xhcmF0aW9uczogW1xuICAgICAgICBEcm9wZG93blNpdGVzQ29tcG9uZW50XG4gICAgXVxufSlcbmV4cG9ydCBjbGFzcyBTaXRlc0Ryb3Bkb3duTW9kdWxlIHt9XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE9uQ2hhbmdlcywgT25Jbml0LCBPdXRwdXQsIFNpbXBsZUNoYW5nZXMsIFZpZXdDaGlsZCwgVmlld0VuY2Fwc3VsYXRpb24gfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE1hdFNlbGVjdCB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsJztcbmltcG9ydCB7IE1pbmltYWxOb2RlRW50cnlFbnRpdHksIFBhdGhFbGVtZW50RW50aXR5IH0gZnJvbSAnYWxmcmVzY28tanMtYXBpJztcbmltcG9ydCB7IERvY3VtZW50TGlzdENvbXBvbmVudCB9IGZyb20gJy4uL2RvY3VtZW50LWxpc3QnO1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ2FkZi1icmVhZGNydW1iJyxcbiAgICB0ZW1wbGF0ZVVybDogJy4vYnJlYWRjcnVtYi5jb21wb25lbnQuaHRtbCcsXG4gICAgc3R5bGVVcmxzOiBbJy4vYnJlYWRjcnVtYi5jb21wb25lbnQuc2NzcyddLFxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXG4gICAgaG9zdDoge1xuICAgICAgICAnY2xhc3MnOiAnYWRmLWJyZWFkY3J1bWInXG4gICAgfVxufSlcbmV4cG9ydCBjbGFzcyBCcmVhZGNydW1iQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMge1xuXG4gICAgLyoqIEFjdGl2ZSBub2RlLCBidWlsZHMgVUkgYmFzZWQgb24gZm9sZGVyTm9kZS5wYXRoLmVsZW1lbnRzIGNvbGxlY3Rpb24uICovXG4gICAgQElucHV0KClcbiAgICBmb2xkZXJOb2RlOiBNaW5pbWFsTm9kZUVudHJ5RW50aXR5ID0gbnVsbDtcblxuICAgIC8qKiAob3B0aW9uYWwpIE5hbWUgb2YgdGhlIHJvb3QgZWxlbWVudCBvZiB0aGUgYnJlYWRjcnVtYi4gWW91IGNhbiB1c2VcbiAgICAgKiB0aGlzIHByb3BlcnR5IHRvIHJlbmFtZSBcIkNvbXBhbnkgSG9tZVwiIHRvIFwiUGVyc29uYWwgRmlsZXNcIiBmb3JcbiAgICAgKiBleGFtcGxlLiBZb3UgY2FuIHVzZSBhbiBpMThuIHJlc291cmNlIGtleSBmb3IgdGhlIHByb3BlcnR5IHZhbHVlLlxuICAgICAqL1xuICAgIEBJbnB1dCgpXG4gICAgcm9vdDogc3RyaW5nID0gbnVsbDtcblxuICAgIC8qKiAob3B0aW9uYWwpIFRoZSBpZCBvZiB0aGUgcm9vdCBlbGVtZW50LiBZb3UgY2FuIHVzZSB0aGlzIHByb3BlcnR5XG4gICAgICogdG8gc2V0IGEgY3VzdG9tIGVsZW1lbnQgdGhlIGJyZWFkY3J1bWIgc2hvdWxkIHN0YXJ0IHdpdGguXG4gICAgICovXG4gICAgQElucHV0KClcbiAgICByb290SWQ6IHN0cmluZyA9IG51bGw7XG5cbiAgICAvKiogKG9wdGlvbmFsKSBEb2N1bWVudCBMaXN0IGNvbXBvbmVudCB0byBvcGVyYXRlIHdpdGguIFRoZSBsaXN0IHdpbGxcbiAgICAgKiB1cGRhdGUgd2hlbiB0aGUgYnJlYWRjcnVtYiBpcyBjbGlja2VkLlxuICAgICAqL1xuICAgIEBJbnB1dCgpXG4gICAgdGFyZ2V0OiBEb2N1bWVudExpc3RDb21wb25lbnQ7XG5cbiAgICAvKiogVHJhbnNmb3JtYXRpb24gdG8gYmUgcGVyZm9ybWVkIG9uIHRoZSBjaG9zZW4vZm9sZGVyIG5vZGUgYmVmb3JlIGJ1aWxkaW5nXG4gICAgICogdGhlIGJyZWFkY3J1bWIgVUkuIENhbiBiZSB1c2VmdWwgd2hlbiBjdXN0b20gZm9ybWF0dGluZyBpcyBuZWVkZWQgZm9yIHRoZVxuICAgICAqIGJyZWFkY3J1bWIuIFlvdSBjYW4gY2hhbmdlIHRoZSBwYXRoIGVsZW1lbnRzIGZyb20gdGhlIG5vZGUgdGhhdCBhcmUgdXNlZCB0b1xuICAgICAqIGJ1aWxkIHRoZSBicmVhZGNydW1iIHVzaW5nIHRoaXMgZnVuY3Rpb24uXG4gICAgICovXG4gICAgQElucHV0KClcbiAgICB0cmFuc2Zvcm06IChub2RlKSA9PiBhbnk7XG5cbiAgICBAVmlld0NoaWxkKCdkcm9wZG93bicpXG4gICAgZHJvcGRvd246IE1hdFNlbGVjdDtcblxuICAgIC8qKiBNYXhpbXVtIG51bWJlciBvZiBub2RlcyB0byBkaXNwbGF5IGJlZm9yZSB3cmFwcGluZyB0aGVtIHdpdGggYSBkcm9wZG93biBlbGVtZW50LiAgKi9cbiAgICBASW5wdXQoKVxuICAgIG1heEl0ZW1zOiBudW1iZXI7XG5cbiAgICBwcmV2aW91c05vZGVzOiBQYXRoRWxlbWVudEVudGl0eVtdO1xuICAgIGxhc3ROb2RlczogUGF0aEVsZW1lbnRFbnRpdHlbXTtcblxuICAgIHJvdXRlOiBQYXRoRWxlbWVudEVudGl0eVtdID0gW107XG5cbiAgICBnZXQgaGFzUm9vdCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5yb290O1xuICAgIH1cblxuICAgIC8qKiBFbWl0dGVkIHdoZW4gdGhlIHVzZXIgY2xpY2tzIG9uIGEgYnJlYWRjcnVtYi4gKi9cbiAgICBAT3V0cHV0KClcbiAgICBuYXZpZ2F0ZSA9IG5ldyBFdmVudEVtaXR0ZXI8UGF0aEVsZW1lbnRFbnRpdHk+KCk7XG5cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0gPSB0aGlzLnRyYW5zZm9ybSA/IHRoaXMudHJhbnNmb3JtIDogbnVsbDtcbiAgICB9XG5cbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XG4gICAgICAgIGlmIChjaGFuZ2VzLmZvbGRlck5vZGUpIHtcbiAgICAgICAgICAgIGxldCBub2RlOiBNaW5pbWFsTm9kZUVudHJ5RW50aXR5ID0gbnVsbDtcbiAgICAgICAgICAgIG5vZGUgPSB0aGlzLnRyYW5zZm9ybSA/IHRoaXMudHJhbnNmb3JtKGNoYW5nZXMuZm9sZGVyTm9kZS5jdXJyZW50VmFsdWUpIDogY2hhbmdlcy5mb2xkZXJOb2RlLmN1cnJlbnRWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMucm91dGUgPSB0aGlzLnBhcnNlUm91dGUobm9kZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2hhbmdlcy50cmFuc2Zvcm0pIHtcbiAgICAgICAgICAgIGxldCBub2RlID0gdGhpcy50cmFuc2Zvcm0gPyB0aGlzLnRyYW5zZm9ybSh0aGlzLmZvbGRlck5vZGUpIDogdGhpcy5mb2xkZXJOb2RlO1xuICAgICAgICAgICAgdGhpcy5yb3V0ZSA9IHRoaXMucGFyc2VSb3V0ZShub2RlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlY2FsY3VsYXRlTm9kZXMoKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgcmVjYWxjdWxhdGVOb2RlcygpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMubWF4SXRlbXMgJiYgdGhpcy5yb3V0ZS5sZW5ndGggPiB0aGlzLm1heEl0ZW1zKSB7XG4gICAgICAgICAgICB0aGlzLmxhc3ROb2RlcyA9IHRoaXMucm91dGUuc2xpY2UodGhpcy5yb3V0ZS5sZW5ndGggLSB0aGlzLm1heEl0ZW1zKTtcbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNOb2RlcyA9IHRoaXMucm91dGUuc2xpY2UoMCwgdGhpcy5yb3V0ZS5sZW5ndGggLSB0aGlzLm1heEl0ZW1zKTtcbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNOb2Rlcy5yZXZlcnNlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxhc3ROb2RlcyA9IHRoaXMucm91dGU7XG4gICAgICAgICAgICB0aGlzLnByZXZpb3VzTm9kZXMgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb3BlbigpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuZHJvcGRvd24pIHtcbiAgICAgICAgICAgIHRoaXMuZHJvcGRvd24ub3BlbigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFzUHJldmlvdXNOb2RlcygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJldmlvdXNOb2RlcyA/IHRydWUgOiBmYWxzZTtcbiAgICB9XG5cbiAgICBwYXJzZVJvdXRlKG5vZGU6IE1pbmltYWxOb2RlRW50cnlFbnRpdHkpOiBQYXRoRWxlbWVudEVudGl0eVtdIHtcbiAgICAgICAgaWYgKG5vZGUgJiYgbm9kZS5wYXRoKSB7XG4gICAgICAgICAgICBjb25zdCByb3V0ZSA9IDxQYXRoRWxlbWVudEVudGl0eVtdPiAobm9kZS5wYXRoLmVsZW1lbnRzIHx8IFtdKS5zbGljZSgpO1xuXG4gICAgICAgICAgICByb3V0ZS5wdXNoKDxQYXRoRWxlbWVudEVudGl0eT4ge1xuICAgICAgICAgICAgICAgIGlkOiBub2RlLmlkLFxuICAgICAgICAgICAgICAgIG5hbWU6IG5vZGUubmFtZVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJvb3RQb3MgPSB0aGlzLmdldEVsZW1lbnRQb3NpdGlvbihyb3V0ZSwgdGhpcy5yb290SWQpO1xuICAgICAgICAgICAgaWYgKHJvb3RQb3MgPiAwKSB7XG4gICAgICAgICAgICAgICAgcm91dGUuc3BsaWNlKDAsIHJvb3RQb3MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocm9vdFBvcyA9PT0gLTEgJiYgdGhpcy5yb290SWQpIHtcbiAgICAgICAgICAgICAgICByb3V0ZVswXS5pZCA9IHRoaXMucm9vdElkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5yb290KSB7XG4gICAgICAgICAgICAgICAgcm91dGVbMF0ubmFtZSA9IHRoaXMucm9vdDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHJvdXRlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0RWxlbWVudFBvc2l0aW9uKHJvdXRlOiBQYXRoRWxlbWVudEVudGl0eVtdLCBub2RlSWQ6IHN0cmluZyk6IG51bWJlciB7XG4gICAgICAgIGxldCByZXN1bHQ6IG51bWJlciA9IC0xO1xuXG4gICAgICAgIGlmIChyb3V0ZSAmJiByb3V0ZS5sZW5ndGggPiAwICYmIG5vZGVJZCkge1xuICAgICAgICAgICAgcmVzdWx0ID0gcm91dGUuZmluZEluZGV4KGVsID0+IGVsLmlkID09PSBub2RlSWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBvblJvdXRlUGF0aENsaWNrKHJvdXRlOiBQYXRoRWxlbWVudEVudGl0eSwgZXZlbnQ/OiBFdmVudCk6IHZvaWQge1xuICAgICAgICBpZiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocm91dGUpIHtcbiAgICAgICAgICAgIHRoaXMubmF2aWdhdGUuZW1pdChyb3V0ZSk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnRhcmdldCkge1xuICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0Lm5hdmlnYXRlVG8ocm91dGUuaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuIiwiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQ29tcG9uZW50LCBPbkNoYW5nZXMsIFNpbXBsZUNoYW5nZXMsIFZpZXdDaGlsZCwgVmlld0VuY2Fwc3VsYXRpb24gfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE1hdFNlbGVjdCB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsJztcbmltcG9ydCB7IFBhdGhFbGVtZW50RW50aXR5LCBNaW5pbWFsTm9kZUVudHJ5RW50aXR5IH0gZnJvbSAnYWxmcmVzY28tanMtYXBpJztcbmltcG9ydCB7IEJyZWFkY3J1bWJDb21wb25lbnQgfSBmcm9tICcuL2JyZWFkY3J1bWIuY29tcG9uZW50JztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdhZGYtZHJvcGRvd24tYnJlYWRjcnVtYicsXG4gICAgdGVtcGxhdGVVcmw6ICcuL2Ryb3Bkb3duLWJyZWFkY3J1bWIuY29tcG9uZW50Lmh0bWwnLFxuICAgIHN0eWxlVXJsczogWycuL2Ryb3Bkb3duLWJyZWFkY3J1bWIuY29tcG9uZW50LnNjc3MnXSxcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxuICAgIGhvc3Q6IHtcbiAgICAgICAgJ2NsYXNzJzogJ2FkZi1kcm9wZG93bi1icmVhZGNydW1iJ1xuICAgIH1cbn0pXG5leHBvcnQgY2xhc3MgRHJvcGRvd25CcmVhZGNydW1iQ29tcG9uZW50IGV4dGVuZHMgQnJlYWRjcnVtYkNvbXBvbmVudCBpbXBsZW1lbnRzIE9uQ2hhbmdlcyB7XG5cbiAgICBAVmlld0NoaWxkKCdkcm9wZG93bicpXG4gICAgZHJvcGRvd246IE1hdFNlbGVjdDtcblxuICAgIGN1cnJlbnROb2RlOiBQYXRoRWxlbWVudEVudGl0eTtcbiAgICBwcmV2aW91c05vZGVzOiBQYXRoRWxlbWVudEVudGl0eVtdO1xuXG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xuICAgICAgICBpZiAoY2hhbmdlcy5mb2xkZXJOb2RlKSB7XG4gICAgICAgICAgICBsZXQgbm9kZTogTWluaW1hbE5vZGVFbnRyeUVudGl0eSA9IG51bGw7XG4gICAgICAgICAgICBub2RlID0gdGhpcy50cmFuc2Zvcm0gPyB0aGlzLnRyYW5zZm9ybShjaGFuZ2VzLmZvbGRlck5vZGUuY3VycmVudFZhbHVlKSA6IGNoYW5nZXMuZm9sZGVyTm9kZS5jdXJyZW50VmFsdWU7XG4gICAgICAgICAgICB0aGlzLnJvdXRlID0gdGhpcy5wYXJzZVJvdXRlKG5vZGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNoYW5nZXMudHJhbnNmb3JtKSB7XG4gICAgICAgICAgICBsZXQgbm9kZSA9IHRoaXMudHJhbnNmb3JtID8gdGhpcy50cmFuc2Zvcm0odGhpcy5mb2xkZXJOb2RlKSA6IHRoaXMuZm9sZGVyTm9kZTtcbiAgICAgICAgICAgIHRoaXMucm91dGUgPSB0aGlzLnBhcnNlUm91dGUobm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZWNhbGN1bGF0ZU5vZGVzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIHRoZSBjdXJyZW50IGFuZCBwcmV2aW91cyBub2RlcyBmcm9tIHRoZSByb3V0ZSBhcnJheVxuICAgICAqL1xuICAgIHByb3RlY3RlZCByZWNhbGN1bGF0ZU5vZGVzKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmN1cnJlbnROb2RlID0gdGhpcy5yb3V0ZVt0aGlzLnJvdXRlLmxlbmd0aCAtIDFdO1xuICAgICAgICB0aGlzLnByZXZpb3VzTm9kZXMgPSB0aGlzLnJvdXRlLnNsaWNlKDAsIHRoaXMucm91dGUubGVuZ3RoIC0gMSkucmV2ZXJzZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9wZW5zIHRoZSBub2RlIHBpY2tlciBtZW51XG4gICAgICovXG4gICAgb3BlbigpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuZHJvcGRvd24pIHtcbiAgICAgICAgICAgIHRoaXMuZHJvcGRvd24ub3BlbigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIGlmIHJvdXRlIGhhcyBtb3JlIHRoYW4gb25lIGVsZW1lbnQgKG1lYW5zOiB3ZSBhcmUgbm90IGluIHRoZSByb290IGRpcmVjdG9yeSlcbiAgICAgKi9cbiAgICBoYXNQcmV2aW91c05vZGVzKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5wcmV2aW91c05vZGVzLmxlbmd0aCA+IDA7XG4gICAgfVxufVxuIiwiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBNYXRlcmlhbE1vZHVsZSB9IGZyb20gJy4uL21hdGVyaWFsLm1vZHVsZSc7XG5cbmltcG9ydCB7IEJyZWFkY3J1bWJDb21wb25lbnQgfSBmcm9tICcuL2JyZWFkY3J1bWIuY29tcG9uZW50JztcbmltcG9ydCB7IERyb3Bkb3duQnJlYWRjcnVtYkNvbXBvbmVudCB9IGZyb20gJy4vZHJvcGRvd24tYnJlYWRjcnVtYi5jb21wb25lbnQnO1xuaW1wb3J0IHsgQ29yZU1vZHVsZSB9IGZyb20gJ0BhbGZyZXNjby9hZGYtY29yZSc7XG5cbkBOZ01vZHVsZSh7XG4gICAgaW1wb3J0czogW1xuICAgICAgICBDb21tb25Nb2R1bGUsXG4gICAgICAgIE1hdGVyaWFsTW9kdWxlLFxuICAgICAgICBDb3JlTW9kdWxlLmZvckNoaWxkKClcbiAgICBdLFxuICAgIGV4cG9ydHM6IFtcbiAgICAgICAgQnJlYWRjcnVtYkNvbXBvbmVudCxcbiAgICAgICAgRHJvcGRvd25CcmVhZGNydW1iQ29tcG9uZW50XG4gICAgXSxcbiAgICBkZWNsYXJhdGlvbnM6IFtcbiAgICAgICAgQnJlYWRjcnVtYkNvbXBvbmVudCxcbiAgICAgICAgRHJvcGRvd25CcmVhZGNydW1iQ29tcG9uZW50XG4gICAgXVxufSlcbmV4cG9ydCBjbGFzcyBCcmVhZGNydW1iTW9kdWxlIHt9XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQsIEluamVjdCwgVmlld0VuY2Fwc3VsYXRpb24gfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE1BVF9ESUFMT0dfREFUQSB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdhZGYtY29uZmlybS1kaWFsb2cnLFxuICAgIHRlbXBsYXRlOiBgXG4gICAgICAgIDxoMSBtYXQtZGlhbG9nLXRpdGxlPnt7IHRpdGxlIHwgdHJhbnNsYXRlIH19PC9oMT5cbiAgICAgICAgPG1hdC1kaWFsb2ctY29udGVudD5cbiAgICAgICAgICAgIDxwPnt7IG1lc3NhZ2UgfCB0cmFuc2xhdGUgfX08L3A+XG4gICAgICAgIDwvbWF0LWRpYWxvZy1jb250ZW50PlxuICAgICAgICA8bWF0LWRpYWxvZy1hY3Rpb25zPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzcGFjZXJcIj48L3NwYW4+XG4gICAgICAgICAgICA8YnV0dG9uIGlkPVwiYWRmLWNvbmZpcm0tYWNjZXB0XCIgbWF0LWJ1dHRvbiBjb2xvcj1cInByaW1hcnlcIiBbbWF0LWRpYWxvZy1jbG9zZV09XCJ0cnVlXCI+e3sgeWVzTGFiZWwgfCB0cmFuc2xhdGUgfX08L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gaWQ9XCJhZGYtY29uZmlybS1jYW5jZWxcIiBtYXQtYnV0dG9uIFttYXQtZGlhbG9nLWNsb3NlXT1cImZhbHNlXCIgY2RrRm9jdXNJbml0aWFsPnt7IG5vTGFiZWwgfCB0cmFuc2xhdGUgfX08L2J1dHRvbj5cbiAgICAgICAgPC9tYXQtZGlhbG9nLWFjdGlvbnM+XG4gICAgYCxcbiAgICBzdHlsZXM6IFtgXG4gICAgICAgIC5zcGFjZXIgeyBmbGV4OiAxIDEgYXV0bzsgfVxuXG4gICAgICAgIC5hZGYtY29uZmlybS1kaWFsb2cgLm1hdC1kaWFsb2ctYWN0aW9ucyAubWF0LWJ1dHRvbi13cmFwcGVyIHtcbiAgICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG4gICAgICAgIH1cbiAgICBgXSxcbiAgICBob3N0OiB7ICdjbGFzcyc6ICdhZGYtY29uZmlybS1kaWFsb2cnIH0sXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZVxufSlcbmV4cG9ydCBjbGFzcyBDb25maXJtRGlhbG9nQ29tcG9uZW50IHtcblxuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgbWVzc2FnZTogc3RyaW5nO1xuICAgIHllc0xhYmVsOiBzdHJpbmc7XG4gICAgbm9MYWJlbDogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoQEluamVjdChNQVRfRElBTE9HX0RBVEEpIGRhdGEpIHtcbiAgICAgICAgZGF0YSA9IGRhdGEgfHwge307XG4gICAgICAgIHRoaXMudGl0bGUgPSBkYXRhLnRpdGxlIHx8ICdBREZfQ09ORklSTV9ESUFMT0cuQ09ORklSTSc7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IGRhdGEubWVzc2FnZSB8fCAnQURGX0NPTkZJUk1fRElBTE9HLk1FU1NBR0UnO1xuICAgICAgICB0aGlzLnllc0xhYmVsID0gZGF0YS55ZXNMYWJlbCB8fCAnQURGX0NPTkZJUk1fRElBTE9HLllFU19MQUJFTCc7XG4gICAgICAgIHRoaXMubm9MYWJlbCA9IGRhdGEubm9MYWJlbCB8fCAnQURGX0NPTkZJUk1fRElBTE9HLk5PX0xBQkVMJztcbiAgICB9XG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBBbGZyZXNjb0FwaVNlcnZpY2UsIENvbnRlbnRTZXJ2aWNlIH0gZnJvbSAnQGFsZnJlc2NvL2FkZi1jb3JlJztcbmltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIE9uQ2hhbmdlcywgVmlld0VuY2Fwc3VsYXRpb24sIEV2ZW50RW1pdHRlciwgT3V0cHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBWZXJzaW9uc0FwaSwgTWluaW1hbE5vZGVFbnRyeUVudGl0eSwgVmVyc2lvbkVudHJ5IH0gZnJvbSAnYWxmcmVzY28tanMtYXBpJztcbmltcG9ydCB7IE1hdERpYWxvZyB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsJztcbmltcG9ydCB7IENvbmZpcm1EaWFsb2dDb21wb25lbnQgfSBmcm9tICcuLi9kaWFsb2dzL2NvbmZpcm0uZGlhbG9nJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdhZGYtdmVyc2lvbi1saXN0JyxcbiAgICB0ZW1wbGF0ZVVybDogJy4vdmVyc2lvbi1saXN0LmNvbXBvbmVudC5odG1sJyxcbiAgICBzdHlsZVVybHM6IFsnLi92ZXJzaW9uLWxpc3QuY29tcG9uZW50LnNjc3MnXSxcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxuICAgIGhvc3Q6IHtcbiAgICAgICAgJ2NsYXNzJzogJ2FkZi12ZXJzaW9uLWxpc3QnXG4gICAgfVxufSlcbmV4cG9ydCBjbGFzcyBWZXJzaW9uTGlzdENvbXBvbmVudCBpbXBsZW1lbnRzIE9uQ2hhbmdlcyB7XG5cbiAgICBwcml2YXRlIHZlcnNpb25zQXBpOiBWZXJzaW9uc0FwaTtcbiAgICB2ZXJzaW9uczogVmVyc2lvbkVudHJ5W10gPSBbXTtcbiAgICBpc0xvYWRpbmcgPSB0cnVlO1xuXG4gICAgLyoqIEBkZXByZWNhdGVkIGluIDIuMy4wICovXG4gICAgQElucHV0KClcbiAgICBpZDogc3RyaW5nO1xuXG4gICAgLyoqIFRoZSB0YXJnZXQgbm9kZS4gKi9cbiAgICBASW5wdXQoKVxuICAgIG5vZGU6IE1pbmltYWxOb2RlRW50cnlFbnRpdHk7XG5cbiAgICAvKiogVG9nZ2xlcyBzaG93aW5nL2hpZGluZyBvZiBjb21tZW50cyAqL1xuICAgIEBJbnB1dCgpXG4gICAgc2hvd0NvbW1lbnRzID0gdHJ1ZTtcblxuICAgIC8qKiBFbmFibGUvZGlzYWJsZSBkb3dubG9hZGluZyBhIHZlcnNpb24gb2YgdGhlIGN1cnJlbnQgbm9kZS4gKi9cbiAgICBASW5wdXQoKVxuICAgIGFsbG93RG93bmxvYWQgPSB0cnVlO1xuXG4gICAgLyoqIFRvZ2dsZXMgc2hvd2luZy9oaWRpbmcgb2YgdmVyc2lvbiBhY3Rpb25zICovXG4gICAgQElucHV0KClcbiAgICBzaG93QWN0aW9ucyA9IHRydWU7XG5cbiAgICAvKiogRW1pdHRlZCB3aGVuIGEgdmVyc2lvbiBpcyByZXN0b3JlZCAqL1xuICAgIEBPdXRwdXQoKVxuICAgIHJlc3RvcmVkOiBFdmVudEVtaXR0ZXI8TWluaW1hbE5vZGVFbnRyeUVudGl0eT4gPSBuZXcgRXZlbnRFbWl0dGVyPE1pbmltYWxOb2RlRW50cnlFbnRpdHk+KCk7XG5cbiAgICAvKiogRW1pdHRlZCB3aGVuIGEgdmVyc2lvbiBpcyBkZWxldGVkICovXG4gICAgQE91dHB1dCgpXG4gICAgZGVsZXRlZDogRXZlbnRFbWl0dGVyPE1pbmltYWxOb2RlRW50cnlFbnRpdHk+ID0gbmV3IEV2ZW50RW1pdHRlcjxNaW5pbWFsTm9kZUVudHJ5RW50aXR5PigpO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBhbGZyZXNjb0FwaTogQWxmcmVzY29BcGlTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIHByaXZhdGUgY29udGVudFNlcnZpY2U6IENvbnRlbnRTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIHByaXZhdGUgZGlhbG9nOiBNYXREaWFsb2cpIHtcbiAgICAgICAgdGhpcy52ZXJzaW9uc0FwaSA9IHRoaXMuYWxmcmVzY29BcGkudmVyc2lvbnNBcGk7XG4gICAgfVxuXG4gICAgbmdPbkNoYW5nZXMoKSB7XG4gICAgICAgIHRoaXMubG9hZFZlcnNpb25IaXN0b3J5KCk7XG4gICAgfVxuXG4gICAgY2FuVXBkYXRlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50U2VydmljZS5oYXNQZXJtaXNzaW9uKHRoaXMubm9kZSwgJ3VwZGF0ZScpICYmIHRoaXMudmVyc2lvbnMubGVuZ3RoID4gMTtcbiAgICB9XG5cbiAgICBjYW5EZWxldGUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRTZXJ2aWNlLmhhc1Blcm1pc3Npb24odGhpcy5ub2RlLCAnZGVsZXRlJykgJiYgdGhpcy52ZXJzaW9ucy5sZW5ndGggPiAxO1xuICAgIH1cblxuICAgIHJlc3RvcmUodmVyc2lvbklkKSB7XG4gICAgICAgIGlmICh0aGlzLmNhblVwZGF0ZSgpKSB7XG4gICAgICAgICAgICB0aGlzLnZlcnNpb25zQXBpXG4gICAgICAgICAgICAgICAgLnJldmVydFZlcnNpb24odGhpcy5ub2RlLmlkLCB2ZXJzaW9uSWQsIHsgbWFqb3JWZXJzaW9uOiB0cnVlLCBjb21tZW50OiAnJyB9KVxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMub25WZXJzaW9uUmVzdG9yZWQodGhpcy5ub2RlKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBsb2FkVmVyc2lvbkhpc3RvcnkoKSB7XG4gICAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy52ZXJzaW9uc0FwaS5saXN0VmVyc2lvbkhpc3RvcnkodGhpcy5ub2RlLmlkKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnZlcnNpb25zID0gZGF0YS5saXN0LmVudHJpZXM7XG4gICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBkb3dubG9hZFZlcnNpb24odmVyc2lvbklkOiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKHRoaXMuYWxsb3dEb3dubG9hZCkge1xuICAgICAgICAgICAgY29uc3QgdmVyc2lvbkRvd25sb2FkVXJsID0gdGhpcy5nZXRWZXJzaW9uQ29udGVudFVybCh0aGlzLm5vZGUuaWQsIHZlcnNpb25JZCwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmRvd25sb2FkQ29udGVudCh2ZXJzaW9uRG93bmxvYWRVcmwpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGVsZXRlVmVyc2lvbih2ZXJzaW9uSWQ6IHN0cmluZykge1xuICAgICAgICBpZiAodGhpcy5jYW5VcGRhdGUoKSkge1xuICAgICAgICAgICAgY29uc3QgZGlhbG9nUmVmID0gdGhpcy5kaWFsb2cub3BlbihDb25maXJtRGlhbG9nQ29tcG9uZW50LCB7XG4gICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0FERl9WRVJTSU9OX0xJU1QuQ09ORklSTV9ERUxFVEUuVElUTEUnLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnQURGX1ZFUlNJT05fTElTVC5DT05GSVJNX0RFTEVURS5NRVNTQUdFJyxcbiAgICAgICAgICAgICAgICAgICAgeWVzTGFiZWw6ICdBREZfVkVSU0lPTl9MSVNULkNPTkZJUk1fREVMRVRFLllFU19MQUJFTCcsXG4gICAgICAgICAgICAgICAgICAgIG5vTGFiZWw6ICdBREZfVkVSU0lPTl9MSVNULkNPTkZJUk1fREVMRVRFLk5PX0xBQkVMJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbWluV2lkdGg6ICcyNTBweCdcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBkaWFsb2dSZWYuYWZ0ZXJDbG9zZWQoKS5zdWJzY3JpYmUocmVzdWx0ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWxmcmVzY29BcGkudmVyc2lvbnNBcGlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5kZWxldGVWZXJzaW9uKHRoaXMubm9kZS5pZCwgdmVyc2lvbklkKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy5vblZlcnNpb25EZWxldGVkKHRoaXMubm9kZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25WZXJzaW9uRGVsZXRlZChub2RlOiBhbnkpIHtcbiAgICAgICAgdGhpcy5sb2FkVmVyc2lvbkhpc3RvcnkoKTtcbiAgICAgICAgdGhpcy5kZWxldGVkLmVtaXQobm9kZSk7XG4gICAgfVxuXG4gICAgb25WZXJzaW9uUmVzdG9yZWQobm9kZTogYW55KSB7XG4gICAgICAgIHRoaXMubG9hZFZlcnNpb25IaXN0b3J5KCk7XG4gICAgICAgIHRoaXMucmVzdG9yZWQuZW1pdChub2RlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFZlcnNpb25Db250ZW50VXJsKG5vZGVJZDogc3RyaW5nLCB2ZXJzaW9uSWQ6IHN0cmluZywgYXR0YWNobWVudD86IGJvb2xlYW4pIHtcbiAgICAgICAgY29uc3Qgbm9kZURvd25sb2FkVXJsID0gdGhpcy5hbGZyZXNjb0FwaS5jb250ZW50QXBpLmdldENvbnRlbnRVcmwobm9kZUlkLCBhdHRhY2htZW50KTtcbiAgICAgICAgcmV0dXJuIG5vZGVEb3dubG9hZFVybC5yZXBsYWNlKCcvY29udGVudCcsICcvdmVyc2lvbnMvJyArIHZlcnNpb25JZCArICcvY29udGVudCcpO1xuICAgIH1cblxuICAgIGRvd25sb2FkQ29udGVudCh1cmw6IHN0cmluZykge1xuICAgICAgICBpZiAodXJsKSB7XG4gICAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuXG4gICAgICAgICAgICBsaW5rLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICBsaW5rLmhyZWYgPSB1cmw7XG5cbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7XG4gICAgICAgICAgICBsaW5rLmNsaWNrKCk7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgVmlld0VuY2Fwc3VsYXRpb24sIFZpZXdDaGlsZCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE1pbmltYWxOb2RlRW50cnlFbnRpdHkgfSBmcm9tICdhbGZyZXNjby1qcy1hcGknO1xuaW1wb3J0IHsgVmVyc2lvbkxpc3RDb21wb25lbnQgfSBmcm9tICcuL3ZlcnNpb24tbGlzdC5jb21wb25lbnQnO1xuaW1wb3J0IHsgQXBwQ29uZmlnU2VydmljZSwgQ29udGVudFNlcnZpY2UsIEFsZnJlc2NvQXBpU2VydmljZSB9IGZyb20gJ0BhbGZyZXNjby9hZGYtY29yZSc7XG5pbXBvcnQgeyB0cmlnZ2VyLCBzdGF0ZSwgc3R5bGUsIGFuaW1hdGUsIHRyYW5zaXRpb24gfSBmcm9tICdAYW5ndWxhci9hbmltYXRpb25zJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdhZGYtdmVyc2lvbi1tYW5hZ2VyJyxcbiAgICB0ZW1wbGF0ZVVybDogJy4vdmVyc2lvbi1tYW5hZ2VyLmNvbXBvbmVudC5odG1sJyxcbiAgICBzdHlsZVVybHM6IFsnLi92ZXJzaW9uLW1hbmFnZXIuY29tcG9uZW50LnNjc3MnXSxcbiAgICBhbmltYXRpb25zOiBbXG4gICAgICAgIHRyaWdnZXIoJ3VwbG9hZFRvZ2dsZScsIFtcbiAgICAgICAgICAgIHN0YXRlKCdvcGVuJywgc3R5bGUoeyBoZWlnaHQ6ICcxNzVweCcsIG9wYWNpdHk6IDEsIHZpc2liaWxpdHk6ICd2aXNpYmxlJyB9KSksXG4gICAgICAgICAgICBzdGF0ZSgnY2xvc2UnLCBzdHlsZSh7IGhlaWdodDogJzAlJywgb3BhY2l0eTogMCwgdmlzaWJpbGl0eTogJ2hpZGRlbicgfSkpLFxuICAgICAgICAgICAgdHJhbnNpdGlvbignb3BlbiA9PiBjbG9zZScsIFtcbiAgICAgICAgICAgICAgICBzdHlsZSh7IHZpc2liaWxpdHk6ICdoaWRkZW4nIH0pLFxuICAgICAgICAgICAgICAgIGFuaW1hdGUoJzAuNHMgY3ViaWMtYmV6aWVyKDAuMjUsIDAuOCwgMC4yNSwgMSknKVxuICAgICAgICAgICAgXSksXG4gICAgICAgICAgICB0cmFuc2l0aW9uKCdjbG9zZSA9PiBvcGVuJywgW1xuICAgICAgICAgICAgICAgIHN0eWxlKHsgdmlzaWJpbGl0eTogJ3Zpc2libGUnIH0pLFxuICAgICAgICAgICAgICAgIGFuaW1hdGUoJzAuNHMgY3ViaWMtYmV6aWVyKDAuMjUsIDAuOCwgMC4yNSwgMSknKVxuICAgICAgICAgICAgXSlcbiAgICAgICAgXSlcbiAgICBdLFxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmVcbn0pXG5leHBvcnQgY2xhc3MgVmVyc2lvbk1hbmFnZXJDb21wb25lbnQge1xuXG4gICAgLyoqIFRhcmdldCBub2RlIHRvIG1hbmFnZSB2ZXJzaW9uIGhpc3RvcnkuICovXG4gICAgQElucHV0KClcbiAgICBub2RlOiBNaW5pbWFsTm9kZUVudHJ5RW50aXR5O1xuXG4gICAgLyoqIFRvZ2dsZXMgc2hvd2luZy9oaWRpbmcgb2YgY29tbWVudHMuICovXG4gICAgQElucHV0KClcbiAgICBzaG93Q29tbWVudHMgPSB0cnVlO1xuXG4gICAgLyoqIEVuYWJsZS9kaXNhYmxlIGRvd25sb2FkaW5nIGEgdmVyc2lvbiBvZiB0aGUgY3VycmVudCBub2RlLiAqL1xuICAgIEBJbnB1dCgpXG4gICAgYWxsb3dEb3dubG9hZCA9IHRydWU7XG5cbiAgICAvKiogRW1pdHRlZCB3aGVuIGEgZmlsZSBpcyB1cGxvYWRlZCBzdWNjZXNzZnVsbHkuICovXG4gICAgQE91dHB1dCgpXG4gICAgdXBsb2FkU3VjY2VzczogRXZlbnRFbWl0dGVyPE1pbmltYWxOb2RlRW50cnlFbnRpdHk+ID0gbmV3IEV2ZW50RW1pdHRlcjxNaW5pbWFsTm9kZUVudHJ5RW50aXR5PigpO1xuXG4gICAgLyoqIEVtaXR0ZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMgZHVyaW5nIHVwbG9hZC4gKi9cbiAgICBAT3V0cHV0KClcbiAgICB1cGxvYWRFcnJvcjogRXZlbnRFbWl0dGVyPE1pbmltYWxOb2RlRW50cnlFbnRpdHk+ID0gbmV3IEV2ZW50RW1pdHRlcjxNaW5pbWFsTm9kZUVudHJ5RW50aXR5PigpO1xuXG4gICAgQFZpZXdDaGlsZCgndmVyc2lvbkxpc3QnKVxuICAgIHZlcnNpb25MaXN0Q29tcG9uZW50OiBWZXJzaW9uTGlzdENvbXBvbmVudDtcblxuICAgIHVwbG9hZFN0YXRlOiBzdHJpbmcgPSAnY2xvc2UnO1xuXG4gICAgY29uc3RydWN0b3IoY29uZmlnOiBBcHBDb25maWdTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIHByaXZhdGUgY29udGVudFNlcnZpY2U6IENvbnRlbnRTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIHByaXZhdGUgYWxmcmVzY29BcGlTZXJ2aWNlOiBBbGZyZXNjb0FwaVNlcnZpY2UpIHtcbiAgICB9XG5cbiAgICByZWZyZXNoKG5vZGU6IE1pbmltYWxOb2RlRW50cnlFbnRpdHkpIHtcbiAgICAgICAgdGhpcy5hbGZyZXNjb0FwaVNlcnZpY2Uubm9kZVVwZGF0ZWQubmV4dChub2RlKTtcbiAgICAgICAgdGhpcy52ZXJzaW9uTGlzdENvbXBvbmVudC5sb2FkVmVyc2lvbkhpc3RvcnkoKTtcbiAgICAgICAgdGhpcy51cGxvYWRTdWNjZXNzLmVtaXQobm9kZSk7XG4gICAgICAgIHRoaXMudXBsb2FkU3RhdGUgPSAnY2xvc2UnO1xuICAgIH1cblxuICAgIG9uVXBsb2FkU3VjY2VzcyhldmVudDogYW55KSB7XG4gICAgICAgIHRoaXMuYWxmcmVzY29BcGlTZXJ2aWNlLm5vZGVVcGRhdGVkLm5leHQoZXZlbnQudmFsdWUuZW50cnkpO1xuICAgICAgICB0aGlzLnZlcnNpb25MaXN0Q29tcG9uZW50LmxvYWRWZXJzaW9uSGlzdG9yeSgpO1xuICAgICAgICB0aGlzLnVwbG9hZFN1Y2Nlc3MuZW1pdChldmVudC52YWx1ZS5lbnRyeSk7XG4gICAgICAgIHRoaXMudXBsb2FkU3RhdGUgPSAnY2xvc2UnO1xuICAgIH1cblxuICAgIG9uVXBsb2FkRXJyb3IoZXZlbnQ6IGFueSkge1xuICAgICAgICB0aGlzLnVwbG9hZEVycm9yLmVtaXQoZXZlbnQpO1xuICAgIH1cblxuICAgIG9uVXBsb2FkQ2FuY2VsKCkge1xuICAgICAgICB0aGlzLnVwbG9hZFN0YXRlID0gJ2Nsb3NlJztcbiAgICB9XG5cbiAgICB0b2dnbGVOZXdWZXJzaW9uKCkge1xuICAgICAgICB0aGlzLnVwbG9hZFN0YXRlID0gdGhpcy51cGxvYWRTdGF0ZSA9PT0gJ29wZW4nID8gJ2Nsb3NlJyA6ICdvcGVuJztcbiAgICB9XG5cbiAgICBjYW5VcGRhdGUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRTZXJ2aWNlLmhhc1Blcm1pc3Npb24odGhpcy5ub2RlLCAndXBkYXRlJyk7XG4gICAgfVxufVxuIiwiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgVmlld0VuY2Fwc3VsYXRpb24sIE91dHB1dCwgRXZlbnRFbWl0dGVyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBNaW5pbWFsTm9kZUVudHJ5RW50aXR5IH0gZnJvbSAnYWxmcmVzY28tanMtYXBpJztcbmltcG9ydCB7IENvbnRlbnRTZXJ2aWNlIH0gZnJvbSAnQGFsZnJlc2NvL2FkZi1jb3JlJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdhZGYtdmVyc2lvbi11cGxvYWQnLFxuICAgIHRlbXBsYXRlVXJsOiAnLi92ZXJzaW9uLXVwbG9hZC5jb21wb25lbnQuaHRtbCcsXG4gICAgc3R5bGVVcmxzOiBbJy4vdmVyc2lvbi11cGxvYWQuY29tcG9uZW50LnNjc3MnXSxcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxuICAgIGhvc3Q6IHsgJ2NsYXNzJzogJ2FkZi12ZXJzaW9uLXVwbG9hZCcgfVxufSlcbmV4cG9ydCBjbGFzcyBWZXJzaW9uVXBsb2FkQ29tcG9uZW50IHtcblxuICAgIHNlbWFudGljVmVyc2lvbjogc3RyaW5nID0gJ21pbm9yJztcbiAgICBjb21tZW50OiBzdHJpbmc7XG4gICAgdXBsb2FkVmVyc2lvbjogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgQElucHV0KClcbiAgICBub2RlOiBNaW5pbWFsTm9kZUVudHJ5RW50aXR5O1xuXG4gICAgQE91dHB1dCgpXG4gICAgc3VjY2VzcyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICAgIEBPdXRwdXQoKVxuICAgIGVycm9yID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gICAgQE91dHB1dCgpXG4gICAgY2FuY2VsID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBjb250ZW50U2VydmljZTogQ29udGVudFNlcnZpY2UpIHtcbiAgICB9XG5cbiAgICBjYW5VcGxvYWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRTZXJ2aWNlLmhhc1Blcm1pc3Npb24odGhpcy5ub2RlLCAndXBkYXRlJyk7XG4gICAgfVxuXG4gICAgaXNNYWpvclZlcnNpb24oKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbWFudGljVmVyc2lvbiA9PT0gJ21pbm9yJyA/IGZhbHNlIDogdHJ1ZTtcbiAgICB9XG5cbiAgICBjYW5jZWxVcGxvYWQoKSB7XG4gICAgICAgIHRoaXMuY2FuY2VsLmVtaXQoKTtcbiAgICB9XG5cbn1cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBGb3Jtc01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBNYXRlcmlhbE1vZHVsZSB9IGZyb20gJy4uL21hdGVyaWFsLm1vZHVsZSc7XG5cbmltcG9ydCB7IFZlcnNpb25VcGxvYWRDb21wb25lbnQgfSBmcm9tICcuL3ZlcnNpb24tdXBsb2FkLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBWZXJzaW9uTWFuYWdlckNvbXBvbmVudCB9IGZyb20gJy4vdmVyc2lvbi1tYW5hZ2VyLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBWZXJzaW9uTGlzdENvbXBvbmVudCB9IGZyb20gJy4vdmVyc2lvbi1saXN0LmNvbXBvbmVudCc7XG5pbXBvcnQgeyBVcGxvYWRNb2R1bGUgfSBmcm9tICcuLi91cGxvYWQvdXBsb2FkLm1vZHVsZSc7XG5pbXBvcnQgeyBDb3JlTW9kdWxlIH0gZnJvbSAnQGFsZnJlc2NvL2FkZi1jb3JlJztcblxuQE5nTW9kdWxlKHtcbiAgICBpbXBvcnRzOiBbXG4gICAgICAgIENvbW1vbk1vZHVsZSxcbiAgICAgICAgTWF0ZXJpYWxNb2R1bGUsXG4gICAgICAgIENvcmVNb2R1bGUuZm9yQ2hpbGQoKSxcbiAgICAgICAgVXBsb2FkTW9kdWxlLFxuICAgICAgICBGb3Jtc01vZHVsZVxuICAgIF0sXG4gICAgZXhwb3J0czogW1xuICAgICAgICBWZXJzaW9uVXBsb2FkQ29tcG9uZW50LFxuICAgICAgICBWZXJzaW9uTWFuYWdlckNvbXBvbmVudCxcbiAgICAgICAgVmVyc2lvbkxpc3RDb21wb25lbnQsXG4gICAgICAgIEZvcm1zTW9kdWxlXG4gICAgXSxcbiAgICBkZWNsYXJhdGlvbnM6IFtcbiAgICAgICAgVmVyc2lvblVwbG9hZENvbXBvbmVudCxcbiAgICAgICAgVmVyc2lvbk1hbmFnZXJDb21wb25lbnQsXG4gICAgICAgIFZlcnNpb25MaXN0Q29tcG9uZW50XG4gICAgXVxufSlcbmV4cG9ydCBjbGFzcyBWZXJzaW9uTWFuYWdlck1vZHVsZSB7fVxuIiwiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgSW5wdXQsIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LCBDb21wb25lbnQsIE9uSW5pdCwgVmlld0VuY2Fwc3VsYXRpb24gfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IERhdGFSb3cgfSBmcm9tICdAYWxmcmVzY28vYWRmLWNvcmUnO1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ2FkZi1uYW1lLWxvY2F0aW9uLWNlbGwnLFxuICAgIHRlbXBsYXRlOiBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJhZGYtbmFtZS1sb2NhdGlvbi1jZWxsLW5hbWVcIj57eyBuYW1lIH19PC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJhZGYtbmFtZS1sb2NhdGlvbi1jZWxsLWxvY2F0aW9uXCIgW3RpdGxlXT1cInBhdGhcIj57eyBwYXRoIH19PC9kaXY+XG4gICAgYCxcbiAgICBzdHlsZVVybHM6IFsnLi9uYW1lLWxvY2F0aW9uLWNlbGwuY29tcG9uZW50LnNjc3MnXSxcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxuICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICAgIGhvc3Q6IHsgY2xhc3M6ICdhZGYtbmFtZS1sb2NhdGlvbi1jZWxsJyB9XG59KVxuZXhwb3J0IGNsYXNzIE5hbWVMb2NhdGlvbkNlbGxDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuXG4gICAgbmFtZTogc3RyaW5nID0gJyc7XG4gICAgcGF0aDogc3RyaW5nID0gJyc7XG5cbiAgICBASW5wdXQoKVxuICAgIHJvdzogRGF0YVJvdztcblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICBpZiAodGhpcy5yb3cpIHtcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IHRoaXMucm93LmdldFZhbHVlKCduYW1lJyk7XG5cbiAgICAgICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gdGhpcy5yb3cuZ2V0VmFsdWUoJ3BhdGgnKTtcbiAgICAgICAgICAgIGlmIChmdWxsUGF0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGF0aCA9IGZ1bGxQYXRoLm5hbWUgfHwgJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBTZWFyY2hTZXJ2aWNlIH0gZnJvbSAnQGFsZnJlc2NvL2FkZi1jb3JlJztcbmltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE5vZGVQYWdpbmcgfSBmcm9tICdhbGZyZXNjby1qcy1hcGknO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuXG4vKipcbiAqIEludGVybmFsIHNlcnZpY2UgdXNlZCBieSBDb250ZW50Tm9kZVNlbGVjdG9yIGNvbXBvbmVudC5cbiAqL1xuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIENvbnRlbnROb2RlU2VsZWN0b3JTZXJ2aWNlIHtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgc2VhcmNoU2VydmljZTogU2VhcmNoU2VydmljZSkge1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGEgc2VhcmNoIGZvciBjb250ZW50IG5vZGUgc2VsZWN0aW9uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2VhcmNoVGVybSAgICBUaGUgdGVybSB0byBzZWFyY2ggZm9yXG4gICAgICogQHBhcmFtIHJvb3ROb2RlSWQgICAgVGhlIHJvb3QgaXMgdG8gc3RhcnQgdGhlIHNlYXJjaCBmcm9tXG4gICAgICogQHBhcmFtIHNraXBDb3VudCAgICAgRnJvbSB3aGVyZSB0byBzdGFydCB0aGUgbG9hZGluZ1xuICAgICAqIEBwYXJhbSBtYXhJdGVtcyAgICAgIEhvdyBtYW55IGl0ZW1zIHRvIGxvYWRcbiAgICAgKiBAcGFyYW0gW2V4dHJhTm9kZUlkc10gIExpc3Qgb2YgZXh0cmEgbm9kZSBpZHMgdG8gc2VhcmNoIGZyb20uIFRoaXMgbGFzdCBwYXJhbWV0ZXIgaXMgbmVjZXNzYXJ5IHdoZW5cbiAgICAgKiB0aGUgcm9vdE5vZGVJZCBpcyBvbmUgb2YgdGhlIHN1cHBvcnRlZCBhbGlhc2VzIChlLmcuICctbXktJywgJy1yb290LScsICctbXlzaXRlcy0nLCBldGMuKVxuICAgICAqIGFuZCBzZWFyY2ggaXMgbm90IHN1cHBvcnRlZCBmb3IgdGhhdCBhbGlhcywgYnV0IGNhbiBiZSBwZXJmb3JtZWQgb24gaXRzIGNvcnJlc3BvbmRpbmcgbm9kZXMuXG4gICAgICovXG4gICAgcHVibGljIHNlYXJjaChzZWFyY2hUZXJtOiBzdHJpbmcsIHJvb3ROb2RlSWQ6IHN0cmluZyA9IG51bGwsIHNraXBDb3VudDogbnVtYmVyID0gMCwgbWF4SXRlbXM6IG51bWJlciA9IDI1LCBleHRyYU5vZGVJZHM/OiBzdHJpbmdbXSk6IE9ic2VydmFibGU8Tm9kZVBhZ2luZz4ge1xuXG4gICAgICAgIGxldCBleHRyYVBhcmVudEZpbHRlcmluZyA9ICcnO1xuXG4gICAgICAgIGlmIChleHRyYU5vZGVJZHMgJiYgZXh0cmFOb2RlSWRzLmxlbmd0aCkge1xuICAgICAgICAgICAgZXh0cmFOb2RlSWRzXG4gICAgICAgICAgICAgICAgLmZpbHRlcihpZCA9PiBpZCAhPT0gcm9vdE5vZGVJZClcbiAgICAgICAgICAgICAgICAuZm9yRWFjaChleHRyYUlkID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFQYXJlbnRGaWx0ZXJpbmcgKz0gYCBPUiBBTkNFU1RPUjond29ya3NwYWNlOi8vU3BhY2VzU3RvcmUvJHtleHRyYUlkfSdgO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGFyZW50RmlsdGVyaW5nID0gcm9vdE5vZGVJZCA/IFt7IHF1ZXJ5OiBgQU5DRVNUT1I6J3dvcmtzcGFjZTovL1NwYWNlc1N0b3JlLyR7cm9vdE5vZGVJZH0nJHtleHRyYVBhcmVudEZpbHRlcmluZ31gIH1dIDogW107XG5cbiAgICAgICAgbGV0IGRlZmF1bHRTZWFyY2hOb2RlOiBhbnkgPSB7XG4gICAgICAgICAgICBxdWVyeToge1xuICAgICAgICAgICAgICAgIHF1ZXJ5OiBgJHtzZWFyY2hUZXJtfSogT1IgbmFtZToke3NlYXJjaFRlcm19KmBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpbmNsdWRlOiBbJ3BhdGgnLCAnYWxsb3dhYmxlT3BlcmF0aW9ucyddLFxuICAgICAgICAgICAgcGFnaW5nOiB7XG4gICAgICAgICAgICAgICAgbWF4SXRlbXM6IG1heEl0ZW1zLFxuICAgICAgICAgICAgICAgIHNraXBDb3VudDogc2tpcENvdW50XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZmlsdGVyUXVlcmllczogW1xuICAgICAgICAgICAgICAgIHsgcXVlcnk6IFwiVFlQRTonY206Zm9sZGVyJ1wiIH0sXG4gICAgICAgICAgICAgICAgeyBxdWVyeTogJ05PVCBjbTpjcmVhdG9yOlN5c3RlbScgfSxcbiAgICAgICAgICAgICAgICAuLi5wYXJlbnRGaWx0ZXJpbmdcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgICAgIGxvY2F0aW9uczogWydub2RlcyddXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuc2VhcmNoU2VydmljZS5zZWFyY2hCeVF1ZXJ5Qm9keShkZWZhdWx0U2VhcmNoTm9kZSk7XG4gICAgfVxufVxuIiwiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIElucHV0LCBPbkluaXQsIE91dHB1dCwgVmlld0NoaWxkLCBWaWV3RW5jYXBzdWxhdGlvbiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtcbiAgICBBbGZyZXNjb0FwaVNlcnZpY2UsIEhpZ2hsaWdodERpcmVjdGl2ZSwgVXNlclByZWZlcmVuY2VzU2VydmljZSxcbiAgICBQYWdpbmF0ZWRDb21wb25lbnQsIFBhZ2luYXRpb25Nb2RlbFxufSBmcm9tICdAYWxmcmVzY28vYWRmLWNvcmUnO1xuaW1wb3J0IHsgRm9ybUNvbnRyb2wgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBNaW5pbWFsTm9kZUVudHJ5RW50aXR5LCBOb2RlUGFnaW5nLCBQYWdpbmF0aW9uLCBTaXRlRW50cnksIFNpdGVQYWdpbmcgfSBmcm9tICdhbGZyZXNjby1qcy1hcGknO1xuaW1wb3J0IHsgRG9jdW1lbnRMaXN0Q29tcG9uZW50LCBQYWdpbmF0aW9uU3RyYXRlZ3kgfSBmcm9tICcuLi9kb2N1bWVudC1saXN0L2NvbXBvbmVudHMvZG9jdW1lbnQtbGlzdC5jb21wb25lbnQnO1xuaW1wb3J0IHsgUm93RmlsdGVyIH0gZnJvbSAnLi4vZG9jdW1lbnQtbGlzdC9kYXRhL3Jvdy1maWx0ZXIubW9kZWwnO1xuaW1wb3J0IHsgSW1hZ2VSZXNvbHZlciB9IGZyb20gJy4uL2RvY3VtZW50LWxpc3QvZGF0YS9pbWFnZS1yZXNvbHZlci5tb2RlbCc7XG5pbXBvcnQgeyBDb250ZW50Tm9kZVNlbGVjdG9yU2VydmljZSB9IGZyb20gJy4vY29udGVudC1ub2RlLXNlbGVjdG9yLnNlcnZpY2UnO1xuaW1wb3J0IHsgZGVib3VuY2VUaW1lIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBDdXN0b21SZXNvdXJjZXNTZXJ2aWNlIH0gZnJvbSAnLi4vZG9jdW1lbnQtbGlzdC9zZXJ2aWNlcy9jdXN0b20tcmVzb3VyY2VzLnNlcnZpY2UnO1xuXG5leHBvcnQgdHlwZSBWYWxpZGF0aW9uRnVuY3Rpb24gPSAoZW50cnk6IE1pbmltYWxOb2RlRW50cnlFbnRpdHkpID0+IGJvb2xlYW47XG5cbmNvbnN0IGRlZmF1bHRWYWxpZGF0aW9uID0gKCkgPT4gdHJ1ZTtcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdhZGYtY29udGVudC1ub2RlLXNlbGVjdG9yLXBhbmVsJyxcbiAgICBzdHlsZVVybHM6IFsnLi9jb250ZW50LW5vZGUtc2VsZWN0b3ItcGFuZWwuY29tcG9uZW50LnNjc3MnXSxcbiAgICB0ZW1wbGF0ZVVybDogJy4vY29udGVudC1ub2RlLXNlbGVjdG9yLXBhbmVsLmNvbXBvbmVudC5odG1sJyxcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxuICAgIGhvc3Q6IHsgJ2NsYXNzJzogJ2FkZi1jb250ZW50LW5vZGUtc2VsZWN0b3ItcGFuZWwnIH1cbn0pXG5leHBvcnQgY2xhc3MgQ29udGVudE5vZGVTZWxlY3RvclBhbmVsQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBQYWdpbmF0ZWRDb21wb25lbnQge1xuXG4gICAgLyoqIE5vZGUgSUQgb2YgdGhlIGZvbGRlciBjdXJyZW50bHkgbGlzdGVkLiAqL1xuICAgIEBJbnB1dCgpXG4gICAgY3VycmVudEZvbGRlcklkOiBzdHJpbmcgPSBudWxsO1xuXG4gICAgLyoqIEhpZGUgdGhlIFwiTXkgRmlsZXNcIiBvcHRpb24gYWRkZWQgdG8gdGhlIHNpdGUgbGlzdCBieSBkZWZhdWx0LlxuICAgICAqIFNlZSB0aGUgW1NpdGVzIERyb3Bkb3duIGNvbXBvbmVudF0oc2l0ZXMtZHJvcGRvd24uY29tcG9uZW50Lm1kKVxuICAgICAqIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICAgICAqL1xuICAgIEBJbnB1dCgpXG4gICAgZHJvcGRvd25IaWRlTXlGaWxlczogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgLyoqIEN1c3RvbSBzaXRlIGZvciBzaXRlIGRyb3Bkb3duIHNhbWUgYXMgc2l0ZUxpc3QuIFNlZSB0aGVcbiAgICAgKiBbU2l0ZXMgRHJvcGRvd24gY29tcG9uZW50XShzaXRlcy1kcm9wZG93bi5jb21wb25lbnQubWQpXG4gICAgICogZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gICAgICovXG4gICAgQElucHV0KClcbiAgICBkcm9wZG93blNpdGVMaXN0OiBTaXRlUGFnaW5nID0gbnVsbDtcblxuICAgIC8qKiBDdXN0b20gcm93IGZpbHRlciBmdW5jdGlvbi4gU2VlIHRoZVxuICAgICAqIFtEb2N1bWVudCBMaXN0IGNvbXBvbmVudF0oZG9jdW1lbnQtbGlzdC5jb21wb25lbnQubWQjY3VzdG9tLXJvdy1maWx0ZXIpXG4gICAgICogZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gICAgICovXG4gICAgQElucHV0KClcbiAgICByb3dGaWx0ZXI6IFJvd0ZpbHRlciA9IG51bGw7XG5cbiAgICAvKiogQ3VzdG9tIGltYWdlIHJlc29sdmVyIGZ1bmN0aW9uLiBTZWUgdGhlXG4gICAgICogW0RvY3VtZW50IExpc3QgY29tcG9uZW50XShkb2N1bWVudC1saXN0LmNvbXBvbmVudC5tZCNjdXN0b20tcm93LWZpbHRlcilcbiAgICAgKiBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAgICAgKi9cbiAgICBASW5wdXQoKVxuICAgIGltYWdlUmVzb2x2ZXI6IEltYWdlUmVzb2x2ZXIgPSBudWxsO1xuXG4gICAgLyoqIE51bWJlciBvZiBpdGVtcyBzaG93biBwZXIgcGFnZSBpbiB0aGUgbGlzdC4gKi9cbiAgICBASW5wdXQoKVxuICAgIHBhZ2VTaXplOiBudW1iZXI7XG5cbiAgICAvKiogRnVuY3Rpb24gdXNlZCB0byBkZWNpZGUgaWYgdGhlIHNlbGVjdGVkIG5vZGUgaGFzIHBlcm1pc3Npb24gdG8gYmUgc2VsZWN0ZWQuXG4gICAgICogRGVmYXVsdCB2YWx1ZSBpcyBhIGZ1bmN0aW9uIHRoYXQgYWx3YXlzIHJldHVybnMgdHJ1ZS5cbiAgICAgKi9cbiAgICBASW5wdXQoKVxuICAgIGlzU2VsZWN0aW9uVmFsaWQ6IFZhbGlkYXRpb25GdW5jdGlvbiA9IGRlZmF1bHRWYWxpZGF0aW9uO1xuXG4gICAgLyoqIFRyYW5zZm9ybWF0aW9uIHRvIGJlIHBlcmZvcm1lZCBvbiB0aGUgY2hvc2VuL2ZvbGRlciBub2RlIGJlZm9yZSBidWlsZGluZyB0aGVcbiAgICAgKiBicmVhZGNydW1iIFVJLiBDYW4gYmUgdXNlZnVsIHdoZW4gY3VzdG9tIGZvcm1hdHRpbmcgaXMgbmVlZGVkIGZvciB0aGUgYnJlYWRjcnVtYi5cbiAgICAgKiBZb3UgY2FuIGNoYW5nZSB0aGUgcGF0aCBlbGVtZW50cyBmcm9tIHRoZSBub2RlIHRoYXQgYXJlIHVzZWQgdG8gYnVpbGQgdGhlXG4gICAgICogYnJlYWRjcnVtYiB1c2luZyB0aGlzIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIEBJbnB1dCgpXG4gICAgYnJlYWRjcnVtYlRyYW5zZm9ybTogKG5vZGUpID0+IGFueTtcblxuICAgIC8qKiBFbWl0dGVkIHdoZW4gdGhlIHVzZXIgaGFzIGNob3NlbiBhbiBpdGVtLiAqL1xuICAgIEBPdXRwdXQoKVxuICAgIHNlbGVjdDogRXZlbnRFbWl0dGVyPE1pbmltYWxOb2RlRW50cnlFbnRpdHlbXT4gPSBuZXcgRXZlbnRFbWl0dGVyPE1pbmltYWxOb2RlRW50cnlFbnRpdHlbXT4oKTtcblxuICAgIEBWaWV3Q2hpbGQoJ2RvY3VtZW50TGlzdCcpXG4gICAgZG9jdW1lbnRMaXN0OiBEb2N1bWVudExpc3RDb21wb25lbnQ7XG5cbiAgICBAVmlld0NoaWxkKEhpZ2hsaWdodERpcmVjdGl2ZSlcbiAgICBoaWdobGlnaHRlcjogSGlnaGxpZ2h0RGlyZWN0aXZlO1xuXG4gICAgbm9kZXM6IE5vZGVQYWdpbmcgfCBudWxsID0gbnVsbDtcbiAgICBzaXRlSWQ6IG51bGwgfCBzdHJpbmc7XG4gICAgc2VhcmNoVGVybTogc3RyaW5nID0gJyc7XG4gICAgc2hvd2luZ1NlYXJjaFJlc3VsdHM6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBsb2FkaW5nU2VhcmNoUmVzdWx0czogYm9vbGVhbiA9IGZhbHNlO1xuICAgIGluRGlhbG9nOiBib29sZWFuID0gZmFsc2U7XG4gICAgX2Nob3Nlbk5vZGU6IE1pbmltYWxOb2RlRW50cnlFbnRpdHkgPSBudWxsO1xuICAgIGZvbGRlcklkVG9TaG93OiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgICBwYWdpbmF0aW9uU3RyYXRlZ3k6IFBhZ2luYXRpb25TdHJhdGVneSA9IFBhZ2luYXRpb25TdHJhdGVneS5JbmZpbml0ZTtcbiAgICBwYWdpbmF0aW9uOiBCZWhhdmlvclN1YmplY3Q8UGFnaW5hdGlvbk1vZGVsPjtcblxuICAgIHNraXBDb3VudDogbnVtYmVyID0gMDtcbiAgICBpbmZpbml0ZVNjcm9sbDogYm9vbGVhbiA9IGZhbHNlO1xuICAgIGRlYm91bmNlU2VhcmNoOiBudW1iZXIgPSAyMDA7XG4gICAgc2VhcmNoSW5wdXQ6IEZvcm1Db250cm9sID0gbmV3IEZvcm1Db250cm9sKCk7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGNvbnRlbnROb2RlU2VsZWN0b3JTZXJ2aWNlOiBDb250ZW50Tm9kZVNlbGVjdG9yU2VydmljZSxcbiAgICAgICAgICAgICAgICBwcml2YXRlIGFwaVNlcnZpY2U6IEFsZnJlc2NvQXBpU2VydmljZSxcbiAgICAgICAgICAgICAgICBwcml2YXRlIGN1c3RvbVJlc291cmNlc1NlcnZpY2U6IEN1c3RvbVJlc291cmNlc1NlcnZpY2UsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSBwcmVmZXJlbmNlczogVXNlclByZWZlcmVuY2VzU2VydmljZSkge1xuICAgICAgICB0aGlzLnNlYXJjaElucHV0LnZhbHVlQ2hhbmdlc1xuICAgICAgICAgICAgLnBpcGUoXG4gICAgICAgICAgICAgICAgZGVib3VuY2VUaW1lKHRoaXMuZGVib3VuY2VTZWFyY2gpXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAuc3Vic2NyaWJlKChzZWFyY2hWYWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoKHNlYXJjaFZhbHVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB0aGlzLnBhZ2VTaXplID0gdGhpcy5wcmVmZXJlbmNlcy5wYWdpbmF0aW9uU2l6ZTtcblxuICAgICAgICBsZXQgZGVmYXVsdFBhZ2luYXRpb24gPSA8UGFnaW5hdGlvbk1vZGVsPiB7XG4gICAgICAgICAgICBtYXhJdGVtczogdGhpcy5wYWdlU2l6ZSxcbiAgICAgICAgICAgIHNraXBDb3VudDogMCxcbiAgICAgICAgICAgIHRvdGFsSXRlbXM6IDAsXG4gICAgICAgICAgICBoYXNNb3JlSXRlbXM6IGZhbHNlXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucGFnaW5hdGlvbiA9IG5ldyBCZWhhdmlvclN1YmplY3Q8UGFnaW5hdGlvbk1vZGVsPihkZWZhdWx0UGFnaW5hdGlvbik7XG4gICAgfVxuXG4gICAgc2V0IGNob3Nlbk5vZGUodmFsdWU6IE1pbmltYWxOb2RlRW50cnlFbnRpdHkpIHtcbiAgICAgICAgdGhpcy5fY2hvc2VuTm9kZSA9IHZhbHVlO1xuICAgICAgICBsZXQgdmFsdWVzQXJyYXkgPSBudWxsO1xuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIHZhbHVlc0FycmF5ID0gW3ZhbHVlXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlbGVjdC5uZXh0KHZhbHVlc0FycmF5KTtcbiAgICB9XG5cbiAgICBnZXQgY2hvc2VuTm9kZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Nob3Nlbk5vZGU7XG4gICAgfVxuXG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMuZm9sZGVySWRUb1Nob3cgPSB0aGlzLmN1cnJlbnRGb2xkZXJJZDtcblxuICAgICAgICB0aGlzLmJyZWFkY3J1bWJUcmFuc2Zvcm0gPSB0aGlzLmJyZWFkY3J1bWJUcmFuc2Zvcm0gPyB0aGlzLmJyZWFkY3J1bWJUcmFuc2Zvcm0gOiBudWxsO1xuICAgICAgICB0aGlzLmlzU2VsZWN0aW9uVmFsaWQgPSB0aGlzLmlzU2VsZWN0aW9uVmFsaWQgPyB0aGlzLmlzU2VsZWN0aW9uVmFsaWQgOiBkZWZhdWx0VmFsaWRhdGlvbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBzaXRlIGF0dHJpYnV0ZSBhbmQgc3RhcnRzIGEgbmV3IHNlYXJjaFxuICAgICAqXG4gICAgICogQHBhcmFtIGNob3NlblNpdGUgU2l0ZUVudHJ5IHRvIHNlYXJjaCB3aXRoaW5cbiAgICAgKi9cbiAgICBzaXRlQ2hhbmdlZChjaG9zZW5TaXRlOiBTaXRlRW50cnkpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zaXRlSWQgPSBjaG9zZW5TaXRlLmVudHJ5Lmd1aWQ7XG4gICAgICAgIHRoaXMudXBkYXRlUmVzdWx0cygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIHNlYXJjaFRlcm0gYXR0cmlidXRlIGFuZCBzdGFydHMgYSBuZXcgc2VhcmNoXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2VhcmNoVGVybSBzdHJpbmcgdmFsdWUgdG8gc2VhcmNoIGFnYWluc3RcbiAgICAgKi9cbiAgICBzZWFyY2goc2VhcmNoVGVybTogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2VhcmNoVGVybSA9IHNlYXJjaFRlcm07XG4gICAgICAgIHRoaXMudXBkYXRlUmVzdWx0cygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGFjdHVhbGx5IHNlbGVjdGVkfGVudGVyZWQgZm9sZGVyIG5vZGUgb3IgbnVsbCBpbiBjYXNlIG9mIHNlYXJjaGluZyBmb3IgdGhlIGJyZWFkY3J1bWJcbiAgICAgKi9cbiAgICBnZXQgYnJlYWRjcnVtYkZvbGRlck5vZGUoKTogTWluaW1hbE5vZGVFbnRyeUVudGl0eSB8IG51bGwge1xuICAgICAgICBsZXQgZm9sZGVyTm9kZTogTWluaW1hbE5vZGVFbnRyeUVudGl0eTtcblxuICAgICAgICBpZiAodGhpcy5zaG93aW5nU2VhcmNoUmVzdWx0cyAmJiB0aGlzLmNob3Nlbk5vZGUpIHtcbiAgICAgICAgICAgIGZvbGRlck5vZGUgPSB0aGlzLmNob3Nlbk5vZGU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb2xkZXJOb2RlID0gdGhpcy5kb2N1bWVudExpc3QuZm9sZGVyTm9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmb2xkZXJOb2RlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsZWFyIHRoZSBzZWFyY2ggaW5wdXQgYW5kIHJlc2V0IHRvIGxhc3QgZm9sZGVyIG5vZGUgaW4gd2hpY2ggc2VhcmNoIHdhcyBwZXJmb3JtZWRcbiAgICAgKi9cbiAgICBjbGVhcigpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jbGVhclNlYXJjaCgpO1xuICAgICAgICB0aGlzLmZvbGRlcklkVG9TaG93ID0gdGhpcy5zaXRlSWQgfHwgdGhpcy5jdXJyZW50Rm9sZGVySWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xlYXIgdGhlIHNlYXJjaCBpbnB1dCBhbmQgc2VhcmNoIHJlbGF0ZWQgZGF0YVxuICAgICAqL1xuICAgIGNsZWFyU2VhcmNoKCkge1xuICAgICAgICB0aGlzLnNlYXJjaFRlcm0gPSAnJztcbiAgICAgICAgdGhpcy5ub2RlcyA9IG51bGw7XG4gICAgICAgIHRoaXMuc2tpcENvdW50ID0gMDtcbiAgICAgICAgdGhpcy5jaG9zZW5Ob2RlID0gbnVsbDtcbiAgICAgICAgdGhpcy5zaG93aW5nU2VhcmNoUmVzdWx0cyA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgcmVzdWx0IGxpc3QgZGVwZW5kaW5nIG9uIHRoZSBjcml0ZXJpYXNcbiAgICAgKi9cbiAgICBwcml2YXRlIHVwZGF0ZVJlc3VsdHMoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLnNlYXJjaFRlcm0ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFyKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0TmV3U2VhcmNoKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2FkIHRoZSBmaXJzdCBwYWdlIG9mIGEgbmV3IHNlYXJjaCByZXN1bHRcbiAgICAgKi9cbiAgICBwcml2YXRlIHN0YXJ0TmV3U2VhcmNoKCk6IHZvaWQge1xuICAgICAgICB0aGlzLm5vZGVzID0gbnVsbDtcbiAgICAgICAgdGhpcy5za2lwQ291bnQgPSAwO1xuICAgICAgICB0aGlzLmNob3Nlbk5vZGUgPSBudWxsO1xuICAgICAgICB0aGlzLmZvbGRlcklkVG9TaG93ID0gbnVsbDtcbiAgICAgICAgdGhpcy5xdWVyeVNlYXJjaCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvYWRzIHRoZSBuZXh0IGJhdGNoIG9mIHNlYXJjaCByZXN1bHRzXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZXZlbnQgUGFnaW5hdGlvbiBvYmplY3RcbiAgICAgKi9cbiAgICB1cGRhdGVQYWdpbmF0aW9uKHBhZ2luYXRpb246IFBhZ2luYXRpb24pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5pbmZpbml0ZVNjcm9sbCA9IHRydWU7XG4gICAgICAgIHRoaXMuc2tpcENvdW50ID0gcGFnaW5hdGlvbi5za2lwQ291bnQ7XG5cbiAgICAgICAgaWYgKHRoaXMuc2VhcmNoVGVybS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnF1ZXJ5U2VhcmNoKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtIHRoZSBjYWxsIHRvIHNlYXJjaFNlcnZpY2Ugd2l0aCB0aGUgcHJvcGVyIHBhcmFtZXRlcnNcbiAgICAgKi9cbiAgICBwcml2YXRlIHF1ZXJ5U2VhcmNoKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmxvYWRpbmdTZWFyY2hSZXN1bHRzID0gdHJ1ZTtcblxuICAgICAgICBpZiAodGhpcy5jdXN0b21SZXNvdXJjZXNTZXJ2aWNlLmhhc0NvcnJlc3BvbmRpbmdOb2RlSWRzKHRoaXMuc2l0ZUlkKSkge1xuICAgICAgICAgICAgdGhpcy5jdXN0b21SZXNvdXJjZXNTZXJ2aWNlLmdldENvcnJlc3BvbmRpbmdOb2RlSWRzKHRoaXMuc2l0ZUlkKVxuICAgICAgICAgICAgICAgIC5zdWJzY3JpYmUobm9kZUlkcyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnROb2RlU2VsZWN0b3JTZXJ2aWNlLnNlYXJjaCh0aGlzLnNlYXJjaFRlcm0sIHRoaXMuc2l0ZUlkLCB0aGlzLnNraXBDb3VudCwgdGhpcy5wYWdlU2l6ZSwgbm9kZUlkcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3Vic2NyaWJlKHRoaXMuc2hvd1NlYXJjaFJlc3VsdHMuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd1NlYXJjaFJlc3VsdHMoeyBsaXN0OiB7IGVudHJpZXM6IFtdIH0gfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jb250ZW50Tm9kZVNlbGVjdG9yU2VydmljZS5zZWFyY2godGhpcy5zZWFyY2hUZXJtLCB0aGlzLnNpdGVJZCwgdGhpcy5za2lwQ291bnQsIHRoaXMucGFnZVNpemUpXG4gICAgICAgICAgICAgICAgLnN1YnNjcmliZSh0aGlzLnNob3dTZWFyY2hSZXN1bHRzLmJpbmQodGhpcykpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2hvdyB0aGUgcmVzdWx0cyBvZiB0aGUgc2VhcmNoXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcmVzdWx0cyBTZWFyY2ggcmVzdWx0c1xuICAgICAqL1xuICAgIHByaXZhdGUgc2hvd1NlYXJjaFJlc3VsdHMobm9kZVBhZ2luZzogTm9kZVBhZ2luZyk6IHZvaWQge1xuICAgICAgICB0aGlzLnNob3dpbmdTZWFyY2hSZXN1bHRzID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5sb2FkaW5nU2VhcmNoUmVzdWx0cyA9IGZhbHNlO1xuXG4gICAgICAgIC8vIERvY3VtZW50bGlzdCBoYWNrLCBzaW5jZSBkYXRhIGRpc3BsYXlpbmcgZm9yIHByZWxvYWRlZCBub2RlcyBpcyBhIGxpdHRsZSBiaXQgbWVzc3kgdGhlcmVcbiAgICAgICAgaWYgKCF0aGlzLm5vZGVzKSB7XG4gICAgICAgICAgICB0aGlzLm5vZGVzID0gbm9kZVBhZ2luZztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRMaXN0LmRhdGEubG9hZFBhZ2Uobm9kZVBhZ2luZywgdHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnBhZ2luYXRpb24ubmV4dChub2RlUGFnaW5nLmxpc3QucGFnaW5hdGlvbik7XG4gICAgICAgIHRoaXMuaGlnaGxpZ2h0KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGlnaHRsaWdodCB0aGUgYWN0dWFsIHNlYXJjaHRlcm0gaW4gdGhlIG5leHQgZnJhbWVcbiAgICAgKi9cbiAgICBoaWdobGlnaHQoKTogdm9pZCB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5oaWdobGlnaHRlci5oaWdobGlnaHQodGhpcy5zZWFyY2hUZXJtKTtcbiAgICAgICAgfSwgMCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyBzaG93aW5nU2VhcmNoUmVzdWx0cyBzdGF0ZSB0byBiZSBhYmxlIHRvIGRpZmZlcmVudGlhdGUgYmV0d2VlbiBzZWFyY2ggcmVzdWx0cyBvciBmb2xkZXIgcmVzdWx0c1xuICAgICAqL1xuICAgIG9uRm9sZGVyQ2hhbmdlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnNob3dpbmdTZWFyY2hSZXN1bHRzID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaW5maW5pdGVTY3JvbGwgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jbGVhclNlYXJjaCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEF0dGVtcHRzIHRvIHNldCB0aGUgY3VycmVudGx5IGxvYWRlZCBub2RlXG4gICAgICovXG4gICAgb25Gb2xkZXJMb2FkZWQobm9kZVBhZ2luZzogTm9kZVBhZ2luZyk6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMuc2hvd2luZ1NlYXJjaFJlc3VsdHMpIHtcbiAgICAgICAgICAgIHRoaXMuYXR0ZW1wdE5vZGVTZWxlY3Rpb24odGhpcy5kb2N1bWVudExpc3QuZm9sZGVyTm9kZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgYnJlYWRjcnVtYiBoYXMgdG8gYmUgc2hvd24gb3Igbm90XG4gICAgICovXG4gICAgc2hvd0JyZWFkY3J1bWJzKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMuc2hvd2luZ1NlYXJjaFJlc3VsdHMgfHwgdGhpcy5jaG9zZW5Ob2RlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvYWRzIHRoZSBuZXh0IGJhdGNoIG9mIHNlYXJjaCByZXN1bHRzXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZXZlbnQgUGFnaW5hdGlvbiBvYmplY3RcbiAgICAgKi9cbiAgICBnZXROZXh0UGFnZU9mU2VhcmNoKGV2ZW50OiBQYWdpbmF0aW9uKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaW5maW5pdGVTY3JvbGwgPSB0cnVlO1xuICAgICAgICB0aGlzLnNraXBDb3VudCA9IGV2ZW50LnNraXBDb3VudDtcblxuICAgICAgICBpZiAodGhpcy5zZWFyY2hUZXJtLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMucXVlcnlTZWFyY2goKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNlbGVjdHMgbm9kZSBhcyBjaG9zZW4gaWYgaXQgaGFzIHRoZSByaWdodCBwZXJtaXNzaW9uLCBjbGVhcnMgdGhlIHNlbGVjdGlvbiBvdGhlcndpc2VcbiAgICAgKlxuICAgICAqIEBwYXJhbSBlbnRyeVxuICAgICAqL1xuICAgIHByaXZhdGUgYXR0ZW1wdE5vZGVTZWxlY3Rpb24oZW50cnk6IE1pbmltYWxOb2RlRW50cnlFbnRpdHkpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuaXNTZWxlY3Rpb25WYWxpZChlbnRyeSkpIHtcbiAgICAgICAgICAgIHRoaXMuY2hvc2VuTm9kZSA9IGVudHJ5O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZXNldENob3Nlbk5vZGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsZWFycyB0aGUgY2hvc2VuIG5vZGVcbiAgICAgKi9cbiAgICByZXNldENob3Nlbk5vZGUoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY2hvc2VuTm9kZSA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW52b2tlZCB3aGVuIHVzZXIgc2VsZWN0cyBhIG5vZGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSBldmVudCBDdXN0b21FdmVudCBmb3Igbm9kZS1zZWxlY3RcbiAgICAgKi9cbiAgICBvbk5vZGVTZWxlY3QoZXZlbnQ6IGFueSk6IHZvaWQge1xuICAgICAgICB0aGlzLmF0dGVtcHROb2RlU2VsZWN0aW9uKGV2ZW50LmRldGFpbC5ub2RlLmVudHJ5KTtcbiAgICB9XG5cbiAgICBvbk5vZGVEb3VibGVDbGljayhlOiBDdXN0b21FdmVudCkge1xuICAgICAgICBjb25zdCBub2RlOiBhbnkgPSBlLmRldGFpbC5ub2RlLmVudHJ5O1xuXG4gICAgICAgIGlmIChub2RlICYmIG5vZGUuZ3VpZCkge1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBtYXhJdGVtczogdGhpcy5wYWdlU2l6ZSxcbiAgICAgICAgICAgICAgICBza2lwQ291bnQ6IHRoaXMuc2tpcENvdW50LFxuICAgICAgICAgICAgICAgIGluY2x1ZGU6IFsncGF0aCcsICdwcm9wZXJ0aWVzJywgJ2FsbG93YWJsZU9wZXJhdGlvbnMnXVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5hcGlTZXJ2aWNlLm5vZGVzQXBpLmdldE5vZGUobm9kZS5ndWlkLCBvcHRpb25zKVxuICAgICAgICAgICAgICAgIC50aGVuKGRvY3VtZW50TGlicmFyeSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRMaXN0LnBlcmZvcm1DdXN0b21Tb3VyY2VOYXZpZ2F0aW9uKGRvY3VtZW50TGlicmFyeSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEZvcm1zTW9kdWxlLCBSZWFjdGl2ZUZvcm1zTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgTWF0ZXJpYWxNb2R1bGUgfSBmcm9tICcuLi9tYXRlcmlhbC5tb2R1bGUnO1xuXG5pbXBvcnQgeyBDb250ZW50Tm9kZVNlbGVjdG9yUGFuZWxDb21wb25lbnQgfSBmcm9tICcuL2NvbnRlbnQtbm9kZS1zZWxlY3Rvci1wYW5lbC5jb21wb25lbnQnO1xuaW1wb3J0IHsgQ29udGVudE5vZGVTZWxlY3RvckNvbXBvbmVudCB9IGZyb20gJy4vY29udGVudC1ub2RlLXNlbGVjdG9yLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBTaXRlc0Ryb3Bkb3duTW9kdWxlIH0gZnJvbSAnLi4vc2l0ZS1kcm9wZG93bi9zaXRlcy1kcm9wZG93bi5tb2R1bGUnO1xuaW1wb3J0IHsgQnJlYWRjcnVtYk1vZHVsZSB9IGZyb20gJy4uL2JyZWFkY3J1bWIvYnJlYWRjcnVtYi5tb2R1bGUnO1xuaW1wb3J0IHsgQ29yZU1vZHVsZSB9IGZyb20gJ0BhbGZyZXNjby9hZGYtY29yZSc7XG5pbXBvcnQgeyBEb2N1bWVudExpc3RNb2R1bGUgfSBmcm9tICcuLi9kb2N1bWVudC1saXN0L2RvY3VtZW50LWxpc3QubW9kdWxlJztcbmltcG9ydCB7IE5hbWVMb2NhdGlvbkNlbGxDb21wb25lbnQgfSBmcm9tICcuL25hbWUtbG9jYXRpb24tY2VsbC9uYW1lLWxvY2F0aW9uLWNlbGwuY29tcG9uZW50JztcblxuQE5nTW9kdWxlKHtcbiAgICBpbXBvcnRzOiBbXG4gICAgICAgIEZvcm1zTW9kdWxlLFxuICAgICAgICBSZWFjdGl2ZUZvcm1zTW9kdWxlLFxuICAgICAgICBDb3JlTW9kdWxlLmZvckNoaWxkKCksXG4gICAgICAgIENvbW1vbk1vZHVsZSxcbiAgICAgICAgTWF0ZXJpYWxNb2R1bGUsXG4gICAgICAgIFNpdGVzRHJvcGRvd25Nb2R1bGUsXG4gICAgICAgIEJyZWFkY3J1bWJNb2R1bGUsXG4gICAgICAgIERvY3VtZW50TGlzdE1vZHVsZVxuICAgIF0sXG4gICAgZXhwb3J0czogW1xuICAgICAgICBDb250ZW50Tm9kZVNlbGVjdG9yUGFuZWxDb21wb25lbnQsXG4gICAgICAgIE5hbWVMb2NhdGlvbkNlbGxDb21wb25lbnQsXG4gICAgICAgIENvbnRlbnROb2RlU2VsZWN0b3JDb21wb25lbnRcbiAgICBdLFxuICAgIGVudHJ5Q29tcG9uZW50czogW1xuICAgICAgICBDb250ZW50Tm9kZVNlbGVjdG9yUGFuZWxDb21wb25lbnQsXG4gICAgICAgIENvbnRlbnROb2RlU2VsZWN0b3JDb21wb25lbnRcbiAgICBdLFxuICAgIGRlY2xhcmF0aW9uczogW1xuICAgICAgICBDb250ZW50Tm9kZVNlbGVjdG9yUGFuZWxDb21wb25lbnQsXG4gICAgICAgIE5hbWVMb2NhdGlvbkNlbGxDb21wb25lbnQsXG4gICAgICAgIENvbnRlbnROb2RlU2VsZWN0b3JDb21wb25lbnRcbiAgICBdXG59KVxuZXhwb3J0IGNsYXNzIENvbnRlbnROb2RlU2VsZWN0b3JNb2R1bGUge31cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEZvcm1Db250cm9sIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuXG5jb25zdCBJMThOX0VSUk9SU19QQVRIID0gJ0NPUkUuRk9MREVSX0RJQUxPRy5GT0xERVJfTkFNRS5FUlJPUlMnO1xuXG5leHBvcnQgZnVuY3Rpb24gZm9yYmlkU3BlY2lhbENoYXJhY3RlcnMoeyB2YWx1ZSB9OiBGb3JtQ29udHJvbCkge1xuICAgIGNvbnN0IHNwZWNpYWxDaGFyYWN0ZXJzOiBSZWdFeHAgPSAvKFtcXCpcXFwiXFw8XFw+XFxcXFxcL1xcP1xcOlxcfF0pLztcbiAgICBjb25zdCBpc1ZhbGlkOiBib29sZWFuID0gIXNwZWNpYWxDaGFyYWN0ZXJzLnRlc3QodmFsdWUpO1xuXG4gICAgcmV0dXJuIChpc1ZhbGlkKSA/IG51bGwgOiB7XG4gICAgICAgIG1lc3NhZ2U6IGAke0kxOE5fRVJST1JTX1BBVEh9LlNQRUNJQUxfQ0hBUkFDVEVSU2BcbiAgICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9yYmlkRW5kaW5nRG90KHsgdmFsdWUgfTogRm9ybUNvbnRyb2wpIHtcbiAgICBjb25zdCBpc1ZhbGlkOiBib29sZWFuID0gKCh2YWx1ZSB8fCAnJykudHJpbSgpLnNwbGl0KCcnKS5wb3AoKSAhPT0gJy4nKTtcblxuICAgIHJldHVybiBpc1ZhbGlkID8gbnVsbCA6IHtcbiAgICAgICAgbWVzc2FnZTogYCR7STE4Tl9FUlJPUlNfUEFUSH0uRU5ESU5HX0RPVGBcbiAgICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9yYmlkT25seVNwYWNlcyh7IHZhbHVlIH06IEZvcm1Db250cm9sKSB7XG4gICAgY29uc3QgaXNWYWxpZDogYm9vbGVhbiA9ICEhKCh2YWx1ZSB8fCAnJykpLnRyaW0oKTtcblxuICAgIHJldHVybiBpc1ZhbGlkID8gbnVsbCA6IHtcbiAgICAgICAgbWVzc2FnZTogYCR7STE4Tl9FUlJPUlNfUEFUSH0uT05MWV9TUEFDRVNgXG4gICAgfTtcbn1cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcblxuaW1wb3J0IHsgQ29tcG9uZW50LCBJbmplY3QsIE9uSW5pdCwgT3B0aW9uYWwsIEV2ZW50RW1pdHRlciwgT3V0cHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBGb3JtQnVpbGRlciwgRm9ybUdyb3VwLCBWYWxpZGF0b3JzIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgTUFUX0RJQUxPR19EQVRBLCBNYXREaWFsb2dSZWYgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbCc7XG5cbmltcG9ydCB7IE1pbmltYWxOb2RlRW50cnlFbnRpdHkgfSBmcm9tICdhbGZyZXNjby1qcy1hcGknO1xuaW1wb3J0IHsgTm9kZXNBcGlTZXJ2aWNlLCBUcmFuc2xhdGlvblNlcnZpY2UgfSBmcm9tICdAYWxmcmVzY28vYWRmLWNvcmUnO1xuXG5pbXBvcnQgeyBmb3JiaWRFbmRpbmdEb3QsIGZvcmJpZE9ubHlTcGFjZXMsIGZvcmJpZFNwZWNpYWxDaGFyYWN0ZXJzIH0gZnJvbSAnLi9mb2xkZXItbmFtZS52YWxpZGF0b3JzJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdhZGYtZm9sZGVyLWRpYWxvZycsXG4gICAgc3R5bGVVcmxzOiBbJy4vZm9sZGVyLmRpYWxvZy5zY3NzJ10sXG4gICAgdGVtcGxhdGVVcmw6ICcuL2ZvbGRlci5kaWFsb2cuaHRtbCdcbn0pXG5leHBvcnQgY2xhc3MgRm9sZGVyRGlhbG9nQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcblxuICAgIGZvcm06IEZvcm1Hcm91cDtcblxuICAgIGZvbGRlcjogTWluaW1hbE5vZGVFbnRyeUVudGl0eSA9IG51bGw7XG5cbiAgICAvKiogRW1pdHRlZCB3aGVuIHRoZSBlZGl0L2NyZWF0ZSBmb2xkZXIgZ2l2ZSBlcnJvciBmb3IgZXhhbXBsZSBhIGZvbGRlciB3aXRoIHNhbWUgbmFtZSBhbHJlYWR5IGV4aXN0XG4gICAgICovXG4gICAgQE91dHB1dCgpXG4gICAgZXJyb3I6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG5cbiAgICAvKiogRW1pdHRlZCB3aGVuIHRoZSBlZGl0L2NyZWF0ZSBmb2xkZXIgaXMgc3VjY2Vzc2Z1bGx5IGNyZWF0ZWQvbW1vZGlmaWVkXG4gICAgICovXG4gICAgQE91dHB1dCgpXG4gICAgc3VjY2VzczogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPE1pbmltYWxOb2RlRW50cnlFbnRpdHk+KCk7XG5cbiAgICBlZGl0VGl0bGUgPSAnQ09SRS5GT0xERVJfRElBTE9HLkVESVRfRk9MREVSX1RJVExFJztcbiAgICBjcmVhdGVUaXRsZSA9ICdDT1JFLkZPTERFUl9ESUFMT0cuQ1JFQVRFX0ZPTERFUl9USVRMRSc7XG4gICAgbm9kZVR5cGUgPSAnY206Zm9sZGVyJztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGZvcm1CdWlsZGVyOiBGb3JtQnVpbGRlcixcbiAgICAgICAgcHJpdmF0ZSBkaWFsb2c6IE1hdERpYWxvZ1JlZjxGb2xkZXJEaWFsb2dDb21wb25lbnQ+LFxuICAgICAgICBwcml2YXRlIG5vZGVzQXBpOiBOb2Rlc0FwaVNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgdHJhbnNsYXRpb246IFRyYW5zbGF0aW9uU2VydmljZSxcbiAgICAgICAgQE9wdGlvbmFsKClcbiAgICAgICAgQEluamVjdChNQVRfRElBTE9HX0RBVEEpXG4gICAgICAgIHB1YmxpYyBkYXRhOiBhbnlcbiAgICApIHtcbiAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdFRpdGxlID0gZGF0YS5lZGl0VGl0bGUgfHwgdGhpcy5lZGl0VGl0bGU7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVRpdGxlID0gZGF0YS5jcmVhdGVUaXRsZSB8fCB0aGlzLmNyZWF0ZVRpdGxlO1xuICAgICAgICAgICAgdGhpcy5ub2RlVHlwZSA9IGRhdGEubm9kZVR5cGUgfHwgdGhpcy5ub2RlVHlwZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldCBlZGl0aW5nKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gISF0aGlzLmRhdGEuZm9sZGVyO1xuICAgIH1cblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICBjb25zdCB7IGZvbGRlciB9ID0gdGhpcy5kYXRhO1xuICAgICAgICBsZXQgbmFtZSA9ICcnO1xuICAgICAgICBsZXQgZGVzY3JpcHRpb24gPSAnJztcblxuICAgICAgICBpZiAoZm9sZGVyKSB7XG4gICAgICAgICAgICBjb25zdCB7IHByb3BlcnRpZXMgfSA9IGZvbGRlcjtcblxuICAgICAgICAgICAgbmFtZSA9IGZvbGRlci5uYW1lIHx8ICcnO1xuICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBwcm9wZXJ0aWVzID8gcHJvcGVydGllc1snY206ZGVzY3JpcHRpb24nXSA6ICcnO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdmFsaWRhdG9ycyA9IHtcbiAgICAgICAgICAgIG5hbWU6IFtcbiAgICAgICAgICAgICAgICBWYWxpZGF0b3JzLnJlcXVpcmVkLFxuICAgICAgICAgICAgICAgIGZvcmJpZFNwZWNpYWxDaGFyYWN0ZXJzLFxuICAgICAgICAgICAgICAgIGZvcmJpZEVuZGluZ0RvdCxcbiAgICAgICAgICAgICAgICBmb3JiaWRPbmx5U3BhY2VzXG4gICAgICAgICAgICBdXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5mb3JtID0gdGhpcy5mb3JtQnVpbGRlci5ncm91cCh7XG4gICAgICAgICAgICBuYW1lOiBbIG5hbWUsIHZhbGlkYXRvcnMubmFtZSBdLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IFsgZGVzY3JpcHRpb24gXVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXQgbmFtZSgpOiBzdHJpbmcge1xuICAgICAgICBsZXQgeyBuYW1lIH0gPSB0aGlzLmZvcm0udmFsdWU7XG5cbiAgICAgICAgcmV0dXJuIChuYW1lIHx8ICcnKS50cmltKCk7XG4gICAgfVxuXG4gICAgZ2V0IGRlc2NyaXB0aW9uKCk6IHN0cmluZyB7XG4gICAgICAgIGxldCB7IGRlc2NyaXB0aW9uIH0gPSB0aGlzLmZvcm0udmFsdWU7XG5cbiAgICAgICAgcmV0dXJuIChkZXNjcmlwdGlvbiB8fCAnJykudHJpbSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0IHByb3BlcnRpZXMoKTogYW55IHtcbiAgICAgICAgY29uc3QgeyBuYW1lOiB0aXRsZSwgZGVzY3JpcHRpb24gfSA9IHRoaXM7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICdjbTp0aXRsZSc6IHRpdGxlLFxuICAgICAgICAgICAgJ2NtOmRlc2NyaXB0aW9uJzogZGVzY3JpcHRpb25cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZSgpOiBPYnNlcnZhYmxlPE1pbmltYWxOb2RlRW50cnlFbnRpdHk+IHtcbiAgICAgICAgY29uc3QgeyBuYW1lLCBwcm9wZXJ0aWVzLCBub2RlVHlwZSwgbm9kZXNBcGksIGRhdGE6IHsgcGFyZW50Tm9kZUlkfSB9ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIG5vZGVzQXBpLmNyZWF0ZUZvbGRlcihwYXJlbnROb2RlSWQsIHsgbmFtZSwgcHJvcGVydGllcywgbm9kZVR5cGUgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBlZGl0KCk6IE9ic2VydmFibGU8TWluaW1hbE5vZGVFbnRyeUVudGl0eT4ge1xuICAgICAgICBjb25zdCB7IG5hbWUsIHByb3BlcnRpZXMsIG5vZGVzQXBpLCBkYXRhOiB7IGZvbGRlcjogeyBpZDogbm9kZUlkIH19IH0gPSB0aGlzO1xuICAgICAgICByZXR1cm4gbm9kZXNBcGkudXBkYXRlTm9kZShub2RlSWQsIHsgbmFtZSwgcHJvcGVydGllcyB9KTtcbiAgICB9XG5cbiAgICBzdWJtaXQoKSB7XG4gICAgICAgIGNvbnN0IHsgZm9ybSwgZGlhbG9nLCBlZGl0aW5nIH0gPSB0aGlzO1xuXG4gICAgICAgIGlmICghZm9ybS52YWxpZCkgeyByZXR1cm47IH1cblxuICAgICAgICAoZWRpdGluZyA/IHRoaXMuZWRpdCgpIDogdGhpcy5jcmVhdGUoKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoXG4gICAgICAgICAgICAgICAgKGZvbGRlcjogTWluaW1hbE5vZGVFbnRyeUVudGl0eSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN1Y2Nlc3MuZW1pdChmb2xkZXIpO1xuICAgICAgICAgICAgICAgICAgICBkaWFsb2cuY2xvc2UoZm9sZGVyKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIChlcnJvcikgPT4gdGhpcy5oYW5kbGVFcnJvcihlcnJvcilcbiAgICAgICAgICAgICk7XG4gICAgfVxuXG4gICAgaGFuZGxlRXJyb3IoZXJyb3I6IGFueSk6IGFueSB7XG4gICAgICAgIGxldCBlcnJvck1lc3NhZ2UgPSAnQ09SRS5NRVNTQUdFUy5FUlJPUlMuR0VORVJJQyc7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgZXJyb3I6IHsgc3RhdHVzQ29kZSB9IH0gPSBKU09OLnBhcnNlKGVycm9yLm1lc3NhZ2UpO1xuXG4gICAgICAgICAgICBpZiAoc3RhdHVzQ29kZSA9PT0gNDA5KSB7XG4gICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlID0gJ0NPUkUuTUVTU0FHRVMuRVJST1JTLkVYSVNURU5UX0ZPTERFUic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycikgeyAvKiBEbyBub3RoaW5nLCBrZWVwIHRoZSBvcmlnaW5hbCBtZXNzYWdlICovIH1cblxuICAgICAgICB0aGlzLmVycm9yLmVtaXQodGhpcy50cmFuc2xhdGlvbi5pbnN0YW50KGVycm9yTWVzc2FnZSkpO1xuXG4gICAgICAgIHJldHVybiBlcnJvcjtcbiAgICB9XG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEZvcm1zTW9kdWxlLCBSZWFjdGl2ZUZvcm1zTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgQ29yZU1vZHVsZSB9IGZyb20gJ0BhbGZyZXNjby9hZGYtY29yZSc7XG5cbmltcG9ydCB7IE1hdGVyaWFsTW9kdWxlIH0gZnJvbSAnLi4vbWF0ZXJpYWwubW9kdWxlJztcbmltcG9ydCB7IERvd25sb2FkWmlwRGlhbG9nQ29tcG9uZW50IH0gZnJvbSAnLi9kb3dubG9hZC16aXAuZGlhbG9nJztcbmltcG9ydCB7IEZvbGRlckRpYWxvZ0NvbXBvbmVudCB9IGZyb20gJy4vZm9sZGVyLmRpYWxvZyc7XG5pbXBvcnQgeyBOb2RlTG9ja0RpYWxvZ0NvbXBvbmVudCB9IGZyb20gJy4vbm9kZS1sb2NrLmRpYWxvZyc7XG5pbXBvcnQgeyBDb25maXJtRGlhbG9nQ29tcG9uZW50IH0gZnJvbSAnLi9jb25maXJtLmRpYWxvZyc7XG5pbXBvcnQgeyBNYXREYXRldGltZXBpY2tlck1vZHVsZSB9IGZyb20gJ0BtYXQtZGF0ZXRpbWVwaWNrZXIvY29yZSc7XG5pbXBvcnQgeyBNYXRNb21lbnREYXRldGltZU1vZHVsZSB9IGZyb20gJ0BtYXQtZGF0ZXRpbWVwaWNrZXIvbW9tZW50JztcblxuQE5nTW9kdWxlKHtcbiAgICBpbXBvcnRzOiBbXG4gICAgICAgIENvbW1vbk1vZHVsZSxcbiAgICAgICAgTWF0ZXJpYWxNb2R1bGUsXG4gICAgICAgIENvcmVNb2R1bGUuZm9yQ2hpbGQoKSxcbiAgICAgICAgRm9ybXNNb2R1bGUsXG4gICAgICAgIFJlYWN0aXZlRm9ybXNNb2R1bGUsXG4gICAgICAgIE1hdE1vbWVudERhdGV0aW1lTW9kdWxlLFxuICAgICAgICBNYXREYXRldGltZXBpY2tlck1vZHVsZVxuICAgIF0sXG4gICAgZGVjbGFyYXRpb25zOiBbXG4gICAgICAgIERvd25sb2FkWmlwRGlhbG9nQ29tcG9uZW50LFxuICAgICAgICBGb2xkZXJEaWFsb2dDb21wb25lbnQsXG4gICAgICAgIE5vZGVMb2NrRGlhbG9nQ29tcG9uZW50LFxuICAgICAgICBDb25maXJtRGlhbG9nQ29tcG9uZW50XG4gICAgXSxcbiAgICBleHBvcnRzOiBbXG4gICAgICAgIERvd25sb2FkWmlwRGlhbG9nQ29tcG9uZW50LFxuICAgICAgICBGb2xkZXJEaWFsb2dDb21wb25lbnQsXG4gICAgICAgIE5vZGVMb2NrRGlhbG9nQ29tcG9uZW50LFxuICAgICAgICBDb25maXJtRGlhbG9nQ29tcG9uZW50XG4gICAgXSxcbiAgICBlbnRyeUNvbXBvbmVudHM6IFtcbiAgICAgICAgRG93bmxvYWRaaXBEaWFsb2dDb21wb25lbnQsXG4gICAgICAgIEZvbGRlckRpYWxvZ0NvbXBvbmVudCxcbiAgICAgICAgTm9kZUxvY2tEaWFsb2dDb21wb25lbnQsXG4gICAgICAgIENvbmZpcm1EaWFsb2dDb21wb25lbnRcbiAgICBdXG59KVxuZXhwb3J0IGNsYXNzIERpYWxvZ01vZHVsZSB7fVxuIiwiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyogdHNsaW50OmRpc2FibGU6bm8taW5wdXQtcmVuYW1lICAqL1xuXG5pbXBvcnQgeyBEaXJlY3RpdmUsIEhvc3RMaXN0ZW5lciwgSW5wdXQsIE91dHB1dCwgRXZlbnRFbWl0dGVyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBNYXREaWFsb2csIE1hdERpYWxvZ0NvbmZpZyB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsJztcbmltcG9ydCB7IE1pbmltYWxOb2RlRW50cnlFbnRpdHkgfSBmcm9tICdhbGZyZXNjby1qcy1hcGknO1xuaW1wb3J0IHsgRm9sZGVyRGlhbG9nQ29tcG9uZW50IH0gZnJvbSAnLi4vZGlhbG9ncy9mb2xkZXIuZGlhbG9nJztcbmltcG9ydCB7IENvbnRlbnRTZXJ2aWNlIH0gZnJvbSAnQGFsZnJlc2NvL2FkZi1jb3JlJztcblxuY29uc3QgREVGQVVMVF9GT0xERVJfUEFSRU5UX0lEID0gJy1teS0nO1xuXG5ARGlyZWN0aXZlKHtcbiAgICBzZWxlY3RvcjogJ1thZGYtY3JlYXRlLWZvbGRlcl0nXG59KVxuZXhwb3J0IGNsYXNzIEZvbGRlckNyZWF0ZURpcmVjdGl2ZSB7XG4gICAgc3RhdGljIERJQUxPR19XSURUSDogbnVtYmVyID0gNDAwO1xuXG4gICAgLyoqIFBhcmVudCBmb2xkZXIgd2hlcmUgdGhlIG5ldyBmb2xkZXIgd2lsbCBiZSBsb2NhdGVkIGFmdGVyIGNyZWF0aW9uLiAqL1xuICAgIEBJbnB1dCgnYWRmLWNyZWF0ZS1mb2xkZXInKVxuICAgIHBhcmVudE5vZGVJZDogc3RyaW5nID0gREVGQVVMVF9GT0xERVJfUEFSRU5UX0lEO1xuXG4gICAgLyoqIFRpdGxlIG9mIGZvbGRlciBjcmVhdGlvbiBkaWFsb2cuICovXG4gICAgQElucHV0KClcbiAgICB0aXRsZTogc3RyaW5nID0gbnVsbDtcblxuICAgIC8qKiBUeXBlIG9mIG5vZGUgdG8gY3JlYXRlLiAqL1xuICAgIEBJbnB1dCgpXG4gICAgbm9kZVR5cGUgPSAnY206Zm9sZGVyJztcblxuICAgIC8qKiBFbWl0dGVkIHdoZW4gYW4gZXJyb3Igb2NjdXJzIChlZywgYSBmb2xkZXIgd2l0aCBzYW1lIG5hbWUgYWxyZWFkeSBleGlzdHMpLiAqL1xuICAgIEBPdXRwdXQoKVxuICAgIGVycm9yOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gICAgLyoqIEVtaXR0ZWQgd2hlbiB0aGUgZm9sZGVyIGlzIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5LiAqL1xuICAgIEBPdXRwdXQoKVxuICAgIHN1Y2Nlc3M6IEV2ZW50RW1pdHRlcjxNaW5pbWFsTm9kZUVudHJ5RW50aXR5PiA9IG5ldyBFdmVudEVtaXR0ZXI8TWluaW1hbE5vZGVFbnRyeUVudGl0eT4oKTtcblxuICAgIEBIb3N0TGlzdGVuZXIoJ2NsaWNrJywgWyAnJGV2ZW50JyBdKVxuICAgIG9uQ2xpY2soZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5vcGVuRGlhbG9nKCk7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBkaWFsb2dSZWY6IE1hdERpYWxvZyxcbiAgICAgICAgcHVibGljIGNvbnRlbnQ6IENvbnRlbnRTZXJ2aWNlXG4gICAgKSB7fVxuXG4gICAgcHJpdmF0ZSBnZXQgZGlhbG9nQ29uZmlnKCk6IE1hdERpYWxvZ0NvbmZpZyB7XG4gICAgICAgIGNvbnN0IHsgRElBTE9HX1dJRFRIOiB3aWR0aCB9ID0gRm9sZGVyQ3JlYXRlRGlyZWN0aXZlO1xuICAgICAgICBjb25zdCB7IHBhcmVudE5vZGVJZCwgdGl0bGU6IGNyZWF0ZVRpdGxlLCBub2RlVHlwZSB9ID0gdGhpcztcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGF0YTogeyBwYXJlbnROb2RlSWQsIGNyZWF0ZVRpdGxlLCBub2RlVHlwZSB9LFxuICAgICAgICAgICAgd2lkdGg6IGAke3dpZHRofXB4YFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgb3BlbkRpYWxvZygpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBkaWFsb2dSZWYsIGRpYWxvZ0NvbmZpZywgY29udGVudCB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgZGlhbG9nSW5zdGFuY2UgPSBkaWFsb2dSZWYub3BlbihGb2xkZXJEaWFsb2dDb21wb25lbnQsIGRpYWxvZ0NvbmZpZyk7XG5cbiAgICAgICAgZGlhbG9nSW5zdGFuY2UuY29tcG9uZW50SW5zdGFuY2UuZXJyb3Iuc3Vic2NyaWJlKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5lcnJvci5lbWl0KGVycm9yKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGlhbG9nSW5zdGFuY2UuY29tcG9uZW50SW5zdGFuY2Uuc3VjY2Vzcy5zdWJzY3JpYmUoKG5vZGU6IE1pbmltYWxOb2RlRW50cnlFbnRpdHkpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3VjY2Vzcy5lbWl0KG5vZGUpO1xuICAgICAgICB9KTtcblxuICAgICAgICBkaWFsb2dJbnN0YW5jZS5hZnRlckNsb3NlZCgpLnN1YnNjcmliZSgobm9kZTogTWluaW1hbE5vZGVFbnRyeUVudGl0eSkgPT4ge1xuICAgICAgICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgICAgICAgICBjb250ZW50LmZvbGRlckNyZWF0ZS5uZXh0KG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKiB0c2xpbnQ6ZGlzYWJsZTpuby1pbnB1dC1yZW5hbWUgICovXG5cbmltcG9ydCB7IERpcmVjdGl2ZSwgRWxlbWVudFJlZiwgSG9zdExpc3RlbmVyLCBJbnB1dCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE1hdERpYWxvZywgTWF0RGlhbG9nQ29uZmlnIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwnO1xuXG5pbXBvcnQgeyBNaW5pbWFsTm9kZUVudHJ5RW50aXR5IH0gZnJvbSAnYWxmcmVzY28tanMtYXBpJztcblxuaW1wb3J0IHsgRm9sZGVyRGlhbG9nQ29tcG9uZW50IH0gZnJvbSAnLi4vZGlhbG9ncy9mb2xkZXIuZGlhbG9nJztcbmltcG9ydCB7IENvbnRlbnRTZXJ2aWNlIH0gZnJvbSAnQGFsZnJlc2NvL2FkZi1jb3JlJztcblxuQERpcmVjdGl2ZSh7XG4gICAgc2VsZWN0b3I6ICdbYWRmLWVkaXQtZm9sZGVyXSdcbn0pXG5leHBvcnQgY2xhc3MgRm9sZGVyRWRpdERpcmVjdGl2ZSB7XG4gICAgc3RhdGljIERJQUxPR19XSURUSDogbnVtYmVyID0gNDAwO1xuXG4gICAgLyoqIEZvbGRlciBub2RlIHRvIGVkaXQuICovXG4gICAgQElucHV0KCdhZGYtZWRpdC1mb2xkZXInKVxuICAgIGZvbGRlcjogTWluaW1hbE5vZGVFbnRyeUVudGl0eTtcblxuICAgIC8qKiBFbWl0dGVkIHdoZW4gYW4gZXJyb3Igb2NjdXJzIChlZywgYSBmb2xkZXIgd2l0aCBzYW1lIG5hbWUgYWxyZWFkeSBleGlzdHMpLiAqL1xuICAgIEBPdXRwdXQoKVxuICAgIGVycm9yOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gICAgLyoqIFRpdGxlIG9mIGZvbGRlciBlZGl0IGRpYWxvZy4gKi9cbiAgICBASW5wdXQoKVxuICAgIHRpdGxlOiBzdHJpbmcgPSBudWxsO1xuXG4gICAgLyoqIEVtaXR0ZWQgd2hlbiB0aGUgZm9sZGVyIGhhcyBiZWVuIGVkaXRlZCBzdWNjZXNzZnVsbHkuICovXG4gICAgQE91dHB1dCgpXG4gICAgc3VjY2VzczogRXZlbnRFbWl0dGVyPE1pbmltYWxOb2RlRW50cnlFbnRpdHk+ID0gbmV3IEV2ZW50RW1pdHRlcjxNaW5pbWFsTm9kZUVudHJ5RW50aXR5PigpO1xuXG4gICAgQEhvc3RMaXN0ZW5lcignY2xpY2snLCBbICckZXZlbnQnIF0pXG4gICAgb25DbGljayhldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpZiAodGhpcy5mb2xkZXIpIHtcbiAgICAgICAgICAgIHRoaXMub3BlbkRpYWxvZygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBkaWFsb2dSZWY6IE1hdERpYWxvZyxcbiAgICAgICAgcHVibGljIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYsXG4gICAgICAgIHB1YmxpYyBjb250ZW50OiBDb250ZW50U2VydmljZVxuICAgICkge31cblxuICAgIHByaXZhdGUgZ2V0IGRpYWxvZ0NvbmZpZygpOiBNYXREaWFsb2dDb25maWcge1xuICAgICAgICBjb25zdCB7IERJQUxPR19XSURUSDogd2lkdGggfSA9IEZvbGRlckVkaXREaXJlY3RpdmU7XG4gICAgICAgIGNvbnN0IHsgZm9sZGVyIH0gPSB0aGlzO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgZm9sZGVyLFxuICAgICAgICAgICAgICAgIGVkaXRUaXRsZTogdGhpcy50aXRsZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHdpZHRoOiBgJHt3aWR0aH1weGBcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9wZW5EaWFsb2coKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgZGlhbG9nUmVmLCBkaWFsb2dDb25maWcsIGNvbnRlbnQgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGRpYWxvZ0luc3RhbmNlID0gZGlhbG9nUmVmLm9wZW4oRm9sZGVyRGlhbG9nQ29tcG9uZW50LCBkaWFsb2dDb25maWcpO1xuXG4gICAgICAgIGRpYWxvZ0luc3RhbmNlLmNvbXBvbmVudEluc3RhbmNlLmVycm9yLnN1YnNjcmliZSgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3IuZW1pdChlcnJvcik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRpYWxvZ0luc3RhbmNlLmNvbXBvbmVudEluc3RhbmNlLnN1Y2Nlc3Muc3Vic2NyaWJlKChub2RlOiBNaW5pbWFsTm9kZUVudHJ5RW50aXR5KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnN1Y2Nlc3MuZW1pdChub2RlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGlhbG9nSW5zdGFuY2UuYWZ0ZXJDbG9zZWQoKS5zdWJzY3JpYmUoKG5vZGU6IE1pbmltYWxOb2RlRW50cnlFbnRpdHkpID0+IHtcbiAgICAgICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgICAgICAgY29udGVudC5mb2xkZXJFZGl0Lm5leHQobm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTWF0ZXJpYWxNb2R1bGUgfSBmcm9tICcuLi9tYXRlcmlhbC5tb2R1bGUnO1xuXG5pbXBvcnQgeyBGb2xkZXJDcmVhdGVEaXJlY3RpdmUgfSBmcm9tICcuL2ZvbGRlci1jcmVhdGUuZGlyZWN0aXZlJztcbmltcG9ydCB7IEZvbGRlckVkaXREaXJlY3RpdmUgfSBmcm9tICcuL2ZvbGRlci1lZGl0LmRpcmVjdGl2ZSc7XG5cbkBOZ01vZHVsZSh7XG4gICAgaW1wb3J0czogW1xuICAgICAgICBDb21tb25Nb2R1bGUsXG4gICAgICAgIE1hdGVyaWFsTW9kdWxlXG4gICAgXSxcbiAgICBkZWNsYXJhdGlvbnM6IFtcbiAgICAgICAgRm9sZGVyQ3JlYXRlRGlyZWN0aXZlLFxuICAgICAgICBGb2xkZXJFZGl0RGlyZWN0aXZlXG4gICAgXSxcbiAgICBleHBvcnRzOiBbXG4gICAgICAgIEZvbGRlckNyZWF0ZURpcmVjdGl2ZSxcbiAgICAgICAgRm9sZGVyRWRpdERpcmVjdGl2ZVxuICAgIF1cbn0pXG5leHBvcnQgY2xhc3MgRm9sZGVyRGlyZWN0aXZlTW9kdWxlIHt9XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBWaWV3RW5jYXBzdWxhdGlvbiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTWluaW1hbE5vZGVFbnRyeUVudGl0eSB9IGZyb20gJ2FsZnJlc2NvLWpzLWFwaSc7XG5pbXBvcnQgeyBDb250ZW50U2VydmljZSwgUGVybWlzc2lvbnNFbnVtIH0gZnJvbSAnQGFsZnJlc2NvL2FkZi1jb3JlJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdhZGYtY29udGVudC1tZXRhZGF0YS1jYXJkJyxcbiAgICB0ZW1wbGF0ZVVybDogJy4vY29udGVudC1tZXRhZGF0YS1jYXJkLmNvbXBvbmVudC5odG1sJyxcbiAgICBzdHlsZVVybHM6IFsnLi9jb250ZW50LW1ldGFkYXRhLWNhcmQuY29tcG9uZW50LnNjc3MnXSxcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxuICAgIGhvc3Q6IHsgJ2NsYXNzJzogJ2FkZi1jb250ZW50LW1ldGFkYXRhLWNhcmQnIH1cbn0pXG5leHBvcnQgY2xhc3MgQ29udGVudE1ldGFkYXRhQ2FyZENvbXBvbmVudCB7XG4gICAgLyoqIChyZXF1aXJlZCkgVGhlIG5vZGUgZW50aXR5IHRvIGZldGNoIG1ldGFkYXRhIGFib3V0ICovXG4gICAgQElucHV0KClcbiAgICBub2RlOiBNaW5pbWFsTm9kZUVudHJ5RW50aXR5O1xuXG4gICAgLyoqIChvcHRpb25hbCkgVGhpcyBmbGFnIGRpc3BsYXlzL2hpZGVzIGVtcHR5IG1ldGFkYXRhXG4gICAgICogZmllbGRzLlxuICAgICAqL1xuICAgIEBJbnB1dCgpXG4gICAgZGlzcGxheUVtcHR5OiBib29sZWFuID0gZmFsc2U7XG5cbiAgICAvKiogKHJlcXVpcmVkKSBOYW1lIG9mIHRoZSBtZXRhZGF0YSBwcmVzZXQsIHdoaWNoIGRlZmluZXMgYXNwZWN0c1xuICAgICAqIGFuZCB0aGVpciBwcm9wZXJ0aWVzLlxuICAgICAqL1xuICAgIEBJbnB1dCgpXG4gICAgcHJlc2V0OiBzdHJpbmc7XG5cbiAgICAvKiogKG9wdGlvbmFsKSBUaGlzIGZsYWcgc2V0cyB0aGUgbWV0YWRhdGEgaW4gcmVhZCBvbmx5IG1vZGVcbiAgICAgKiBwcmV2ZW50aW5nIGNoYW5nZXMuXG4gICAgICovXG4gICAgQElucHV0KClcbiAgICByZWFkT25seSA9IGZhbHNlO1xuXG4gICAgLyoqIChvcHRpb25hbCkgVGhpcyBmbGFnIGFsbG93cyB0aGUgY29tcG9uZW50IHRvIGRpc3BsYXkgbW9yZVxuICAgICAqIHRoYW4gb25lIGFjY29yZGlvbiBhdCBhIHRpbWUuXG4gICAgICovXG4gICAgQElucHV0KClcbiAgICBtdWx0aSA9IGZhbHNlO1xuXG4gICAgcHJpdmF0ZSBfZGlzcGxheURlZmF1bHRQcm9wZXJ0aWVzOiBib29sZWFuID0gdHJ1ZTtcblxuICAgIC8qKiAob3B0aW9uYWwpIFRoaXMgZmxhZyBkaXNwbGF5cy9oaWRlcyB0aGUgbWV0YWRhdGFcbiAgICAgKiBwcm9wZXJ0aWVzLlxuICAgICAqL1xuICAgIEBJbnB1dCgpXG4gICAgc2V0IGRpc3BsYXlEZWZhdWx0UHJvcGVydGllcyh2YWx1ZTogYm9vbGVhbikge1xuICAgICAgICB0aGlzLl9kaXNwbGF5RGVmYXVsdFByb3BlcnRpZXMgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5vbkRpc3BsYXlEZWZhdWx0UHJvcGVydGllc0NoYW5nZSgpO1xuICAgIH1cblxuICAgIGdldCBkaXNwbGF5RGVmYXVsdFByb3BlcnRpZXMoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kaXNwbGF5RGVmYXVsdFByb3BlcnRpZXM7XG4gICAgfVxuXG4gICAgZWRpdGFibGU6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIGV4cGFuZGVkOiBib29sZWFuO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBjb250ZW50U2VydmljZTogQ29udGVudFNlcnZpY2UpIHtcbiAgICB9XG5cbiAgICBvbkRpc3BsYXlEZWZhdWx0UHJvcGVydGllc0NoYW5nZSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5leHBhbmRlZCA9ICF0aGlzLl9kaXNwbGF5RGVmYXVsdFByb3BlcnRpZXM7XG4gICAgfVxuXG4gICAgdG9nZ2xlRWRpdCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5lZGl0YWJsZSA9ICF0aGlzLmVkaXRhYmxlO1xuICAgIH1cblxuICAgIHRvZ2dsZUV4cGFuZGVkKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmV4cGFuZGVkID0gIXRoaXMuZXhwYW5kZWQ7XG4gICAgfVxuXG4gICAgaGFzUGVybWlzc2lvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudFNlcnZpY2UuaGFzUGVybWlzc2lvbih0aGlzLm5vZGUsIFBlcm1pc3Npb25zRW51bS5VUERBVEUpO1xuICAgIH1cbn1cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE1pbmltYWxOb2RlRW50cnlFbnRpdHkgfSBmcm9tICdhbGZyZXNjby1qcy1hcGknO1xuaW1wb3J0IHsgQ2FyZFZpZXdEYXRlSXRlbU1vZGVsLCBDYXJkVmlld1RleHRJdGVtTW9kZWwsIEZpbGVTaXplUGlwZSB9IGZyb20gJ0BhbGZyZXNjby9hZGYtY29yZSc7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBCYXNpY1Byb3BlcnRpZXNTZXJ2aWNlIHtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZmlsZVNpemVQaXBlOiBGaWxlU2l6ZVBpcGUpIHtcbiAgICB9XG5cbiAgICBnZXRQcm9wZXJ0aWVzKG5vZGU6IE1pbmltYWxOb2RlRW50cnlFbnRpdHkpIHtcblxuICAgICAgICBjb25zdCBzaXplSW5CeXRlcyA9IG5vZGUuY29udGVudCA/IG5vZGUuY29udGVudC5zaXplSW5CeXRlcyA6ICcnLFxuICAgICAgICAgICAgbWltZVR5cGVOYW1lID0gbm9kZS5jb250ZW50ID8gbm9kZS5jb250ZW50Lm1pbWVUeXBlTmFtZSA6ICcnLFxuICAgICAgICAgICAgYXV0aG9yID0gbm9kZS5wcm9wZXJ0aWVzID8gbm9kZS5wcm9wZXJ0aWVzWydjbTphdXRob3InXSA6ICcnLFxuICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBub2RlLnByb3BlcnRpZXMgPyBub2RlLnByb3BlcnRpZXNbJ2NtOmRlc2NyaXB0aW9uJ10gOiAnJyxcbiAgICAgICAgICAgIHRpdGxlID0gbm9kZS5wcm9wZXJ0aWVzID8gbm9kZS5wcm9wZXJ0aWVzWydjbTp0aXRsZSddIDogJyc7XG5cbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIG5ldyBDYXJkVmlld1RleHRJdGVtTW9kZWwoe1xuICAgICAgICAgICAgICAgIGxhYmVsOiAnQ09SRS5NRVRBREFUQS5CQVNJQy5OQU1FJyxcbiAgICAgICAgICAgICAgICB2YWx1ZTogbm9kZS5uYW1lLFxuICAgICAgICAgICAgICAgIGtleTogJ25hbWUnLFxuICAgICAgICAgICAgICAgIGVkaXRhYmxlOiB0cnVlXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIG5ldyBDYXJkVmlld1RleHRJdGVtTW9kZWwoe1xuICAgICAgICAgICAgICAgIGxhYmVsOiAnQ09SRS5NRVRBREFUQS5CQVNJQy5USVRMRScsXG4gICAgICAgICAgICAgICAgdmFsdWU6IHRpdGxlLFxuICAgICAgICAgICAgICAgIGtleTogJ3Byb3BlcnRpZXMuY206dGl0bGUnLFxuICAgICAgICAgICAgICAgIGVkaXRhYmxlOiB0cnVlXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIG5ldyBDYXJkVmlld1RleHRJdGVtTW9kZWwoe1xuICAgICAgICAgICAgICAgIGxhYmVsOiAnQ09SRS5NRVRBREFUQS5CQVNJQy5DUkVBVE9SJyxcbiAgICAgICAgICAgICAgICB2YWx1ZTogbm9kZS5jcmVhdGVkQnlVc2VyLmRpc3BsYXlOYW1lLFxuICAgICAgICAgICAgICAgIGtleTogJ2NyZWF0ZWRCeVVzZXIuZGlzcGxheU5hbWUnLFxuICAgICAgICAgICAgICAgIGVkaXRhYmxlOiBmYWxzZVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBuZXcgQ2FyZFZpZXdEYXRlSXRlbU1vZGVsKHtcbiAgICAgICAgICAgICAgICBsYWJlbDogJ0NPUkUuTUVUQURBVEEuQkFTSUMuQ1JFQVRFRF9EQVRFJyxcbiAgICAgICAgICAgICAgICB2YWx1ZTogbm9kZS5jcmVhdGVkQXQsXG4gICAgICAgICAgICAgICAga2V5OiAnY3JlYXRlZEF0JyxcbiAgICAgICAgICAgICAgICBlZGl0YWJsZTogZmFsc2VcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgbmV3IENhcmRWaWV3VGV4dEl0ZW1Nb2RlbCh7XG4gICAgICAgICAgICAgICAgbGFiZWw6ICdDT1JFLk1FVEFEQVRBLkJBU0lDLlNJWkUnLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBzaXplSW5CeXRlcyxcbiAgICAgICAgICAgICAgICBrZXk6ICdjb250ZW50LnNpemVJbkJ5dGVzJyxcbiAgICAgICAgICAgICAgICBwaXBlczogW3sgcGlwZTogdGhpcy5maWxlU2l6ZVBpcGUgfV0sXG4gICAgICAgICAgICAgICAgZWRpdGFibGU6IGZhbHNlXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIG5ldyBDYXJkVmlld1RleHRJdGVtTW9kZWwoe1xuICAgICAgICAgICAgICAgIGxhYmVsOiAnQ09SRS5NRVRBREFUQS5CQVNJQy5NT0RJRklFUicsXG4gICAgICAgICAgICAgICAgdmFsdWU6IG5vZGUubW9kaWZpZWRCeVVzZXIuZGlzcGxheU5hbWUsXG4gICAgICAgICAgICAgICAga2V5OiAnbW9kaWZpZWRCeVVzZXIuZGlzcGxheU5hbWUnLFxuICAgICAgICAgICAgICAgIGVkaXRhYmxlOiBmYWxzZVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBuZXcgQ2FyZFZpZXdEYXRlSXRlbU1vZGVsKHtcbiAgICAgICAgICAgICAgICBsYWJlbDogJ0NPUkUuTUVUQURBVEEuQkFTSUMuTU9ESUZJRURfREFURScsXG4gICAgICAgICAgICAgICAgdmFsdWU6IG5vZGUubW9kaWZpZWRBdCxcbiAgICAgICAgICAgICAgICBrZXk6ICdtb2RpZmllZEF0JyxcbiAgICAgICAgICAgICAgICBlZGl0YWJsZTogZmFsc2VcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgbmV3IENhcmRWaWV3VGV4dEl0ZW1Nb2RlbCh7XG4gICAgICAgICAgICAgICAgbGFiZWw6ICdDT1JFLk1FVEFEQVRBLkJBU0lDLk1JTUVUWVBFJyxcbiAgICAgICAgICAgICAgICB2YWx1ZTogbWltZVR5cGVOYW1lLFxuICAgICAgICAgICAgICAgIGtleTogJ2NvbnRlbnQubWltZVR5cGVOYW1lJyxcbiAgICAgICAgICAgICAgICBlZGl0YWJsZTogZmFsc2VcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgbmV3IENhcmRWaWV3VGV4dEl0ZW1Nb2RlbCh7XG4gICAgICAgICAgICAgICAgbGFiZWw6ICdDT1JFLk1FVEFEQVRBLkJBU0lDLkFVVEhPUicsXG4gICAgICAgICAgICAgICAgdmFsdWU6IGF1dGhvcixcbiAgICAgICAgICAgICAgICBrZXk6ICdwcm9wZXJ0aWVzLmNtOmF1dGhvcicsXG4gICAgICAgICAgICAgICAgZWRpdGFibGU6IHRydWVcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgbmV3IENhcmRWaWV3VGV4dEl0ZW1Nb2RlbCh7XG4gICAgICAgICAgICAgICAgbGFiZWw6ICdDT1JFLk1FVEFEQVRBLkJBU0lDLkRFU0NSSVBUSU9OJyxcbiAgICAgICAgICAgICAgICB2YWx1ZTogZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAga2V5OiAncHJvcGVydGllcy5jbTpkZXNjcmlwdGlvbicsXG4gICAgICAgICAgICAgICAgbXVsdGlsaW5lOiB0cnVlLFxuICAgICAgICAgICAgICAgIGVkaXRhYmxlOiB0cnVlXG4gICAgICAgICAgICB9KVxuICAgICAgICBdO1xuICAgIH1cbn1cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7XG4gICAgQ2FyZFZpZXdJdGVtUHJvcGVydGllcyxcbiAgICBDYXJkVmlld0l0ZW0sXG4gICAgQ2FyZFZpZXdUZXh0SXRlbU1vZGVsLFxuICAgIENhcmRWaWV3Qm9vbEl0ZW1Nb2RlbCxcbiAgICBDYXJkVmlld0RhdGVJdGVtTW9kZWwsXG4gICAgQ2FyZFZpZXdEYXRldGltZUl0ZW1Nb2RlbCxcbiAgICBDYXJkVmlld0ludEl0ZW1Nb2RlbCxcbiAgICBDYXJkVmlld0Zsb2F0SXRlbU1vZGVsLFxuICAgIExvZ1NlcnZpY2Vcbn0gZnJvbSAnQGFsZnJlc2NvL2FkZi1jb3JlJztcbmltcG9ydCB7IFByb3BlcnR5LCBDYXJkVmlld0dyb3VwLCBPcmdhbmlzZWRQcm9wZXJ0eUdyb3VwIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9jb250ZW50LW1ldGFkYXRhLmludGVyZmFjZXMnO1xuXG5jb25zdCBEX1RFWFQgPSAnZDp0ZXh0JztcbmNvbnN0IERfTUxURVhUID0gJ2Q6bWx0ZXh0JztcbmNvbnN0IERfREFURSA9ICdkOmRhdGUnO1xuY29uc3QgRF9EQVRFVElNRSA9ICdkOmRhdGV0aW1lJztcbmNvbnN0IERfSU5UID0gJ2Q6aW50JztcbmNvbnN0IERfTE9ORyA9ICdkOmxvbmcnO1xuY29uc3QgRF9GTE9BVCA9ICdkOmZsb2F0JztcbmNvbnN0IERfRE9VQkxFID0gJ2Q6ZG91YmxlJztcbmNvbnN0IERfQk9PTEVBTiA9ICdkOmJvb2xlYW4nO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgUHJvcGVydHlHcm91cFRyYW5zbGF0b3JTZXJ2aWNlIHtcblxuICAgIHN0YXRpYyByZWFkb25seSBSRUNPR05JU0VEX0VDTV9UWVBFUyA9IFsgRF9URVhULCBEX01MVEVYVCwgRF9EQVRFLCBEX0RBVEVUSU1FLCBEX0lOVCwgRF9MT05HICwgRF9GTE9BVCwgRF9ET1VCTEUsIERfQk9PTEVBTiBdO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBsb2dTZXJ2aWNlOiBMb2dTZXJ2aWNlKSB7fVxuXG4gICAgcHVibGljIHRyYW5zbGF0ZVRvQ2FyZFZpZXdHcm91cHMocHJvcGVydHlHcm91cHM6IE9yZ2FuaXNlZFByb3BlcnR5R3JvdXBbXSwgcHJvcGVydHlWYWx1ZXMpOiBDYXJkVmlld0dyb3VwW10ge1xuICAgICAgICByZXR1cm4gcHJvcGVydHlHcm91cHMubWFwKHByb3BlcnR5R3JvdXAgPT4ge1xuICAgICAgICAgICAgY29uc3QgdHJhbnNsYXRlZFByb3BlcnR5R3JvdXA6IGFueSA9IE9iamVjdC5hc3NpZ24oe30sIHByb3BlcnR5R3JvdXApO1xuICAgICAgICAgICAgdHJhbnNsYXRlZFByb3BlcnR5R3JvdXAucHJvcGVydGllcyA9IHRoaXMudHJhbnNsYXRlQXJyYXkocHJvcGVydHlHcm91cC5wcm9wZXJ0aWVzLCBwcm9wZXJ0eVZhbHVlcyk7XG4gICAgICAgICAgICByZXR1cm4gdHJhbnNsYXRlZFByb3BlcnR5R3JvdXA7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgdHJhbnNsYXRlQXJyYXkocHJvcGVydGllczogUHJvcGVydHlbXSwgcHJvcGVydHlWYWx1ZXM6IGFueSk6IENhcmRWaWV3SXRlbVtdIHtcbiAgICAgICAgcmV0dXJuIHByb3BlcnRpZXMubWFwKHByb3BlcnR5ID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRyYW5zbGF0ZShwcm9wZXJ0eSwgcHJvcGVydHlWYWx1ZXNbcHJvcGVydHkubmFtZV0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHRyYW5zbGF0ZShwcm9wZXJ0eTogUHJvcGVydHksIHByb3BlcnR5VmFsdWU6IGFueSk6IENhcmRWaWV3SXRlbSB7XG4gICAgICAgIHRoaXMuY2hlY2tFQ01UeXBlVmFsaWRpdHkocHJvcGVydHkuZGF0YVR5cGUpO1xuXG4gICAgICAgIGNvbnN0IHByZWZpeCA9ICdwcm9wZXJ0aWVzLic7XG5cbiAgICAgICAgbGV0IHByb3BlcnR5RGVmaW5pdGlvbjogQ2FyZFZpZXdJdGVtUHJvcGVydGllcyA9IHtcbiAgICAgICAgICAgIGxhYmVsOiBwcm9wZXJ0eS50aXRsZSxcbiAgICAgICAgICAgIHZhbHVlOiBwcm9wZXJ0eVZhbHVlLFxuICAgICAgICAgICAga2V5OiBgJHtwcmVmaXh9JHtwcm9wZXJ0eS5uYW1lfWAsXG4gICAgICAgICAgICBkZWZhdWx0OiBwcm9wZXJ0eS5kZWZhdWx0VmFsdWUsXG4gICAgICAgICAgICBlZGl0YWJsZTogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgICBsZXQgY2FyZFZpZXdJdGVtUHJvcGVydHk7XG5cbiAgICAgICAgc3dpdGNoIChwcm9wZXJ0eS5kYXRhVHlwZSkge1xuXG4gICAgICAgICAgICBjYXNlIERfTUxURVhUOlxuICAgICAgICAgICAgICAgIGNhcmRWaWV3SXRlbVByb3BlcnR5ID0gbmV3IENhcmRWaWV3VGV4dEl0ZW1Nb2RlbChPYmplY3QuYXNzaWduKHByb3BlcnR5RGVmaW5pdGlvbiwge1xuICAgICAgICAgICAgICAgICAgICBtdWx0aWxpbmU6IHRydWVcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgRF9JTlQ6XG4gICAgICAgICAgICBjYXNlIERfTE9ORzpcbiAgICAgICAgICAgICAgICBjYXJkVmlld0l0ZW1Qcm9wZXJ0eSA9IG5ldyBDYXJkVmlld0ludEl0ZW1Nb2RlbChwcm9wZXJ0eURlZmluaXRpb24pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIERfRkxPQVQ6XG4gICAgICAgICAgICBjYXNlIERfRE9VQkxFOlxuICAgICAgICAgICAgICAgIGNhcmRWaWV3SXRlbVByb3BlcnR5ID0gbmV3IENhcmRWaWV3RmxvYXRJdGVtTW9kZWwocHJvcGVydHlEZWZpbml0aW9uKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBEX0RBVEU6XG4gICAgICAgICAgICAgICAgY2FyZFZpZXdJdGVtUHJvcGVydHkgPSBuZXcgQ2FyZFZpZXdEYXRlSXRlbU1vZGVsKHByb3BlcnR5RGVmaW5pdGlvbik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgRF9EQVRFVElNRTpcbiAgICAgICAgICAgICAgICBjYXJkVmlld0l0ZW1Qcm9wZXJ0eSA9IG5ldyBDYXJkVmlld0RhdGV0aW1lSXRlbU1vZGVsKHByb3BlcnR5RGVmaW5pdGlvbik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgRF9CT09MRUFOOlxuICAgICAgICAgICAgICAgIGNhcmRWaWV3SXRlbVByb3BlcnR5ID0gbmV3IENhcmRWaWV3Qm9vbEl0ZW1Nb2RlbChwcm9wZXJ0eURlZmluaXRpb24pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIERfVEVYVDpcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgY2FyZFZpZXdJdGVtUHJvcGVydHkgPSBuZXcgQ2FyZFZpZXdUZXh0SXRlbU1vZGVsKE9iamVjdC5hc3NpZ24ocHJvcGVydHlEZWZpbml0aW9uLCB7XG4gICAgICAgICAgICAgICAgICAgIG11bHRpbGluZTogZmFsc2VcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY2FyZFZpZXdJdGVtUHJvcGVydHk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjaGVja0VDTVR5cGVWYWxpZGl0eShlY21Qcm9wZXJ0eVR5cGUpIHtcbiAgICAgICAgaWYgKFByb3BlcnR5R3JvdXBUcmFuc2xhdG9yU2VydmljZS5SRUNPR05JU0VEX0VDTV9UWVBFUy5pbmRleE9mKGVjbVByb3BlcnR5VHlwZSkgPT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ1NlcnZpY2UuZXJyb3IoYFVua25vd24gdHlwZSBmb3IgbWFwcGluZzogJHtlY21Qcm9wZXJ0eVR5cGV9YCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBQcm9wZXJ0eUdyb3VwLCBQcm9wZXJ0eSwgUHJvcGVydHlHcm91cENvbnRhaW5lciB9IGZyb20gJy4uLy4uL2ludGVyZmFjZXMvY29udGVudC1tZXRhZGF0YS5pbnRlcmZhY2VzJztcblxuY29uc3QgZW1wdHlHcm91cCA9IHtcbiAgICBwcm9wZXJ0aWVzOiB7fVxufTtcblxuZnVuY3Rpb24gY29udmVydE9iamVjdFRvQXJyYXkob2JqZWN0OiBhbnkpOiBQcm9wZXJ0eVtdIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqZWN0KS5tYXAoa2V5ID0+IG9iamVjdFtrZXldKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEdyb3VwKHByb3BlcnR5R3JvdXBzOiBQcm9wZXJ0eUdyb3VwQ29udGFpbmVyLCBncm91cE5hbWU6IHN0cmluZyk6IFByb3BlcnR5R3JvdXAgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiBwcm9wZXJ0eUdyb3Vwc1tncm91cE5hbWVdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UHJvcGVydHkocHJvcGVydHlHcm91cHM6IFByb3BlcnR5R3JvdXBDb250YWluZXIsIGdyb3VwTmFtZTogc3RyaW5nLCBwcm9wZXJ0eU5hbWU6IHN0cmluZyk6IFByb3BlcnR5IHwgUHJvcGVydHlbXSB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgZ3JvdXBEZWZpbml0aW9uID0gZ2V0R3JvdXAocHJvcGVydHlHcm91cHMsIGdyb3VwTmFtZSkgfHwgZW1wdHlHcm91cDtcbiAgICBsZXQgcHJvcGVydHlEZWZpbml0aW9ucztcblxuICAgIGlmIChwcm9wZXJ0eU5hbWUgPT09ICcqJykge1xuICAgICAgICBwcm9wZXJ0eURlZmluaXRpb25zID0gY29udmVydE9iamVjdFRvQXJyYXkoZ3JvdXBEZWZpbml0aW9uLnByb3BlcnRpZXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHByb3BlcnR5RGVmaW5pdGlvbnMgPSBncm91cERlZmluaXRpb24ucHJvcGVydGllc1twcm9wZXJ0eU5hbWVdO1xuICAgIH1cblxuICAgIHJldHVybiBwcm9wZXJ0eURlZmluaXRpb25zO1xufVxuIiwiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQ29udGVudE1ldGFkYXRhQ29uZmlnLCBPcmdhbmlzZWRQcm9wZXJ0eUdyb3VwLCBQcm9wZXJ0eUdyb3VwQ29udGFpbmVyIH0gZnJvbSAnLi4vLi4vaW50ZXJmYWNlcy9jb250ZW50LW1ldGFkYXRhLmludGVyZmFjZXMnO1xuaW1wb3J0IHsgZ2V0R3JvdXAsIGdldFByb3BlcnR5IH0gZnJvbSAnLi9wcm9wZXJ0eS1ncm91cC1yZWFkZXInO1xuXG5leHBvcnQgY2xhc3MgQXNwZWN0T3JpZW50ZWRDb25maWdTZXJ2aWNlIGltcGxlbWVudHMgQ29udGVudE1ldGFkYXRhQ29uZmlnIHtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgY29uZmlnOiBhbnkpIHt9XG5cbiAgICBwdWJsaWMgaXNHcm91cEFsbG93ZWQoZ3JvdXBOYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgZ3JvdXBOYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMuY29uZmlnKTtcbiAgICAgICAgcmV0dXJuIGdyb3VwTmFtZXMuaW5kZXhPZihncm91cE5hbWUpICE9PSAtMTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVvcmdhbmlzZUJ5Q29uZmlnKHByb3BlcnR5R3JvdXBzOiBQcm9wZXJ0eUdyb3VwQ29udGFpbmVyKTogT3JnYW5pc2VkUHJvcGVydHlHcm91cFtdIHtcbiAgICAgICAgY29uc3QgYXNwZWN0cyA9IHRoaXMuY29uZmlnLFxuICAgICAgICAgICAgYXNwZWN0TmFtZXMgPSBPYmplY3Qua2V5cyhhc3BlY3RzKTtcblxuICAgICAgICByZXR1cm4gYXNwZWN0TmFtZXNcbiAgICAgICAgICAgIC5yZWR1Y2UoKGdyb3VwQWNjdW11bGF0b3IsIGFzcGVjdE5hbWUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdHcm91cCA9IHRoaXMuZ2V0T3JnYW5pc2VkUHJvcGVydHlHcm91cChwcm9wZXJ0eUdyb3VwcywgYXNwZWN0TmFtZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdyb3VwQWNjdW11bGF0b3IuY29uY2F0KG5ld0dyb3VwKTtcbiAgICAgICAgICAgIH0sIFtdKVxuICAgICAgICAgICAgLmZpbHRlcihvcmdhbmlzZWRQcm9wZXJ0eUdyb3VwID0+IG9yZ2FuaXNlZFByb3BlcnR5R3JvdXAucHJvcGVydGllcy5sZW5ndGggPiAwKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldE9yZ2FuaXNlZFByb3BlcnR5R3JvdXAocHJvcGVydHlHcm91cHMsIGFzcGVjdE5hbWUpIHtcbiAgICAgICAgY29uc3QgZ3JvdXAgPSBnZXRHcm91cChwcm9wZXJ0eUdyb3VwcywgYXNwZWN0TmFtZSk7XG4gICAgICAgIGxldCBuZXdHcm91cCA9IFtdO1xuXG4gICAgICAgIGlmIChncm91cCkge1xuICAgICAgICAgICAgY29uc3QgYXNwZWN0UHJvcGVydGllcyA9IHRoaXMuY29uZmlnW2FzcGVjdE5hbWVdO1xuICAgICAgICAgICAgbGV0IHByb3BlcnRpZXM7XG5cbiAgICAgICAgICAgIGlmIChhc3BlY3RQcm9wZXJ0aWVzID09PSAnKicpIHtcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzID0gZ2V0UHJvcGVydHkocHJvcGVydHlHcm91cHMsIGFzcGVjdE5hbWUsIGFzcGVjdFByb3BlcnRpZXMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzID0gKDxzdHJpbmdbXT4gYXNwZWN0UHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgLm1hcCgocHJvcGVydHlOYW1lKSA9PiBnZXRQcm9wZXJ0eShwcm9wZXJ0eUdyb3VwcywgYXNwZWN0TmFtZSwgcHJvcGVydHlOYW1lKSlcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihwcm9wcyA9PiBwcm9wcyAhPT0gdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbmV3R3JvdXAgPSBbIHsgdGl0bGU6IGdyb3VwLnRpdGxlLCBwcm9wZXJ0aWVzIH0gXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXdHcm91cDtcbiAgICB9XG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDb250ZW50TWV0YWRhdGFDb25maWcsIE9yZ2FuaXNlZFByb3BlcnR5R3JvdXAsXG4gICAgUHJvcGVydHlHcm91cENvbnRhaW5lclxufSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzL2NvbnRlbnQtbWV0YWRhdGEuaW50ZXJmYWNlcyc7XG5cbmV4cG9ydCBjbGFzcyBJbmRpZmZlcmVudENvbmZpZ1NlcnZpY2UgaW1wbGVtZW50cyBDb250ZW50TWV0YWRhdGFDb25maWcge1xuXG4gICAgY29uc3RydWN0b3IoY29uZmlnOiBhbnkpIHt9XG5cbiAgICBwdWJsaWMgaXNHcm91cEFsbG93ZWQoZ3JvdXBOYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcHVibGljIHJlb3JnYW5pc2VCeUNvbmZpZyhwcm9wZXJ0eUdyb3VwczogUHJvcGVydHlHcm91cENvbnRhaW5lcik6IE9yZ2FuaXNlZFByb3BlcnR5R3JvdXBbXSB7XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhwcm9wZXJ0eUdyb3VwcylcbiAgICAgICAgICAgIC5tYXAoKGdyb3VwTmFtZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5R3JvdXAgPSBwcm9wZXJ0eUdyb3Vwc1tncm91cE5hbWVdLFxuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzID0gcHJvcGVydHlHcm91cC5wcm9wZXJ0aWVzO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHByb3BlcnR5R3JvdXAsIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllczogT2JqZWN0LmtleXMocHJvcGVydGllcykubWFwKHByb3BlcnR5TmFtZSA9PiBwcm9wZXJ0aWVzW3Byb3BlcnR5TmFtZV0pXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICAgIENvbnRlbnRNZXRhZGF0YUNvbmZpZyxcbiAgICBMYXlvdXRPcmllbnRlZENvbmZpZ0l0ZW0sXG4gICAgT3JnYW5pc2VkUHJvcGVydHlHcm91cCxcbiAgICBQcm9wZXJ0eUdyb3VwQ29udGFpbmVyXG59IGZyb20gJy4uLy4uL2ludGVyZmFjZXMvY29udGVudC1tZXRhZGF0YS5pbnRlcmZhY2VzJztcbmltcG9ydCB7IGdldFByb3BlcnR5IH0gZnJvbSAnLi9wcm9wZXJ0eS1ncm91cC1yZWFkZXInO1xuXG5leHBvcnQgY2xhc3MgTGF5b3V0T3JpZW50ZWRDb25maWdTZXJ2aWNlIGltcGxlbWVudHMgQ29udGVudE1ldGFkYXRhQ29uZmlnIHtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgY29uZmlnOiBhbnkpIHt9XG5cbiAgICBwdWJsaWMgaXNHcm91cEFsbG93ZWQoZ3JvdXBOYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWF0Y2hpbmdHcm91cHMoZ3JvdXBOYW1lKS5sZW5ndGggPiAwO1xuICAgIH1cblxuICAgIHB1YmxpYyByZW9yZ2FuaXNlQnlDb25maWcocHJvcGVydHlHcm91cHM6IFByb3BlcnR5R3JvdXBDb250YWluZXIpOiBPcmdhbmlzZWRQcm9wZXJ0eUdyb3VwW10ge1xuICAgICAgICBjb25zdCBsYXlvdXRCbG9ja3MgPSB0aGlzLmNvbmZpZztcblxuICAgICAgICByZXR1cm4gbGF5b3V0QmxvY2tzLm1hcCgobGF5b3V0QmxvY2spID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZsYXR0ZW5lZEl0ZW1zID0gdGhpcy5mbGF0dGVuSXRlbXMobGF5b3V0QmxvY2suaXRlbXMpLFxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXMgPSBmbGF0dGVuZWRJdGVtcy5yZWR1Y2UoKHByb3BzLCBleHBsb2RlZEl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvcGVydHkgPSBnZXRQcm9wZXJ0eShwcm9wZXJ0eUdyb3VwcywgZXhwbG9kZWRJdGVtLmdyb3VwTmFtZSwgZXhwbG9kZWRJdGVtLnByb3BlcnR5TmFtZSkgfHwgW107XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9wcy5jb25jYXQocHJvcGVydHkpO1xuICAgICAgICAgICAgICAgIH0sIFtdKTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0aXRsZTogbGF5b3V0QmxvY2sudGl0bGUsXG4gICAgICAgICAgICAgICAgcHJvcGVydGllc1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmbGF0dGVuSXRlbXMoaXRlbXMpIHtcbiAgICAgICAgcmV0dXJuIGl0ZW1zLnJlZHVjZSgoYWNjdW11bGF0b3IsIGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSBBcnJheS5pc0FycmF5KGl0ZW0ucHJvcGVydGllcykgPyBpdGVtLnByb3BlcnRpZXMgOiBbaXRlbS5wcm9wZXJ0aWVzXTtcbiAgICAgICAgICAgIGNvbnN0IGZsYXR0ZW5lZFByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzLm1hcChwcm9wZXJ0eU5hbWUgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGdyb3VwTmFtZTogaXRlbS5hc3BlY3QgfHwgaXRlbS50eXBlLFxuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eU5hbWVcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBhY2N1bXVsYXRvci5jb25jYXQoZmxhdHRlbmVkUHJvcGVydGllcyk7XG4gICAgICAgIH0sIFtdKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldE1hdGNoaW5nR3JvdXBzKGdyb3VwTmFtZTogc3RyaW5nKTogTGF5b3V0T3JpZW50ZWRDb25maWdJdGVtW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25maWdcbiAgICAgICAgICAgIC5tYXAobGF5b3V0QmxvY2sgPT4gbGF5b3V0QmxvY2suaXRlbXMpXG4gICAgICAgICAgICAucmVkdWNlKChhY2N1bXVsYXRvciwgaXRlbXMpID0+IGFjY3VtdWxhdG9yLmNvbmNhdChpdGVtcyksIFtdKVxuICAgICAgICAgICAgLmZpbHRlcigoaXRlbSkgPT4gaXRlbS5hc3BlY3QgPT09IGdyb3VwTmFtZSB8fCBpdGVtLnR5cGUgPT09IGdyb3VwTmFtZSk7XG4gICAgfVxufVxuIiwiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQXBwQ29uZmlnU2VydmljZSwgTG9nU2VydmljZSB9IGZyb20gJ0BhbGZyZXNjby9hZGYtY29yZSc7XG5pbXBvcnQgeyBBc3BlY3RPcmllbnRlZENvbmZpZ1NlcnZpY2UgfSBmcm9tICcuL2FzcGVjdC1vcmllbnRlZC1jb25maWcuc2VydmljZSc7XG5pbXBvcnQgeyBJbmRpZmZlcmVudENvbmZpZ1NlcnZpY2UgfSBmcm9tICcuL2luZGlmZmVyZW50LWNvbmZpZy5zZXJ2aWNlJztcbmltcG9ydCB7IExheW91dE9yaWVudGVkQ29uZmlnU2VydmljZSB9IGZyb20gJy4vbGF5b3V0LW9yaWVudGVkLWNvbmZpZy5zZXJ2aWNlJztcbmltcG9ydCB7XG4gICAgUHJlc2V0Q29uZmlnLFxuICAgIENvbnRlbnRNZXRhZGF0YUNvbmZpZyxcbiAgICBBc3BlY3RPcmllbnRlZENvbmZpZyxcbiAgICBJbkRpZmZlcmVudENvbmZpZyxcbiAgICBMYXlvdXRPcmllbnRlZENvbmZpZ1xufSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzL2NvbnRlbnQtbWV0YWRhdGEuaW50ZXJmYWNlcyc7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBDb250ZW50TWV0YWRhdGFDb25maWdGYWN0b3J5IHtcblxuICAgIHN0YXRpYyByZWFkb25seSBJTkRJRkZFUkVOVF9QUkVTRVQgPSAnKic7XG4gICAgc3RhdGljIHJlYWRvbmx5IERFRkFVTFRfUFJFU0VUX05BTUUgPSAnZGVmYXVsdCc7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGFwcENvbmZpZ1NlcnZpY2U6IEFwcENvbmZpZ1NlcnZpY2UsIHByaXZhdGUgbG9nU2VydmljZTogTG9nU2VydmljZSkge31cblxuICAgIHB1YmxpYyBnZXQocHJlc2V0TmFtZTogc3RyaW5nID0gJ2RlZmF1bHQnKTogQ29udGVudE1ldGFkYXRhQ29uZmlnIHtcbiAgICAgICAgbGV0IHByZXNldENvbmZpZztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHByZXNldENvbmZpZyA9IHRoaXMuYXBwQ29uZmlnU2VydmljZS5jb25maWdbJ2NvbnRlbnQtbWV0YWRhdGEnXS5wcmVzZXRzW3ByZXNldE5hbWVdO1xuICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgIGlmIChwcmVzZXROYW1lICE9PSBDb250ZW50TWV0YWRhdGFDb25maWdGYWN0b3J5LkRFRkFVTFRfUFJFU0VUX05BTUUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ1NlcnZpY2UuZXJyb3IoYE5vIGNvbnRlbnQtbWV0YWRhdGEgcHJlc2V0IGZvcjogJHtwcmVzZXROYW1lfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJlc2V0Q29uZmlnID0gQ29udGVudE1ldGFkYXRhQ29uZmlnRmFjdG9yeS5JTkRJRkZFUkVOVF9QUkVTRVQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVDb25maWcocHJlc2V0Q29uZmlnKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZUNvbmZpZyhwcmVzZXRDb25maWc6IFByZXNldENvbmZpZyk6IENvbnRlbnRNZXRhZGF0YUNvbmZpZyB7XG4gICAgICAgIGxldCBjb25maWc6IENvbnRlbnRNZXRhZGF0YUNvbmZpZztcblxuICAgICAgICBpZiAodGhpcy5pc0xheW91dE9yaWVudGVkUHJlc2V0KHByZXNldENvbmZpZykpIHtcbiAgICAgICAgICAgIGNvbmZpZyA9IG5ldyBMYXlvdXRPcmllbnRlZENvbmZpZ1NlcnZpY2UoPExheW91dE9yaWVudGVkQ29uZmlnPiBwcmVzZXRDb25maWcpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNBc3BlY3RPcmllbnRlZFByZXNldChwcmVzZXRDb25maWcpKSB7XG4gICAgICAgICAgICBjb25maWcgPSBuZXcgQXNwZWN0T3JpZW50ZWRDb25maWdTZXJ2aWNlKDxBc3BlY3RPcmllbnRlZENvbmZpZz4gcHJlc2V0Q29uZmlnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbmZpZyA9IG5ldyBJbmRpZmZlcmVudENvbmZpZ1NlcnZpY2UoPEluRGlmZmVyZW50Q29uZmlnPiBwcmVzZXRDb25maWcpO1xuICAgICAgICB9XG5cbiAgICAgICAgT2JqZWN0LmZyZWV6ZShjb25maWcpO1xuICAgICAgICByZXR1cm4gY29uZmlnO1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNBc3BlY3RPcmllbnRlZFByZXNldChwcmVzZXRDb25maWc6IFByZXNldENvbmZpZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5pc09iamVjdChwcmVzZXRDb25maWcpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNMYXlvdXRPcmllbnRlZFByZXNldChwcmVzZXRDb25maWc6IFByZXNldENvbmZpZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShwcmVzZXRDb25maWcpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNPYmplY3QoeCkge1xuICAgICAgICByZXR1cm4geCAhPSBudWxsICYmIHR5cGVvZiB4ID09PSAnb2JqZWN0JztcbiAgICB9XG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBBbGZyZXNjb0FwaVNlcnZpY2UgfSBmcm9tICdAYWxmcmVzY28vYWRmLWNvcmUnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgZGVmZXIsIGZvcmtKb2luIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBQcm9wZXJ0eUdyb3VwLCBQcm9wZXJ0eUdyb3VwQ29udGFpbmVyIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9jb250ZW50LW1ldGFkYXRhLmludGVyZmFjZXMnO1xuaW1wb3J0IHsgbWFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgUHJvcGVydHlEZXNjcmlwdG9yc1NlcnZpY2Uge1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBhbGZyZXNjb0FwaVNlcnZpY2U6IEFsZnJlc2NvQXBpU2VydmljZSkge31cblxuICAgIGxvYWQoZ3JvdXBOYW1lczogc3RyaW5nW10pOiBPYnNlcnZhYmxlPFByb3BlcnR5R3JvdXBDb250YWluZXI+IHtcbiAgICAgICAgY29uc3QgZ3JvdXBGZXRjaFN0cmVhbXMgPSBncm91cE5hbWVzXG4gICAgICAgICAgICAubWFwKGdyb3VwTmFtZSA9PiBncm91cE5hbWUucmVwbGFjZSgnOicsICdfJykpXG4gICAgICAgICAgICAubWFwKGdyb3VwTmFtZSA9PiBkZWZlciggKCkgPT4gdGhpcy5hbGZyZXNjb0FwaVNlcnZpY2UuY2xhc3Nlc0FwaS5nZXRDbGFzcyhncm91cE5hbWUpKSApO1xuXG4gICAgICAgIHJldHVybiBmb3JrSm9pbihncm91cEZldGNoU3RyZWFtcykucGlwZShcbiAgICAgICAgICAgIG1hcCh0aGlzLmNvbnZlcnRUb09iamVjdClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNvbnZlcnRUb09iamVjdChwcm9wZXJ0eUdyb3Vwc0FycmF5OiBQcm9wZXJ0eUdyb3VwW10pOiBQcm9wZXJ0eUdyb3VwQ29udGFpbmVyIHtcbiAgICAgICAgcmV0dXJuIHByb3BlcnR5R3JvdXBzQXJyYXkucmVkdWNlKChwcm9wZXJ0eUdyb3VwcywgcHJvcGVydHlHcm91cCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHByb3BlcnR5R3JvdXBzLCB7XG4gICAgICAgICAgICAgICAgW3Byb3BlcnR5R3JvdXAubmFtZV06IHByb3BlcnR5R3JvdXBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCB7fSk7XG4gICAgfVxufVxuIiwiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTWluaW1hbE5vZGVFbnRyeUVudGl0eSB9IGZyb20gJ2FsZnJlc2NvLWpzLWFwaSc7XG5pbXBvcnQgeyBCYXNpY1Byb3BlcnRpZXNTZXJ2aWNlIH0gZnJvbSAnLi9iYXNpYy1wcm9wZXJ0aWVzLnNlcnZpY2UnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgb2YgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IFByb3BlcnR5R3JvdXBUcmFuc2xhdG9yU2VydmljZSB9IGZyb20gJy4vcHJvcGVydHktZ3JvdXBzLXRyYW5zbGF0b3Iuc2VydmljZSc7XG5pbXBvcnQgeyBDYXJkVmlld0l0ZW0gfSBmcm9tICdAYWxmcmVzY28vYWRmLWNvcmUnO1xuaW1wb3J0IHsgQ2FyZFZpZXdHcm91cCB9IGZyb20gJy4uL2ludGVyZmFjZXMvY29udGVudC1tZXRhZGF0YS5pbnRlcmZhY2VzJztcbmltcG9ydCB7IENvbnRlbnRNZXRhZGF0YUNvbmZpZ0ZhY3RvcnkgfSBmcm9tICcuL2NvbmZpZy9jb250ZW50LW1ldGFkYXRhLWNvbmZpZy5mYWN0b3J5JztcbmltcG9ydCB7IFByb3BlcnR5RGVzY3JpcHRvcnNTZXJ2aWNlIH0gZnJvbSAnLi9wcm9wZXJ0eS1kZXNjcmlwdG9ycy5zZXJ2aWNlJztcbmltcG9ydCB7IG1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIENvbnRlbnRNZXRhZGF0YVNlcnZpY2Uge1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBiYXNpY1Byb3BlcnRpZXNTZXJ2aWNlOiBCYXNpY1Byb3BlcnRpZXNTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIHByaXZhdGUgY29udGVudE1ldGFkYXRhQ29uZmlnRmFjdG9yeTogQ29udGVudE1ldGFkYXRhQ29uZmlnRmFjdG9yeSxcbiAgICAgICAgICAgICAgICBwcml2YXRlIHByb3BlcnR5R3JvdXBUcmFuc2xhdG9yU2VydmljZTogUHJvcGVydHlHcm91cFRyYW5zbGF0b3JTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIHByaXZhdGUgcHJvcGVydHlEZXNjcmlwdG9yc1NlcnZpY2U6IFByb3BlcnR5RGVzY3JpcHRvcnNTZXJ2aWNlKSB7XG4gICAgfVxuXG4gICAgZ2V0QmFzaWNQcm9wZXJ0aWVzKG5vZGU6IE1pbmltYWxOb2RlRW50cnlFbnRpdHkpOiBPYnNlcnZhYmxlPENhcmRWaWV3SXRlbVtdPiB7XG4gICAgICAgIHJldHVybiBvZih0aGlzLmJhc2ljUHJvcGVydGllc1NlcnZpY2UuZ2V0UHJvcGVydGllcyhub2RlKSk7XG4gICAgfVxuXG4gICAgZ2V0R3JvdXBlZFByb3BlcnRpZXMobm9kZTogTWluaW1hbE5vZGVFbnRyeUVudGl0eSwgcHJlc2V0TmFtZTogc3RyaW5nID0gJ2RlZmF1bHQnKTogT2JzZXJ2YWJsZTxDYXJkVmlld0dyb3VwW10+IHtcbiAgICAgICAgbGV0IGdyb3VwZWRQcm9wZXJ0aWVzID0gb2YoW10pO1xuXG4gICAgICAgIGlmIChub2RlLmFzcGVjdE5hbWVzKSB7XG4gICAgICAgICAgICBjb25zdCBjb25maWcgPSB0aGlzLmNvbnRlbnRNZXRhZGF0YUNvbmZpZ0ZhY3RvcnkuZ2V0KHByZXNldE5hbWUpLFxuICAgICAgICAgICAgICAgIGdyb3VwTmFtZXMgPSBub2RlLmFzcGVjdE5hbWVzXG4gICAgICAgICAgICAgICAgICAgIC5jb25jYXQobm9kZS5ub2RlVHlwZSlcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihncm91cE5hbWUgPT4gY29uZmlnLmlzR3JvdXBBbGxvd2VkKGdyb3VwTmFtZSkpO1xuXG4gICAgICAgICAgICBpZiAoZ3JvdXBOYW1lcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZ3JvdXBlZFByb3BlcnRpZXMgPSB0aGlzLnByb3BlcnR5RGVzY3JpcHRvcnNTZXJ2aWNlLmxvYWQoZ3JvdXBOYW1lcykucGlwZShcbiAgICAgICAgICAgICAgICAgICAgbWFwKGdyb3VwcyA9PiBjb25maWcucmVvcmdhbmlzZUJ5Q29uZmlnKGdyb3VwcykpLFxuICAgICAgICAgICAgICAgICAgICBtYXAoZ3JvdXBzID0+IHRoaXMucHJvcGVydHlHcm91cFRyYW5zbGF0b3JTZXJ2aWNlLnRyYW5zbGF0ZVRvQ2FyZFZpZXdHcm91cHMoZ3JvdXBzLCBub2RlLnByb3BlcnRpZXMpKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZ3JvdXBlZFByb3BlcnRpZXM7XG4gICAgfVxufVxuIiwiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgT25DaGFuZ2VzLCBPbkRlc3Ryb3ksIE9uSW5pdCwgU2ltcGxlQ2hhbmdlcywgVmlld0VuY2Fwc3VsYXRpb24gfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE1pbmltYWxOb2RlRW50cnlFbnRpdHkgfSBmcm9tICdhbGZyZXNjby1qcy1hcGknO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBDYXJkVmlld0l0ZW0sIE5vZGVzQXBpU2VydmljZSwgTG9nU2VydmljZSwgQ2FyZFZpZXdVcGRhdGVTZXJ2aWNlLCBBbGZyZXNjb0FwaVNlcnZpY2UgfSBmcm9tICdAYWxmcmVzY28vYWRmLWNvcmUnO1xuaW1wb3J0IHsgQ29udGVudE1ldGFkYXRhU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2NvbnRlbnQtbWV0YWRhdGEuc2VydmljZSc7XG5pbXBvcnQgeyBDYXJkVmlld0dyb3VwIH0gZnJvbSAnLi4vLi4vaW50ZXJmYWNlcy9jb250ZW50LW1ldGFkYXRhLmludGVyZmFjZXMnO1xuaW1wb3J0IHsgc3dpdGNoTWFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ2FkZi1jb250ZW50LW1ldGFkYXRhJyxcbiAgICB0ZW1wbGF0ZVVybDogJy4vY29udGVudC1tZXRhZGF0YS5jb21wb25lbnQuaHRtbCcsXG4gICAgc3R5bGVVcmxzOiBbJy4vY29udGVudC1tZXRhZGF0YS5jb21wb25lbnQuc2NzcyddLFxuICAgIGhvc3Q6IHsgJ2NsYXNzJzogJ2FkZi1jb250ZW50LW1ldGFkYXRhJyB9LFxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmVcbn0pXG5leHBvcnQgY2xhc3MgQ29udGVudE1ldGFkYXRhQ29tcG9uZW50IGltcGxlbWVudHMgT25DaGFuZ2VzLCBPbkluaXQsIE9uRGVzdHJveSB7XG4gICAgLyoqIChyZXF1aXJlZCkgVGhlIG5vZGUgZW50aXR5IHRvIGZldGNoIG1ldGFkYXRhIGFib3V0ICovXG4gICAgQElucHV0KClcbiAgICBub2RlOiBNaW5pbWFsTm9kZUVudHJ5RW50aXR5O1xuXG4gICAgLyoqIFRvZ2dsZXMgd2hldGhlciB0aGUgZWRpdCBidXR0b24gc2hvdWxkIGJlIHNob3duICovXG4gICAgQElucHV0KClcbiAgICBlZGl0YWJsZTogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgLyoqIFRvZ2dsZXMgd2hldGhlciB0byBkaXNwbGF5IGVtcHR5IHZhbHVlcyBpbiB0aGUgY2FyZCB2aWV3ICovXG4gICAgQElucHV0KClcbiAgICBkaXNwbGF5RW1wdHk6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIC8qKiBUb2dnbGVzIGJldHdlZW4gZXhwYW5kZWQgKGllLCBmdWxsIGluZm9ybWF0aW9uKSBhbmQgY29sbGFwc2VkXG4gICAgICogKGllLCByZWR1Y2VkIGluZm9ybWF0aW9uKSBpbiB0aGUgZGlzcGxheVxuICAgICAqL1xuICAgIEBJbnB1dCgpXG4gICAgZXhwYW5kZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIC8qKiBUaGUgbXVsdGkgcGFyYW1ldGVyIG9mIHRoZSB1bmRlcmx5aW5nIG1hdGVyaWFsIGV4cGFuc2lvbiBwYW5lbCwgc2V0IHRvIHRydWUgdG8gYWxsb3cgbXVsdGkgYWNjb3JkaW9uIHRvIGJlIGV4cGFuZGVkIGF0IHRoZSBzYW1lIHRpbWUgKi9cbiAgICBASW5wdXQoKVxuICAgIG11bHRpID0gZmFsc2U7XG5cbiAgICAvKiogTmFtZSBvZiB0aGUgbWV0YWRhdGEgcHJlc2V0LCB3aGljaCBkZWZpbmVzIGFzcGVjdHMgYW5kIHRoZWlyIHByb3BlcnRpZXMgKi9cbiAgICBASW5wdXQoKVxuICAgIHByZXNldDogc3RyaW5nO1xuXG4gICAgLyoqIFRvZ2dsZXMgd2hldGhlciB0aGUgbWV0YWRhdGEgcHJvcGVydGllcyBzaG91bGQgYmUgc2hvd24gKi9cbiAgICBASW5wdXQoKVxuICAgIGRpc3BsYXlEZWZhdWx0UHJvcGVydGllczogYm9vbGVhbiA9IHRydWU7XG5cbiAgICBiYXNpY1Byb3BlcnRpZXMkOiBPYnNlcnZhYmxlPENhcmRWaWV3SXRlbVtdPjtcbiAgICBncm91cGVkUHJvcGVydGllcyQ6IE9ic2VydmFibGU8Q2FyZFZpZXdHcm91cFtdPjtcbiAgICBkaXNwb3NhYmxlTm9kZVVwZGF0ZTogU3Vic2NyaXB0aW9uO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgY29udGVudE1ldGFkYXRhU2VydmljZTogQ29udGVudE1ldGFkYXRhU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBjYXJkVmlld1VwZGF0ZVNlcnZpY2U6IENhcmRWaWV3VXBkYXRlU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBub2Rlc0FwaVNlcnZpY2U6IE5vZGVzQXBpU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBsb2dTZXJ2aWNlOiBMb2dTZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGFsZnJlc2NvQXBpU2VydmljZTogQWxmcmVzY29BcGlTZXJ2aWNlXG4gICAgKSB7fVxuXG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMuZGlzcG9zYWJsZU5vZGVVcGRhdGUgPSAgdGhpcy5jYXJkVmlld1VwZGF0ZVNlcnZpY2UuaXRlbVVwZGF0ZWQkXG4gICAgICAgICAgICAucGlwZShcbiAgICAgICAgICAgICAgICBzd2l0Y2hNYXAodGhpcy5zYXZlTm9kZS5iaW5kKHRoaXMpKVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLnN1YnNjcmliZShcbiAgICAgICAgICAgICAgICB1cGRhdGVkTm9kZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5ub2RlLCB1cGRhdGVkTm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWxmcmVzY29BcGlTZXJ2aWNlLm5vZGVVcGRhdGVkLm5leHQodGhpcy5ub2RlKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVycm9yID0+IHRoaXMubG9nU2VydmljZS5lcnJvcihlcnJvcilcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5sb2FkUHJvcGVydGllcyh0aGlzLm5vZGUpO1xuICAgIH1cblxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcbiAgICAgICAgaWYgKGNoYW5nZXMubm9kZSAmJiAhY2hhbmdlcy5ub2RlLmZpcnN0Q2hhbmdlKSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRQcm9wZXJ0aWVzKGNoYW5nZXMubm9kZS5jdXJyZW50VmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBsb2FkUHJvcGVydGllcyhub2RlOiBNaW5pbWFsTm9kZUVudHJ5RW50aXR5KSB7XG4gICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgICB0aGlzLmJhc2ljUHJvcGVydGllcyQgPSB0aGlzLmNvbnRlbnRNZXRhZGF0YVNlcnZpY2UuZ2V0QmFzaWNQcm9wZXJ0aWVzKG5vZGUpO1xuICAgICAgICAgICAgdGhpcy5ncm91cGVkUHJvcGVydGllcyQgPSB0aGlzLmNvbnRlbnRNZXRhZGF0YVNlcnZpY2UuZ2V0R3JvdXBlZFByb3BlcnRpZXMobm9kZSwgdGhpcy5wcmVzZXQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzYXZlTm9kZSh7IGNoYW5nZWQ6IG5vZGVCb2R5IH0pOiBPYnNlcnZhYmxlPE1pbmltYWxOb2RlRW50cnlFbnRpdHk+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZXNBcGlTZXJ2aWNlLnVwZGF0ZU5vZGUodGhpcy5ub2RlLmlkLCBub2RlQm9keSk7XG4gICAgfVxuXG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuZGlzcG9zYWJsZU5vZGVVcGRhdGUudW5zdWJzY3JpYmUoKTtcbiAgICB9XG5cbn1cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBGbGV4TGF5b3V0TW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvZmxleC1sYXlvdXQnO1xuaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE1hdGVyaWFsTW9kdWxlIH0gZnJvbSAnLi4vbWF0ZXJpYWwubW9kdWxlJztcbmltcG9ydCB7IENvcmVNb2R1bGUgfSBmcm9tICdAYWxmcmVzY28vYWRmLWNvcmUnO1xuaW1wb3J0IHsgQ29udGVudE1ldGFkYXRhQ29tcG9uZW50IH0gZnJvbSAnLi9jb21wb25lbnRzL2NvbnRlbnQtbWV0YWRhdGEvY29udGVudC1tZXRhZGF0YS5jb21wb25lbnQnO1xuaW1wb3J0IHsgQ29udGVudE1ldGFkYXRhQ2FyZENvbXBvbmVudCB9IGZyb20gJy4vY29tcG9uZW50cy9jb250ZW50LW1ldGFkYXRhLWNhcmQvY29udGVudC1tZXRhZGF0YS1jYXJkLmNvbXBvbmVudCc7XG5cbkBOZ01vZHVsZSh7XG4gICAgaW1wb3J0czogW1xuICAgICAgICBDb21tb25Nb2R1bGUsXG4gICAgICAgIE1hdGVyaWFsTW9kdWxlLFxuICAgICAgICBGbGV4TGF5b3V0TW9kdWxlLFxuICAgICAgICBDb3JlTW9kdWxlLmZvckNoaWxkKClcbiAgICBdLFxuICAgIGV4cG9ydHM6IFtcbiAgICAgICAgQ29udGVudE1ldGFkYXRhQ29tcG9uZW50LFxuICAgICAgICBDb250ZW50TWV0YWRhdGFDYXJkQ29tcG9uZW50XG4gICAgXSxcbiAgICBkZWNsYXJhdGlvbnM6IFtcbiAgICAgICAgQ29udGVudE1ldGFkYXRhQ29tcG9uZW50LFxuICAgICAgICBDb250ZW50TWV0YWRhdGFDYXJkQ29tcG9uZW50XG4gICAgXVxufSlcbmV4cG9ydCBjbGFzcyBDb250ZW50TWV0YWRhdGFNb2R1bGUge31cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IFBlcm1pc3Npb25FbGVtZW50IH0gZnJvbSAnYWxmcmVzY28tanMtYXBpJztcblxuZXhwb3J0IGNsYXNzIFBlcm1pc3Npb25EaXNwbGF5TW9kZWwgaW1wbGVtZW50cyBQZXJtaXNzaW9uRWxlbWVudCB7XG5cbiAgICBhdXRob3JpdHlJZD86IHN0cmluZztcbiAgICBuYW1lPzogc3RyaW5nO1xuICAgIGFjY2Vzc1N0YXR1cz86IFBlcm1pc3Npb25FbGVtZW50LkFjY2Vzc1N0YXR1c0VudW07XG4gICAgaXNJbmhlcml0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBpY29uOiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihvYmo/OiBhbnkpIHtcbiAgICAgICAgaWYgKG9iaikge1xuICAgICAgICAgICAgdGhpcy5hdXRob3JpdHlJZCA9IG9iai5hdXRob3JpdHlJZDtcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IG9iai5uYW1lO1xuICAgICAgICAgICAgdGhpcy5hY2Nlc3NTdGF0dXMgPSBvYmouYWNjZXNzU3RhdHVzO1xuICAgICAgICAgICAgdGhpcy5pc0luaGVyaXRlZCA9IG9iai5pc0luaGVyaXRlZCAhPT0gbnVsbCAmJiBvYmouaXNJbmhlcml0ZWQgIT09IHVuZGVmaW5lZCA/IG9iai5pc0luaGVyaXRlZCA6IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pY29uID0gb2JqLmljb24gPyBvYmouaWNvbiA6ICd2cG5fa2V5JztcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE9ic2VydmFibGUsIG9mLCBmcm9tLCB0aHJvd0Vycm9yIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBBbGZyZXNjb0FwaVNlcnZpY2UsIFNlYXJjaFNlcnZpY2UsIE5vZGVzQXBpU2VydmljZSwgVHJhbnNsYXRpb25TZXJ2aWNlIH0gZnJvbSAnQGFsZnJlc2NvL2FkZi1jb3JlJztcbmltcG9ydCB7IFF1ZXJ5Qm9keSwgTWluaW1hbE5vZGVFbnRyeUVudGl0eSwgTWluaW1hbE5vZGVFbnRpdHksIFBhdGhFbGVtZW50LCBHcm91cE1lbWJlckVudHJ5LCBHcm91cHNQYWdpbmcsIEdyb3VwTWVtYmVyUGFnaW5nLCBQZXJtaXNzaW9uRWxlbWVudCB9IGZyb20gJ2FsZnJlc2NvLWpzLWFwaSc7XG5pbXBvcnQgeyBzd2l0Y2hNYXAsIG1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIE5vZGVQZXJtaXNzaW9uU2VydmljZSB7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGFwaVNlcnZpY2U6IEFsZnJlc2NvQXBpU2VydmljZSxcbiAgICAgICAgICAgICAgICBwcml2YXRlIHNlYXJjaEFwaVNlcnZpY2U6IFNlYXJjaFNlcnZpY2UsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSBub2RlU2VydmljZTogTm9kZXNBcGlTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIHByaXZhdGUgdHJhbnNsYXRpb246IFRyYW5zbGF0aW9uU2VydmljZSkge1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgYSBsaXN0IG9mIHJvbGVzIGZvciB0aGUgY3VycmVudCBub2RlLlxuICAgICAqIEBwYXJhbSBub2RlIFRoZSB0YXJnZXQgbm9kZVxuICAgICAqIEByZXR1cm5zIEFycmF5IG9mIHN0cmluZ3MgcmVwcmVzZW50aW5nIHRoZSByb2xlc1xuICAgICAqL1xuICAgIGdldE5vZGVSb2xlcyhub2RlOiBNaW5pbWFsTm9kZUVudHJ5RW50aXR5KTogT2JzZXJ2YWJsZTxzdHJpbmdbXT4ge1xuICAgICAgICBjb25zdCByZXRyaWV2ZVNpdGVRdWVyeUJvZHk6IFF1ZXJ5Qm9keSA9IHRoaXMuYnVpbGRSZXRyaWV2ZVNpdGVRdWVyeUJvZHkobm9kZS5wYXRoLmVsZW1lbnRzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VhcmNoQXBpU2VydmljZS5zZWFyY2hCeVF1ZXJ5Qm9keShyZXRyaWV2ZVNpdGVRdWVyeUJvZHkpXG4gICAgICAgICAgICAucGlwZShcbiAgICAgICAgICAgICAgICBzd2l0Y2hNYXAoKHNpdGVOb2RlTGlzdDogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggc2l0ZU5vZGVMaXN0Lmxpc3QuZW50cmllcy5sZW5ndGggPiAwICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNpdGVOYW1lID0gc2l0ZU5vZGVMaXN0Lmxpc3QuZW50cmllc1swXS5lbnRyeS5uYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0R3JvdXBNZW1iZXJzQnlTaXRlTmFtZShzaXRlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2Yobm9kZS5wZXJtaXNzaW9ucy5zZXR0YWJsZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBwZXJtaXNzaW9uIHJvbGUgZm9yIGEgbm9kZS5cbiAgICAgKiBAcGFyYW0gbm9kZSBUYXJnZXQgbm9kZVxuICAgICAqIEBwYXJhbSB1cGRhdGVkUGVybWlzc2lvblJvbGUgUGVybWlzc2lvbiByb2xlIHRvIHVwZGF0ZSBvciBhZGRcbiAgICAgKiBAcmV0dXJucyBOb2RlIHdpdGggdXBkYXRlZCBwZXJtaXNzaW9uXG4gICAgICovXG4gICAgdXBkYXRlUGVybWlzc2lvblJvbGUobm9kZTogTWluaW1hbE5vZGVFbnRyeUVudGl0eSwgdXBkYXRlZFBlcm1pc3Npb25Sb2xlOiBQZXJtaXNzaW9uRWxlbWVudCk6IE9ic2VydmFibGU8TWluaW1hbE5vZGVFbnRyeUVudGl0eT4ge1xuICAgICAgICBsZXQgcGVybWlzc2lvbkJvZHkgPSB7IHBlcm1pc3Npb25zOiB7IGxvY2FsbHlTZXQ6IFtdfSB9O1xuICAgICAgICBjb25zdCBpbmRleCA9IG5vZGUucGVybWlzc2lvbnMubG9jYWxseVNldC5tYXAoKHBlcm1pc3Npb24pID0+IHBlcm1pc3Npb24uYXV0aG9yaXR5SWQpLmluZGV4T2YodXBkYXRlZFBlcm1pc3Npb25Sb2xlLmF1dGhvcml0eUlkKTtcbiAgICAgICAgcGVybWlzc2lvbkJvZHkucGVybWlzc2lvbnMubG9jYWxseVNldCA9IHBlcm1pc3Npb25Cb2R5LnBlcm1pc3Npb25zLmxvY2FsbHlTZXQuY29uY2F0KG5vZGUucGVybWlzc2lvbnMubG9jYWxseVNldCk7XG4gICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgIHBlcm1pc3Npb25Cb2R5LnBlcm1pc3Npb25zLmxvY2FsbHlTZXRbaW5kZXhdID0gdXBkYXRlZFBlcm1pc3Npb25Sb2xlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGVybWlzc2lvbkJvZHkucGVybWlzc2lvbnMubG9jYWxseVNldC5wdXNoKHVwZGF0ZWRQZXJtaXNzaW9uUm9sZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZVNlcnZpY2UudXBkYXRlTm9kZShub2RlLmlkLCBwZXJtaXNzaW9uQm9keSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHBlcm1pc3Npb25zIGZvciBhIG5vZGUuXG4gICAgICogQHBhcmFtIG5vZGVJZCBJRCBvZiB0aGUgdGFyZ2V0IG5vZGVcbiAgICAgKiBAcGFyYW0gcGVybWlzc2lvbkxpc3QgTmV3IHBlcm1pc3Npb24gc2V0dGluZ3NcbiAgICAgKiBAcmV0dXJucyBOb2RlIHdpdGggdXBkYXRlZCBwZXJtaXNzaW9uc1xuICAgICAqL1xuICAgIHVwZGF0ZU5vZGVQZXJtaXNzaW9ucyhub2RlSWQ6IHN0cmluZywgcGVybWlzc2lvbkxpc3Q6IE1pbmltYWxOb2RlRW50aXR5W10pOiBPYnNlcnZhYmxlPE1pbmltYWxOb2RlRW50cnlFbnRpdHk+IHtcbiAgICAgICByZXR1cm4gdGhpcy5ub2RlU2VydmljZS5nZXROb2RlKG5vZGVJZCkucGlwZShcbiAgICAgICAgICAgc3dpdGNoTWFwKG5vZGUgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldE5vZGVSb2xlcyhub2RlKS5waXBlKFxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2hNYXAoKG5vZGVSb2xlcykgPT4gb2Yoe25vZGUsIG5vZGVSb2xlc30pIClcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBzd2l0Y2hNYXAoKHtub2RlLCBub2RlUm9sZXN9KSA9PiB0aGlzLnVwZGF0ZUxvY2FsbHlTZXRQZXJtaXNzaW9ucyhub2RlLCBwZXJtaXNzaW9uTGlzdCwgbm9kZVJvbGVzKSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBsb2NhbGx5IHNldCBwZXJtaXNzaW9ucyBmb3IgYSBub2RlLlxuICAgICAqIEBwYXJhbSBub2RlIElEIG9mIHRoZSB0YXJnZXQgbm9kZVxuICAgICAqIEBwYXJhbSBub2RlcyBQZXJtaXNzaW9uIHNldHRpbmdzXG4gICAgICogQHBhcmFtIG5vZGVSb2xlIFBlcm1pc3Npb24gcm9sZVxuICAgICAqIEByZXR1cm5zIE5vZGUgd2l0aCB1cGRhdGVkIHBlcm1pc3Npb25zXG4gICAgICovXG4gICAgdXBkYXRlTG9jYWxseVNldFBlcm1pc3Npb25zKG5vZGU6IE1pbmltYWxOb2RlRW50cnlFbnRpdHksIG5vZGVzOiBNaW5pbWFsTm9kZUVudGl0eVtdLCBub2RlUm9sZTogc3RyaW5nW10pOiBPYnNlcnZhYmxlPE1pbmltYWxOb2RlRW50cnlFbnRpdHk+IHtcbiAgICAgICAgbGV0IHBlcm1pc3Npb25Cb2R5ID0geyBwZXJtaXNzaW9uczogeyBsb2NhbGx5U2V0OiBbXX0gfTtcbiAgICAgICAgY29uc3QgcGVybWlzc2lvbkxpc3QgPSB0aGlzLnRyYW5zZm9ybU5vZGVUb1Blcm1pc3Npb25FbGVtZW50KG5vZGVzLCBub2RlUm9sZVswXSk7XG4gICAgICAgIGNvbnN0IGR1cGxpY2F0ZWRQZXJtaXNzaW9ucyA9IHRoaXMuZ2V0RHVwbGljYXRlZFBlcm1pc3Npb25zKG5vZGUucGVybWlzc2lvbnMubG9jYWxseVNldCwgcGVybWlzc2lvbkxpc3QpO1xuICAgICAgICBpZiAoZHVwbGljYXRlZFBlcm1pc3Npb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGxpc3QgPSBkdXBsaWNhdGVkUGVybWlzc2lvbnMubWFwKChwZXJtaXNzaW9uKSA9PiAnYXV0aG9yaXR5IC0+ICcgKyBwZXJtaXNzaW9uLmF1dGhvcml0eUlkICsgJyAvIHJvbGUgLT4gJyArIHBlcm1pc3Npb24ubmFtZSkuam9pbignLCAnKTtcbiAgICAgICAgICAgIGNvbnN0IGR1cGxpY2F0ZVBlcm1pc3Npb25NZXNzYWdlOiBzdHJpbmcgPSB0aGlzLnRyYW5zbGF0aW9uLmluc3RhbnQoJ1BFUk1JU1NJT05fTUFOQUdFUi5FUlJPUi5EVVBMSUNBVEUtUEVSTUlTU0lPTicsICB7bGlzdH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRocm93RXJyb3IoZHVwbGljYXRlUGVybWlzc2lvbk1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIHBlcm1pc3Npb25Cb2R5LnBlcm1pc3Npb25zLmxvY2FsbHlTZXQgPSBub2RlLnBlcm1pc3Npb25zLmxvY2FsbHlTZXQgPyBub2RlLnBlcm1pc3Npb25zLmxvY2FsbHlTZXQuY29uY2F0KHBlcm1pc3Npb25MaXN0KSA6IHBlcm1pc3Npb25MaXN0O1xuICAgICAgICByZXR1cm4gdGhpcy5ub2RlU2VydmljZS51cGRhdGVOb2RlKG5vZGUuaWQsIHBlcm1pc3Npb25Cb2R5KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldER1cGxpY2F0ZWRQZXJtaXNzaW9ucyhub2RlTG9jYWxseVNldDogUGVybWlzc2lvbkVsZW1lbnRbXSwgcGVybWlzc2lvbkxpc3RBZGRlZDogUGVybWlzc2lvbkVsZW1lbnRbXSk6IFBlcm1pc3Npb25FbGVtZW50W10ge1xuICAgICAgICBsZXQgZHVwbGljYXRlUGVybWlzc2lvbnM6IFBlcm1pc3Npb25FbGVtZW50W10gPSBbXTtcbiAgICAgICAgaWYgKG5vZGVMb2NhbGx5U2V0KSB7XG4gICAgICAgICAgICBwZXJtaXNzaW9uTGlzdEFkZGVkLmZvckVhY2goKHBlcm1pc3Npb246IFBlcm1pc3Npb25FbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZHVwbGljYXRlID0gbm9kZUxvY2FsbHlTZXQuZmluZCgobG9jYWxQZXJtaXNzaW9uKSA9PiB0aGlzLmlzRXF1YWxQZXJtaXNzaW9uKGxvY2FsUGVybWlzc2lvbiwgcGVybWlzc2lvbikpO1xuICAgICAgICAgICAgICAgIGlmIChkdXBsaWNhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZHVwbGljYXRlUGVybWlzc2lvbnMucHVzaChkdXBsaWNhdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkdXBsaWNhdGVQZXJtaXNzaW9ucztcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzRXF1YWxQZXJtaXNzaW9uKG9sZFBlcm1pc3Npb246IFBlcm1pc3Npb25FbGVtZW50LCBuZXdQZXJtaXNzaW9uOiBQZXJtaXNzaW9uRWxlbWVudCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gb2xkUGVybWlzc2lvbi5hY2Nlc3NTdGF0dXMgPT09IG5ld1Blcm1pc3Npb24uYWNjZXNzU3RhdHVzICYmXG4gICAgICAgICAgICAgICBvbGRQZXJtaXNzaW9uLmF1dGhvcml0eUlkID09PSBuZXdQZXJtaXNzaW9uLmF1dGhvcml0eUlkICYmXG4gICAgICAgICAgICAgICBvbGRQZXJtaXNzaW9uLm5hbWUgPT09IG5ld1Blcm1pc3Npb24ubmFtZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHRyYW5zZm9ybU5vZGVUb1Blcm1pc3Npb25FbGVtZW50KG5vZGVzOiBNaW5pbWFsTm9kZUVudGl0eVtdLCBub2RlUm9sZTogYW55KTogUGVybWlzc2lvbkVsZW1lbnRbXSB7XG4gICAgICAgIHJldHVybiBub2Rlcy5tYXAoKG5vZGUpID0+IHtcbiAgICAgICAgICAgIGxldCBuZXdQZXJtaXNzaW9uRWxlbWVudDogUGVybWlzc2lvbkVsZW1lbnQgPSA8UGVybWlzc2lvbkVsZW1lbnQ+IHtcbiAgICAgICAgICAgICAgICAnYXV0aG9yaXR5SWQnOiBub2RlLmVudHJ5LnByb3BlcnRpZXNbJ2NtOmF1dGhvcml0eU5hbWUnXSA/XG4gICAgICAgICAgICAgICAgICAgIG5vZGUuZW50cnkucHJvcGVydGllc1snY206YXV0aG9yaXR5TmFtZSddIDpcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5lbnRyeS5wcm9wZXJ0aWVzWydjbTp1c2VyTmFtZSddLFxuICAgICAgICAgICAgICAgICduYW1lJzogbm9kZVJvbGUsXG4gICAgICAgICAgICAgICAgJ2FjY2Vzc1N0YXR1cyc6ICdBTExPV0VEJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBuZXdQZXJtaXNzaW9uRWxlbWVudDtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIHBlcm1pc3Npb24gc2V0dGluZyBmcm9tIGEgbm9kZS5cbiAgICAgKiBAcGFyYW0gbm9kZSBJRCBvZiB0aGUgdGFyZ2V0IG5vZGVcbiAgICAgKiBAcGFyYW0gcGVybWlzc2lvblRvUmVtb3ZlIFBlcm1pc3Npb24gc2V0dGluZyB0byByZW1vdmVcbiAgICAgKiBAcmV0dXJucyBOb2RlIHdpdGggbW9kaWZpZWQgcGVybWlzc2lvbnNcbiAgICAgKi9cbiAgICByZW1vdmVQZXJtaXNzaW9uKG5vZGU6IE1pbmltYWxOb2RlRW50cnlFbnRpdHksIHBlcm1pc3Npb25Ub1JlbW92ZTogUGVybWlzc2lvbkVsZW1lbnQpOiBPYnNlcnZhYmxlPE1pbmltYWxOb2RlRW50cnlFbnRpdHk+IHtcbiAgICAgICAgbGV0IHBlcm1pc3Npb25Cb2R5ID0geyBwZXJtaXNzaW9uczogeyBsb2NhbGx5U2V0OiBbXSB9IH07XG4gICAgICAgIGNvbnN0IGluZGV4ID0gbm9kZS5wZXJtaXNzaW9ucy5sb2NhbGx5U2V0Lm1hcCgocGVybWlzc2lvbikgPT4gcGVybWlzc2lvbi5hdXRob3JpdHlJZCkuaW5kZXhPZihwZXJtaXNzaW9uVG9SZW1vdmUuYXV0aG9yaXR5SWQpO1xuICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICBub2RlLnBlcm1pc3Npb25zLmxvY2FsbHlTZXQuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIHBlcm1pc3Npb25Cb2R5LnBlcm1pc3Npb25zLmxvY2FsbHlTZXQgPSBub2RlLnBlcm1pc3Npb25zLmxvY2FsbHlTZXQ7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub2RlU2VydmljZS51cGRhdGVOb2RlKG5vZGUuaWQsIHBlcm1pc3Npb25Cb2R5KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0R3JvdXBNZW1iZXJzQnlTaXRlTmFtZShzaXRlTmFtZTogc3RyaW5nKTogT2JzZXJ2YWJsZTxzdHJpbmdbXT4ge1xuICAgICAgICBjb25zdCBncm91cE5hbWUgPSAnR1JPVVBfc2l0ZV8nICsgc2l0ZU5hbWU7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEdyb3VwTWVtZWJlckJ5R3JvdXBOYW1lKGdyb3VwTmFtZSlcbiAgICAgICAgICAgIC5waXBlKFxuICAgICAgICAgICAgICAgIG1hcCgocmVzOiBHcm91cHNQYWdpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRpc3BsYXlSZXN1bHQ6IHN0cmluZ1tdID0gW107XG4gICAgICAgICAgICAgICAgICAgIHJlcy5saXN0LmVudHJpZXMuZm9yRWFjaCgobWVtYmVyOiBHcm91cE1lbWJlckVudHJ5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5UmVzdWx0LnB1c2godGhpcy5mb3JtYXR0ZWRSb2xlTmFtZShtZW1iZXIuZW50cnkuZGlzcGxheU5hbWUsICdzaXRlXycgKyBzaXRlTmFtZSkpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRpc3BsYXlSZXN1bHQ7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBhbGwgbWVtYmVycyByZWxhdGVkIHRvIGEgZ3JvdXAgbmFtZS5cbiAgICAgKiBAcGFyYW0gZ3JvdXBOYW1lIE5hbWUgb2YgZ3JvdXAgdG8gbG9vayBmb3IgbWVtYmVyc1xuICAgICAqIEBwYXJhbSBvcHRzIEV4dHJhIG9wdGlvbnMgc3VwcG9ydGVkIGJ5IEpTQVBJXG4gICAgICogQHJldHVybnMgTGlzdCBvZiBtZW1iZXJzXG4gICAgICovXG4gICAgZ2V0R3JvdXBNZW1lYmVyQnlHcm91cE5hbWUoZ3JvdXBOYW1lOiBzdHJpbmcsIG9wdHM/OiBhbnkpOiBPYnNlcnZhYmxlPEdyb3VwTWVtYmVyUGFnaW5nPiB7XG4gICAgICAgIHJldHVybiBmcm9tPEdyb3VwTWVtYmVyUGFnaW5nPih0aGlzLmFwaVNlcnZpY2UuZ3JvdXBzQXBpLmdldEdyb3VwTWVtYmVycyhncm91cE5hbWUsIG9wdHMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGZvcm1hdHRlZFJvbGVOYW1lKGRpc3BsYXlOYW1lLCBzaXRlTmFtZSk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBkaXNwbGF5TmFtZS5yZXBsYWNlKHNpdGVOYW1lICsgJ18nLCAnJyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBidWlsZFJldHJpZXZlU2l0ZVF1ZXJ5Qm9keShub2RlUGF0aDogUGF0aEVsZW1lbnRbXSk6IFF1ZXJ5Qm9keSB7XG4gICAgICAgIGNvbnN0IHBhdGhOYW1lcyA9IG5vZGVQYXRoLm1hcCgobm9kZTogUGF0aEVsZW1lbnQpID0+ICduYW1lOiBcIicgKyBub2RlLm5hbWUgKyAnXCInKTtcbiAgICAgICAgY29uc3QgYnVpbGRlZFBhdGhOYW1lcyA9IHBhdGhOYW1lcy5qb2luKCcgT1IgJyk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAncXVlcnknOiB7XG4gICAgICAgICAgICAgICAgJ3F1ZXJ5JzogYnVpbGRlZFBhdGhOYW1lc1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdwYWdpbmcnOiB7XG4gICAgICAgICAgICAgICAgJ21heEl0ZW1zJzogMTAwLFxuICAgICAgICAgICAgICAgICdza2lwQ291bnQnOiAwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ2luY2x1ZGUnOiBbJ2FzcGVjdE5hbWVzJywgJ3Byb3BlcnRpZXMnXSxcbiAgICAgICAgICAgICdmaWx0ZXJRdWVyaWVzJzogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgJ3F1ZXJ5JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiVFlQRTonc3Q6c2l0ZSdcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgfTtcbiAgICB9XG5cbn1cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENvbXBvbmVudCwgVmlld0VuY2Fwc3VsYXRpb24sIElucHV0LCBPbkluaXQsIEV2ZW50RW1pdHRlciwgT3V0cHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBOb2Rlc0FwaVNlcnZpY2UgfSBmcm9tICdAYWxmcmVzY28vYWRmLWNvcmUnO1xuaW1wb3J0IHsgTWluaW1hbE5vZGVFbnRyeUVudGl0eSwgUGVybWlzc2lvbkVsZW1lbnQgfSBmcm9tICdhbGZyZXNjby1qcy1hcGknO1xuaW1wb3J0IHsgUGVybWlzc2lvbkRpc3BsYXlNb2RlbCB9IGZyb20gJy4uLy4uL21vZGVscy9wZXJtaXNzaW9uLm1vZGVsJztcbmltcG9ydCB7IE5vZGVQZXJtaXNzaW9uU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL25vZGUtcGVybWlzc2lvbi5zZXJ2aWNlJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdhZGYtcGVybWlzc2lvbi1saXN0JyxcbiAgICB0ZW1wbGF0ZVVybDogJy4vcGVybWlzc2lvbi1saXN0LmNvbXBvbmVudC5odG1sJyxcbiAgICBzdHlsZVVybHM6IFsnLi9wZXJtaXNzaW9uLWxpc3QuY29tcG9uZW50LnNjc3MnXSxcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lXG59KVxuZXhwb3J0IGNsYXNzIFBlcm1pc3Npb25MaXN0Q29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcblxuICAgIC8qKiBJRCBvZiB0aGUgbm9kZSB3aG9zZSBwZXJtaXNzaW9ucyB5b3Ugd2FudCB0byBzaG93LiAqL1xuICAgIEBJbnB1dCgpXG4gICAgbm9kZUlkOiBzdHJpbmcgPSAnJztcblxuICAgIC8qKiBFbWl0dGVkIHdoZW4gdGhlIHBlcm1pc3Npb24gaXMgdXBkYXRlZC4gKi9cbiAgICBAT3V0cHV0KClcbiAgICB1cGRhdGU6IEV2ZW50RW1pdHRlcjxQZXJtaXNzaW9uRWxlbWVudD4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgICAvKiogRW1pdHRlZCB3aGVuIGFuIGVycm9yIG9jY3Vycy4gKi9cbiAgICBAT3V0cHV0KClcbiAgICBlcnJvcjogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgICBwZXJtaXNzaW9uTGlzdDogUGVybWlzc2lvbkRpc3BsYXlNb2RlbFtdO1xuICAgIHNldHRhYmxlUm9sZXM6IGFueVtdO1xuICAgIGFjdHVhbE5vZGU6IE1pbmltYWxOb2RlRW50cnlFbnRpdHk7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIG5vZGVTZXJ2aWNlOiBOb2Rlc0FwaVNlcnZpY2UsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSBub2RlUGVybWlzc2lvblNlcnZpY2U6IE5vZGVQZXJtaXNzaW9uU2VydmljZSkge1xuXG4gICAgfVxuXG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMuZmV0Y2hOb2RlUGVybWlzc2lvbnMoKTtcbiAgICB9XG5cbiAgICByZWxvYWQoKSB7XG4gICAgICAgIHRoaXMuZmV0Y2hOb2RlUGVybWlzc2lvbnMoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGZldGNoTm9kZVBlcm1pc3Npb25zKCkge1xuICAgICAgICB0aGlzLm5vZGVTZXJ2aWNlLmdldE5vZGUodGhpcy5ub2RlSWQpLnN1YnNjcmliZSgobm9kZTogTWluaW1hbE5vZGVFbnRyeUVudGl0eSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hY3R1YWxOb2RlID0gbm9kZTtcbiAgICAgICAgICAgIHRoaXMucGVybWlzc2lvbkxpc3QgPSB0aGlzLmdldFBlcm1pc3Npb25MaXN0KG5vZGUpO1xuICAgICAgICAgICAgdGhpcy5ub2RlUGVybWlzc2lvblNlcnZpY2UuZ2V0Tm9kZVJvbGVzKG5vZGUpLnN1YnNjcmliZSgoc2V0dGFibGVMaXN0OiBzdHJpbmdbXSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0dGFibGVSb2xlcyA9ICBzZXR0YWJsZUxpc3Q7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRQZXJtaXNzaW9uTGlzdChub2RlOiBNaW5pbWFsTm9kZUVudHJ5RW50aXR5KTogUGVybWlzc2lvbkRpc3BsYXlNb2RlbFtdIHtcbiAgICAgICAgbGV0IGFsbFBlcm1pc3Npb25zOiBQZXJtaXNzaW9uRGlzcGxheU1vZGVsW10gPSBbXTtcbiAgICAgICAgaWYgKG5vZGUucGVybWlzc2lvbnMubG9jYWxseVNldCkge1xuICAgICAgICAgICAgbm9kZS5wZXJtaXNzaW9ucy5sb2NhbGx5U2V0Lm1hcCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBwZXJtaXNzaW9uID0gbmV3IFBlcm1pc3Npb25EaXNwbGF5TW9kZWwoZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgYWxsUGVybWlzc2lvbnMucHVzaChwZXJtaXNzaW9uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChub2RlLnBlcm1pc3Npb25zLmluaGVyaXRlZCkge1xuICAgICAgICAgICAgbm9kZS5wZXJtaXNzaW9ucy5pbmhlcml0ZWQubWFwKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHBlcm1pc3Npb25Jbmhlcml0ZWQgPSBuZXcgUGVybWlzc2lvbkRpc3BsYXlNb2RlbChlbGVtZW50KTtcbiAgICAgICAgICAgICAgICBwZXJtaXNzaW9uSW5oZXJpdGVkLmlzSW5oZXJpdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBhbGxQZXJtaXNzaW9ucy5wdXNoKHBlcm1pc3Npb25Jbmhlcml0ZWQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFsbFBlcm1pc3Npb25zO1xuICAgIH1cblxuICAgIHNhdmVOZXdSb2xlKGV2ZW50OiBhbnksIHBlcm1pc3Npb25Sb3c6IFBlcm1pc3Npb25EaXNwbGF5TW9kZWwpIHtcbiAgICAgICAgbGV0IHVwZGF0ZWRQZXJtaXNzaW9uUm9sZTogUGVybWlzc2lvbkVsZW1lbnQgPSB0aGlzLmJ1aWxkVXBkYXRlZFBlcm1pc3Npb24oZXZlbnQudmFsdWUsIHBlcm1pc3Npb25Sb3cpO1xuICAgICAgICB0aGlzLm5vZGVQZXJtaXNzaW9uU2VydmljZS51cGRhdGVQZXJtaXNzaW9uUm9sZSh0aGlzLmFjdHVhbE5vZGUsIHVwZGF0ZWRQZXJtaXNzaW9uUm9sZSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKG5vZGU6IE1pbmltYWxOb2RlRW50cnlFbnRpdHkpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZS5lbWl0KHVwZGF0ZWRQZXJtaXNzaW9uUm9sZSk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGJ1aWxkVXBkYXRlZFBlcm1pc3Npb24obmV3Um9sZTogc3RyaW5nLCBwZXJtaXNzaW9uUm93OiBQZXJtaXNzaW9uRGlzcGxheU1vZGVsKTogUGVybWlzc2lvbkVsZW1lbnQge1xuICAgICAgICBsZXQgcGVybWlzc2lvblJvbGU6IFBlcm1pc3Npb25FbGVtZW50ID0ge307XG4gICAgICAgIHBlcm1pc3Npb25Sb2xlLmFjY2Vzc1N0YXR1cyA9IHBlcm1pc3Npb25Sb3cuYWNjZXNzU3RhdHVzO1xuICAgICAgICBwZXJtaXNzaW9uUm9sZS5uYW1lID0gbmV3Um9sZTtcbiAgICAgICAgcGVybWlzc2lvblJvbGUuYXV0aG9yaXR5SWQgPSBwZXJtaXNzaW9uUm93LmF1dGhvcml0eUlkO1xuICAgICAgICByZXR1cm4gcGVybWlzc2lvblJvbGU7XG4gICAgfVxuXG4gICAgcmVtb3ZlUGVybWlzc2lvbihwZXJtaXNzaW9uUm93OiBQZXJtaXNzaW9uRGlzcGxheU1vZGVsKSB7XG4gICAgICAgIHRoaXMubm9kZVBlcm1pc3Npb25TZXJ2aWNlLnJlbW92ZVBlcm1pc3Npb24odGhpcy5hY3R1YWxOb2RlLCBwZXJtaXNzaW9uUm93KS5zdWJzY3JpYmUoKG5vZGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlLmVtaXQobm9kZSk7XG4gICAgICAgIH0sIChlcnJvcikgPT4gdGhpcy5lcnJvci5lbWl0KGVycm9yKSk7XG4gICAgfVxuXG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKiB0c2xpbnQ6ZGlzYWJsZTpuby1pbnB1dC1yZW5hbWUgICovXG5cbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ2FkZi1uby1wZXJtaXNzaW9uLXRlbXBsYXRlJyxcbiAgICB0ZW1wbGF0ZTogJzxuZy1jb250ZW50PjwvbmctY29udGVudD4nXG59KVxuZXhwb3J0IGNsYXNzIE5vUGVybWlzc2lvblRlbXBsYXRlQ29tcG9uZW50IHt9XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKiB0c2xpbnQ6ZGlzYWJsZTpuby1pbnB1dC1yZW5hbWUgICovXG5pbXBvcnQgeyBEaXJlY3RpdmUsIElucHV0LCBPdXRwdXQsIEV2ZW50RW1pdHRlciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTm9kZXNBcGlTZXJ2aWNlLCBDb250ZW50U2VydmljZSwgUGVybWlzc2lvbnNFbnVtIH0gZnJvbSAnQGFsZnJlc2NvL2FkZi1jb3JlJztcbmltcG9ydCB7IE1pbmltYWxOb2RlRW50cnlFbnRpdHkgfSBmcm9tICdhbGZyZXNjby1qcy1hcGknO1xuXG5ARGlyZWN0aXZlKHtcbiAgICBzZWxlY3RvcjogJ2J1dHRvblthZGYtaW5oZXJpdC1wZXJtaXNzaW9uXSwgbWF0LWJ1dHRvbi10b2dnbGVbYWRmLWluaGVyaXQtcGVybWlzc2lvbl0nLFxuICAgIGhvc3Q6IHtcbiAgICAgICAgJ3JvbGUnOiAnYnV0dG9uJyxcbiAgICAgICAgJyhjbGljayknOiAnb25Jbmhlcml0UGVybWlzc2lvbkNsaWNrZWQoKSdcbiAgICB9XG59KVxuZXhwb3J0IGNsYXNzIEluaGVyaXRQZXJtaXNzaW9uRGlyZWN0aXZlIHtcblxuICAgIC8qKiBJRCBvZiB0aGUgbm9kZSB0byBhZGQvcmVtb3ZlIGluaGVyaXRlZCBwZXJtaXNzaW9ucy4gKi9cbiAgICBASW5wdXQoKVxuICAgIG5vZGVJZDogc3RyaW5nO1xuXG4gICAgLyoqIEVtaXR0ZWQgd2hlbiB0aGUgbm9kZSBpcyB1cGRhdGVkLiAqL1xuICAgIEBPdXRwdXQoKVxuICAgIHVwZGF0ZWQ6IEV2ZW50RW1pdHRlcjxNaW5pbWFsTm9kZUVudHJ5RW50aXR5PiA9IG5ldyBFdmVudEVtaXR0ZXI8TWluaW1hbE5vZGVFbnRyeUVudGl0eT4oKTtcblxuICAgIC8qKiBFbWl0dGVkIHdoZW4gYW4gZXJyb3Igb2NjdXJzLiAqL1xuICAgIEBPdXRwdXQoKVxuICAgIGVycm9yOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBub2RlU2VydmljZTogTm9kZXNBcGlTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIHByaXZhdGUgY29udGVudFNlcnZpY2U6IENvbnRlbnRTZXJ2aWNlKSB7XG4gICAgfVxuXG4gICAgb25Jbmhlcml0UGVybWlzc2lvbkNsaWNrZWQoKSB7XG4gICAgICAgIHRoaXMubm9kZVNlcnZpY2UuZ2V0Tm9kZSh0aGlzLm5vZGVJZCkuc3Vic2NyaWJlKChub2RlOiBNaW5pbWFsTm9kZUVudHJ5RW50aXR5KSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5jb250ZW50U2VydmljZS5oYXNQZXJtaXNzaW9uKG5vZGUsIFBlcm1pc3Npb25zRW51bS5VUERBVEVQRVJNSVNTSU9OUykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBub2RlQm9keSA9IHsgcGVybWlzc2lvbnM6IHsgaXNJbmhlcml0YW5jZUVuYWJsZWQ6ICFub2RlLnBlcm1pc3Npb25zLmlzSW5oZXJpdGFuY2VFbmFibGVkIH0gfTtcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVTZXJ2aWNlLnVwZGF0ZU5vZGUodGhpcy5ub2RlSWQsIG5vZGVCb2R5LCB7IGluY2x1ZGU6IFsncGVybWlzc2lvbnMnXSB9KS5zdWJzY3JpYmUoKG5vZGVVcGRhdGVkOiBNaW5pbWFsTm9kZUVudHJ5RW50aXR5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlZC5lbWl0KG5vZGVVcGRhdGVkKTtcbiAgICAgICAgICAgICAgICB9LCAoZXJyb3IpID0+IHRoaXMuZXJyb3IuZW1pdChlcnJvcikpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVycm9yLmVtaXQoJ1BFUk1JU1NJT05fTUFOQUdFUi5FUlJPUi5OT1QtQUxMT1dFRCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbn1cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENvbXBvbmVudCwgVmlld0VuY2Fwc3VsYXRpb24sIEluamVjdCwgVmlld0NoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBNQVRfRElBTE9HX0RBVEEgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbCc7XG5pbXBvcnQgeyBNaW5pbWFsTm9kZUVudGl0eSB9IGZyb20gJ2FsZnJlc2NvLWpzLWFwaSc7XG5pbXBvcnQgeyBBZGRQZXJtaXNzaW9uRGlhbG9nRGF0YSB9IGZyb20gJy4vYWRkLXBlcm1pc3Npb24tZGlhbG9nLWRhdGEuaW50ZXJmYWNlJztcbmltcG9ydCB7IEFkZFBlcm1pc3Npb25Db21wb25lbnQgfSBmcm9tICcuLi9hZGQtcGVybWlzc2lvbi9hZGQtcGVybWlzc2lvbi5jb21wb25lbnQnO1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ2FkZi1hZGQtcGVybWlzc2lvbi1kaWFsb2cnLFxuICAgIHRlbXBsYXRlVXJsOiAnLi9hZGQtcGVybWlzc2lvbi1kaWFsb2cuY29tcG9uZW50Lmh0bWwnLFxuICAgIHN0eWxlVXJsczogWycuL2FkZC1wZXJtaXNzaW9uLWRpYWxvZy5jb21wb25lbnQuc2NzcyddLFxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmVcbn0pXG5leHBvcnQgY2xhc3MgQWRkUGVybWlzc2lvbkRpYWxvZ0NvbXBvbmVudCB7XG5cbiAgICBAVmlld0NoaWxkKCdhZGRQZXJtaXNzaW9uJylcbiAgICBhZGRQZXJtaXNzaW9uQ29tcG9uZW50OiBBZGRQZXJtaXNzaW9uQ29tcG9uZW50O1xuXG4gICAgY3VycmVudFNlbGVjdGlvbjogTWluaW1hbE5vZGVFbnRpdHlbXSA9IFtdO1xuXG4gICAgY29uc3RydWN0b3IoQEluamVjdChNQVRfRElBTE9HX0RBVEEpIHB1YmxpYyBkYXRhOiBBZGRQZXJtaXNzaW9uRGlhbG9nRGF0YSkge1xuICAgIH1cblxuICAgIG9uU2VsZWN0KGl0ZW1zOiBNaW5pbWFsTm9kZUVudGl0eVtdKSB7XG4gICAgICAgIHRoaXMuY3VycmVudFNlbGVjdGlvbiA9IGl0ZW1zO1xuICAgIH1cblxuICAgIG9uQWRkQ2xpY2tlZCgpIHtcbiAgICAgICAgdGhpcy5kYXRhLmNvbmZpcm0ubmV4dCh0aGlzLmN1cnJlbnRTZWxlY3Rpb24pO1xuICAgICAgICB0aGlzLmRhdGEuY29uZmlybS5jb21wbGV0ZSgpO1xuICAgIH1cbn1cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IE1hdERpYWxvZyB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsJztcbmltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFN1YmplY3QsIE9ic2VydmFibGUsIHRocm93RXJyb3IgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IEFkZFBlcm1pc3Npb25EaWFsb2dDb21wb25lbnQgfSBmcm9tICcuLi9jb21wb25lbnRzL2FkZC1wZXJtaXNzaW9uL2FkZC1wZXJtaXNzaW9uLWRpYWxvZy5jb21wb25lbnQnO1xuaW1wb3J0IHsgQWRkUGVybWlzc2lvbkRpYWxvZ0RhdGEgfSBmcm9tICcuLi9jb21wb25lbnRzL2FkZC1wZXJtaXNzaW9uL2FkZC1wZXJtaXNzaW9uLWRpYWxvZy1kYXRhLmludGVyZmFjZSc7XG5pbXBvcnQgeyBNaW5pbWFsTm9kZUVudGl0eSwgTWluaW1hbE5vZGVFbnRyeUVudGl0eSwgTm9kZSB9IGZyb20gJ2FsZnJlc2NvLWpzLWFwaSc7XG5pbXBvcnQgeyBOb2RlUGVybWlzc2lvblNlcnZpY2UgfSBmcm9tICcuL25vZGUtcGVybWlzc2lvbi5zZXJ2aWNlJztcbmltcG9ydCB7IENvbnRlbnRTZXJ2aWNlLCBQZXJtaXNzaW9uc0VudW0gfSBmcm9tICdAYWxmcmVzY28vYWRmLWNvcmUnO1xuaW1wb3J0IHsgc3dpdGNoTWFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgTm9kZVBlcm1pc3Npb25EaWFsb2dTZXJ2aWNlIHtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZGlhbG9nOiBNYXREaWFsb2csXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSBub2RlUGVybWlzc2lvblNlcnZpY2U6IE5vZGVQZXJtaXNzaW9uU2VydmljZSxcbiAgICAgICAgICAgICAgICBwcml2YXRlIGNvbnRlbnRTZXJ2aWNlOiBDb250ZW50U2VydmljZSkge1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9wZW5zIGEgZGlhbG9nIHRvIGFkZCBwZXJtaXNzaW9ucyB0byBhIG5vZGUuXG4gICAgICogQHBhcmFtIG5vZGUgSUQgb2YgdGhlIHRhcmdldCBub2RlXG4gICAgICogQHBhcmFtIHRpdGxlIERpYWxvZyB0aXRsZVxuICAgICAqIEByZXR1cm5zIE5vZGUgd2l0aCB1cGRhdGVkIHBlcm1pc3Npb25zXG4gICAgICovXG4gICAgb3BlbkFkZFBlcm1pc3Npb25EaWFsb2cobm9kZTogTm9kZSwgdGl0bGU/OiBzdHJpbmcpOiBPYnNlcnZhYmxlPE1pbmltYWxOb2RlRW50aXR5W10+IHtcbiAgICAgICAgaWYgKHRoaXMuY29udGVudFNlcnZpY2UuaGFzUGVybWlzc2lvbihub2RlLCBQZXJtaXNzaW9uc0VudW0uVVBEQVRFUEVSTUlTU0lPTlMpKSB7XG4gICAgICAgICAgICBjb25zdCBjb25maXJtID0gbmV3IFN1YmplY3Q8TWluaW1hbE5vZGVFbnRpdHlbXT4oKTtcblxuICAgICAgICAgICAgY29uZmlybS5zdWJzY3JpYmUoe1xuICAgICAgICAgICAgICAgIGNvbXBsZXRlOiB0aGlzLmNsb3NlLmJpbmQodGhpcylcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBkYXRhOiBBZGRQZXJtaXNzaW9uRGlhbG9nRGF0YSA9IHtcbiAgICAgICAgICAgICAgICBub2RlSWQ6IG5vZGUuaWQsXG4gICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgICAgICAgICAgIGNvbmZpcm06IGNvbmZpcm1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMub3BlbkRpYWxvZyhkYXRhLCAnYWRmLWFkZC1wZXJtaXNzaW9uLWRpYWxvZycsICc2MzBweCcpO1xuICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgZXJyb3JzID0gbmV3IEVycm9yKEpTT04uc3RyaW5naWZ5KHsgZXJyb3I6IHsgc3RhdHVzQ29kZTogNDAzIH0gfSkpO1xuICAgICAgICAgICAgZXJyb3JzLm1lc3NhZ2UgPSAnUEVSTUlTU0lPTl9NQU5BR0VSLkVSUk9SLk5PVC1BTExPV0VEJztcbiAgICAgICAgICAgIHJldHVybiB0aHJvd0Vycm9yKGVycm9ycyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIG9wZW5EaWFsb2coZGF0YTogYW55LCBjdXJyZW50UGFuZWxDbGFzczogc3RyaW5nLCBjaG9zZW5XaWR0aDogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuZGlhbG9nLm9wZW4oQWRkUGVybWlzc2lvbkRpYWxvZ0NvbXBvbmVudCwgeyBkYXRhLCBwYW5lbENsYXNzOiBjdXJyZW50UGFuZWxDbGFzcywgd2lkdGg6IGNob3NlbldpZHRoIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsb3NlcyB0aGUgY3VycmVudGx5LW9wZW4gZGlhbG9nLlxuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLmRpYWxvZy5jbG9zZUFsbCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9wZW5zIGEgZGlhbG9nIHRvIHVwZGF0ZSBwZXJtaXNzaW9ucyBmb3IgYSBub2RlLlxuICAgICAqIEBwYXJhbSBub2RlSWQgSUQgb2YgdGhlIHRhcmdldCBub2RlXG4gICAgICogQHBhcmFtIHRpdGxlIERpYWxvZyB0aXRsZVxuICAgICAqIEByZXR1cm5zIE5vZGUgd2l0aCB1cGRhdGVkIHBlcm1pc3Npb25zXG4gICAgICovXG4gICAgdXBkYXRlTm9kZVBlcm1pc3Npb25CeURpYWxvZyhub2RlSWQ/OiBzdHJpbmcsIHRpdGxlPzogc3RyaW5nKTogT2JzZXJ2YWJsZTxNaW5pbWFsTm9kZUVudHJ5RW50aXR5PiB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRTZXJ2aWNlLmdldE5vZGUobm9kZUlkLCB7IGluY2x1ZGU6IFsnYWxsb3dhYmxlT3BlcmF0aW9ucyddIH0pXG4gICAgICAgICAgICAucGlwZShcbiAgICAgICAgICAgICAgICBzd2l0Y2hNYXAobm9kZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm9wZW5BZGRQZXJtaXNzaW9uRGlhbG9nKG5vZGUuZW50cnksIHRpdGxlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnBpcGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoTWFwKHNlbGVjdGlvbiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5vZGVQZXJtaXNzaW9uU2VydmljZS51cGRhdGVOb2RlUGVybWlzc2lvbnMobm9kZUlkLCBzZWxlY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuICAgIH1cbn1cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IFF1ZXJ5Qm9keSB9IGZyb20gJ2FsZnJlc2NvLWpzLWFwaSc7XG5pbXBvcnQgeyBTZWFyY2hDb25maWd1cmF0aW9uSW50ZXJmYWNlIH0gZnJvbSAnQGFsZnJlc2NvL2FkZi1jb3JlJztcblxuZXhwb3J0IGNsYXNzIFNlYXJjaFBlcm1pc3Npb25Db25maWd1cmF0aW9uU2VydmljZSBpbXBsZW1lbnRzIFNlYXJjaENvbmZpZ3VyYXRpb25JbnRlcmZhY2Uge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgfVxuXG4gICAgcHVibGljIGdlbmVyYXRlUXVlcnlCb2R5KHNlYXJjaFRlcm06IHN0cmluZywgbWF4UmVzdWx0czogbnVtYmVyLCBza2lwQ291bnQ6IG51bWJlcik6IFF1ZXJ5Qm9keSB7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRRdWVyeUJvZHk6IFF1ZXJ5Qm9keSA9IHtcbiAgICAgICAgICAgIHF1ZXJ5OiB7XG4gICAgICAgICAgICAgICAgcXVlcnk6IHNlYXJjaFRlcm0gPyBgYXV0aG9yaXR5TmFtZToqJHtzZWFyY2hUZXJtfSogT1IgdXNlck5hbWU6KiR7c2VhcmNoVGVybX0qYCA6IHNlYXJjaFRlcm1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpbmNsdWRlOiBbJ3Byb3BlcnRpZXMnLCAnYXNwZWN0TmFtZXMnXSxcbiAgICAgICAgICAgIHBhZ2luZzoge1xuICAgICAgICAgICAgICAgIG1heEl0ZW1zOiBtYXhSZXN1bHRzLFxuICAgICAgICAgICAgICAgIHNraXBDb3VudDogc2tpcENvdW50XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZmlsdGVyUXVlcmllczogW1xuICAgICAgICAgICAgICAgIC8qdHNsaW50OmRpc2FibGUtbmV4dC1saW5lICovXG4gICAgICAgICAgICAgICAgeyBxdWVyeTogXCJUWVBFOidjbTphdXRob3JpdHknXCIgfV1cbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gZGVmYXVsdFF1ZXJ5Qm9keTtcbiAgICB9XG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQsIFZpZXdFbmNhcHN1bGF0aW9uLCBFdmVudEVtaXR0ZXIsIE91dHB1dCwgVmlld0NoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBTZWFyY2hQZXJtaXNzaW9uQ29uZmlndXJhdGlvblNlcnZpY2UgfSBmcm9tICcuL3NlYXJjaC1jb25maWctcGVybWlzc2lvbi5zZXJ2aWNlJztcbmltcG9ydCB7IFNlYXJjaFNlcnZpY2UsIFNlYXJjaENvbmZpZ3VyYXRpb25TZXJ2aWNlIH0gZnJvbSAnQGFsZnJlc2NvL2FkZi1jb3JlJztcbmltcG9ydCB7IFNlYXJjaENvbXBvbmVudCB9IGZyb20gJy4uLy4uLy4uL3NlYXJjaC9jb21wb25lbnRzL3NlYXJjaC5jb21wb25lbnQnO1xuaW1wb3J0IHsgRm9ybUNvbnRyb2wgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBkZWJvdW5jZVRpbWUgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBNaW5pbWFsTm9kZUVudGl0eSB9IGZyb20gJ2FsZnJlc2NvLWpzLWFwaSc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnYWRmLWFkZC1wZXJtaXNzaW9uLXBhbmVsJyxcbiAgICB0ZW1wbGF0ZVVybDogJy4vYWRkLXBlcm1pc3Npb24tcGFuZWwuY29tcG9uZW50Lmh0bWwnLFxuICAgIHN0eWxlVXJsczogWycuL2FkZC1wZXJtaXNzaW9uLXBhbmVsLmNvbXBvbmVudC5zY3NzJ10sXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZSxcbiAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgeyBwcm92aWRlOiBTZWFyY2hDb25maWd1cmF0aW9uU2VydmljZSwgdXNlQ2xhc3M6IFNlYXJjaFBlcm1pc3Npb25Db25maWd1cmF0aW9uU2VydmljZSB9LFxuICAgICAgICBTZWFyY2hTZXJ2aWNlXG4gICAgXVxufSlcbmV4cG9ydCBjbGFzcyBBZGRQZXJtaXNzaW9uUGFuZWxDb21wb25lbnQge1xuXG4gICAgQFZpZXdDaGlsZCgnc2VhcmNoJylcbiAgICBzZWFyY2g6IFNlYXJjaENvbXBvbmVudDtcblxuICAgIC8qKiBFbWl0dGVkIHdoZW4gYSBwZXJtaXNzaW9uIGxpc3QgaXRlbSBpcyBzZWxlY3RlZC4gKi9cbiAgICBAT3V0cHV0KClcbiAgICBzZWxlY3Q6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gICAgc2VhcmNoSW5wdXQ6IEZvcm1Db250cm9sID0gbmV3IEZvcm1Db250cm9sKCk7XG4gICAgc2VhcmNoZWRXb3JkID0gJyc7XG4gICAgZGVib3VuY2VTZWFyY2g6IG51bWJlciA9IDIwMDtcblxuICAgIHNlbGVjdGVkSXRlbXM6IE1pbmltYWxOb2RlRW50aXR5W10gPSBbXTtcblxuICAgIEVWRVJZT05FOiBNaW5pbWFsTm9kZUVudGl0eSA9IHsgZW50cnk6IHsgcHJvcGVydGllczogeydjbTphdXRob3JpdHlOYW1lJzogJ0dST1VQX0VWRVJZT05FJ319fTtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnNlYXJjaElucHV0LnZhbHVlQ2hhbmdlc1xuICAgICAgICAucGlwZShcbiAgICAgICAgICAgIGRlYm91bmNlVGltZSh0aGlzLmRlYm91bmNlU2VhcmNoKVxuICAgICAgICApXG4gICAgICAgIC5zdWJzY3JpYmUoKHNlYXJjaFZhbHVlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNlYXJjaGVkV29yZCA9IHNlYXJjaFZhbHVlO1xuICAgICAgICAgICAgaWYgKCFzZWFyY2hWYWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoLnJlc2V0UmVzdWx0cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBlbGVtZW50Q2xpY2tlZChpdGVtOiBNaW5pbWFsTm9kZUVudGl0eSkge1xuICAgICAgICBpZiAodGhpcy5pc0FscmVhZHlTZWxlY3RlZChpdGVtKSkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEl0ZW1zLnNwbGljZSh0aGlzLnNlbGVjdGVkSXRlbXMuaW5kZXhPZihpdGVtKSwgMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkSXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlbGVjdC5lbWl0KHRoaXMuc2VsZWN0ZWRJdGVtcyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc0FscmVhZHlTZWxlY3RlZChpdGVtOiBNaW5pbWFsTm9kZUVudGl0eSk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZEl0ZW1zLmluZGV4T2YoaXRlbSkgPj0gMDtcbiAgICB9XG5cbiAgICBjbGVhclNlYXJjaCgpIHtcbiAgICAgICAgdGhpcy5zZWFyY2hlZFdvcmQgPSAnJztcbiAgICAgICAgdGhpcy5zZWxlY3RlZEl0ZW1zLnNwbGljZSgwLCB0aGlzLnNlbGVjdGVkSXRlbXMubGVuZ3RoKTtcbiAgICAgICAgdGhpcy5zZWFyY2gucmVzZXRSZXN1bHRzKCk7XG4gICAgfVxuXG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQsIFZpZXdFbmNhcHN1bGF0aW9uLCBFdmVudEVtaXR0ZXIsIElucHV0LCBPdXRwdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE1pbmltYWxOb2RlRW50aXR5LCBNaW5pbWFsTm9kZUVudHJ5RW50aXR5IH0gZnJvbSAnYWxmcmVzY28tanMtYXBpJztcbmltcG9ydCB7IE5vZGVQZXJtaXNzaW9uU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL25vZGUtcGVybWlzc2lvbi5zZXJ2aWNlJztcbmltcG9ydCB7IE5vZGVzQXBpU2VydmljZSwgQ29udGVudFNlcnZpY2UsIFBlcm1pc3Npb25zRW51bSB9IGZyb20gJ0BhbGZyZXNjby9hZGYtY29yZSc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnYWRmLWFkZC1wZXJtaXNzaW9uJyxcbiAgICB0ZW1wbGF0ZVVybDogJy4vYWRkLXBlcm1pc3Npb24uY29tcG9uZW50Lmh0bWwnLFxuICAgIHN0eWxlVXJsczogWycuL2FkZC1wZXJtaXNzaW9uLmNvbXBvbmVudC5zY3NzJ10sXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZVxufSlcbmV4cG9ydCBjbGFzcyBBZGRQZXJtaXNzaW9uQ29tcG9uZW50IHtcblxuICAgIC8qKiBJRCBvZiB0aGUgdGFyZ2V0IG5vZGUuICovXG4gICAgQElucHV0KClcbiAgICBub2RlSWQ6IHN0cmluZztcblxuICAgIC8qKiBFbWl0dGVkIHdoZW4gdGhlIG5vZGUgaXMgdXBkYXRlZCBzdWNjZXNzZnVsbHkuICovXG4gICAgQE91dHB1dCgpXG4gICAgc3VjY2VzczogRXZlbnRFbWl0dGVyPE1pbmltYWxOb2RlRW50cnlFbnRpdHk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gICAgLyoqIEVtaXR0ZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMgZHVyaW5nIHRoZSB1cGRhdGUuICovXG4gICAgQE91dHB1dCgpXG4gICAgZXJyb3I6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gICAgc2VsZWN0ZWRJdGVtczogTWluaW1hbE5vZGVFbnRpdHlbXSA9IFtdO1xuICAgIGN1cnJlbnROb2RlOiBNaW5pbWFsTm9kZUVudHJ5RW50aXR5O1xuICAgIGN1cnJlbnROb2RlUm9sZXM6IHN0cmluZ1tdO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBub2RlUGVybWlzc2lvblNlcnZpY2U6IE5vZGVQZXJtaXNzaW9uU2VydmljZSxcbiAgICAgICAgICAgICAgICBwcml2YXRlIG5vZGVBcGlTZXJ2aWNlOiBOb2Rlc0FwaVNlcnZpY2UsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSBjb250ZW50U2VydmljZTogQ29udGVudFNlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5ub2RlQXBpU2VydmljZS5nZXROb2RlKHRoaXMubm9kZUlkKS5zdWJzY3JpYmUoKG5vZGUpID0+IHRoaXMuY3VycmVudE5vZGUgPSBub2RlKTtcbiAgICB9XG5cbiAgICBvblNlbGVjdChzZWxlY3Rpb246IE1pbmltYWxOb2RlRW50aXR5W10pIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZEl0ZW1zID0gc2VsZWN0aW9uO1xuICAgIH1cblxuICAgIGlzQWRkRW5hYmxlZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudFNlcnZpY2UuaGFzUGVybWlzc2lvbih0aGlzLmN1cnJlbnROb2RlLCBQZXJtaXNzaW9uc0VudW0uVVBEQVRFUEVSTUlTU0lPTlMpICYmXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEl0ZW1zLmxlbmd0aCAhPT0gMDtcbiAgICB9XG5cbiAgICBhcHBseVNlbGVjdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMuY29udGVudFNlcnZpY2UuaGFzUGVybWlzc2lvbih0aGlzLmN1cnJlbnROb2RlLCBQZXJtaXNzaW9uc0VudW0uVVBEQVRFUEVSTUlTU0lPTlMpKSB7XG4gICAgICAgICAgICB0aGlzLm5vZGVQZXJtaXNzaW9uU2VydmljZS51cGRhdGVOb2RlUGVybWlzc2lvbnModGhpcy5ub2RlSWQsIHRoaXMuc2VsZWN0ZWRJdGVtcylcbiAgICAgICAgICAgICAgICAuc3Vic2NyaWJlKFxuICAgICAgICAgICAgICAgICAgICAobm9kZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWNjZXNzLmVtaXQobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvci5lbWl0KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbn1cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRm9ybXNNb2R1bGUsIFJlYWN0aXZlRm9ybXNNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBNYXRlcmlhbE1vZHVsZSB9IGZyb20gJy4uL21hdGVyaWFsLm1vZHVsZSc7XG5pbXBvcnQgeyBQZXJtaXNzaW9uTGlzdENvbXBvbmVudCB9IGZyb20gJy4vY29tcG9uZW50cy9wZXJtaXNzaW9uLWxpc3QvcGVybWlzc2lvbi1saXN0LmNvbXBvbmVudCc7XG5pbXBvcnQgeyBBZGRQZXJtaXNzaW9uQ29tcG9uZW50IH0gZnJvbSAnLi9jb21wb25lbnRzL2FkZC1wZXJtaXNzaW9uL2FkZC1wZXJtaXNzaW9uLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBBZGRQZXJtaXNzaW9uRGlhbG9nQ29tcG9uZW50IH0gZnJvbSAnLi9jb21wb25lbnRzL2FkZC1wZXJtaXNzaW9uL2FkZC1wZXJtaXNzaW9uLWRpYWxvZy5jb21wb25lbnQnO1xuaW1wb3J0IHsgQ29yZU1vZHVsZSB9IGZyb20gJ0BhbGZyZXNjby9hZGYtY29yZSc7XG5pbXBvcnQgeyBJbmhlcml0UGVybWlzc2lvbkRpcmVjdGl2ZSB9IGZyb20gJy4vY29tcG9uZW50cy9pbmhlcml0ZWQtYnV0dG9uLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBOb1Blcm1pc3Npb25UZW1wbGF0ZUNvbXBvbmVudCB9IGZyb20gJy4vY29tcG9uZW50cy9wZXJtaXNzaW9uLWxpc3Qvbm8tcGVybWlzc2lvbi5jb21wb25lbnQnO1xuaW1wb3J0IHsgQWRkUGVybWlzc2lvblBhbmVsQ29tcG9uZW50IH0gZnJvbSAnLi9jb21wb25lbnRzL2FkZC1wZXJtaXNzaW9uL2FkZC1wZXJtaXNzaW9uLXBhbmVsLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBTZWFyY2hNb2R1bGUgfSBmcm9tICcuLi9zZWFyY2gvc2VhcmNoLm1vZHVsZSc7XG5cbkBOZ01vZHVsZSh7XG4gICAgaW1wb3J0czogW1xuICAgICAgICBDb3JlTW9kdWxlLmZvckNoaWxkKCksXG4gICAgICAgIENvbW1vbk1vZHVsZSxcbiAgICAgICAgRm9ybXNNb2R1bGUsXG4gICAgICAgIFJlYWN0aXZlRm9ybXNNb2R1bGUsXG4gICAgICAgIE1hdGVyaWFsTW9kdWxlLFxuICAgICAgICBTZWFyY2hNb2R1bGVcbiAgICBdLFxuICAgIGRlY2xhcmF0aW9uczogW1xuICAgICAgICBQZXJtaXNzaW9uTGlzdENvbXBvbmVudCxcbiAgICAgICAgTm9QZXJtaXNzaW9uVGVtcGxhdGVDb21wb25lbnQsXG4gICAgICAgIEFkZFBlcm1pc3Npb25QYW5lbENvbXBvbmVudCxcbiAgICAgICAgSW5oZXJpdFBlcm1pc3Npb25EaXJlY3RpdmUsXG4gICAgICAgIEFkZFBlcm1pc3Npb25Db21wb25lbnQsXG4gICAgICAgIEFkZFBlcm1pc3Npb25EaWFsb2dDb21wb25lbnRcbiAgICBdLFxuICAgIGVudHJ5Q29tcG9uZW50czogW1xuICAgICAgICBBZGRQZXJtaXNzaW9uUGFuZWxDb21wb25lbnQsXG4gICAgICAgIEFkZFBlcm1pc3Npb25Db21wb25lbnQsXG4gICAgICAgIEFkZFBlcm1pc3Npb25EaWFsb2dDb21wb25lbnRcbiAgICBdLFxuICAgIGV4cG9ydHM6IFtcbiAgICAgICAgUGVybWlzc2lvbkxpc3RDb21wb25lbnQsXG4gICAgICAgIE5vUGVybWlzc2lvblRlbXBsYXRlQ29tcG9uZW50LFxuICAgICAgICBBZGRQZXJtaXNzaW9uUGFuZWxDb21wb25lbnQsXG4gICAgICAgIEluaGVyaXRQZXJtaXNzaW9uRGlyZWN0aXZlLFxuICAgICAgICBBZGRQZXJtaXNzaW9uQ29tcG9uZW50LFxuICAgICAgICBBZGRQZXJtaXNzaW9uRGlhbG9nQ29tcG9uZW50XG4gICAgXVxufSlcbmV4cG9ydCBjbGFzcyBQZXJtaXNzaW9uTWFuYWdlck1vZHVsZSB7fVxuIiwiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgICBDb21wb25lbnQsXG4gICAgSW5qZWN0LFxuICAgIE9uSW5pdCxcbiAgICBWaWV3RW5jYXBzdWxhdGlvbixcbiAgICBWaWV3Q2hpbGQsXG4gICAgRWxlbWVudFJlZixcbiAgICBPbkRlc3Ryb3lcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBNQVRfRElBTE9HX0RBVEEsIE1hdERpYWxvZ1JlZiwgIE1hdERpYWxvZyB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsJztcbmltcG9ydCB7IEZvcm1Hcm91cCwgRm9ybUNvbnRyb2wgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24sIE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IHRhcCwgc2tpcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7XG4gICAgU2hhcmVkTGlua3NBcGlTZXJ2aWNlLFxuICAgIE5vZGVzQXBpU2VydmljZSxcbiAgICBDb250ZW50U2VydmljZVxufSBmcm9tICdAYWxmcmVzY28vYWRmLWNvcmUnO1xuaW1wb3J0IHsgU2hhcmVkTGlua0VudHJ5LCBNaW5pbWFsTm9kZUVudHJ5RW50aXR5IH0gZnJvbSAnYWxmcmVzY28tanMtYXBpJztcbmltcG9ydCB7IENvbmZpcm1EaWFsb2dDb21wb25lbnQgfSBmcm9tICcuLi9kaWFsb2dzL2NvbmZpcm0uZGlhbG9nJztcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50LWVzNic7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnYWRmLXNoYXJlLWRpYWxvZycsXG4gICAgdGVtcGxhdGVVcmw6ICcuL2NvbnRlbnQtbm9kZS1zaGFyZS5kaWFsb2cuaHRtbCcsXG4gICAgc3R5bGVVcmxzOiBbJy4vY29udGVudC1ub2RlLXNoYXJlLmRpYWxvZy5zY3NzJ10sXG4gICAgaG9zdDogeyAnY2xhc3MnOiAnYWRmLXNoYXJlLWRpYWxvZycgfSxcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lXG59KVxuZXhwb3J0IGNsYXNzIFNoYXJlRGlhbG9nQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3kge1xuICAgIHByaXZhdGUgc3Vic2NyaXB0aW9uczogU3Vic2NyaXB0aW9uW10gPSBbXTtcblxuICAgIG1pbkRhdGUgPSBtb21lbnQoKS5hZGQoMSwgJ2QnKTtcbiAgICBzaGFyZWRJZDogc3RyaW5nO1xuICAgIGZpbGVOYW1lOiBzdHJpbmc7XG4gICAgYmFzZVNoYXJlVXJsOiBzdHJpbmc7XG4gICAgaXNGaWxlU2hhcmVkOiBib29sZWFuID0gZmFsc2U7XG4gICAgaXNEaXNhYmxlZDogYm9vbGVhbiA9IGZhbHNlO1xuICAgIGZvcm06IEZvcm1Hcm91cCA9IG5ldyBGb3JtR3JvdXAoe1xuICAgICAgICAnc2hhcmVkVXJsJzogbmV3IEZvcm1Db250cm9sKCcnKSxcbiAgICAgICAgJ3RpbWUnOiBuZXcgRm9ybUNvbnRyb2woe3ZhbHVlOiAnJywgZGlzYWJsZWQ6IGZhbHNlfSlcbiAgICB9KTtcblxuICAgIEBWaWV3Q2hpbGQoJ3NoYXJlZExpbmtJbnB1dCcpIHNoYXJlZExpbmtJbnB1dDogRWxlbWVudFJlZjtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHNoYXJlZExpbmtzQXBpU2VydmljZTogU2hhcmVkTGlua3NBcGlTZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGRpYWxvZ1JlZjogTWF0RGlhbG9nUmVmPFNoYXJlRGlhbG9nQ29tcG9uZW50PixcbiAgICAgICAgcHJpdmF0ZSBkaWFsb2c6IE1hdERpYWxvZyxcbiAgICAgICAgcHJpdmF0ZSBub2Rlc0FwaVNlcnZpY2U6IE5vZGVzQXBpU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBjb250ZW50U2VydmljZTogQ29udGVudFNlcnZpY2UsXG4gICAgICAgIEBJbmplY3QoTUFUX0RJQUxPR19EQVRBKSBwdWJsaWMgZGF0YTogYW55KSB7XG4gICAgfVxuXG4gICAgbmdPbkluaXQoKSB7XG5cbiAgICAgICAgaWYgKCF0aGlzLmNhblVwZGF0ZSkge1xuICAgICAgICAgICAgdGhpcy5mb3JtLmNvbnRyb2xzWyd0aW1lJ10uZGlzYWJsZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2goXG4gICAgICAgICAgICB0aGlzLmZvcm0udmFsdWVDaGFuZ2VzXG4gICAgICAgICAgICAgICAgLnBpcGUoXG4gICAgICAgICAgICAgICAgICAgIHNraXAoMSksXG4gICAgICAgICAgICAgICAgICAgIHRhcCgodXBkYXRlcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVOb2RlKHVwZGF0ZXMpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAuc3Vic2NyaWJlKCh1cGRhdGVzKSA9PiB0aGlzLnVwZGF0ZUVudHJ5RXhwaXJ5RGF0ZSh1cGRhdGVzKSlcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAodGhpcy5kYXRhLm5vZGUgJiYgdGhpcy5kYXRhLm5vZGUuZW50cnkpIHtcbiAgICAgICAgICAgIHRoaXMuZmlsZU5hbWUgPSB0aGlzLmRhdGEubm9kZS5lbnRyeS5uYW1lO1xuICAgICAgICAgICAgdGhpcy5iYXNlU2hhcmVVcmwgPSB0aGlzLmRhdGEuYmFzZVNoYXJlVXJsO1xuICAgICAgICAgICAgY29uc3QgcHJvcGVydGllcyA9IHRoaXMuZGF0YS5ub2RlLmVudHJ5LnByb3BlcnRpZXM7XG5cbiAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzICYmICFwcm9wZXJ0aWVzWydxc2hhcmU6c2hhcmVkSWQnXSkge1xuXG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVTaGFyZWRMaW5rcyh0aGlzLmRhdGEubm9kZS5lbnRyeS5pZCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hhcmVkSWQgPSBwcm9wZXJ0aWVzWydxc2hhcmU6c2hhcmVkSWQnXTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzRmlsZVNoYXJlZCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUZvcm0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuZm9yRWFjaCgoc3Vic2NyaXB0aW9uKSA9PiBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUpO1xuICAgIH1cblxuICAgIHJlbW92ZVNoYXJlKCkge1xuICAgICAgICB0aGlzLmRlbGV0ZVNoYXJlZExpbmsodGhpcy5zaGFyZWRJZCk7XG4gICAgfVxuXG4gICAgb25TbGlkZVNoYXJlQ2hhbmdlKGV2ZW50OiBhbnkpIHtcbiAgICAgICAgaWYgKGV2ZW50LmNoZWNrZWQpIHtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlU2hhcmVkTGlua3ModGhpcy5kYXRhLm5vZGUuZW50cnkuaWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5vcGVuQ29uZmlybWF0aW9uRGlhbG9nKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgY2FuVXBkYXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50U2VydmljZS5oYXNQZXJtaXNzaW9uKHRoaXMuZGF0YS5ub2RlLmVudHJ5LCAndXBkYXRlJyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvcGVuQ29uZmlybWF0aW9uRGlhbG9nKCkge1xuICAgICAgICB0aGlzLmlzRmlsZVNoYXJlZCA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMuZGlhbG9nXG4gICAgICAgICAgICAub3BlbihDb25maXJtRGlhbG9nQ29tcG9uZW50LCB7XG4gICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ1NIQVJFLkNPTkZJUk1BVElPTi5ESUFMT0ctVElUTEUnLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnU0hBUkUuQ09ORklSTUFUSU9OLk1FU1NBR0UnLFxuICAgICAgICAgICAgICAgICAgICB5ZXNMYWJlbDogJ1NIQVJFLkNPTkZJUk1BVElPTi5SRU1PVkUnLFxuICAgICAgICAgICAgICAgICAgICBub0xhYmVsOiAnU0hBUkUuQ09ORklSTUFUSU9OLkNBTkNFTCdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1pbldpZHRoOiAnMjUwcHgnLFxuICAgICAgICAgICAgICAgIGNsb3NlT25OYXZpZ2F0aW9uOiB0cnVlXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmJlZm9yZUNsb3NlKCkuc3Vic2NyaWJlKGRlbGV0ZVNoYXJlZExpbmsgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChkZWxldGVTaGFyZWRMaW5rKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlU2hhcmVkTGluayh0aGlzLnNoYXJlZElkKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRmlsZVNoYXJlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVTaGFyZWRMaW5rcyhub2RlSWQ6IHN0cmluZykge1xuICAgICAgICB0aGlzLmlzRGlzYWJsZWQgPSB0cnVlO1xuXG4gICAgICAgIHRoaXMuc2hhcmVkTGlua3NBcGlTZXJ2aWNlLmNyZWF0ZVNoYXJlZExpbmtzKG5vZGVJZClcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKHNoYXJlZExpbms6IFNoYXJlZExpbmtFbnRyeSkgPT4ge1xuXG4gICAgICAgICAgICAgICAgaWYgKHNoYXJlZExpbmsuZW50cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGFyZWRJZCA9IHNoYXJlZExpbmsuZW50cnkuaWQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YS5ub2RlLmVudHJ5LnByb3BlcnRpZXNbJ3FzaGFyZTpzaGFyZWRJZCddID0gdGhpcy5zaGFyZWRJZDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0Rpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNGaWxlU2hhcmVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUZvcm0oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNEaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNGaWxlU2hhcmVkID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGRlbGV0ZVNoYXJlZExpbmsoc2hhcmVkSWQ6IHN0cmluZykge1xuICAgICAgICB0aGlzLmlzRGlzYWJsZWQgPSB0cnVlO1xuXG4gICAgICAgIHRoaXMuc2hhcmVkTGlua3NBcGlTZXJ2aWNlLmRlbGV0ZVNoYXJlZExpbmsoc2hhcmVkSWQpLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhLm5vZGUuZW50cnkucHJvcGVydGllc1sncXNoYXJlOnNoYXJlZElkJ10gPSBudWxsO1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YS5ub2RlLmVudHJ5LnByb3BlcnRpZXNbJ3FzaGFyZTpleHBpcnlEYXRlJ10gPSBudWxsO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nUmVmLmNsb3NlKGZhbHNlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0Rpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0ZpbGVTaGFyZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlRm9ybSgpIHtcbiAgICAgICAgY29uc3QgeyBlbnRyeSB9ID0gdGhpcy5kYXRhLm5vZGU7XG4gICAgICAgIGNvbnN0IGV4cGlyeURhdGUgPSBlbnRyeS5wcm9wZXJ0aWVzWydxc2hhcmU6ZXhwaXJ5RGF0ZSddO1xuXG4gICAgICAgIHRoaXMuZm9ybS5zZXRWYWx1ZSh7XG4gICAgICAgICAgICAnc2hhcmVkVXJsJzogYCR7dGhpcy5iYXNlU2hhcmVVcmx9JHt0aGlzLnNoYXJlZElkfWAsXG4gICAgICAgICAgICAndGltZSc6IGV4cGlyeURhdGUgPyBleHBpcnlEYXRlIDogbnVsbFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZU5vZGUodXBkYXRlcyk6IE9ic2VydmFibGU8TWluaW1hbE5vZGVFbnRyeUVudGl0eT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5ub2Rlc0FwaVNlcnZpY2UudXBkYXRlTm9kZShcbiAgICAgICAgICAgIHRoaXMuZGF0YS5ub2RlLmVudHJ5LmlkLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ3FzaGFyZTpleHBpcnlEYXRlJzogdXBkYXRlcy50aW1lID8gdXBkYXRlcy50aW1lLnV0YygpLmZvcm1hdCgpIDogbnVsbFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZUVudHJ5RXhwaXJ5RGF0ZSh1cGRhdGVzKSB7XG4gICAgICAgIGNvbnN0IHsgcHJvcGVydGllcyB9ID0gdGhpcy5kYXRhLm5vZGUuZW50cnk7XG5cbiAgICAgICAgcHJvcGVydGllc1sncXNoYXJlOmV4cGlyeURhdGUnXSA9IHVwZGF0ZXMudGltZVxuICAgICAgICAgICAgPyB1cGRhdGVzLnRpbWUubG9jYWwoKVxuICAgICAgICAgICAgOiBudWxsO1xuICAgIH1cbn1cbiIsIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE2IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IERpcmVjdGl2ZSwgSW5wdXQsIEhvc3RMaXN0ZW5lciwgT25DaGFuZ2VzLCBOZ1pvbmUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE1hdERpYWxvZyB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsJztcbmltcG9ydCB7IE1pbmltYWxOb2RlRW50aXR5IH0gZnJvbSAnYWxmcmVzY28tanMtYXBpJztcblxuaW1wb3J0IHsgU2hhcmVEaWFsb2dDb21wb25lbnQgfSBmcm9tICcuL2NvbnRlbnQtbm9kZS1zaGFyZS5kaWFsb2cnO1xuXG5ARGlyZWN0aXZlKHtcbiAgICBzZWxlY3RvcjogJ1thZGYtc2hhcmVdJyxcbiAgICBleHBvcnRBczogJ2FkZlNoYXJlJ1xufSlcbmV4cG9ydCBjbGFzcyBOb2RlU2hhcmVkRGlyZWN0aXZlIGltcGxlbWVudHMgT25DaGFuZ2VzIHtcblxuICAgIGlzRmlsZTogYm9vbGVhbiA9IGZhbHNlO1xuICAgIGlzU2hhcmVkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICAvKiogTm9kZSB0byBzaGFyZS4gKi9cbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8taW5wdXQtcmVuYW1lXG4gICAgQElucHV0KCdhZGYtc2hhcmUnKVxuICAgIG5vZGU6IE1pbmltYWxOb2RlRW50aXR5O1xuXG4gICAgQElucHV0KClcbiAgICBiYXNlU2hhcmVVcmw6IHN0cmluZztcblxuICAgIEBIb3N0TGlzdGVuZXIoJ2NsaWNrJylcbiAgICBvbkNsaWNrKCkge1xuICAgICAgICBpZiAodGhpcy5ub2RlKSB7XG4gICAgICAgICAgICB0aGlzLnNoYXJlTm9kZSh0aGlzLm5vZGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBkaWFsb2c6IE1hdERpYWxvZywgcHJpdmF0ZSB6b25lOiBOZ1pvbmUpIHt9XG5cbiAgICBzaGFyZU5vZGUobm9kZTogTWluaW1hbE5vZGVFbnRpdHkpIHtcbiAgICAgICAgaWYgKG5vZGUgJiYgbm9kZS5lbnRyeSAmJiBub2RlLmVudHJ5LmlzRmlsZSkge1xuICAgICAgICAgICAgdGhpcy5kaWFsb2cub3BlbihTaGFyZURpYWxvZ0NvbXBvbmVudCwge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAnNjAwcHgnLFxuICAgICAgICAgICAgICAgIHBhbmVsQ2xhc3M6ICdhZGYtc2hhcmUtbGluay1kaWFsb2cnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZTogbm9kZSxcbiAgICAgICAgICAgICAgICAgICAgYmFzZVNoYXJlVXJsOiB0aGlzLmJhc2VTaGFyZVVybFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbmdPbkNoYW5nZXMoKSB7XG4gICAgICAgIHRoaXMuem9uZS5vblN0YWJsZS5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMubm9kZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNGaWxlID0gdGhpcy5ub2RlLmVudHJ5LmlzRmlsZTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzU2hhcmVkID0gdGhpcy5ub2RlLmVudHJ5LnByb3BlcnRpZXNbJ3FzaGFyZTpzaGFyZWRJZCddO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBOZ01vZHVsZSwgTW9kdWxlV2l0aFByb3ZpZGVycyB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IENvcmVNb2R1bGUgfSBmcm9tICdAYWxmcmVzY28vYWRmLWNvcmUnO1xuaW1wb3J0IHsgTWF0ZXJpYWxNb2R1bGUgfSBmcm9tICcuLi9tYXRlcmlhbC5tb2R1bGUnO1xuaW1wb3J0IHsgU2hhcmVEaWFsb2dDb21wb25lbnQgfSBmcm9tICcuL2NvbnRlbnQtbm9kZS1zaGFyZS5kaWFsb2cnO1xuaW1wb3J0IHsgTm9kZVNoYXJlZERpcmVjdGl2ZSB9IGZyb20gJy4vY29udGVudC1ub2RlLXNoYXJlLmRpcmVjdGl2ZSc7XG5cbkBOZ01vZHVsZSh7XG4gICAgaW1wb3J0czogW1xuICAgICAgICBDb3JlTW9kdWxlLmZvckNoaWxkKCksXG4gICAgICAgIENvbW1vbk1vZHVsZSxcbiAgICAgICAgTWF0ZXJpYWxNb2R1bGVcbiAgICBdLFxuICAgIGRlY2xhcmF0aW9uczogW1xuICAgICAgICBTaGFyZURpYWxvZ0NvbXBvbmVudCxcbiAgICAgICAgTm9kZVNoYXJlZERpcmVjdGl2ZVxuICAgIF0sXG4gICAgZXhwb3J0czogW1xuICAgICAgICBTaGFyZURpYWxvZ0NvbXBvbmVudCxcbiAgICAgICAgTm9kZVNoYXJlZERpcmVjdGl2ZVxuICAgIF0sXG4gICAgZW50cnlDb21wb25lbnRzOiBbXG4gICAgICAgIFNoYXJlRGlhbG9nQ29tcG9uZW50XG4gICAgXVxufSlcbmV4cG9ydCBjbGFzcyBDb250ZW50Tm9kZVNoYXJlTW9kdWxlIHtcbiAgICBzdGF0aWMgZm9yUm9vdCgpOiBNb2R1bGVXaXRoUHJvdmlkZXJzIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5nTW9kdWxlOiBDb250ZW50Tm9kZVNoYXJlTW9kdWxlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgc3RhdGljIGZvckNoaWxkKCk6IE1vZHVsZVdpdGhQcm92aWRlcnMge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmdNb2R1bGU6IENvbnRlbnROb2RlU2hhcmVNb2R1bGVcbiAgICAgICAgfTtcbiAgICB9XG59XG4iLCIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNiBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgTmdNb2R1bGUsIE1vZHVsZVdpdGhQcm92aWRlcnMgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEZvcm1zTW9kdWxlLCBSZWFjdGl2ZUZvcm1zTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgQ29yZU1vZHVsZSwgVFJBTlNMQVRJT05fUFJPVklERVIgfSBmcm9tICdAYWxmcmVzY28vYWRmLWNvcmUnO1xuXG5pbXBvcnQgeyBNYXRlcmlhbE1vZHVsZSB9IGZyb20gJy4vbWF0ZXJpYWwubW9kdWxlJztcblxuaW1wb3J0IHsgU29jaWFsTW9kdWxlIH0gZnJvbSAnLi9zb2NpYWwvc29jaWFsLm1vZHVsZSc7XG5pbXBvcnQgeyBUYWdNb2R1bGUgfSBmcm9tICcuL3RhZy90YWcubW9kdWxlJztcbmltcG9ydCB7IFdlYlNjcmlwdE1vZHVsZSB9IGZyb20gJy4vd2Vic2NyaXB0L3dlYnNjcmlwdC5tb2R1bGUnO1xuaW1wb3J0IHsgRG9jdW1lbnRMaXN0TW9kdWxlIH0gZnJvbSAnLi9kb2N1bWVudC1saXN0L2RvY3VtZW50LWxpc3QubW9kdWxlJztcbmltcG9ydCB7IFVwbG9hZE1vZHVsZSB9IGZyb20gJy4vdXBsb2FkL3VwbG9hZC5tb2R1bGUnO1xuaW1wb3J0IHsgU2VhcmNoTW9kdWxlIH0gZnJvbSAnLi9zZWFyY2gvc2VhcmNoLm1vZHVsZSc7XG5pbXBvcnQgeyBTaXRlc0Ryb3Bkb3duTW9kdWxlIH0gZnJvbSAnLi9zaXRlLWRyb3Bkb3duL3NpdGVzLWRyb3Bkb3duLm1vZHVsZSc7XG5pbXBvcnQgeyBCcmVhZGNydW1iTW9kdWxlIH0gZnJvbSAnLi9icmVhZGNydW1iL2JyZWFkY3J1bWIubW9kdWxlJztcbmltcG9ydCB7IFZlcnNpb25NYW5hZ2VyTW9kdWxlIH0gZnJvbSAnLi92ZXJzaW9uLW1hbmFnZXIvdmVyc2lvbi1tYW5hZ2VyLm1vZHVsZSc7XG5pbXBvcnQgeyBDb250ZW50Tm9kZVNlbGVjdG9yTW9kdWxlIH0gZnJvbSAnLi9jb250ZW50LW5vZGUtc2VsZWN0b3IvY29udGVudC1ub2RlLXNlbGVjdG9yLm1vZHVsZSc7XG5pbXBvcnQgeyBDb250ZW50Tm9kZVNoYXJlTW9kdWxlIH0gZnJvbSAnLi9jb250ZW50LW5vZGUtc2hhcmUvY29udGVudC1ub2RlLXNoYXJlLm1vZHVsZSc7XG5pbXBvcnQgeyBDb250ZW50RGlyZWN0aXZlTW9kdWxlIH0gZnJvbSAnLi9kaXJlY3RpdmVzL2NvbnRlbnQtZGlyZWN0aXZlLm1vZHVsZSc7XG5pbXBvcnQgeyBEaWFsb2dNb2R1bGUgfSBmcm9tICcuL2RpYWxvZ3MvZGlhbG9nLm1vZHVsZSc7XG5pbXBvcnQgeyBGb2xkZXJEaXJlY3RpdmVNb2R1bGUgfSBmcm9tICcuL2ZvbGRlci1kaXJlY3RpdmUvZm9sZGVyLWRpcmVjdGl2ZS5tb2R1bGUnO1xuaW1wb3J0IHsgQ29udGVudE1ldGFkYXRhTW9kdWxlIH0gZnJvbSAnLi9jb250ZW50LW1ldGFkYXRhL2NvbnRlbnQtbWV0YWRhdGEubW9kdWxlJztcbmltcG9ydCB7IFBlcm1pc3Npb25NYW5hZ2VyTW9kdWxlIH0gZnJvbSAnLi9wZXJtaXNzaW9uLW1hbmFnZXIvcGVybWlzc2lvbi1tYW5hZ2VyLm1vZHVsZSc7XG5pbXBvcnQgeyBSYXRpbmdTZXJ2aWNlIH0gZnJvbSAnLi9zb2NpYWwvc2VydmljZXMvcmF0aW5nLnNlcnZpY2UnO1xuaW1wb3J0IHsgQ29udGVudE1ldGFkYXRhU2VydmljZSB9IGZyb20gJy4vY29udGVudC1tZXRhZGF0YS9zZXJ2aWNlcy9jb250ZW50LW1ldGFkYXRhLnNlcnZpY2UnO1xuaW1wb3J0IHsgUHJvcGVydHlEZXNjcmlwdG9yc1NlcnZpY2UgfSBmcm9tICcuL2NvbnRlbnQtbWV0YWRhdGEvc2VydmljZXMvcHJvcGVydHktZGVzY3JpcHRvcnMuc2VydmljZSc7XG5pbXBvcnQgeyBDb250ZW50TWV0YWRhdGFDb25maWdGYWN0b3J5IH0gZnJvbSAnLi9jb250ZW50LW1ldGFkYXRhL3NlcnZpY2VzL2NvbmZpZy9jb250ZW50LW1ldGFkYXRhLWNvbmZpZy5mYWN0b3J5JztcbmltcG9ydCB7IEJhc2ljUHJvcGVydGllc1NlcnZpY2UgfSBmcm9tICcuL2NvbnRlbnQtbWV0YWRhdGEvc2VydmljZXMvYmFzaWMtcHJvcGVydGllcy5zZXJ2aWNlJztcbmltcG9ydCB7IFByb3BlcnR5R3JvdXBUcmFuc2xhdG9yU2VydmljZSB9IGZyb20gJy4vY29udGVudC1tZXRhZGF0YS9zZXJ2aWNlcy9wcm9wZXJ0eS1ncm91cHMtdHJhbnNsYXRvci5zZXJ2aWNlJztcbmltcG9ydCB7IFNlYXJjaFF1ZXJ5QnVpbGRlclNlcnZpY2UgfSBmcm9tICcuL3NlYXJjaC9zZWFyY2gtcXVlcnktYnVpbGRlci5zZXJ2aWNlJztcbmltcG9ydCB7IFNlYXJjaEZpbHRlclNlcnZpY2UgfSBmcm9tICcuL3NlYXJjaC9jb21wb25lbnRzL3NlYXJjaC1maWx0ZXIvc2VhcmNoLWZpbHRlci5zZXJ2aWNlJztcbmltcG9ydCB7IENvbnRlbnROb2RlU2VsZWN0b3JTZXJ2aWNlIH0gZnJvbSAnLi9jb250ZW50LW5vZGUtc2VsZWN0b3IvY29udGVudC1ub2RlLXNlbGVjdG9yLnNlcnZpY2UnO1xuaW1wb3J0IHsgQ29udGVudE5vZGVEaWFsb2dTZXJ2aWNlIH0gZnJvbSAnLi9jb250ZW50LW5vZGUtc2VsZWN0b3IvY29udGVudC1ub2RlLWRpYWxvZy5zZXJ2aWNlJztcbmltcG9ydCB7IERvY3VtZW50TGlzdFNlcnZpY2UgfSBmcm9tICcuL2RvY3VtZW50LWxpc3Qvc2VydmljZXMvZG9jdW1lbnQtbGlzdC5zZXJ2aWNlJztcbmltcG9ydCB7IEZvbGRlckFjdGlvbnNTZXJ2aWNlIH0gZnJvbSAnLi9kb2N1bWVudC1saXN0L3NlcnZpY2VzL2ZvbGRlci1hY3Rpb25zLnNlcnZpY2UnO1xuaW1wb3J0IHsgRG9jdW1lbnRBY3Rpb25zU2VydmljZSB9IGZyb20gJy4vZG9jdW1lbnQtbGlzdC9zZXJ2aWNlcy9kb2N1bWVudC1hY3Rpb25zLnNlcnZpY2UnO1xuaW1wb3J0IHsgTm9kZUFjdGlvbnNTZXJ2aWNlIH0gZnJvbSAnLi9kb2N1bWVudC1saXN0L3NlcnZpY2VzL25vZGUtYWN0aW9ucy5zZXJ2aWNlJztcbmltcG9ydCB7IEN1c3RvbVJlc291cmNlc1NlcnZpY2UgfSBmcm9tICcuL2RvY3VtZW50LWxpc3Qvc2VydmljZXMvY3VzdG9tLXJlc291cmNlcy5zZXJ2aWNlJztcbmltcG9ydCB7IE5vZGVQZXJtaXNzaW9uRGlhbG9nU2VydmljZSB9IGZyb20gJy4vcGVybWlzc2lvbi1tYW5hZ2VyL3NlcnZpY2VzL25vZGUtcGVybWlzc2lvbi1kaWFsb2cuc2VydmljZSc7XG5pbXBvcnQgeyBOb2RlUGVybWlzc2lvblNlcnZpY2UgfSBmcm9tICcuL3Blcm1pc3Npb24tbWFuYWdlci9zZXJ2aWNlcy9ub2RlLXBlcm1pc3Npb24uc2VydmljZSc7XG5pbXBvcnQgeyBUYWdTZXJ2aWNlIH0gZnJvbSAnLi90YWcvc2VydmljZXMvdGFnLnNlcnZpY2UnO1xuXG5leHBvcnQgZnVuY3Rpb24gcHJvdmlkZXJzKCkge1xuICAgIHJldHVybiBbXG4gICAgICAgIFJhdGluZ1NlcnZpY2UsXG4gICAgICAgIENvbnRlbnRNZXRhZGF0YVNlcnZpY2UsXG4gICAgICAgIFByb3BlcnR5RGVzY3JpcHRvcnNTZXJ2aWNlLFxuICAgICAgICBDb250ZW50TWV0YWRhdGFDb25maWdGYWN0b3J5LFxuICAgICAgICBCYXNpY1Byb3BlcnRpZXNTZXJ2aWNlLFxuICAgICAgICBQcm9wZXJ0eUdyb3VwVHJhbnNsYXRvclNlcnZpY2UsXG4gICAgICAgIFNlYXJjaFF1ZXJ5QnVpbGRlclNlcnZpY2UsXG4gICAgICAgIFNlYXJjaEZpbHRlclNlcnZpY2UsXG4gICAgICAgIENvbnRlbnROb2RlU2VsZWN0b3JTZXJ2aWNlLFxuICAgICAgICBDb250ZW50Tm9kZURpYWxvZ1NlcnZpY2UsXG4gICAgICAgIERvY3VtZW50TGlzdFNlcnZpY2UsXG4gICAgICAgIEZvbGRlckFjdGlvbnNTZXJ2aWNlLFxuICAgICAgICBEb2N1bWVudEFjdGlvbnNTZXJ2aWNlLFxuICAgICAgICBOb2RlQWN0aW9uc1NlcnZpY2UsXG4gICAgICAgIEN1c3RvbVJlc291cmNlc1NlcnZpY2UsXG4gICAgICAgIE5vZGVQZXJtaXNzaW9uRGlhbG9nU2VydmljZSxcbiAgICAgICAgTm9kZVBlcm1pc3Npb25TZXJ2aWNlLFxuICAgICAgICBUYWdTZXJ2aWNlXG4gICAgXTtcbn1cblxuQE5nTW9kdWxlKHtcbiAgICBpbXBvcnRzOiBbXG4gICAgICAgIENvcmVNb2R1bGUuZm9yQ2hpbGQoKSxcbiAgICAgICAgU29jaWFsTW9kdWxlLFxuICAgICAgICBUYWdNb2R1bGUsXG4gICAgICAgIENvbW1vbk1vZHVsZSxcbiAgICAgICAgV2ViU2NyaXB0TW9kdWxlLFxuICAgICAgICBGb3Jtc01vZHVsZSxcbiAgICAgICAgUmVhY3RpdmVGb3Jtc01vZHVsZSxcbiAgICAgICAgRGlhbG9nTW9kdWxlLFxuICAgICAgICBTZWFyY2hNb2R1bGUsXG4gICAgICAgIERvY3VtZW50TGlzdE1vZHVsZSxcbiAgICAgICAgVXBsb2FkTW9kdWxlLFxuICAgICAgICBNYXRlcmlhbE1vZHVsZSxcbiAgICAgICAgU2l0ZXNEcm9wZG93bk1vZHVsZSxcbiAgICAgICAgQnJlYWRjcnVtYk1vZHVsZSxcbiAgICAgICAgQ29udGVudE5vZGVTZWxlY3Rvck1vZHVsZSxcbiAgICAgICAgQ29udGVudE5vZGVTaGFyZU1vZHVsZSxcbiAgICAgICAgQ29udGVudE1ldGFkYXRhTW9kdWxlLFxuICAgICAgICBGb2xkZXJEaXJlY3RpdmVNb2R1bGUsXG4gICAgICAgIENvbnRlbnREaXJlY3RpdmVNb2R1bGUsXG4gICAgICAgIFBlcm1pc3Npb25NYW5hZ2VyTW9kdWxlLFxuICAgICAgICBWZXJzaW9uTWFuYWdlck1vZHVsZVxuICAgIF0sXG4gICAgZXhwb3J0czogW1xuICAgICAgICBTb2NpYWxNb2R1bGUsXG4gICAgICAgIFRhZ01vZHVsZSxcbiAgICAgICAgV2ViU2NyaXB0TW9kdWxlLFxuICAgICAgICBEb2N1bWVudExpc3RNb2R1bGUsXG4gICAgICAgIFVwbG9hZE1vZHVsZSxcbiAgICAgICAgU2VhcmNoTW9kdWxlLFxuICAgICAgICBTaXRlc0Ryb3Bkb3duTW9kdWxlLFxuICAgICAgICBCcmVhZGNydW1iTW9kdWxlLFxuICAgICAgICBDb250ZW50Tm9kZVNlbGVjdG9yTW9kdWxlLFxuICAgICAgICBDb250ZW50Tm9kZVNoYXJlTW9kdWxlLFxuICAgICAgICBDb250ZW50TWV0YWRhdGFNb2R1bGUsXG4gICAgICAgIERpYWxvZ01vZHVsZSxcbiAgICAgICAgRm9sZGVyRGlyZWN0aXZlTW9kdWxlLFxuICAgICAgICBDb250ZW50RGlyZWN0aXZlTW9kdWxlLFxuICAgICAgICBQZXJtaXNzaW9uTWFuYWdlck1vZHVsZSxcbiAgICAgICAgVmVyc2lvbk1hbmFnZXJNb2R1bGVcbiAgICBdXG59KVxuZXhwb3J0IGNsYXNzIENvbnRlbnRNb2R1bGVMYXp5IHt9XG5cbkBOZ01vZHVsZSh7XG4gICAgaW1wb3J0czogW1xuICAgICAgICBDb3JlTW9kdWxlLmZvckNoaWxkKCksXG4gICAgICAgIFNvY2lhbE1vZHVsZSxcbiAgICAgICAgVGFnTW9kdWxlLFxuICAgICAgICBDb21tb25Nb2R1bGUsXG4gICAgICAgIFdlYlNjcmlwdE1vZHVsZSxcbiAgICAgICAgRm9ybXNNb2R1bGUsXG4gICAgICAgIFJlYWN0aXZlRm9ybXNNb2R1bGUsXG4gICAgICAgIERpYWxvZ01vZHVsZSxcbiAgICAgICAgU2VhcmNoTW9kdWxlLFxuICAgICAgICBEb2N1bWVudExpc3RNb2R1bGUsXG4gICAgICAgIFVwbG9hZE1vZHVsZSxcbiAgICAgICAgTWF0ZXJpYWxNb2R1bGUsXG4gICAgICAgIFNpdGVzRHJvcGRvd25Nb2R1bGUsXG4gICAgICAgIEJyZWFkY3J1bWJNb2R1bGUsXG4gICAgICAgIENvbnRlbnROb2RlU2VsZWN0b3JNb2R1bGUsXG4gICAgICAgIENvbnRlbnROb2RlU2hhcmVNb2R1bGUsXG4gICAgICAgIENvbnRlbnRNZXRhZGF0YU1vZHVsZSxcbiAgICAgICAgRm9sZGVyRGlyZWN0aXZlTW9kdWxlLFxuICAgICAgICBDb250ZW50RGlyZWN0aXZlTW9kdWxlLFxuICAgICAgICBQZXJtaXNzaW9uTWFuYWdlck1vZHVsZSxcbiAgICAgICAgVmVyc2lvbk1hbmFnZXJNb2R1bGVcbiAgICBdLFxuICAgIHByb3ZpZGVyczogW1xuICAgICAgICAuLi5wcm92aWRlcnMoKSxcbiAgICAgICAge1xuICAgICAgICAgICAgcHJvdmlkZTogVFJBTlNMQVRJT05fUFJPVklERVIsXG4gICAgICAgICAgICBtdWx0aTogdHJ1ZSxcbiAgICAgICAgICAgIHVzZVZhbHVlOiB7XG4gICAgICAgICAgICAgICAgbmFtZTogJ2FkZi1jb250ZW50LXNlcnZpY2VzJyxcbiAgICAgICAgICAgICAgICBzb3VyY2U6ICdhc3NldHMvYWRmLWNvbnRlbnQtc2VydmljZXMnXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICBdLFxuICAgIGV4cG9ydHM6IFtcbiAgICAgICAgU29jaWFsTW9kdWxlLFxuICAgICAgICBUYWdNb2R1bGUsXG4gICAgICAgIFdlYlNjcmlwdE1vZHVsZSxcbiAgICAgICAgRG9jdW1lbnRMaXN0TW9kdWxlLFxuICAgICAgICBVcGxvYWRNb2R1bGUsXG4gICAgICAgIFNlYXJjaE1vZHVsZSxcbiAgICAgICAgU2l0ZXNEcm9wZG93bk1vZHVsZSxcbiAgICAgICAgQnJlYWRjcnVtYk1vZHVsZSxcbiAgICAgICAgQ29udGVudE5vZGVTZWxlY3Rvck1vZHVsZSxcbiAgICAgICAgQ29udGVudE5vZGVTaGFyZU1vZHVsZSxcbiAgICAgICAgQ29udGVudE1ldGFkYXRhTW9kdWxlLFxuICAgICAgICBEaWFsb2dNb2R1bGUsXG4gICAgICAgIEZvbGRlckRpcmVjdGl2ZU1vZHVsZSxcbiAgICAgICAgQ29udGVudERpcmVjdGl2ZU1vZHVsZSxcbiAgICAgICAgUGVybWlzc2lvbk1hbmFnZXJNb2R1bGUsXG4gICAgICAgIFZlcnNpb25NYW5hZ2VyTW9kdWxlXG4gICAgXVxufSlcbmV4cG9ydCBjbGFzcyBDb250ZW50TW9kdWxlIHtcbiAgICBzdGF0aWMgZm9yUm9vdCgpOiBNb2R1bGVXaXRoUHJvdmlkZXJzIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5nTW9kdWxlOiBDb250ZW50TW9kdWxlLFxuICAgICAgICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgICAgICAgICAgLi4ucHJvdmlkZXJzKCksXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBwcm92aWRlOiBUUkFOU0xBVElPTl9QUk9WSURFUixcbiAgICAgICAgICAgICAgICAgICAgbXVsdGk6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHVzZVZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnYWRmLWNvbnRlbnQtc2VydmljZXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiAnYXNzZXRzL2FkZi1jb250ZW50LXNlcnZpY2VzJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHN0YXRpYyBmb3JDaGlsZCgpOiBNb2R1bGVXaXRoUHJvdmlkZXJzIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5nTW9kdWxlOiBDb250ZW50TW9kdWxlTGF6eVxuICAgICAgICB9O1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJDb21wb25lbnQiLCJWaWV3RW5jYXBzdWxhdGlvbiIsIkFsZnJlc2NvQXBpU2VydmljZSIsIk1hdERpYWxvZ1JlZiIsIkluamVjdCIsIk1BVF9ESUFMT0dfREFUQSIsIkxvZ1NlcnZpY2UiLCJEaXJlY3RpdmUiLCJNYXREaWFsb2ciLCJJbnB1dCIsIkhvc3RMaXN0ZW5lciIsIk1hdEJ1dHRvbk1vZHVsZSIsIk1hdENoaXBzTW9kdWxlIiwiTWF0RGlhbG9nTW9kdWxlIiwiTWF0SWNvbk1vZHVsZSIsIk1hdENhcmRNb2R1bGUiLCJNYXRJbnB1dE1vZHVsZSIsIk1hdExpc3RNb2R1bGUiLCJNYXRQcm9ncmVzc1NwaW5uZXJNb2R1bGUiLCJNYXRQcm9ncmVzc0Jhck1vZHVsZSIsIk1hdFJpcHBsZU1vZHVsZSIsIk1hdE1lbnVNb2R1bGUiLCJNYXRPcHRpb25Nb2R1bGUiLCJNYXRFeHBhbnNpb25Nb2R1bGUiLCJNYXRTZWxlY3RNb2R1bGUiLCJNYXRDaGVja2JveE1vZHVsZSIsIk1hdERhdGVwaWNrZXJNb2R1bGUiLCJNYXRTbGlkZVRvZ2dsZU1vZHVsZSIsIk1hdFJhZGlvTW9kdWxlIiwiTWF0U2xpZGVyTW9kdWxlIiwiTmdNb2R1bGUiLCJ0c2xpYl8xLl9fc3ByZWFkIiwiZnJvbSIsImNhdGNoRXJyb3IiLCJ0aHJvd0Vycm9yIiwiSW5qZWN0YWJsZSIsIkF1dGhlbnRpY2F0aW9uU2VydmljZSIsIkNvbnRlbnRTZXJ2aWNlIiwiVGh1bWJuYWlsU2VydmljZSIsIm1vbWVudCIsIkZvcm1CdWlsZGVyIiwiT3B0aW9uYWwiLCJFdmVudEVtaXR0ZXIiLCJzd2l0Y2hNYXAiLCJTdWJqZWN0IiwiUGVybWlzc2lvbnNFbnVtIiwiU2l0ZXNTZXJ2aWNlIiwiVHJhbnNsYXRpb25TZXJ2aWNlIiwiT3V0cHV0IiwiRWxlbWVudFJlZiIsIlJlbmRlcmVyMiIsIkNvbW1vbk1vZHVsZSIsIkZvcm1zTW9kdWxlIiwiUmVhY3RpdmVGb3Jtc01vZHVsZSIsIkNvcmVNb2R1bGUiLCJPYmplY3REYXRhVGFibGVBZGFwdGVyIiwiT2JqZWN0VXRpbHMiLCJEYXRhU29ydGluZyIsInRzbGliXzEuX19leHRlbmRzIiwiQmFzZUV2ZW50IiwiT2JzZXJ2YWJsZSIsIm1hcCIsIm9mIiwiRGlzcGxheU1vZGUiLCJPYmplY3REYXRhQ29sdW1uIiwiQmVoYXZpb3JTdWJqZWN0IiwiTmdab25lIiwiQXBwQ29uZmlnU2VydmljZSIsIlVzZXJQcmVmZXJlbmNlc1NlcnZpY2UiLCJDb250ZW50Q2hpbGQiLCJEYXRhQ29sdW1uTGlzdENvbXBvbmVudCIsIlZpZXdDaGlsZCIsIlRlbXBsYXRlUmVmIiwibWVyZ2UiLCJGaWxlVXBsb2FkU3RhdHVzIiwiVXBsb2FkU2VydmljZSIsIkNoYW5nZURldGVjdG9yUmVmIiwiZm9ya0pvaW4iLCJOb2Rlc0FwaVNlcnZpY2UiLCJGaWxlTW9kZWwiLCJGaWxlVXRpbHMiLCJFWFRFTkRJQkxFX0NPTVBPTkVOVCIsImZvcndhcmRSZWYiLCJOb3RpZmljYXRpb25TZXJ2aWNlIiwiRmxleExheW91dE1vZHVsZSIsInRzbGliXzEuX19hc3NpZ24iLCJkZWJvdW5jZVRpbWUiLCJTZWFyY2hTZXJ2aWNlIiwiZmlsdGVyIiwidHJpZ2dlciIsInN0YXRlIiwic3R5bGUiLCJ0cmFuc2l0aW9uIiwiYW5pbWF0ZSIsIlZpZXdDaGlsZHJlbiIsIk1hdExpc3RJdGVtIiwiTkdfVkFMVUVfQUNDRVNTT1IiLCJmcm9tRXZlbnQiLCJFU0NBUEUiLCJFTlRFUiIsInRha2VVbnRpbCIsIkRPQ1VNRU5UIiwidGFrZVdoaWxlIiwidHNsaWJfMS5fX3ZhbHVlcyIsIlZhbGlkYXRvcnMiLCJGb3JtQ29udHJvbCIsIkZvcm1Hcm91cCIsIk1PTUVOVF9EQVRFX0ZPUk1BVFMiLCJVc2VyUHJlZmVyZW5jZVZhbHVlcyIsIkRhdGVBZGFwdGVyIiwiTW9tZW50RGF0ZUFkYXB0ZXIiLCJNQVRfREFURV9MT0NBTEUiLCJNQVRfREFURV9GT1JNQVRTIiwiQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyIiwiVmlld0NvbnRhaW5lclJlZiIsIkNoYW5nZURldGVjdGlvblN0cmF0ZWd5IiwiSGlnaGxpZ2h0RGlyZWN0aXZlIiwiTWF0TW9tZW50RGF0ZXRpbWVNb2R1bGUiLCJNYXREYXRldGltZXBpY2tlck1vZHVsZSIsIkNhcmRWaWV3VGV4dEl0ZW1Nb2RlbCIsIkNhcmRWaWV3RGF0ZUl0ZW1Nb2RlbCIsIkZpbGVTaXplUGlwZSIsIkNhcmRWaWV3SW50SXRlbU1vZGVsIiwiQ2FyZFZpZXdGbG9hdEl0ZW1Nb2RlbCIsIkNhcmRWaWV3RGF0ZXRpbWVJdGVtTW9kZWwiLCJDYXJkVmlld0Jvb2xJdGVtTW9kZWwiLCJkZWZlciIsIkNhcmRWaWV3VXBkYXRlU2VydmljZSIsIlNlYXJjaENvbmZpZ3VyYXRpb25TZXJ2aWNlIiwic2tpcCIsInRhcCIsIlNoYXJlZExpbmtzQXBpU2VydmljZSIsIlRSQU5TTEFUSU9OX1BST1ZJREVSIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O1FBa0NJLG9DQUFvQixVQUE4QixFQUM5QixXQUN5QixJQUFTLEVBQ2xDO1lBSEEsZUFBVSxHQUFWLFVBQVUsQ0FBb0I7WUFDOUIsY0FBUyxHQUFULFNBQVM7WUFDZ0IsU0FBSSxHQUFKLElBQUksQ0FBSztZQUNsQyxlQUFVLEdBQVYsVUFBVTs2QkFMVixLQUFLO1NBTXhCOzs7O1FBRUQsNkNBQVE7OztZQUFSO2dCQUNJLElBQUksSUFBSSxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO29CQUNoRSxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRTt3QkFDakIsSUFBSSxDQUFDLFdBQVcs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LENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJO3dCQUFFLE9BQU8sQ0FBQyxDQUFDO29CQUM3SixJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQzt3QkFBRSxFQUFFLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztvQkFDeEMsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDO3dCQUNULEtBQUssQ0FBQyxDQUFDO3dCQUFDLEtBQUssQ0FBQzs0QkFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDOzRCQUFDLE1BQU07d0JBQzlCLEtBQUssQ0FBQzs0QkFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUM7NEJBQUMsT0FBTyxFQUFFLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxDQUFDO3dCQUN4RCxLQUFLLENBQUM7NEJBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDOzRCQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7NEJBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7NEJBQUMsU0FBUzt3QkFDakQsS0FBSyxDQUFDOzRCQUFFLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDOzRCQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7NEJBQUMsU0FBUzt3QkFDakQ7NEJBQ0ksSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFO2dDQUFFLENBQUMsR0FBRyxDQUFDLENBQUM7Z0NBQUMsU0FBUzs2QkFBRTs0QkFDNUcsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7Z0NBQUUsQ0FBQyxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0NBQUMsTUFBTTs2QkFBRTs0QkFDdEYsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO2dDQUFFLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7Z0NBQUMsTUFBTTs2QkFBRTs0QkFDckUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7Z0NBQUUsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0NBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7Z0NBQUMsTUFBTTs2QkFBRTs0QkFDbkUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO2dDQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUM7NEJBQ3RCLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7NEJBQUMsU0FBUztxQkFDOUI7b0JBQ0QsRUFBRSxHQUFHLElBQUksQ0FBQyxJQUFJLENB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